module.exports=[38170,(a,b,c)=>{var d=a.r(25103);b.exports=a.r(43902)(function(a,b,c){return b=b.toLowerCase(),a+(c?d(b):b)})},33100,(a,b,c)=>{b.exports=a.r(43902)(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()})},16905,6978,a=>{"use strict";let b;var c=a.i(87924),d=a.i(97162),e=a.i(72131),f=a.i(4986),g=a.i(22187),h=a.i(33697),i=a.i(66539),j=a.i(47663),k=a.i(38170),l=a.i(41881),m=a.i(60311),n=a.i(62970),o=a.i(33100),p=a.i(49055),q=a.i(76896),r=a.i(7465);let s="structure",t=(0,f.defineLocaleResourceBundle)({locale:"en-US",namespace:s,resources:()=>a.A(35668)}),u=["_id","_type","_createdAt","_updatedAt","_rev"];function v(a,b,c=!1){return b.map(b=>(function a(b,c,d=!1){let[e,...f]=c;if(!("fields"in b))return"";let g=b.fields.find(a=>a.name===e);if(!g){if(!u.includes(e)){let a=`The current ordering config targeted the nonexistent field "${e}" on schema type "${b.name}". It should be one of ${b.fields.map(a=>a.name).join(", ")}`;if(d)throw Error(a);console.warn(a)}return""}if("to"in g.type&&"reference"===g.type.name){let b=g.type.to;return`${e}->{${b.map(b=>a(b,f)).join(",")}}`}let h=f.length>0&&a(g.type,f),i=h?`{${h}}`:"";return f.length>0?`${e}${i}`:e})(a,b.field.split("."),c)).join(", ")}class w extends Error{constructor(a,b,c,d){super(a),this.name="SerializeError";const e=typeof c>"u"?"<unknown>":`${c}`;this.path=(b||[]).concat(d?`${e} (${d})`:e)}withHelpUrl(a){return this.helpId=a,this}}let x="structure-node-id-required",y="structure-title-required",z={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:s}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},A=[z,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:s}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function B(a,b,c){return a instanceof C?a.serialize({path:c,index:b}):a}class C{constructor(a,b){this._context=a,this.spec=b||{}}action(a){return this.clone({action:a})}getAction(){return this.spec.action}intent(a){return this.clone({intent:a})}getIntent(){return this.spec.intent}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}group(a){return this.clone({group:a})}getGroup(){return this.spec.group}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}params(a){return this.clone({params:a})}getParams(){return this.spec.params}showAsAction(a=!0){return this.clone({showAsAction:!!a})}getShowAsAction(){return this.spec.showAsAction}serialize(a={path:[]}){let{title:b,action:c,intent:d}=this.spec;if(!b){let b="string"==typeof c?`action: "${c}"`:void 0;throw new w("`title` is required for menu item",a.path,a.index,b).withHelpUrl(y)}if(!c&&!d)throw new w(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,a.path,a.index,`"${b}"`).withHelpUrl("structure-action-or-intent-required");if(d&&c)throw new w("cannot set both `action` AND `intent`",a.path,a.index,`"${b}"`).withHelpUrl("structure-action-and-intent-mutually-exclusive");return{...this.spec,title:b}}clone(a){let b=new C(this._context);return b.spec={...this.spec,...a},b}}function D(a,{by:b,title:c,i18n:d},e){let f=new C(a).group("sorting").title(a.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:c}})).icon(j.SortIcon).action("setSortOrder").params({by:b,extendedProjection:e});return d&&(f=f.i18n(d)),f}function E(a,b){let{schema:c}=a,d="string"==typeof b?c.get(b):b;return d&&"orderings"in d?(d.orderings?d.orderings.concat(A):A).map(b=>D(a,b,v(d,b.by))):[]}function F(a,b,c){return a instanceof G?a.serialize({path:c,index:b}):a}class G{constructor(a,b){this._context=a,this._id=b?b.id:"",this._title=b?b.title:"",this._i18n=b?b.i18n:void 0}id(a){return new G(this._context,{id:a,title:this._title,i18n:this._i18n})}getId(){return this._id}title(a){return new G(this._context,{title:a,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(a){return new G(this._context,{i18n:a,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(a={path:[]}){if(!this._id)throw new w("`id` is required for a menu item group",a.path,a.index,this._title).withHelpUrl(x);if(!this._title)throw new w("`title` is required for a menu item group",a.path,this._id).withHelpUrl(y);return{id:this._id,title:this._title,i18n:this._i18n}}}let H=/([^A-Za-z0-9-_.])/;function I(a,b,c){if("string"!=typeof a)throw new w(`Structure node id must be of type string, got ${typeof a}`,b,c);let[d]=a.match(H)||[];if(d)throw new w(`Structure node id cannot contain character "${d}"`,b,c);if(a.startsWith("__edit__"))throw new w("Structure node id cannot start with __edit__",b,c);return a}function J(a,b){if(b)return b;let c=(0,k.default)(a);return H.test(c)?(0,k.default)((0,l.default)(a)):c}class K{constructor(a){this.spec={options:{},...a||{}}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:J(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(a){return this.clone({canHandleIntent:a})}serialize(a={path:[]}){let{id:b,title:c,child:d,options:e,component:f}=this.spec;if(!b)throw new w("`id` is required for `component` structure item",a.path,a.index).withHelpUrl(x);if(!f)throw new w("`component` is required for `component` structure item",a.path,a.index).withHelpUrl(x);return{id:I(b,a.path,a.index),title:c,type:"component",child:d,component:f,canHandleIntent:this.spec.canHandleIntent,options:e||{},menuItems:(this.spec.menuItems||[]).map((b,c)=>B(b,c,a.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((b,c)=>F(b,c,a.path))}}clone(a){let b=new K;return b.spec={...this.spec,...a},b}}class L{constructor(a){this.spec={id:(0,m.default)("__divider__"),type:"divider",...a}}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(a){let b=new L;return b.spec={...this.spec,...a},b}}async function M(a,b){return await a(f.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,g.getPublishedId)(b)},{tag:"structure.resolve-type"})}class N{spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:this.spec.id||(0,o.default)(a)})}getTitle(){return this.spec.title}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}serialize(a={path:[]}){let{id:b,title:c,icon:d}=this.spec;if(!b)throw new w("`id` is required for view item",a.path,a.index).withHelpUrl(x);if(!c)throw new w("`title` is required for view item",a.path,a.index).withHelpUrl(y);return{id:I(b,a.path,a.index),title:c,icon:d}}}function O(a,b,c){return"function"==typeof a.serialize?a.serialize({path:c,index:b}):a}class P extends N{constructor(a){const b=(a=>(0,f.isRecord)(a)&&"component"===a.type)(a)?{...a}:{options:{}};super(),this.spec=b;const c="function"==typeof a?a:this.spec.component;c&&(this.spec=this.component(c).spec)}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}serialize(a={path:[]}){let b=super.serialize(a),c=this.spec.component;if("function"!=typeof c)throw new w("`component` is required and must be a function for `component()` view item",a.path,a.index).withHelpUrl("structure-view-component-required");return{...b,component:c,options:this.spec.options||{},type:"component"}}clone(a){let b=new P;return b.spec={...this.spec,...a},b}}class Q extends N{constructor(a){super(),this.spec={id:"editor",title:"Editor",...a||{}}}serialize(a={path:[]}){return{...super.serialize(a),type:"form"}}clone(a){let b=new Q;return b.spec={...this.spec,...a},b}}let R=a=>new Q(a);var S=Object.freeze({__proto__:null,ComponentViewBuilder:P,FormViewBuilder:Q,GenericViewBuilder:N,component:a=>new P(a),form:R,maybeSerializeView:O});class T{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:J(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}documentId(a){let b=this.spec.id||a;return this.clone({id:b,options:{...this.spec.options,id:a}})}getDocumentId(){return this.spec.options?.id}schemaType(a){return this.clone({options:{...this.spec.options,type:"string"==typeof a?a:a.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(a,b){return this.clone({options:{...this.spec.options,template:a,templateParameters:b}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(a){return this.clone({views:a})}getViews(){return this.spec.views||[]}serialize({path:a=[],index:b,hint:c}={path:[]}){var d;let e,f=a[b||a.length-1],g=this.spec.id||f&&`${f}`||"",h={id:g,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof g||!g)throw new w("`id` is required for document nodes",a,b,c).withHelpUrl(x);if(!h||!h.id)throw new w("document id (`id`) is required for document nodes",a,g,c).withHelpUrl("structure-document-id-required");if(!h||!h.type)throw new w("document type (`schemaType`) is required for document nodes",a,g,c);let i=(this.spec.views&&this.spec.views.length>0?this.spec.views:[R()]).map((b,c)=>O(b,c,a)),j=i.map(a=>a.id),k=(0,n.default)(j.filter((a,b)=>j.includes(a,b+1)));if(k.length>0)throw new w(`document node has views with duplicate IDs: ${k.join(",  ")}`,a,g,c);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:a,getClient:b})=>async(c,{params:d,path:e})=>{let f=d.type,g=e.slice(0,e.length-1),h=e[e.length-1];if(f||(f=await M(b,c)),!f)throw new w("Failed to resolve document, and no type provided in parameters.",g,h);return a({documentId:c,schemaType:f})})(this._context),id:I(g,a,b),type:"document",options:(e={id:(d=h).id||"",type:d.type||"*"},d.template&&(e.template=d.template),d.templateParameters&&(e.templateParameters=d.templateParameters),e),views:i}}clone(a={}){let b=new T(this._context),c={...this.spec.options,...a.options};return b.spec={...this.spec,...a,options:c},b}}class U{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}description(a){return this.clone({description:a})}getDescription(){return this.spec.description}templateId(a){let b=this.spec.id||a;return this.clone({id:b,templateId:a})}getTemplateId(){return this.spec.templateId}parameters(a){return this.clone({parameters:a})}getParameters(){return this.spec.parameters}serialize({path:a=[],index:b,hint:c}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new w("`id` is required for initial value template item nodes",a,b,c).withHelpUrl(x);if(!this.spec.templateId)throw new w("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(x);let d=this._context.templates.find(a=>a.id===this.spec.templateId);if(!d)throw new w("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(x);return{id:this.spec.id,templateId:this.spec.id,schemaType:d.schemaType,type:"initialValueTemplateItem",description:this.spec.description||d.description,title:this.spec.title||d.title,subtitle:this.spec.subtitle,icon:this.spec.icon||d.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(a={}){let b=new U(this._context);return b.spec={...this.spec,...a},b}}let V=Symbol("Document type list canHandleIntent"),W=(a,b,{pane:c})=>{let d="create"===a,e=c.options?.filter||"",f=c.options?.params||{},g=c.schemaTypeName?[c.schemaTypeName]:aa(e,f),h=c.initialValueTemplates||[];return d&&b.template?h.some(a=>a.templateId===b.template):"edit"===a&&b.id&&g.includes(b.type)||d&&g.includes(b.type)};W.identity=V;let X=["default","card","media","detail","block"];function Y(){}let Z=(a,b,{pane:c,index:d})=>d<=1&&W(a,b,{pane:c});class ${initialValueTemplatesSpecified=!1;spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:J(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}defaultLayout(a){return this.clone({defaultLayout:a})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}child(a){return this.clone({child:a})}getChild(){return this.spec.child}canHandleIntent(a){return this.clone({canHandleIntent:a})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:a}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(a){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(a)?a:[a]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(a={path:[]}){let b=this.spec.id||"",c=a.path,d=this.spec.defaultLayout;if(d&&!X.includes(d))throw new w(`\`layout\` must be one of ${X.map(a=>`"${a}"`).join(", ")}`,c,b||a.index,this.spec.title);let e=(this.spec.initialValueTemplates||[]).map((a,b)=>a instanceof U?a.serialize({path:c,index:b}):a);return{id:I(b,a.path,b||a.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:d,child:this.spec.child||Y,canHandleIntent:this.spec.canHandleIntent||Z,displayOptions:this.spec.displayOptions,initialValueTemplates:e,menuItems:(this.spec.menuItems||[]).map((a,b)=>B(a,b,c)),menuItemGroups:(this.spec.menuItemGroups||[]).map((a,b)=>F(a,b,c))}}}class _ extends ${constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!b?.initialValueTemplates}apiVersion(a){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:a}})}getApiVersion(){return this.spec.options?.apiVersion}filter(a){return this.clone({options:{...this.spec.options,filter:a}})}getFilter(){return this.spec.options?.filter}schemaType(a){let b="string"==typeof a?a:a.name;return this.clone({schemaTypeName:b})}getSchemaType(){return this.spec.schemaTypeName}params(a){return this.clone({options:{...this.spec.options||{filter:""},params:a}})}getParams(){return this.spec.options?.params}defaultOrdering(a){if(!Array.isArray(a))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:a}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(a={path:[]}){let b;if("string"!=typeof this.spec.id||!this.spec.id)throw new w("`id` is required for document lists",a.path,a.index,this.spec.title).withHelpUrl(x);if(!this.spec.options||!this.spec.options.filter)throw new w("`filter` is required for document lists",a.path,this.spec.id,this.spec.title).withHelpUrl("structure-filter-required");return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,p.generateHelpUrl)("structure-api-version-required-for-custom-filter")),{...super.serialize(a),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(b=this._context,(a,c)=>{let d=c.parent,e=c.params?.template?b.templates.find(a=>a.id===c.params.template):void 0;return Promise.resolve(e?e.schemaType:d.schemaTypeName||M(b.getClient,a)).then(c=>c?b.resolveDocumentNode({schemaType:c,documentId:a}):new T(b).id("editor").documentId(a).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((a,b)=>{let c=a.options?.filter.trim()||"";if(["*","{"].includes(c[0]))throw new w(`\`filter\` cannot start with \`${c[0]}\` - looks like you are providing a query, not a filter`,b.path,a.id,a.title).withHelpUrl("structure-query-provided-for-filter");return c})(this.spec,a)}}}clone(a){let b=new _(this._context);return b.spec={...this.spec,...a},this.initialValueTemplatesSpecified||(b.spec.initialValueTemplates=function(a,b){let{document:c}=a,{schemaTypeName:d,options:e}=b,{filter:f,params:g}=e||{filter:"",params:{}},h=d?[d]:Array.from(new Set(aa(f,g)));if(0!==h.length)return h.flatMap(a=>c.resolveNewDocumentOptions({type:"structure",schemaType:a})).map(a=>({...a,icon:j.AddIcon}))}(this._context,b.spec)),b.spec.schemaTypeName||(b.spec.schemaTypeName=function(a){let{options:b}=a,{filter:c,params:d}=b||{filter:"",params:{}},e=aa(c,d);return 1===e.length?e[0]:void 0}(b.spec)),b}getSpec(){return this.spec}}function aa(a,b={}){let c=function(a,b={}){let c,d=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,e=[];for(;null!==(c=d.exec(a));)e.push(c[1]||c[2]);return e.map(a=>(("$"===a[0]?b[a.slice(1)]:a)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(a,b);return 0===c.length&&(c=function(a,b={}){let c=a.match(/\b_type\s+in\s+\[(.*?)\]/);return c?c[1].split(/,\s*/).map(a=>a.trim().replace(/^["']+|["']+$/g,"")).map(a=>"$"===a[0]?b[a.slice(1)]:a).filter(Boolean):[]}(a,b)),c}let ab=a=>"listItem"===a.type,ac=(a,b,c)=>(c.pane.items||[]).filter(ah).some(a=>a.schemaType.name===b.type&&a._id===b.id)||Z(a,b,c),ad=(a,b)=>{let c=(b.parent.items.filter(ab).find(b=>b.id===a)||{child:void 0}).child;return c&&"function"==typeof c&&"function"==typeof c?c(a,b):c};class ae extends ${constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!(b&&b.initialValueTemplates)}items(a){return this.clone({items:a})}getItems(){return this.spec.items}serialize(a={path:[]}){let b=this.spec.id;if("string"!=typeof b||!b)throw new w("`id` is required for lists",a.path,a.index).withHelpUrl(x);let c=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(c))throw new w("`items` must be an array of items",a.path,a.index).withHelpUrl("structure-list-items-must-be-array");let d=(a.path||[]).concat(b),e=c.map((a,b)=>(function(a,b,c){if(a instanceof af)return a.serialize({path:c,index:b});if(a instanceof L)return a.serialize();if(a&&"divider"===a.type)return a;if(!a||"listItem"!==a.type){var d;let e=a&&a.type||(a instanceof ae?"ListBuilder":(d=a,(0,f.isRecord)(d)&&"function"==typeof d.then)?"Promise":Array.isArray(a)?"array":typeof a);throw new w(`List items must be of type "listItem", got "${e}"${"array"===e?" - did you forget to spread (...moreItems)?":""}`,c,b).withHelpUrl("structure-invalid-list-item")}return a})(a,b,d)),g=e.filter((a,b)=>(0,q.default)(e,{id:a.id},b+1));if(g.length>0){let b=g.map(a=>a.id).slice(0,5),c=g.length>5?`${b.join(", ")}...`:b.join(", ");throw new w(`List items with same ID found (${c})`,a.path,a.index).withHelpUrl("structure-list-item-ids-must-be-unique")}return{...super.serialize(a),type:"list",canHandleIntent:this.spec.canHandleIntent||ac,child:this.spec.child||ad,items:e}}clone(a){let b=new ae(this._context);return b.spec={...this.spec,...a},b}}class af{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:J(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}icon(a){return this.clone({icon:a})}showIcon(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:a}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(a){return this.clone({child:a})}getChild(){return this.spec.child}schemaType(a){return this.clone({schemaType:a})}getSchemaType(){let a=this.spec.schemaType;return"string"==typeof a?this._context.schema.get(a):this.spec.schemaType}serialize(a={path:[]}){let{id:b,title:c,child:d}=this.spec;if("string"!=typeof b||!b)throw new w("`id` is required for list items",a.path,a.index).withHelpUrl(x);if(!a.titleIsOptional&&("string"!=typeof c||!c))throw new w("`title` is required for list items",a.path,b).withHelpUrl(y);let e=this.spec.schemaType;if("string"==typeof e){let c=this._context.schema.get(e);if(!c)throw new w(`Could not find type "${e}" in schema`,a.path,b).withHelpUrl("structure-schema-type-not-found");e=c}let f={path:a.path.concat(b),hint:"child"},g=d instanceof K||d instanceof _||d instanceof T||d instanceof ae?d.serialize(f):d;if("function"==typeof g){let a=g;g=(b,c)=>a(b,{...c,serializeOptions:f})}return{...this.spec,id:I(b,a.path,a.index),schemaType:e,child:g,title:c,type:"listItem"}}clone(a){let b=new af(this._context);return b.spec={...this.spec,...a},b}}class ag extends af{constructor(a,b){super(a,b),this._context=a,this.spec=b||{}}serialize(a={path:[]}){let b,c=super.serialize({...a,titleIsOptional:!0});if(!c.schemaType)throw new w("`schemaType` is required for document list items",a.path,a.index).withHelpUrl("structure-schema-type-required");let d=c.child||(b=this._context,a=>{let d=c.schemaType&&("string"==typeof c.schemaType?c.schemaType:c.schemaType.name);return d?b.resolveDocumentNode({schemaType:d,documentId:a}):new T(b).id("documentEditor").documentId(a)});return{...c,child:d,schemaType:c.schemaType,_id:c.id}}clone(a){let b=new ag(this._context);return b.spec={...this.spec,...a},b}}function ah(a){return(0,f.isRecord)(a)&&"u">typeof a.schemaType&&"string"==typeof a._id}class ai extends _{constructor(a,b){super(a),this._context=a,this.spec=b||{}}child(a){return this.cloneWithoutDefaultIntentHandler({child:a})}clone(a){let b=super.clone(a),c=new ai(this._context);return c.spec={...this.spec,...b.getSpec(),...a},c}cloneWithoutDefaultIntentHandler(a){let b=super.clone(a),c=new ai(this._context),d=this.spec.canHandleIntent,e=d&&d.identity===V?{canHandleIntent:void 0}:{};return c.spec={...b.getSpec(),...this.spec,...a,...e},c}}let aj=["sanity.imageAsset","sanity.fileAsset"];function ak(a){return(function({schema:a}){return a.getTypeNames().filter(b=>{let c=a.get(b);return c&&c.type?.name==="document"}).filter(a=>!aj.includes(a))})(a).map(b=>al(a,b))}function al(a,b){let{schema:c}=a,d=c.get(b);if(!d)throw Error(`Schema type with name "${b}" not found`);let e=d.title||(0,r.default)(b);return new af(a).id(b).title(e).schemaType(d).child((c,d)=>{let e=d.parent,f="list"===e.type?e.items.find(a=>a.id===c):null,g=am(a,b);return f&&f.title&&(g=g.title(f.title)),g})}function am(a,b){let{schema:c,resolveDocumentNode:d}=a,e="string"==typeof b?b:b.schemaType,f="string"==typeof e?e:e.name,g="string"==typeof b?{}:b,h=c.get(f);if(!h)throw Error(`Schema type with name "${f}" not found`);let i=h.title||(0,r.default)(f);return new ai(a).id(g.id||f).title(g.title||i).filter("_type == $type").params({type:f}).schemaType(h).defaultOrdering(z.by).menuItemGroups(g.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:s}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:s}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:s}}}]).child(g.child||(a=>d({schemaType:f,documentId:a}))).canHandleIntent(g.canHandleIntent||W).menuItems(g.menuItems||[...E(a,h),new C(a).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:s}}).title("Compact view").icon(j.StackCompactIcon).action("setLayout").params({layout:"default"}),new C(a).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:s}}).title("Detailed view").icon(j.StackIcon).action("setLayout").params({layout:"detail"})])}function an(a){let b,k,l,m,n,o=(0,d.c)(26),{defaultDocumentNode:p,structure:q,children:r}=a,[t,u]=(0,e.useState)(!1),v=(0,f.useSource)(),w=(0,f.useConfigContextFromSource)(v),x=(0,f.useDocumentStore)(),{perspectiveStack:y}=(0,f.usePerspective)();o[0]!==p||o[1]!==y||o[2]!==v?(b=function({defaultDocumentNode:a,source:b,perspectiveStack:c}){let d=(0,f.getConfigContextFromSource)(b),e={...b,getStructureBuilder:()=>h,resolveDocumentNode:b=>{let c=a?.(h,{...b,...d})||new T(e);return c.getId()||(c=c.id("documentEditor")),b.documentId&&(c=c.documentId((0,g.getPublishedId)(b.documentId))),c.schemaType(b.schemaType)},perspectiveStack:c},h={defaults:()=>{let a;return a=ak(e),new ae(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:s}}).items(a).showIcons(a.some(a=>{var b;return!!(b=a.getSchemaType())&&"string"!=typeof b&&!!b.icon}))},documentTypeList:(...a)=>am(e,...a),documentTypeListItem:(...a)=>al(e,...a),documentTypeListItems:(...a)=>ak(e,...a),document:(...a)=>new T(e,...a),documentWithInitialValueTemplate:(...a)=>(function({resolveDocumentNode:a,templates:b},c,d){let e=b.find(a=>a.id===c);if(!e)throw Error(`Template with ID "${c}" not defined`);return a({schemaType:e.schemaType}).initialValueTemplate(c,d)})(e,...a),defaultDocument:e.resolveDocumentNode,list:(...a)=>new ae(e,...a),listItem:(...a)=>new af(e,...a),menuItem:(...a)=>new C(e,...a),menuItemGroup:(...a)=>new G(e,...a),menuItemsFromInitialValueTemplateItems:(...a)=>(function(a,b){let{schema:c,templates:d}=a;return b.map(b=>{let e=d.find(a=>a.id===b.templateId),f=b.title||e?.title||"Create",g={};e&&e.schemaType&&(g.type=e.schemaType),b.templateId&&(g.template=b.templateId);let h=b.parameters?[g,b.parameters]:g,i=e&&c.get(e.schemaType),k=b.i18n||e?.i18n,l=new C(a).title(f).icon(e&&e.icon||i?.icon||j.AddIcon).intent({type:"create",params:h});return k&&(l=l.i18n(k)),l.serialize()})})(e,...a),documentList:(...a)=>new _(e,...a),documentListItem:(...a)=>new ag(e,...a),orderingMenuItem:(...a)=>D(e,...a),orderingMenuItemsForType:(...a)=>E(e,...a),editor:(...a)=>(function(a,b){let c=b?.type?a.resolveDocumentNode({schemaType:b.type}):new T(a);if(!b)return c;let{id:d,type:e,template:f,templateParameters:g}=b.options;return c=c.id(b.id).documentId(d),e&&(c=c.schemaType(e)),f&&(c=c.initialValueTemplate(f,g)),b.child&&(c=c.child(b.child)),c})(e,...a),defaultInitialValueTemplateItems:(...a)=>(function(a){let{schema:b,getStructureBuilder:c,templates:d}=a,e=b.getTypeNames();return d.filter(a=>!a.parameters?.length).sort((a,b)=>e.indexOf(a.schemaType)-e.indexOf(b.schemaType)).map(a=>c().initialValueTemplateItem(a.id))})(e,...a),initialValueTemplateItem:(a,b)=>new U(e,{id:a,parameters:b,templateId:a}),component:a=>(0,i.isValidElementType)(a)?new K().component(a):new K(a),divider:a=>new L(a),view:S,context:e};return h}({defaultDocumentNode:p,source:v,perspectiveStack:y}),o[0]=p,o[1]=y,o[2]=v,o[3]=b):b=o[3];let z=b;a:{let a;if(q){let a;o[4]!==z||o[5]!==w||o[6]!==x||o[7]!==y||o[8]!==q?(a=q(z,{...w,documentStore:x,perspectiveStack:y}),o[4]=z,o[5]=w,o[6]=x,o[7]=y,o[8]=q,o[9]=a):a=o[9],k=a;break a}o[10]!==z?(a=z.defaults(),o[10]=z,o[11]=a):a=o[11],k=a}let A=k,B=!t,F=!t,H=!t,I=!t;o[12]!==t||o[13]!==B||o[14]!==F||o[15]!==H||o[16]!==I?(l={backButton:t,resizablePanes:B,reviewChanges:F,splitPanes:H,splitViews:I},o[12]=t,o[13]=B,o[14]=F,o[15]=H,o[16]=I,o[17]=l):l=o[17];let J=l;o[18]!==z.context||o[19]!==J||o[20]!==t||o[21]!==A?(m={features:J,layoutCollapsed:t,setLayoutCollapsed:u,rootPaneNode:A,structureContext:z.context},o[18]=z.context,o[19]=J,o[20]=t,o[21]=A,o[22]=m):m=o[22];let M=m;return o[23]!==r||o[24]!==M?(n=(0,c.jsx)(h.StructureToolContext.Provider,{value:M,children:r}),o[23]=r,o[24]=M,o[25]=n):n=o[25],n}a.s(["SerializeError",()=>w,"StructureToolProvider",()=>an,"getExtendedProjection",()=>v,"structureLocaleNamespace",()=>s,"structureUsEnglishLocaleBundle",()=>t],6978);var ao=a.i(15256),ap=a.i(64179),aq=a.i(66482),ar=a.i(35576),as=a.i(74767),at=a.i(75716),au=a.i(38242),av=a.i(46271),aw=a.i(62036),ax=a.i(11315),ay=a.i(77647),az=a.i(74921),aA=a.i(66217),aB=a.i(30379),aC=a.i(72036),aD=a.i(52535),aE=a.i(95224),aF=a.i(30466),aG=a.i(2501),aH=a.i(55733),aI=a.i(53113),aJ=a.i(73345),aK=a.i(5043),aL=a.i(27500);let aM=({clientWidth:a,clientHeight:b,scrollWidth:c,scrollHeight:d})=>d>b||c>a,aN=a=>{let b=window.getComputedStyle(a).overflow;return b.includes("auto")||b.includes("scroll")},aO=a=>{if(null==a)return{x:0,y:0};let{scrollTop:b,scrollHeight:c,clientHeight:d,scrollLeft:e,scrollWidth:f,clientWidth:g}=a;return{x:e?e/Math.max(1e-5,f-g):0,y:b?b/Math.max(1e-5,c-d):0}};function aP(){return(aP=Object.assign.bind()).apply(null,arguments)}function aQ(a){return a.matches("body *")?a:window}class aR{constructor(a,b={}){var c,d=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(a){if(d.paused||!a.currentTarget)return;let b=d.getScrollContainer(a.currentTarget);await new Promise(a=>{requestAnimationFrame(()=>a())}),d.mirrorScrollPositions(aO(b),b)},this.elements=[...a].filter(Boolean).map(a=>this.getScrollContainer(a)),this.elements=[...new Set(this.elements)],this.options=aP({},this.defaults,b),this.options.debug&&(this.logger=(c="[scroll-mirror]",{log:(...a)=>console.log(c,...a),warn:(...a)=>console.warn(c,...a),error:(...a)=>console.error(c,...a)}),function(a,b){if(a.length<1)null==b||b.warn("No elements provided.");else for(let c of(a.length<2&&(null==b||b.warn("Only one element provided.",a)),a.some(a=>!a)&&(null==b||b.error("Some elements are not defined.",a)),a))c instanceof HTMLElement&&!aM(c)&&(null==b||b.warn("Element doesn't have overflow:",c)),c instanceof HTMLElement&&c.matches("body *")&&!aN(c)&&(null==b||b.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',c))}(this.elements,this.logger)),this.elements.forEach(a=>this.addScrollHandler(a)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(aO(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(a=>this.removeScrollHandler(a))}addScrollHandler(a){this.removeScrollHandler(a),aQ(a).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(a){aQ(a).removeEventListener("scroll",this.handleScroll)}getScrollContainer(a){return a instanceof HTMLElement&&a.matches("body *")?a:document.documentElement}mirrorScrollPositions(a,b){this.elements.forEach(c=>{b!==c&&(this.removeScrollHandler(c),this.setScrollPosition(a,c),window.requestAnimationFrame(()=>{this.addScrollHandler(c)}))})}setScrollPosition(a,b){let{vertical:c,horizontal:d}=this.options,e=b.scrollWidth-b.clientWidth,f=b.scrollHeight-b.clientHeight;c&&f&&b.scrollTo({top:f*a.y,behavior:"instant"}),d&&e&&b.scrollTo({left:e*a.x,behavior:"instant"})}get progress(){return aO(this.elements.find(a=>aM(a)))}set progress(a){"number"==typeof a&&(a={x:a,y:a});let b=aP({},this.progress,a);(function(a,b){let c=!0;for(let[d,e]of Object.entries(a))("number"!=typeof e||e<0||e>1)&&(null==b||b.error(`progress.${d} must be a number between 0-1`),c=!1);return c})(b,this.logger)&&this.mirrorScrollPositions(b)}}var aS=a.i(95089),aT=a.i(30407),aU=a.i(48074),aV=a.i(47252),aW=a.i(85627),aX=a.i(89766),aY=a.i(75632),aZ=a.i(35596),a$=a.i(56711),a_=a.i(78465),a0=a.i(724),a1=a.i(47497),a2=a.i(45903),a3=a.i(13028),a4=a.i(86276);function a5(a,b){return"function"==typeof a?a(b):a}function a6(a,b){return c=>{b.setState(b=>({...b,[a]:a5(c,b[a])}))}}function a7(a){return a instanceof Function}function a8(a,b,c){let d,e=[];return f=>{let g,h;c.key&&c.debug&&(g=Date.now());let i=a(f);if(!(i.length!==e.length||i.some((a,b)=>e[b]!==a)))return d;if(e=i,c.key&&c.debug&&(h=Date.now()),d=b(...i),null==c||null==c.onChange||c.onChange(d),c.key&&c.debug&&null!=c&&c.debug()){let a=Math.round((Date.now()-g)*100)/100,b=Math.round((Date.now()-h)*100)/100,d=b/16,e=(a,b)=>{for(a=String(a);a.length<b;)a=" "+a;return a};console.info(`%câ± ${e(b,5)} /${e(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,null==c?void 0:c.key)}return d}}function a9(a,b,c,d){return{debug:()=>{var c;return null!=(c=null==a?void 0:a.debugAll)?c:a[b]},key:!1,onChange:d}}let ba="debugHeaders";function bb(a,b,c){var d;let e={id:null!=(d=c.id)?d:b.id,column:b,index:c.index,isPlaceholder:!!c.isPlaceholder,placeholderId:c.placeholderId,depth:c.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],b=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(b),a.push(c)};return b(e),a},getContext:()=>({table:a,header:e,column:b})};return a._features.forEach(b=>{null==b.createHeader||b.createHeader(e,a)}),e}function bc(a,b,c,d){var e,f;let g=0,h=function(a,b){void 0===b&&(b=1),g=Math.max(g,b),a.filter(a=>a.getIsVisible()).forEach(a=>{var c;null!=(c=a.columns)&&c.length&&h(a.columns,b+1)},0)};h(a);let i=[],j=(a,b)=>{let e={depth:b,id:[d,`${b}`].filter(Boolean).join("_"),headers:[]},f=[];a.forEach(a=>{let g,h=[...f].reverse()[0],i=a.column.depth===e.depth,j=!1;if(i&&a.column.parent?g=a.column.parent:(g=a.column,j=!0),h&&(null==h?void 0:h.column)===g)h.subHeaders.push(a);else{let e=bb(c,g,{id:[d,b,g.id,null==a?void 0:a.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${f.filter(a=>a.column===g).length}`:void 0,depth:b,index:f.length});e.subHeaders.push(a),f.push(e)}e.headers.push(a),a.headerGroup=e}),i.push(e),b>0&&j(f,b-1)};j(b.map((a,b)=>bb(c,a,{depth:g,index:b})),g-1),i.reverse();let k=a=>a.filter(a=>a.column.getIsVisible()).map(a=>{let b=0,c=0,d=[0];return a.subHeaders&&a.subHeaders.length?(d=[],k(a.subHeaders).forEach(a=>{let{colSpan:c,rowSpan:e}=a;b+=c,d.push(e)})):b=1,c+=Math.min(...d),a.colSpan=b,a.rowSpan=c,{colSpan:b,rowSpan:c}});return k(null!=(e=null==(f=i[0])?void 0:f.headers)?e:[]),i}let bd=(a,b,c,d,e,f,g)=>{let h={id:b,index:d,original:c,depth:e,parentId:g,_valuesCache:{},_uniqueValuesCache:{},getValue:b=>{if(h._valuesCache.hasOwnProperty(b))return h._valuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return h._valuesCache[b]=c.accessorFn(h.original,d),h._valuesCache[b]},getUniqueValues:b=>{if(h._uniqueValuesCache.hasOwnProperty(b))return h._uniqueValuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return c.columnDef.getUniqueValues?h._uniqueValuesCache[b]=c.columnDef.getUniqueValues(h.original,d):h._uniqueValuesCache[b]=[h.getValue(b)],h._uniqueValuesCache[b]},renderValue:b=>{var c;return null!=(c=h.getValue(b))?c:a.options.renderFallbackValue},subRows:null!=f?f:[],getLeafRows:()=>{var a,b;let c,d;return a=h.subRows,b=a=>a.subRows,c=[],(d=a=>{a.forEach(a=>{c.push(a);let e=b(a);null!=e&&e.length&&d(e)})})(a),c},getParentRow:()=>h.parentId?a.getRow(h.parentId,!0):void 0,getParentRows:()=>{let a=[],b=h;for(;;){let c=b.getParentRow();if(!c)break;a.push(c),b=c}return a.reverse()},getAllCells:a8(()=>[a.getAllLeafColumns()],b=>b.map(b=>{var c;let d;return c=b.id,d={id:`${h.id}_${b.id}`,row:h,column:b,getValue:()=>h.getValue(c),renderValue:()=>{var b;return null!=(b=d.getValue())?b:a.options.renderFallbackValue},getContext:a8(()=>[a,b,h,d],(a,b,c,d)=>({table:a,column:b,row:c,cell:d,getValue:d.getValue,renderValue:d.renderValue}),a9(a.options,"debugCells","cell.getContext"))},a._features.forEach(c=>{null==c.createCell||c.createCell(d,b,h,a)},{}),d}),a9(a.options,"debugRows","getAllCells")),_getAllCellsByColumnId:a8(()=>[h.getAllCells()],a=>a.reduce((a,b)=>(a[b.column.id]=b,a),{}),a9(a.options,"debugRows","getAllCellsByColumnId"))};for(let b=0;b<a._features.length;b++){let c=a._features[b];null==c||null==c.createRow||c.createRow(h,a)}return h},be=(a,b,c)=>{var d,e;let f=null==c||null==(d=c.toString())?void 0:d.toLowerCase();return!!(null==(e=a.getValue(b))||null==(e=e.toString())||null==(e=e.toLowerCase())?void 0:e.includes(f))};be.autoRemove=a=>bo(a);let bf=(a,b,c)=>{var d;return!!(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.includes(c))};bf.autoRemove=a=>bo(a);let bg=(a,b,c)=>{var d;return(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.toLowerCase())===(null==c?void 0:c.toLowerCase())};bg.autoRemove=a=>bo(a);let bh=(a,b,c)=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)};bh.autoRemove=a=>bo(a);let bi=(a,b,c)=>!c.some(c=>{var d;return!(null!=(d=a.getValue(b))&&d.includes(c))});bi.autoRemove=a=>bo(a)||!(null!=a&&a.length);let bj=(a,b,c)=>c.some(c=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)});bj.autoRemove=a=>bo(a)||!(null!=a&&a.length);let bk=(a,b,c)=>a.getValue(b)===c;bk.autoRemove=a=>bo(a);let bl=(a,b,c)=>a.getValue(b)==c;bl.autoRemove=a=>bo(a);let bm=(a,b,c)=>{let[d,e]=c,f=a.getValue(b);return f>=d&&f<=e};bm.resolveFilterValue=a=>{let[b,c]=a,d="number"!=typeof b?parseFloat(b):b,e="number"!=typeof c?parseFloat(c):c,f=null===b||Number.isNaN(d)?-1/0:d,g=null===c||Number.isNaN(e)?1/0:e;if(f>g){let a=f;f=g,g=a}return[f,g]},bm.autoRemove=a=>bo(a)||bo(a[0])&&bo(a[1]);let bn={includesString:be,includesStringSensitive:bf,equalsString:bg,arrIncludes:bh,arrIncludesAll:bi,arrIncludesSome:bj,equals:bk,weakEquals:bl,inNumberRange:bm};function bo(a){return null==a||""===a}function bp(a,b,c){return!!a&&!!a.autoRemove&&a.autoRemove(b,c)||void 0===b||"string"==typeof b&&!b}let bq={sum:(a,b,c)=>c.reduce((b,c)=>{let d=c.getValue(a);return b+("number"==typeof d?d:0)},0),min:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d>c||void 0===d&&c>=c)&&(d=c)}),d},max:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d<c||void 0===d&&c>=c)&&(d=c)}),d},extent:(a,b,c)=>{let d,e;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(void 0===d?c>=c&&(d=e=c):(d>c&&(d=c),e<c&&(e=c)))}),[d,e]},mean:(a,b)=>{let c=0,d=0;if(b.forEach(b=>{let e=b.getValue(a);null!=e&&(e*=1)>=e&&(++c,d+=e)}),c)return d/c},median:(a,b)=>{if(!b.length)return;let c=b.map(b=>b.getValue(a));if(!(Array.isArray(c)&&c.every(a=>"number"==typeof a)))return;if(1===c.length)return c[0];let d=Math.floor(c.length/2),e=c.sort((a,b)=>a-b);return c.length%2!=0?e[d]:(e[d-1]+e[d])/2},unique:(a,b)=>Array.from(new Set(b.map(b=>b.getValue(a))).values()),uniqueCount:(a,b)=>new Set(b.map(b=>b.getValue(a))).size,count:(a,b)=>b.length},br=()=>({left:[],right:[]}),bs={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},bt=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bu=null;function bv(a){return"touchstart"===a.type}function bw(a,b){return b?"center"===b?a.getCenterVisibleLeafColumns():"left"===b?a.getLeftVisibleLeafColumns():a.getRightVisibleLeafColumns():a.getVisibleLeafColumns()}let bx=()=>({pageIndex:0,pageSize:10}),by=()=>({top:[],bottom:[]}),bz=(a,b,c,d,e)=>{var f;let g=e.getRow(b,!0);c?(g.getCanMultiSelect()||Object.keys(a).forEach(b=>delete a[b]),g.getCanSelect()&&(a[b]=!0)):delete a[b],d&&null!=(f=g.subRows)&&f.length&&g.getCanSelectSubRows()&&g.subRows.forEach(b=>bz(a,b.id,c,d,e))};function bA(a,b){let c=a.getState().rowSelection,d=[],e={},f=function(a,b){return a.map(a=>{var b;let g=bB(a,c);if(g&&(d.push(a),e[a.id]=a),null!=(b=a.subRows)&&b.length&&(a={...a,subRows:f(a.subRows)}),g)return a}).filter(Boolean)};return{rows:f(b.rows),flatRows:d,rowsById:e}}function bB(a,b){var c;return null!=(c=b[a.id])&&c}function bC(a,b,c){var d;if(!(null!=(d=a.subRows)&&d.length))return!1;let e=!0,f=!1;return a.subRows.forEach(a=>{if((!f||e)&&(a.getCanSelect()&&(bB(a,b)?f=!0:e=!1),a.subRows&&a.subRows.length)){let c=bC(a,b);"all"===c?f=!0:("some"===c&&(f=!0),e=!1)}}),e?"all":!!f&&"some"}let bD=/([0-9]+)/gm;function bE(a,b){return a===b?0:a>b?1:-1}function bF(a){return"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?"":String(a):"string"==typeof a?a:""}function bG(a,b){let c=a.split(bD).filter(Boolean),d=b.split(bD).filter(Boolean);for(;c.length&&d.length;){let a=c.shift(),b=d.shift(),e=parseInt(a,10),f=parseInt(b,10),g=[e,f].sort();if(isNaN(g[0])){if(a>b)return 1;if(b>a)return -1;continue}if(isNaN(g[1]))return isNaN(e)?-1:1;if(e>f)return 1;if(f>e)return -1}return c.length-d.length}let bH={alphanumeric:(a,b,c)=>bG(bF(a.getValue(c)).toLowerCase(),bF(b.getValue(c)).toLowerCase()),alphanumericCaseSensitive:(a,b,c)=>bG(bF(a.getValue(c)),bF(b.getValue(c))),text:(a,b,c)=>bE(bF(a.getValue(c)).toLowerCase(),bF(b.getValue(c)).toLowerCase()),textCaseSensitive:(a,b,c)=>bE(bF(a.getValue(c)),bF(b.getValue(c))),datetime:(a,b,c)=>{let d=a.getValue(c),e=b.getValue(c);return d>e?1:d<e?-1:0},basic:(a,b,c)=>bE(a.getValue(c),b.getValue(c))},bI=[{createTable:a=>{a.getHeaderGroups=a8(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>{var f,g;let h=null!=(f=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?f:[],i=null!=(g=null==e?void 0:e.map(a=>c.find(b=>b.id===a)).filter(Boolean))?g:[];return bc(b,[...h,...c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),...i],a)},a9(a.options,ba,"getHeaderGroups")),a.getCenterHeaderGroups=a8(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>bc(b,c=c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),a,"center"),a9(a.options,ba,"getCenterHeaderGroups")),a.getLeftHeaderGroups=a8(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left],(b,c,d)=>{var e;return bc(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"left")},a9(a.options,ba,"getLeftHeaderGroups")),a.getRightHeaderGroups=a8(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.right],(b,c,d)=>{var e;return bc(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"right")},a9(a.options,ba,"getRightHeaderGroups")),a.getFooterGroups=a8(()=>[a.getHeaderGroups()],a=>[...a].reverse(),a9(a.options,ba,"getFooterGroups")),a.getLeftFooterGroups=a8(()=>[a.getLeftHeaderGroups()],a=>[...a].reverse(),a9(a.options,ba,"getLeftFooterGroups")),a.getCenterFooterGroups=a8(()=>[a.getCenterHeaderGroups()],a=>[...a].reverse(),a9(a.options,ba,"getCenterFooterGroups")),a.getRightFooterGroups=a8(()=>[a.getRightHeaderGroups()],a=>[...a].reverse(),a9(a.options,ba,"getRightFooterGroups")),a.getFlatHeaders=a8(()=>[a.getHeaderGroups()],a=>a.map(a=>a.headers).flat(),a9(a.options,ba,"getFlatHeaders")),a.getLeftFlatHeaders=a8(()=>[a.getLeftHeaderGroups()],a=>a.map(a=>a.headers).flat(),a9(a.options,ba,"getLeftFlatHeaders")),a.getCenterFlatHeaders=a8(()=>[a.getCenterHeaderGroups()],a=>a.map(a=>a.headers).flat(),a9(a.options,ba,"getCenterFlatHeaders")),a.getRightFlatHeaders=a8(()=>[a.getRightHeaderGroups()],a=>a.map(a=>a.headers).flat(),a9(a.options,ba,"getRightFlatHeaders")),a.getCenterLeafHeaders=a8(()=>[a.getCenterFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a9(a.options,ba,"getCenterLeafHeaders")),a.getLeftLeafHeaders=a8(()=>[a.getLeftFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a9(a.options,ba,"getLeftLeafHeaders")),a.getRightLeafHeaders=a8(()=>[a.getRightFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a9(a.options,ba,"getRightLeafHeaders")),a.getLeafHeaders=a8(()=>[a.getLeftHeaderGroups(),a.getCenterHeaderGroups(),a.getRightHeaderGroups()],(a,b,c)=>{var d,e,f,g,h,i;return[...null!=(d=null==(e=a[0])?void 0:e.headers)?d:[],...null!=(f=null==(g=b[0])?void 0:g.headers)?f:[],...null!=(h=null==(i=c[0])?void 0:i.headers)?h:[]].map(a=>a.getLeafHeaders()).flat()},a9(a.options,ba,"getLeafHeaders"))}},{getInitialState:a=>({columnVisibility:{},...a}),getDefaultOptions:a=>({onColumnVisibilityChange:a6("columnVisibility",a)}),createColumn:(a,b)=>{a.toggleVisibility=c=>{a.getCanHide()&&b.setColumnVisibility(b=>({...b,[a.id]:null!=c?c:!a.getIsVisible()}))},a.getIsVisible=()=>{var c,d;let e=a.columns;return null==(c=e.length?e.some(a=>a.getIsVisible()):null==(d=b.getState().columnVisibility)?void 0:d[a.id])||c},a.getCanHide=()=>{var c,d;return(null==(c=a.columnDef.enableHiding)||c)&&(null==(d=b.options.enableHiding)||d)},a.getToggleVisibilityHandler=()=>b=>{null==a.toggleVisibility||a.toggleVisibility(b.target.checked)}},createRow:(a,b)=>{a._getAllVisibleCells=a8(()=>[a.getAllCells(),b.getState().columnVisibility],a=>a.filter(a=>a.column.getIsVisible()),a9(b.options,"debugRows","_getAllVisibleCells")),a.getVisibleCells=a8(()=>[a.getLeftVisibleCells(),a.getCenterVisibleCells(),a.getRightVisibleCells()],(a,b,c)=>[...a,...b,...c],a9(b.options,"debugRows","getVisibleCells"))},createTable:a=>{let b=(b,c)=>a8(()=>[c(),c().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a9(a.options,"debugColumns",b));a.getVisibleFlatColumns=b("getVisibleFlatColumns",()=>a.getAllFlatColumns()),a.getVisibleLeafColumns=b("getVisibleLeafColumns",()=>a.getAllLeafColumns()),a.getLeftVisibleLeafColumns=b("getLeftVisibleLeafColumns",()=>a.getLeftLeafColumns()),a.getRightVisibleLeafColumns=b("getRightVisibleLeafColumns",()=>a.getRightLeafColumns()),a.getCenterVisibleLeafColumns=b("getCenterVisibleLeafColumns",()=>a.getCenterLeafColumns()),a.setColumnVisibility=b=>null==a.options.onColumnVisibilityChange?void 0:a.options.onColumnVisibilityChange(b),a.resetColumnVisibility=b=>{var c;a.setColumnVisibility(b?{}:null!=(c=a.initialState.columnVisibility)?c:{})},a.toggleAllColumnsVisible=b=>{var c;b=null!=(c=b)?c:!a.getIsAllColumnsVisible(),a.setColumnVisibility(a.getAllLeafColumns().reduce((a,c)=>({...a,[c.id]:b||!(null!=c.getCanHide&&c.getCanHide())}),{}))},a.getIsAllColumnsVisible=()=>!a.getAllLeafColumns().some(a=>!(null!=a.getIsVisible&&a.getIsVisible())),a.getIsSomeColumnsVisible=()=>a.getAllLeafColumns().some(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a.getToggleAllColumnsVisibilityHandler=()=>b=>{var c;a.toggleAllColumnsVisible(null==(c=b.target)?void 0:c.checked)}}},{getInitialState:a=>({columnOrder:[],...a}),getDefaultOptions:a=>({onColumnOrderChange:a6("columnOrder",a)}),createColumn:(a,b)=>{a.getIndex=a8(a=>[bw(b,a)],b=>b.findIndex(b=>b.id===a.id),a9(b.options,"debugColumns","getIndex")),a.getIsFirstColumn=c=>{var d;return(null==(d=bw(b,c)[0])?void 0:d.id)===a.id},a.getIsLastColumn=c=>{var d;let e=bw(b,c);return(null==(d=e[e.length-1])?void 0:d.id)===a.id}},createTable:a=>{a.setColumnOrder=b=>null==a.options.onColumnOrderChange?void 0:a.options.onColumnOrderChange(b),a.resetColumnOrder=b=>{var c;a.setColumnOrder(b?[]:null!=(c=a.initialState.columnOrder)?c:[])},a._getOrderColumnsFn=a8(()=>[a.getState().columnOrder,a.getState().grouping,a.options.groupedColumnMode],(a,b,c)=>d=>{let e=[];if(null!=a&&a.length){let b=[...a],c=[...d];for(;c.length&&b.length;){let a=b.shift(),d=c.findIndex(b=>b.id===a);d>-1&&e.push(c.splice(d,1)[0])}e=[...e,...c]}else e=d;var f=e;if(!(null!=b&&b.length)||!c)return f;let g=f.filter(a=>!b.includes(a.id));return"remove"===c?g:[...b.map(a=>f.find(b=>b.id===a)).filter(Boolean),...g]},a9(a.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:a=>({columnPinning:br(),...a}),getDefaultOptions:a=>({onColumnPinningChange:a6("columnPinning",a)}),createColumn:(a,b)=>{a.pin=c=>{let d=a.getLeafColumns().map(a=>a.id).filter(Boolean);b.setColumnPinning(a=>{var b,e,f,g,h,i;return"right"===c?{left:(null!=(f=null==a?void 0:a.left)?f:[]).filter(a=>!(null!=d&&d.includes(a))),right:[...(null!=(g=null==a?void 0:a.right)?g:[]).filter(a=>!(null!=d&&d.includes(a))),...d]}:"left"===c?{left:[...(null!=(h=null==a?void 0:a.left)?h:[]).filter(a=>!(null!=d&&d.includes(a))),...d],right:(null!=(i=null==a?void 0:a.right)?i:[]).filter(a=>!(null!=d&&d.includes(a)))}:{left:(null!=(b=null==a?void 0:a.left)?b:[]).filter(a=>!(null!=d&&d.includes(a))),right:(null!=(e=null==a?void 0:a.right)?e:[]).filter(a=>!(null!=d&&d.includes(a)))}})},a.getCanPin=()=>a.getLeafColumns().some(a=>{var c,d,e;return(null==(c=a.columnDef.enablePinning)||c)&&(null==(d=null!=(e=b.options.enableColumnPinning)?e:b.options.enablePinning)||d)}),a.getIsPinned=()=>{let c=a.getLeafColumns().map(a=>a.id),{left:d,right:e}=b.getState().columnPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"left":!!g&&"right"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();return e?null!=(c=null==(d=b.getState().columnPinning)||null==(d=d[e])?void 0:d.indexOf(a.id))?c:-1:0}},createRow:(a,b)=>{a.getCenterVisibleCells=a8(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left,b.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.column.id))},a9(b.options,"debugRows","getCenterVisibleCells")),a.getLeftVisibleCells=a8(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"left"})),a9(b.options,"debugRows","getLeftVisibleCells")),a.getRightVisibleCells=a8(()=>[a._getAllVisibleCells(),b.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"right"})),a9(b.options,"debugRows","getRightVisibleCells"))},createTable:a=>{a.setColumnPinning=b=>null==a.options.onColumnPinningChange?void 0:a.options.onColumnPinningChange(b),a.resetColumnPinning=b=>{var c,d;return a.setColumnPinning(b?br():null!=(c=null==(d=a.initialState)?void 0:d.columnPinning)?c:br())},a.getIsSomeColumnsPinned=b=>{var c,d,e;let f=a.getState().columnPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.left)?void 0:d.length)||(null==(e=f.right)?void 0:e.length))},a.getLeftLeafColumns=a8(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),a9(a.options,"debugColumns","getLeftLeafColumns")),a.getRightLeafColumns=a8(()=>[a.getAllLeafColumns(),a.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),a9(a.options,"debugColumns","getRightLeafColumns")),a.getCenterLeafColumns=a8(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.id))},a9(a.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(a,b)=>{a._getFacetedRowModel=b.options.getFacetedRowModel&&b.options.getFacetedRowModel(b,a.id),a.getFacetedRowModel=()=>a._getFacetedRowModel?a._getFacetedRowModel():b.getPreFilteredRowModel(),a._getFacetedUniqueValues=b.options.getFacetedUniqueValues&&b.options.getFacetedUniqueValues(b,a.id),a.getFacetedUniqueValues=()=>a._getFacetedUniqueValues?a._getFacetedUniqueValues():new Map,a._getFacetedMinMaxValues=b.options.getFacetedMinMaxValues&&b.options.getFacetedMinMaxValues(b,a.id),a.getFacetedMinMaxValues=()=>{if(a._getFacetedMinMaxValues)return a._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:a=>({columnFilters:[],...a}),getDefaultOptions:a=>({onColumnFiltersChange:a6("columnFilters",a),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(a,b)=>{a.getAutoFilterFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"string"==typeof d?bn.includesString:"number"==typeof d?bn.inNumberRange:"boolean"==typeof d||null!==d&&"object"==typeof d?bn.equals:Array.isArray(d)?bn.arrIncludes:bn.weakEquals},a.getFilterFn=()=>{var c,d;return a7(a.columnDef.filterFn)?a.columnDef.filterFn:"auto"===a.columnDef.filterFn?a.getAutoFilterFn():null!=(c=null==(d=b.options.filterFns)?void 0:d[a.columnDef.filterFn])?c:bn[a.columnDef.filterFn]},a.getCanFilter=()=>{var c,d,e;return(null==(c=a.columnDef.enableColumnFilter)||c)&&(null==(d=b.options.enableColumnFilters)||d)&&(null==(e=b.options.enableFilters)||e)&&!!a.accessorFn},a.getIsFiltered=()=>a.getFilterIndex()>-1,a.getFilterValue=()=>{var c;return null==(c=b.getState().columnFilters)||null==(c=c.find(b=>b.id===a.id))?void 0:c.value},a.getFilterIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().columnFilters)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.setFilterValue=c=>{b.setColumnFilters(b=>{var d,e;let f=a.getFilterFn(),g=null==b?void 0:b.find(b=>b.id===a.id),h=a5(c,g?g.value:void 0);if(bp(f,h,a))return null!=(d=null==b?void 0:b.filter(b=>b.id!==a.id))?d:[];let i={id:a.id,value:h};return g?null!=(e=null==b?void 0:b.map(b=>b.id===a.id?i:b))?e:[]:null!=b&&b.length?[...b,i]:[i]})}},createRow:(a,b)=>{a.columnFilters={},a.columnFiltersMeta={}},createTable:a=>{a.setColumnFilters=b=>{let c=a.getAllLeafColumns();null==a.options.onColumnFiltersChange||a.options.onColumnFiltersChange(a=>{var d;return null==(d=a5(b,a))?void 0:d.filter(a=>{let b=c.find(b=>b.id===a.id);return!(b&&bp(b.getFilterFn(),a.value,b))&&!0})})},a.resetColumnFilters=b=>{var c,d;a.setColumnFilters(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.columnFilters)?c:[])},a.getPreFilteredRowModel=()=>a.getCoreRowModel(),a.getFilteredRowModel=()=>(!a._getFilteredRowModel&&a.options.getFilteredRowModel&&(a._getFilteredRowModel=a.options.getFilteredRowModel(a)),a.options.manualFiltering||!a._getFilteredRowModel)?a.getPreFilteredRowModel():a._getFilteredRowModel()}},{createTable:a=>{a._getGlobalFacetedRowModel=a.options.getFacetedRowModel&&a.options.getFacetedRowModel(a,"__global__"),a.getGlobalFacetedRowModel=()=>a.options.manualFiltering||!a._getGlobalFacetedRowModel?a.getPreFilteredRowModel():a._getGlobalFacetedRowModel(),a._getGlobalFacetedUniqueValues=a.options.getFacetedUniqueValues&&a.options.getFacetedUniqueValues(a,"__global__"),a.getGlobalFacetedUniqueValues=()=>a._getGlobalFacetedUniqueValues?a._getGlobalFacetedUniqueValues():new Map,a._getGlobalFacetedMinMaxValues=a.options.getFacetedMinMaxValues&&a.options.getFacetedMinMaxValues(a,"__global__"),a.getGlobalFacetedMinMaxValues=()=>{if(a._getGlobalFacetedMinMaxValues)return a._getGlobalFacetedMinMaxValues()}}},{getInitialState:a=>({globalFilter:void 0,...a}),getDefaultOptions:a=>({onGlobalFilterChange:a6("globalFilter",a),globalFilterFn:"auto",getColumnCanGlobalFilter:b=>{var c;let d=null==(c=a.getCoreRowModel().flatRows[0])||null==(c=c._getAllCellsByColumnId()[b.id])?void 0:c.getValue();return"string"==typeof d||"number"==typeof d}}),createColumn:(a,b)=>{a.getCanGlobalFilter=()=>{var c,d,e,f;return(null==(c=a.columnDef.enableGlobalFilter)||c)&&(null==(d=b.options.enableGlobalFilter)||d)&&(null==(e=b.options.enableFilters)||e)&&(null==(f=null==b.options.getColumnCanGlobalFilter?void 0:b.options.getColumnCanGlobalFilter(a))||f)&&!!a.accessorFn}},createTable:a=>{a.getGlobalAutoFilterFn=()=>bn.includesString,a.getGlobalFilterFn=()=>{var b,c;let{globalFilterFn:d}=a.options;return a7(d)?d:"auto"===d?a.getGlobalAutoFilterFn():null!=(b=null==(c=a.options.filterFns)?void 0:c[d])?b:bn[d]},a.setGlobalFilter=b=>{null==a.options.onGlobalFilterChange||a.options.onGlobalFilterChange(b)},a.resetGlobalFilter=b=>{a.setGlobalFilter(b?void 0:a.initialState.globalFilter)}}},{getInitialState:a=>({sorting:[],...a}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:a=>({onSortingChange:a6("sorting",a),isMultiSortEvent:a=>a.shiftKey}),createColumn:(a,b)=>{a.getAutoSortingFn=()=>{let c=b.getFilteredRowModel().flatRows.slice(10),d=!1;for(let b of c){let c=null==b?void 0:b.getValue(a.id);if("[object Date]"===Object.prototype.toString.call(c))return bH.datetime;if("string"==typeof c&&(d=!0,c.split(bD).length>1))return bH.alphanumeric}return d?bH.text:bH.basic},a.getAutoSortDir=()=>{let c=b.getFilteredRowModel().flatRows[0];return"string"==typeof(null==c?void 0:c.getValue(a.id))?"asc":"desc"},a.getSortingFn=()=>{var c,d;if(!a)throw Error();return a7(a.columnDef.sortingFn)?a.columnDef.sortingFn:"auto"===a.columnDef.sortingFn?a.getAutoSortingFn():null!=(c=null==(d=b.options.sortingFns)?void 0:d[a.columnDef.sortingFn])?c:bH[a.columnDef.sortingFn]},a.toggleSorting=(c,d)=>{let e=a.getNextSortingOrder(),f=null!=c;b.setSorting(g=>{let h,i=null==g?void 0:g.find(b=>b.id===a.id),j=null==g?void 0:g.findIndex(b=>b.id===a.id),k=[],l=f?c:"desc"===e;if("toggle"!=(h=null!=g&&g.length&&a.getCanMultiSort()&&d?i?"toggle":"add":null!=g&&g.length&&j!==g.length-1?"replace":i?"toggle":"replace")||f||e||(h="remove"),"add"===h){var m;(k=[...g,{id:a.id,desc:l}]).splice(0,k.length-(null!=(m=b.options.maxMultiSortColCount)?m:Number.MAX_SAFE_INTEGER))}else k="toggle"===h?g.map(b=>b.id===a.id?{...b,desc:l}:b):"remove"===h?g.filter(b=>b.id!==a.id):[{id:a.id,desc:l}];return k})},a.getFirstSortDir=()=>{var c,d;return(null!=(c=null!=(d=a.columnDef.sortDescFirst)?d:b.options.sortDescFirst)?c:"desc"===a.getAutoSortDir())?"desc":"asc"},a.getNextSortingOrder=c=>{var d,e;let f=a.getFirstSortDir(),g=a.getIsSorted();return g?(g===f||null!=(d=b.options.enableSortingRemoval)&&!d||!!c&&null!=(e=b.options.enableMultiRemove)&&!e)&&("desc"===g?"asc":"desc"):f},a.getCanSort=()=>{var c,d;return(null==(c=a.columnDef.enableSorting)||c)&&(null==(d=b.options.enableSorting)||d)&&!!a.accessorFn},a.getCanMultiSort=()=>{var c,d;return null!=(c=null!=(d=a.columnDef.enableMultiSort)?d:b.options.enableMultiSort)?c:!!a.accessorFn},a.getIsSorted=()=>{var c;let d=null==(c=b.getState().sorting)?void 0:c.find(b=>b.id===a.id);return!!d&&(d.desc?"desc":"asc")},a.getSortIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().sorting)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.clearSorting=()=>{b.setSorting(b=>null!=b&&b.length?b.filter(b=>b.id!==a.id):[])},a.getToggleSortingHandler=()=>{let c=a.getCanSort();return d=>{c&&(null==d.persist||d.persist(),null==a.toggleSorting||a.toggleSorting(void 0,!!a.getCanMultiSort()&&(null==b.options.isMultiSortEvent?void 0:b.options.isMultiSortEvent(d))))}}},createTable:a=>{a.setSorting=b=>null==a.options.onSortingChange?void 0:a.options.onSortingChange(b),a.resetSorting=b=>{var c,d;a.setSorting(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.sorting)?c:[])},a.getPreSortedRowModel=()=>a.getGroupedRowModel(),a.getSortedRowModel=()=>(!a._getSortedRowModel&&a.options.getSortedRowModel&&(a._getSortedRowModel=a.options.getSortedRowModel(a)),a.options.manualSorting||!a._getSortedRowModel)?a.getPreSortedRowModel():a._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:a=>{var b,c;return null!=(b=null==(c=a.getValue())||null==c.toString?void 0:c.toString())?b:null},aggregationFn:"auto"}),getInitialState:a=>({grouping:[],...a}),getDefaultOptions:a=>({onGroupingChange:a6("grouping",a),groupedColumnMode:"reorder"}),createColumn:(a,b)=>{a.toggleGrouping=()=>{b.setGrouping(b=>null!=b&&b.includes(a.id)?b.filter(b=>b!==a.id):[...null!=b?b:[],a.id])},a.getCanGroup=()=>{var c,d;return(null==(c=a.columnDef.enableGrouping)||c)&&(null==(d=b.options.enableGrouping)||d)&&(!!a.accessorFn||!!a.columnDef.getGroupingValue)},a.getIsGrouped=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.includes(a.id)},a.getGroupedIndex=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.indexOf(a.id)},a.getToggleGroupingHandler=()=>{let b=a.getCanGroup();return()=>{b&&a.toggleGrouping()}},a.getAutoAggregationFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"number"==typeof d?bq.sum:"[object Date]"===Object.prototype.toString.call(d)?bq.extent:void 0},a.getAggregationFn=()=>{var c,d;if(!a)throw Error();return a7(a.columnDef.aggregationFn)?a.columnDef.aggregationFn:"auto"===a.columnDef.aggregationFn?a.getAutoAggregationFn():null!=(c=null==(d=b.options.aggregationFns)?void 0:d[a.columnDef.aggregationFn])?c:bq[a.columnDef.aggregationFn]}},createTable:a=>{a.setGrouping=b=>null==a.options.onGroupingChange?void 0:a.options.onGroupingChange(b),a.resetGrouping=b=>{var c,d;a.setGrouping(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.grouping)?c:[])},a.getPreGroupedRowModel=()=>a.getFilteredRowModel(),a.getGroupedRowModel=()=>(!a._getGroupedRowModel&&a.options.getGroupedRowModel&&(a._getGroupedRowModel=a.options.getGroupedRowModel(a)),a.options.manualGrouping||!a._getGroupedRowModel)?a.getPreGroupedRowModel():a._getGroupedRowModel()},createRow:(a,b)=>{a.getIsGrouped=()=>!!a.groupingColumnId,a.getGroupingValue=c=>{if(a._groupingValuesCache.hasOwnProperty(c))return a._groupingValuesCache[c];let d=b.getColumn(c);return null!=d&&d.columnDef.getGroupingValue?(a._groupingValuesCache[c]=d.columnDef.getGroupingValue(a.original),a._groupingValuesCache[c]):a.getValue(c)},a._groupingValuesCache={}},createCell:(a,b,c,d)=>{a.getIsGrouped=()=>b.getIsGrouped()&&b.id===c.groupingColumnId,a.getIsPlaceholder=()=>!a.getIsGrouped()&&b.getIsGrouped(),a.getIsAggregated=()=>{var b;return!a.getIsGrouped()&&!a.getIsPlaceholder()&&!!(null!=(b=c.subRows)&&b.length)}}},{getInitialState:a=>({expanded:{},...a}),getDefaultOptions:a=>({onExpandedChange:a6("expanded",a),paginateExpandedRows:!0}),createTable:a=>{let b=!1,c=!1;a._autoResetExpanded=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetExpanded)?d:!a.options.manualExpanding){if(c)return;c=!0,a._queue(()=>{a.resetExpanded(),c=!1})}},a.setExpanded=b=>null==a.options.onExpandedChange?void 0:a.options.onExpandedChange(b),a.toggleAllRowsExpanded=b=>{(null!=b?b:!a.getIsAllRowsExpanded())?a.setExpanded(!0):a.setExpanded({})},a.resetExpanded=b=>{var c,d;a.setExpanded(b?{}:null!=(c=null==(d=a.initialState)?void 0:d.expanded)?c:{})},a.getCanSomeRowsExpand=()=>a.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),a.getToggleAllRowsExpandedHandler=()=>b=>{null==b.persist||b.persist(),a.toggleAllRowsExpanded()},a.getIsSomeRowsExpanded=()=>{let b=a.getState().expanded;return!0===b||Object.values(b).some(Boolean)},a.getIsAllRowsExpanded=()=>{let b=a.getState().expanded;return"boolean"==typeof b?!0===b:!(!Object.keys(b).length||a.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},a.getExpandedDepth=()=>{let b=0;return(!0===a.getState().expanded?Object.keys(a.getRowModel().rowsById):Object.keys(a.getState().expanded)).forEach(a=>{let c=a.split(".");b=Math.max(b,c.length)}),b},a.getPreExpandedRowModel=()=>a.getSortedRowModel(),a.getExpandedRowModel=()=>(!a._getExpandedRowModel&&a.options.getExpandedRowModel&&(a._getExpandedRowModel=a.options.getExpandedRowModel(a)),a.options.manualExpanding||!a._getExpandedRowModel)?a.getPreExpandedRowModel():a._getExpandedRowModel()},createRow:(a,b)=>{a.toggleExpanded=c=>{b.setExpanded(d=>{var e;let f=!0===d||!!(null!=d&&d[a.id]),g={};if(!0===d?Object.keys(b.getRowModel().rowsById).forEach(a=>{g[a]=!0}):g=d,c=null!=(e=c)?e:!f,!f&&c)return{...g,[a.id]:!0};if(f&&!c){let{[a.id]:b,...c}=g;return c}return d})},a.getIsExpanded=()=>{var c;let d=b.getState().expanded;return!!(null!=(c=null==b.options.getIsRowExpanded?void 0:b.options.getIsRowExpanded(a))?c:!0===d||(null==d?void 0:d[a.id]))},a.getCanExpand=()=>{var c,d,e;return null!=(c=null==b.options.getRowCanExpand?void 0:b.options.getRowCanExpand(a))?c:(null==(d=b.options.enableExpanding)||d)&&!!(null!=(e=a.subRows)&&e.length)},a.getIsAllParentsExpanded=()=>{let c=!0,d=a;for(;c&&d.parentId;)c=(d=b.getRow(d.parentId,!0)).getIsExpanded();return c},a.getToggleExpandedHandler=()=>{let b=a.getCanExpand();return()=>{b&&a.toggleExpanded()}}}},{getInitialState:a=>({...a,pagination:{...bx(),...null==a?void 0:a.pagination}}),getDefaultOptions:a=>({onPaginationChange:a6("pagination",a)}),createTable:a=>{let b=!1,c=!1;a._autoResetPageIndex=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetPageIndex)?d:!a.options.manualPagination){if(c)return;c=!0,a._queue(()=>{a.resetPageIndex(),c=!1})}},a.setPagination=b=>null==a.options.onPaginationChange?void 0:a.options.onPaginationChange(a=>a5(b,a)),a.resetPagination=b=>{var c;a.setPagination(b?bx():null!=(c=a.initialState.pagination)?c:bx())},a.setPageIndex=b=>{a.setPagination(c=>{let d=a5(b,c.pageIndex);return d=Math.max(0,Math.min(d,void 0===a.options.pageCount||-1===a.options.pageCount?Number.MAX_SAFE_INTEGER:a.options.pageCount-1)),{...c,pageIndex:d}})},a.resetPageIndex=b=>{var c,d;a.setPageIndex(b?0:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageIndex)?c:0)},a.resetPageSize=b=>{var c,d;a.setPageSize(b?10:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageSize)?c:10)},a.setPageSize=b=>{a.setPagination(a=>{let c=Math.max(1,a5(b,a.pageSize)),d=Math.floor(a.pageSize*a.pageIndex/c);return{...a,pageIndex:d,pageSize:c}})},a.setPageCount=b=>a.setPagination(c=>{var d;let e=a5(b,null!=(d=a.options.pageCount)?d:-1);return"number"==typeof e&&(e=Math.max(-1,e)),{...c,pageCount:e}}),a.getPageOptions=a8(()=>[a.getPageCount()],a=>{let b=[];return a&&a>0&&(b=[...Array(a)].fill(null).map((a,b)=>b)),b},a9(a.options,"debugTable","getPageOptions")),a.getCanPreviousPage=()=>a.getState().pagination.pageIndex>0,a.getCanNextPage=()=>{let{pageIndex:b}=a.getState().pagination,c=a.getPageCount();return -1===c||0!==c&&b<c-1},a.previousPage=()=>a.setPageIndex(a=>a-1),a.nextPage=()=>a.setPageIndex(a=>a+1),a.firstPage=()=>a.setPageIndex(0),a.lastPage=()=>a.setPageIndex(a.getPageCount()-1),a.getPrePaginationRowModel=()=>a.getExpandedRowModel(),a.getPaginationRowModel=()=>(!a._getPaginationRowModel&&a.options.getPaginationRowModel&&(a._getPaginationRowModel=a.options.getPaginationRowModel(a)),a.options.manualPagination||!a._getPaginationRowModel)?a.getPrePaginationRowModel():a._getPaginationRowModel(),a.getPageCount=()=>{var b;return null!=(b=a.options.pageCount)?b:Math.ceil(a.getRowCount()/a.getState().pagination.pageSize)},a.getRowCount=()=>{var b;return null!=(b=a.options.rowCount)?b:a.getPrePaginationRowModel().rows.length}}},{getInitialState:a=>({rowPinning:by(),...a}),getDefaultOptions:a=>({onRowPinningChange:a6("rowPinning",a)}),createRow:(a,b)=>{a.pin=(c,d,e)=>{let f=d?a.getLeafRows().map(a=>{let{id:b}=a;return b}):[],g=new Set([...e?a.getParentRows().map(a=>{let{id:b}=a;return b}):[],a.id,...f]);b.setRowPinning(a=>{var b,d,e,f,h,i;return"bottom"===c?{top:(null!=(e=null==a?void 0:a.top)?e:[]).filter(a=>!(null!=g&&g.has(a))),bottom:[...(null!=(f=null==a?void 0:a.bottom)?f:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)]}:"top"===c?{top:[...(null!=(h=null==a?void 0:a.top)?h:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)],bottom:(null!=(i=null==a?void 0:a.bottom)?i:[]).filter(a=>!(null!=g&&g.has(a)))}:{top:(null!=(b=null==a?void 0:a.top)?b:[]).filter(a=>!(null!=g&&g.has(a))),bottom:(null!=(d=null==a?void 0:a.bottom)?d:[]).filter(a=>!(null!=g&&g.has(a)))}})},a.getCanPin=()=>{var c;let{enableRowPinning:d,enablePinning:e}=b.options;return"function"==typeof d?d(a):null==(c=null!=d?d:e)||c},a.getIsPinned=()=>{let c=[a.id],{top:d,bottom:e}=b.getState().rowPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"top":!!g&&"bottom"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();if(!e)return -1;let f=null==(c="top"===e?b.getTopRows():b.getBottomRows())?void 0:c.map(a=>{let{id:b}=a;return b});return null!=(d=null==f?void 0:f.indexOf(a.id))?d:-1}},createTable:a=>{a.setRowPinning=b=>null==a.options.onRowPinningChange?void 0:a.options.onRowPinningChange(b),a.resetRowPinning=b=>{var c,d;return a.setRowPinning(b?by():null!=(c=null==(d=a.initialState)?void 0:d.rowPinning)?c:by())},a.getIsSomeRowsPinned=b=>{var c,d,e;let f=a.getState().rowPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.top)?void 0:d.length)||(null==(e=f.bottom)?void 0:e.length))},a._getPinnedRows=(b,c,d)=>{var e;return(null==(e=a.options.keepPinnedRows)||e?(null!=c?c:[]).map(b=>{let c=a.getRow(b,!0);return c.getIsAllParentsExpanded()?c:null}):(null!=c?c:[]).map(a=>b.find(b=>b.id===a))).filter(Boolean).map(a=>({...a,position:d}))},a.getTopRows=a8(()=>[a.getRowModel().rows,a.getState().rowPinning.top],(b,c)=>a._getPinnedRows(b,c,"top"),a9(a.options,"debugRows","getTopRows")),a.getBottomRows=a8(()=>[a.getRowModel().rows,a.getState().rowPinning.bottom],(b,c)=>a._getPinnedRows(b,c,"bottom"),a9(a.options,"debugRows","getBottomRows")),a.getCenterRows=a8(()=>[a.getRowModel().rows,a.getState().rowPinning.top,a.getState().rowPinning.bottom],(a,b,c)=>{let d=new Set([...null!=b?b:[],...null!=c?c:[]]);return a.filter(a=>!d.has(a.id))},a9(a.options,"debugRows","getCenterRows"))}},{getInitialState:a=>({rowSelection:{},...a}),getDefaultOptions:a=>({onRowSelectionChange:a6("rowSelection",a),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:a=>{a.setRowSelection=b=>null==a.options.onRowSelectionChange?void 0:a.options.onRowSelectionChange(b),a.resetRowSelection=b=>{var c;return a.setRowSelection(b?{}:null!=(c=a.initialState.rowSelection)?c:{})},a.toggleAllRowsSelected=b=>{a.setRowSelection(c=>{b=void 0!==b?b:!a.getIsAllRowsSelected();let d={...c},e=a.getPreGroupedRowModel().flatRows;return b?e.forEach(a=>{a.getCanSelect()&&(d[a.id]=!0)}):e.forEach(a=>{delete d[a.id]}),d})},a.toggleAllPageRowsSelected=b=>a.setRowSelection(c=>{let d=void 0!==b?b:!a.getIsAllPageRowsSelected(),e={...c};return a.getRowModel().rows.forEach(b=>{bz(e,b.id,d,!0,a)}),e}),a.getPreSelectedRowModel=()=>a.getCoreRowModel(),a.getSelectedRowModel=a8(()=>[a.getState().rowSelection,a.getCoreRowModel()],(b,c)=>Object.keys(b).length?bA(a,c):{rows:[],flatRows:[],rowsById:{}},a9(a.options,"debugTable","getSelectedRowModel")),a.getFilteredSelectedRowModel=a8(()=>[a.getState().rowSelection,a.getFilteredRowModel()],(b,c)=>Object.keys(b).length?bA(a,c):{rows:[],flatRows:[],rowsById:{}},a9(a.options,"debugTable","getFilteredSelectedRowModel")),a.getGroupedSelectedRowModel=a8(()=>[a.getState().rowSelection,a.getSortedRowModel()],(b,c)=>Object.keys(b).length?bA(a,c):{rows:[],flatRows:[],rowsById:{}},a9(a.options,"debugTable","getGroupedSelectedRowModel")),a.getIsAllRowsSelected=()=>{let b=a.getFilteredRowModel().flatRows,{rowSelection:c}=a.getState(),d=!!(b.length&&Object.keys(c).length);return d&&b.some(a=>a.getCanSelect()&&!c[a.id])&&(d=!1),d},a.getIsAllPageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:c}=a.getState(),d=!!b.length;return d&&b.some(a=>!c[a.id])&&(d=!1),d},a.getIsSomeRowsSelected=()=>{var b;let c=Object.keys(null!=(b=a.getState().rowSelection)?b:{}).length;return c>0&&c<a.getFilteredRowModel().flatRows.length},a.getIsSomePageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows;return!a.getIsAllPageRowsSelected()&&b.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},a.getToggleAllRowsSelectedHandler=()=>b=>{a.toggleAllRowsSelected(b.target.checked)},a.getToggleAllPageRowsSelectedHandler=()=>b=>{a.toggleAllPageRowsSelected(b.target.checked)}},createRow:(a,b)=>{a.toggleSelected=(c,d)=>{let e=a.getIsSelected();b.setRowSelection(f=>{var g;if(c=void 0!==c?c:!e,a.getCanSelect()&&e===c)return f;let h={...f};return bz(h,a.id,c,null==(g=null==d?void 0:d.selectChildren)||g,b),h})},a.getIsSelected=()=>{let{rowSelection:c}=b.getState();return bB(a,c)},a.getIsSomeSelected=()=>{let{rowSelection:c}=b.getState();return"some"===bC(a,c)},a.getIsAllSubRowsSelected=()=>{let{rowSelection:c}=b.getState();return"all"===bC(a,c)},a.getCanSelect=()=>{var c;return"function"==typeof b.options.enableRowSelection?b.options.enableRowSelection(a):null==(c=b.options.enableRowSelection)||c},a.getCanSelectSubRows=()=>{var c;return"function"==typeof b.options.enableSubRowSelection?b.options.enableSubRowSelection(a):null==(c=b.options.enableSubRowSelection)||c},a.getCanMultiSelect=()=>{var c;return"function"==typeof b.options.enableMultiRowSelection?b.options.enableMultiRowSelection(a):null==(c=b.options.enableMultiRowSelection)||c},a.getToggleSelectedHandler=()=>{let b=a.getCanSelect();return c=>{var d;b&&a.toggleSelected(null==(d=c.target)?void 0:d.checked)}}}},{getDefaultColumnDef:()=>bs,getInitialState:a=>({columnSizing:{},columnSizingInfo:bt(),...a}),getDefaultOptions:a=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:a6("columnSizing",a),onColumnSizingInfoChange:a6("columnSizingInfo",a)}),createColumn:(a,b)=>{a.getSize=()=>{var c,d,e;let f=b.getState().columnSizing[a.id];return Math.min(Math.max(null!=(c=a.columnDef.minSize)?c:bs.minSize,null!=(d=null!=f?f:a.columnDef.size)?d:bs.size),null!=(e=a.columnDef.maxSize)?e:bs.maxSize)},a.getStart=a8(a=>[a,bw(b,a),b.getState().columnSizing],(b,c)=>c.slice(0,a.getIndex(b)).reduce((a,b)=>a+b.getSize(),0),a9(b.options,"debugColumns","getStart")),a.getAfter=a8(a=>[a,bw(b,a),b.getState().columnSizing],(b,c)=>c.slice(a.getIndex(b)+1).reduce((a,b)=>a+b.getSize(),0),a9(b.options,"debugColumns","getAfter")),a.resetSize=()=>{b.setColumnSizing(b=>{let{[a.id]:c,...d}=b;return d})},a.getCanResize=()=>{var c,d;return(null==(c=a.columnDef.enableResizing)||c)&&(null==(d=b.options.enableColumnResizing)||d)},a.getIsResizing=()=>b.getState().columnSizingInfo.isResizingColumn===a.id},createHeader:(a,b)=>{a.getSize=()=>{let b=0,c=a=>{if(a.subHeaders.length)a.subHeaders.forEach(c);else{var d;b+=null!=(d=a.column.getSize())?d:0}};return c(a),b},a.getStart=()=>{if(a.index>0){let b=a.headerGroup.headers[a.index-1];return b.getStart()+b.getSize()}return 0},a.getResizeHandler=c=>{let d=b.getColumn(a.column.id),e=null==d?void 0:d.getCanResize();return f=>{if(!d||!e||(null==f.persist||f.persist(),bv(f)&&f.touches&&f.touches.length>1))return;let g=a.getSize(),h=a?a.getLeafHeaders().map(a=>[a.column.id,a.column.getSize()]):[[d.id,d.getSize()]],i=bv(f)?Math.round(f.touches[0].clientX):f.clientX,j={},k=(a,c)=>{"number"==typeof c&&(b.setColumnSizingInfo(a=>{var d,e;let f="rtl"===b.options.columnResizeDirection?-1:1,g=(c-(null!=(d=null==a?void 0:a.startOffset)?d:0))*f,h=Math.max(g/(null!=(e=null==a?void 0:a.startSize)?e:0),-.999999);return a.columnSizingStart.forEach(a=>{let[b,c]=a;j[b]=Math.round(100*Math.max(c+c*h,0))/100}),{...a,deltaOffset:g,deltaPercentage:h}}),("onChange"===b.options.columnResizeMode||"end"===a)&&b.setColumnSizing(a=>({...a,...j})))},l=a=>{k("end",a),b.setColumnSizingInfo(a=>({...a,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=c||("undefined"!=typeof document?document:null),n={moveHandler:a=>k("move",a.clientX),upHandler:a=>{null==m||m.removeEventListener("mousemove",n.moveHandler),null==m||m.removeEventListener("mouseup",n.upHandler),l(a.clientX)}},o={moveHandler:a=>(a.cancelable&&(a.preventDefault(),a.stopPropagation()),k("move",a.touches[0].clientX),!1),upHandler:a=>{var b;null==m||m.removeEventListener("touchmove",o.moveHandler),null==m||m.removeEventListener("touchend",o.upHandler),a.cancelable&&(a.preventDefault(),a.stopPropagation()),l(null==(b=a.touches[0])?void 0:b.clientX)}},p=!!function(){if("boolean"==typeof bu)return bu;let a=!1;try{let b=()=>{};window.addEventListener("test",b,{get passive(){return a=!0,!1}}),window.removeEventListener("test",b)}catch(b){a=!1}return bu=a}()&&{passive:!1};bv(f)?(null==m||m.addEventListener("touchmove",o.moveHandler,p),null==m||m.addEventListener("touchend",o.upHandler,p)):(null==m||m.addEventListener("mousemove",n.moveHandler,p),null==m||m.addEventListener("mouseup",n.upHandler,p)),b.setColumnSizingInfo(a=>({...a,startOffset:i,startSize:g,deltaOffset:0,deltaPercentage:0,columnSizingStart:h,isResizingColumn:d.id}))}}},createTable:a=>{a.setColumnSizing=b=>null==a.options.onColumnSizingChange?void 0:a.options.onColumnSizingChange(b),a.setColumnSizingInfo=b=>null==a.options.onColumnSizingInfoChange?void 0:a.options.onColumnSizingInfoChange(b),a.resetColumnSizing=b=>{var c;a.setColumnSizing(b?{}:null!=(c=a.initialState.columnSizing)?c:{})},a.resetHeaderSizeInfo=b=>{var c;a.setColumnSizingInfo(b?bt():null!=(c=a.initialState.columnSizingInfo)?c:bt())},a.getTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getLeftTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getLeftHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getCenterTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getCenterHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getRightTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getRightHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0}}}];function bJ(a,b){var c,d,f;let g;return a?"function"==typeof(d=c=a)&&(g=Object.getPrototypeOf(d)).prototype&&g.prototype.isReactComponent||"function"==typeof c||"object"==typeof(f=c)&&"symbol"==typeof f.$$typeof&&["react.memo","react.forward_ref"].includes(f.$$typeof.description)?e.createElement(a,b):a:null}let bK="diffView",bL="previousDocument",bM="nextDocument";function bN(){let a,b,c,e=(0,d.c)(9),{navigate:f,state:g}=(0,ay.useRouter)();e[0]!==f||e[1]!==g?(a=a=>{let{mode:b,previousDocument:c,nextDocument:d}=a,e={...(0,aJ.default)(g._searchParams),...b?{[bK]:b}:{},...c?{[bL]:[c.type,c.id].join(",")}:{},...d?{[bM]:[d.type,d.id].join(",")}:{}};f({...g,_searchParams:(0,aK.default)(e)})},e[0]=f,e[1]=g,e[2]=a):a=e[2];let h=a;e[3]!==f||e[4]!==g?(b=()=>{f({...g,_searchParams:(g._searchParams??[]).filter(bO)})},e[3]=f,e[4]=g,e[5]=b):b=e[5];let i=b;return e[6]!==i||e[7]!==h?(c={navigateDiffView:h,exitDiffView:i},e[6]=i,e[7]=h,e[8]=c):c=e[8],c}function bO(a){let[b]=a;return![bK,bL,bM].includes(b)}let bP=["version"];function bQ(a){let b,c,f,g,h,i,j,k,l=(0,d.c)(22);l[0]!==a?(b=void 0===a?{}:a,l[0]=a,l[1]=b):b=l[1];let{onParamsError:m}=b,{state:n}=(0,ay.useRouter)();if(l[2]!==n._searchParams){let a=new URLSearchParams(n._searchParams);f=a.get(bL),c=a.get(bM),g=a.get(bK),l[2]=n._searchParams,l[3]=c,l[4]=f,l[5]=g}else c=l[3],f=l[4],g=l[5];let o=g,p=[f,c,o].some(bR),q=f??"",r=c??"",s=o??"";l[6]!==q||l[7]!==r||l[8]!==s?(h=function({previousDocument:a,nextDocument:b,mode:c}){let d=[],[e,f]=a.split(",").filter(Boolean),[g,h]=b.split(",").filter(Boolean);return bP.includes(c)||d.push(["invalidModeParam",c]),(typeof e>"u"||typeof f>"u")&&d.push(["invalidPreviousDocumentParam",a]),(typeof g>"u"||typeof h>"u")&&d.push(["invalidNextDocumentParam",b]),0!==d.length?{result:"error",errors:d}:{result:"success",params:{mode:c,documents:{previous:{type:e,id:f},next:{type:g,id:h}}}}}({previousDocument:q,nextDocument:r,mode:s}),l[6]=q,l[7]=r,l[8]=s,l[9]=h):h=l[9];let t=h;if(l[10]!==p||l[11]!==m||l[12]!==t.errors||l[13]!==t.result?(i=()=>{"error"===t.result&&p&&m?.(t.errors)},l[10]=p,l[11]=m,l[12]=t.errors,l[13]=t.result,l[14]=i):i=l[14],l[15]!==p||l[16]!==m||l[17]!==t?(j=[p,m,t],l[15]=p,l[16]=m,l[17]=t,l[18]=j):j=l[18],(0,e.useEffect)(i,j),"error"===t.result){let a;return l[19]===Symbol.for("react.memo_cache_sentinel")?(a={isActive:!1},l[19]=a):a=l[19],a}return l[20]!==t.params?(k={state:"ready",isActive:!0,...t.params},l[20]=t.params,l[21]=k):k=l[21],k}function bR(a){return null!==a}function bS(a){return null!==a}function bT(a,b){return(0,g.isPublishedId)(a)?"published":(0,g.isDraftId)(a)?"draft":b.find(({_id:b})=>(0,f.getReleaseIdFromReleaseDocumentId)(b)===(0,g.getVersionFromId)(a))}let bU=at.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,bV=at.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,bW=a=>{let b,e,g,h,i,k,l,m,n,o,p,q,r,t,u,v=(0,d.c)(44),{documentId:w,state:x}=a,{t:y}=(0,f.useTranslation)(s);v[0]!==w?(b={documentId:w},v[0]=w,v[1]=b):b=v[1];let{data:z}=(0,f.useDocumentVersions)(b),{exitDiffView:A,navigateDiffView:B}=bN(),{documents:C}=bQ(),D=(0,f.useActiveReleases)();v[2]!==z?(e=z.flatMap(bZ),v[2]=z,v[3]=e):e=v[3];let E=e;if(v[4]!==D.data||v[5]!==E){let a;v[7]!==E?(a=a=>{let b=(0,f.getReleaseIdFromReleaseDocumentId)(a._id);return"u">typeof b&&E.includes(b)},v[7]=E,v[8]=a):a=v[8],g=D.data.filter(a),v[4]=D.data,v[5]=E,v[6]=g}else g=v[6];let F=g;v[9]!==C||v[10]!==B?(h=a=>{"u">typeof C?.previous&&B({previousDocument:{...C.previous,id:a}})},v[9]=C,v[10]=B,v[11]=h):h=v[11];let G=h;v[12]!==C||v[13]!==B?(i=a=>{"u">typeof C?.next&&B({nextDocument:{...C.next,id:a}})},v[12]=C,v[13]=B,v[14]=i):i=v[14];let H=i;return v[15]!==y?(k=y("compare-versions.title"),v[15]=y,v[16]=k):k=v[16],v[17]!==k?(l=(0,c.jsx)(ap.Box,{padding:4,children:(0,c.jsx)(ap.Text,{as:"h1",size:1,muted:!0,children:k})}),v[17]=k,v[18]=l):l=v[18],v[19]!==w||v[20]!==C||v[21]!==G||v[22]!==F||v[23]!==x?(m="u">typeof C?.previous&&(0,c.jsx)(bX,{releases:F,onSelectRelease:G,role:"previous",documentId:w,state:x,document:C.previous}),v[19]=w,v[20]=C,v[21]=G,v[22]=F,v[23]=x,v[24]=m):m=v[24],v[25]!==l||v[26]!==m?(n=(0,c.jsxs)(bV,{children:[l,m]}),v[25]=l,v[26]=m,v[27]=n):n=v[27],v[28]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(ap.Flex,{align:"center",paddingX:3,children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(j.TransferIcon,{})})}),v[28]=o):o=v[28],v[29]!==w||v[30]!==C||v[31]!==H||v[32]!==F||v[33]!==x?(p="u">typeof C?.next&&(0,c.jsx)(bX,{releases:F,onSelectRelease:H,role:"next",documentId:w,state:x,document:C.next}),v[29]=w,v[30]=C,v[31]=H,v[32]=F,v[33]=x,v[34]=p):p=v[34],v[35]===Symbol.for("react.memo_cache_sentinel")?(q={justifySelf:"end"},v[35]=q):q=v[35],v[36]!==A?(r=(0,c.jsx)(ap.Box,{padding:3,style:q,children:(0,c.jsx)(ap.Button,{icon:j.CloseIcon,mode:"bleed",onClick:A,padding:2})}),v[36]=A,v[37]=r):r=v[37],v[38]!==p||v[39]!==r?(t=(0,c.jsxs)(bV,{children:[p,r]}),v[38]=p,v[39]=r,v[40]=t):t=v[40],v[41]!==t||v[42]!==n?(u=(0,c.jsxs)(bU,{children:[n,o,t]}),v[41]=t,v[42]=n,v[43]=u):u=v[43],u},bX=a=>{let b,e,h,i,k,l,m,n,o,p,q=(0,d.c)(41),{releases:r,onSelectRelease:t,role:u,documentId:v,document:w}=a;q[0]!==r?(b=void 0===r?[]:r,q[0]=r,q[1]=b):b=q[1];let x=b;q[2]!==w.id?(e=(0,g.getPublishedId)(w.id),q[2]=w.id,q[3]=e):e=q[3];let{published:y,draft:z}=(0,f.useEditState)(e,w.type);q[4]!==w.id||q[5]!==x?(h=bT(w.id,x),q[4]=w.id,q[5]=x,q[6]=h):h=q[6];let A=h,{t:B}=(0,f.useTranslation)(s),{t:C}=(0,f.useTranslation)(),{document:D}=(0,f.useWorkspace)(),{drafts:E}=D,{enabled:F}=E;if(q[7]!==A||q[8]!==C||q[9]!==B?(i=function({selected:a,tCore:b,tStructure:d}){if(typeof a>"u")return{text:b("common.loading"),tone:"neutral",disabled:!0};if((0,f.isReleaseDocument)(a)){let d=a?(0,f.getReleaseTone)(a):"neutral";return{text:a?.metadata.title||b("release.placeholder-untitled-release"),icon:(0,c.jsx)(f.ReleaseAvatar,{padding:1,tone:d}),iconRight:a&&(0,f.isReleaseScheduledOrScheduling)(a)?(0,c.jsx)(j.LockIcon,{}):void 0,tone:d}}let e="published"===a?"positive":"caution";return{text:d(["compare-versions.status",a].join(".")),icon:(0,c.jsx)(f.ReleaseAvatar,{padding:1,tone:e}),tone:e}}({selected:A,tCore:C,tStructure:B}),q[7]=A,q[8]=C,q[9]=B,q[10]=i):i=q[10],q[11]!==i?(k=(0,c.jsx)(ap.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...i}),q[11]=i,q[12]=k):k=q[12],q[13]!==v||q[14]!==t||q[15]!==y||q[16]!==A?(l=y&&(0,c.jsx)(bY,{type:"published",onSelect:t,isSelected:"published"===A,documentId:v}),q[13]=v,q[14]=t,q[15]=y,q[16]=A,q[17]=l):l=q[17],q[18]!==v||q[19]!==z||q[20]!==F||q[21]!==t||q[22]!==A?(m=F&&z&&(0,c.jsx)(bY,{type:"draft",onSelect:t,isSelected:"draft"===A,documentId:v}),q[18]=v,q[19]=z,q[20]=F,q[21]=t,q[22]=A,q[23]=m):m=q[23],q[24]!==v||q[25]!==t||q[26]!==x||q[27]!==A){let a;q[29]!==v||q[30]!==t||q[31]!==A?(a=a=>(0,c.jsx)(bY,{release:a,onSelect:t,isSelected:"string"!=typeof A&&A?._id===a._id,documentId:v},a._id),q[29]=v,q[30]=t,q[31]=A,q[32]=a):a=q[32],n=x.map(a),q[24]=v,q[25]=t,q[26]=x,q[27]=A,q[28]=n}else n=q[28];return q[33]!==m||q[34]!==n||q[35]!==l?(o=(0,c.jsxs)(ap.Menu,{children:[l,m,n]}),q[33]=m,q[34]=n,q[35]=l,q[36]=o):o=q[36],q[37]!==u||q[38]!==o||q[39]!==k?(p=(0,c.jsx)(ao.MenuButton,{id:u,button:k,menu:o}),q[37]=u,q[38]=o,q[39]=k,q[40]=p):p=q[40],p},bY=a=>{let b,e,h,i,k,l,m,n,o,p,q,r,t=(0,d.c)(51),{type:u,release:v,onSelect:w,isSelected:x,documentId:y}=a,{t:z}=(0,f.useTranslation)(),{t:A}=(0,f.useTranslation)(s);t[0]!==y||t[1]!==w||t[2]!==v||t[3]!==u?(b=()=>{"draft"===u?w((0,g.getDraftId)(y)):"published"===u?w((0,g.getPublishedId)(y)):"u">typeof v?._id&&w((0,g.getVersionId)(y,(0,f.getReleaseIdFromReleaseDocumentId)(v._id)))},t[0]=y,t[1]=w,t[2]=v,t[3]=u,t[4]=b):b=t[4];let B=b;if(u){let a,b,d,e,g,h,i="published"===u?"positive":"caution";t[5]!==i?(a=(0,c.jsx)(f.ReleaseAvatar,{padding:2,tone:i}),t[5]=i,t[6]=a):a=t[6],t[7]!==u?(b=["compare-versions.status",u],t[7]=u,t[8]=b):b=t[8];let j=b.join(".");return t[9]!==j||t[10]!==A?(d=A(j),t[9]=j,t[10]=A,t[11]=d):d=t[11],t[12]!==d?(e=(0,c.jsx)(ap.Box,{paddingY:2,children:(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:d})}),t[12]=d,t[13]=e):e=t[13],t[14]!==a||t[15]!==e?(g=(0,c.jsxs)(ap.Flex,{gap:1,children:[a,e]}),t[14]=a,t[15]=e,t[16]=g):g=t[16],t[17]!==x||t[18]!==B||t[19]!==g?(h=(0,c.jsx)(ap.MenuItem,{padding:1,paddingRight:3,onClick:B,pressed:x,children:g}),t[17]=x,t[18]=B,t[19]=g,t[20]=h):h=t[20],h}t[21]!==v?(e=v?(0,f.getReleaseTone)(v):"neutral",t[21]=v,t[22]=e):e=t[22];let C=e;return t[23]!==C?(h=(0,c.jsx)(f.ReleaseAvatar,{padding:2,tone:C}),t[23]=C,t[24]=h):h=t[24],t[25]!==v.metadata.title||t[26]!==z?(i=v.metadata.title||z("release.placeholder-untitled-release"),t[25]=v.metadata.title,t[26]=z,t[27]=i):i=t[27],t[28]!==i?(k=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:i}),t[28]=i,t[29]=k):k=t[29],t[30]!==v.metadata.releaseType||t[31]!==z?(l=["asap","undecided"].includes(v.metadata.releaseType)&&(0,c.jsx)(ap.Text,{muted:!0,size:1,children:z(`release.type.${v.metadata.releaseType}`)}),t[30]=v.metadata.releaseType,t[31]=z,t[32]=l):l=t[32],t[33]!==v?(m="scheduled"===v.metadata.releaseType&&(0,c.jsx)(ap.Text,{muted:!0,size:1,children:(0,f.formatRelativeLocalePublishDate)(v)}),t[33]=v,t[34]=m):m=t[34],t[35]!==k||t[36]!==l||t[37]!==m?(n=(0,c.jsxs)(ap.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[k,l,m]}),t[35]=k,t[36]=l,t[37]=m,t[38]=n):n=t[38],t[39]!==v?(o=(0,f.isReleaseScheduledOrScheduling)(v)&&(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(j.LockIcon,{})})}),t[39]=v,t[40]=o):o=t[40],t[41]!==o?(p=(0,c.jsx)(ap.Flex,{flex:"none",children:o}),t[41]=o,t[42]=p):p=t[42],t[43]!==p||t[44]!==h||t[45]!==n?(q=(0,c.jsxs)(ap.Flex,{gap:1,children:[h,n,p]}),t[43]=p,t[44]=h,t[45]=n,t[46]=q):q=t[46],t[47]!==x||t[48]!==B||t[49]!==q?(r=(0,c.jsx)(ap.MenuItem,{padding:1,paddingRight:3,onClick:B,pressed:x,children:q}),t[47]=x,t[48]=B,t[49]=q,t[50]=r):r=t[50],r};function bZ(a){return(0,g.getVersionFromId)(a)??[]}let b$=at.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function b_(a){return a.document?.components?.unstable_layout}function b0(a){return a.path}function b1(a,b){return(0,aT.default)(a.path,b.path)}let b2=at.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,b3=(0,at.styled)(ap.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,b4=(0,at.styled)(ap.Container)`
  width: auto;
`,b5=(0,e.forwardRef)(function(a,b){let g,i,j,k,l,m,n,o,p,q,r,s,t=(0,d.c)(36),{role:u,documentType:v,documentId:w,scrollElement:x,syncChannel:y,compareDocument:z}=a,A=(0,e.useRef)(null),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)(null);t[0]!==z||t[1]!==w||t[2]!==v||t[3]!==u||t[4]!==x||t[5]!==y?(g=()=>(0,c.jsx)(b6,{compareDocument:z,documentId:w,documentType:v,role:u,scrollElement:x,syncChannel:y}),t[0]=z,t[1]=w,t[2]=v,t[3]=u,t[4]=x,t[5]=y,t[6]=g):g=t[6];let F=g;t[7]!==F?(i={pick:b_,defaultComponent:F},t[7]=F,t[8]=i):i=t[8];let G=(0,f.useMiddlewareComponents)(i);t[9]===Symbol.for("react.memo_cache_sentinel")?(j={isInteractive:!1,onOpenReviewChanges:aS.default,onSetFocus:aS.default,isReviewChangesOpen:!1},t[9]=j):j=t[9];let H=`${u}-document`;t[10]!==H?(k={"--grid-area":H},t[10]=H,t[11]=k):k=t[11];let I=k,J="next"===u,K="next"!==u&&"none";t[12]!==K?(l={"--scrollbar-width":K},t[12]=K,t[13]=l):l=t[13];let L=l;return t[14]!==G||t[15]!==w||t[16]!==v?(m=(0,c.jsx)(aq.DialogProvider,{position:"absolute",children:(0,c.jsx)(b4,{ref:A,padding:4,width:1,children:(0,c.jsx)(G,{documentId:w,documentType:v})})}),t[14]=G,t[15]=w,t[16]=v,t[17]=m):m=t[17],t[18]!==B||t[19]!==m?(n=(0,c.jsx)(ap.PortalProvider,{element:B,children:m}),t[18]=B,t[19]=m,t[20]=n):n=t[20],t[21]!==b||t[22]!==L||t[23]!==n?(o=(0,c.jsx)(b2,{ref:b,style:L,children:n}),t[21]=b,t[22]=L,t[23]=n,t[24]=o):o=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,c.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:C}),t[25]=p):p=t[25],t[26]!==o||t[27]!==I||t[28]!==J?(q=(0,c.jsxs)(b3,{ref:E,style:I,borderLeft:J,children:[o,p]}),t[26]=o,t[27]=I,t[28]=J,t[29]=q):q=t[29],t[30]!==D||t[31]!==q?(r=(0,c.jsx)(ap.BoundaryElementProvider,{element:D,children:q}),t[30]=D,t[31]=q,t[32]=r):r=t[32],t[33]!==x||t[34]!==r?(s=(0,c.jsx)(h.ReviewChangesContext.Provider,{value:j,children:(0,c.jsx)(f.ChangeIndicatorsTracker,{children:(0,c.jsx)(f.VirtualizerScrollInstanceProvider,{scrollElement:x,containerElement:A,children:r})})}),t[33]=x,t[34]=r,t[35]=s):s=t[35],s}),b6=a=>{var b,i;let j,k,l,m,n,o,p,q,r,s,t,u=(0,d.c)(52),{role:v,documentType:w,documentId:x,syncChannel:y,compareDocument:z}=a;u[0]!==z?(j={compareDocument:z},u[0]=z,u[1]=j):j=u[1];let A=function(a){let b,c,e,h=(0,d.c)(4),{compareDocument:i}=a;h[0]!==i.id?(b=(0,g.getPublishedId)(i.id),h[0]=i.id,h[1]=b):b=h[1];let j=i.type;h[2]!==i.id?(c=(0,g.getVersionFromId)(i.id),h[2]=i.id,h[3]=c):c=h[3];let k=(0,f.useEditState)(b,j,"low",c);a:{if((0,g.isVersionId)(i.id)){e=k.version??void 0;break a}if((0,g.isDraftId)(i.id)){e=k.draft??void 0;break a}if((0,g.isPublishedId)(i.id)){e=k.published??void 0;break a}e=void 0}return e}(j),{data:B}=(0,f.useActiveReleases)(),[C]=(0,e.useState)(b7);u[2]!==x||u[3]!==B?(k=bT(x,B),u[2]=x,u[3]=B,u[4]=k):k=u[4];let D=k;u[5]!==x?(l=(0,g.getPublishedId)(x),u[5]=x,u[6]=l):l=u[6],u[7]!==x?(b=x,m=(0,g.isVersionId)(b)?(0,g.getVersionFromId)(b):(0,g.isPublishedId)(b)?"published":void 0,u[7]=x,u[8]=m):m=u[8],u[9]!==x?(n=(0,g.getVersionFromId)(x),u[9]=x,u[10]=n):n=u[10],u[11]!==A||u[12]!==w||u[13]!==l||u[14]!==m||u[15]!==n?(o={documentId:l,documentType:w,selectedPerspectiveName:m,releaseId:n,comparisonValue:A,displayInlineChanges:!0},u[11]=A,u[12]=w,u[13]=l,u[14]=m,u[15]=n,u[16]=o):o=u[16];let{formState:E,onChange:F,onFocus:G,onBlur:H,onSetActiveFieldGroup:I,onSetCollapsedFieldSet:J,onSetCollapsedPath:K,collapsedFieldSets:L,ready:M,collapsedPaths:N,schemaType:O,value:P,onProgrammaticFocus:Q,openPath:R,onPathOpen:S}=(0,f.useDocumentForm)(o),T=null===E||!M;u[17]!==v||u[18]!==y?(p={id:v,syncChannel:y},u[17]=v,u[18]=y,u[19]=p):p=u[19];let U=function(a){let b,c,e,f=(0,d.c)(11),{syncChannel:g,id:h}=a;f[0]!==h||f[1]!==g?(b=a=>g.next({...a,source:h}),f[0]=h,f[1]=g,f[2]=b):b=f[2];let i=b;if(f[3]!==h||f[4]!==g){let a;f[6]!==h?(a=a=>{let{source:b}=a;return b!==h},f[6]=h,f[7]=a):a=f[7],c=g.pipe((0,aD.distinctUntilChanged)(b1),(0,aD.filter)(a),(0,aD.map)(b0)),f[3]=h,f[4]=g,f[5]=c}else c=f[5];let j=c;return f[8]!==j||f[9]!==i?(e={path:j,push:i},f[8]=j,f[9]=i,f[10]=e):e=f[10],e}(p);u[20]!==S||u[21]!==U||u[22]!==v?(q=a=>{S(a),U.push({source:v,path:a})},u[20]=S,u[21]=U,u[22]=v,u[23]=q):q=u[23];let V=q;return u[24]!==S||u[25]!==Q||u[26]!==U.path?(r=()=>{let a=U.path.subscribe(a=>{S(a),Q(a)});return()=>a.unsubscribe()},u[24]=S,u[25]=Q,u[26]=U.path,u[27]=r):r=u[27],u[28]!==S||u[29]!==Q||u[30]!==U.path||u[31]!==v?(s=[S,Q,U.path,v],u[28]=S,u[29]=Q,u[30]=U.path,u[31]=v,u[32]=s):s=u[32],(0,e.useEffect)(r,s),u[33]!==L||u[34]!==N||u[35]!==A||u[36]!==E||u[37]!==T||u[38]!==H||u[39]!==F||u[40]!==G||u[41]!==V||u[42]!==I||u[43]!==J||u[44]!==K||u[45]!==R||u[46]!==C||u[47]!==D||u[48]!==v||u[49]!==O||u[50]!==P?(t=T?(0,c.jsx)(f.LoadingBlock,{showText:!0}):(0,c.jsx)(h.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,c.jsx)(f.FormBuilder,{__internal_patchChannel:C,id:`diffView-pane-${v}`,onChange:F,onPathFocus:G,onPathOpen:V,onPathBlur:H,onFieldGroupSelect:I,onSetFieldSetCollapsed:J,onSetPathCollapsed:K,collapsedPaths:N,collapsedFieldSets:L,focusPath:E.focusPath,openPath:R,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(i=D)?"drafts":i,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:O,value:P,compareValue:A})}),u[33]=L,u[34]=N,u[35]=A,u[36]=E,u[37]=T,u[38]=H,u[39]=F,u[40]=G,u[41]=V,u[42]=I,u[43]=J,u[44]=K,u[45]=R,u[46]=C,u[47]=D,u[48]=v,u[49]=O,u[50]=P,u[51]=t):t=u[51],t};function b7(){return(0,f.createPatchChannel)()}let b8=at.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,b9=a=>{let b,e,f=(0,d.c)(6),{children:g,documentId:h,documentType:i}=a;f[0]!==h||f[1]!==i?(b={intent:"edit",params:{id:h,type:i}},f[0]=h,f[1]=i,f[2]=b):b=f[2];let{href:j}=(0,ay.useIntentLink)(b);return f[3]!==g||f[4]!==j?(e=(0,c.jsx)(b8,{href:j,target:"_blank",rel:"noopener noreferrer",children:g}),f[3]=g,f[4]=j,f[5]=e):e=f[5],e},ca=a=>{var b;let f,g,i,j,k,l,m,n,o,p,q,r,s=(0,d.c)(24),{documentId:t}=a,{documents:u,state:v,mode:w}=bQ(),{exitDiffView:x}=bN(),y=((o=(0,d.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(n=new aD.Subject,o[0]=n):n=o[0],n),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(null),D=(0,e.useContext)(h.ReferenceInputOptionsContext);s[0]!==D?(f={...D,disableNew:!0,EditReferenceLinkComponent:b9},s[0]=D,s[1]=f):f=s[1];let E=f;return s[2]!==B||s[3]!==z?(g=[z,B],s[2]=B,s[3]=z,s[4]=g):g=s[4],b=g,(r=(0,d.c)(3))[0]!==b?(p=()=>{let a=b.filter(bS);if(0===a.length)return;let c=new aR(a);return()=>c.destroy()},q=[b],r[0]=b,r[1]=p,r[2]=q):(p=r[1],q=r[2]),(0,e.useEffect)(p,q),s[5]!==t||s[6]!==w||s[7]!==v?(i="version"===w&&(0,c.jsx)(bW,{documentId:t,state:v}),s[5]=t,s[6]=w,s[7]=v,s[8]=i):i=s[8],s[9]!==u||s[10]!==B||s[11]!==z||s[12]!==v||s[13]!==y?(j="ready"===v&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b5,{documentType:u.previous.type,documentId:u.previous.id,role:"previous",ref:A,scrollElement:z,syncChannel:y,compareDocument:u.previous}),(0,c.jsx)(b5,{documentType:u.next.type,documentId:u.next.id,role:"next",ref:C,scrollElement:B,syncChannel:y,compareDocument:u.previous})]}),s[9]=u,s[10]=B,s[11]=z,s[12]=v,s[13]=y,s[14]=j):j=s[14],s[15]!==i||s[16]!==j?(k=(0,c.jsxs)(b$,{children:[i,j]}),s[15]=i,s[16]=j,s[17]=k):k=s[17],s[18]!==x||s[19]!==k?(l=(0,c.jsx)(ao.Dialog,{id:"diffView",width:"auto",onClose:x,padding:!1,__unstable_hideCloseButton:!0,children:k}),s[18]=x,s[19]=k,s[20]=l):l=s[20],s[21]!==E||s[22]!==l?(m=(0,c.jsx)(h.ReferenceInputOptionsContext.Provider,{value:E,children:l}),s[21]=E,s[22]=l,s[23]=m):m=s[23],m},cb=a=>{let b,e,g,h=(0,d.c)(9),{children:i,documentId:j}=a,k=(0,aq.useToast)(),{t:l}=(0,f.useTranslation)(s);h[0]!==l||h[1]!==k?(b={onParamsError:a=>{k.push({id:"diffViewParamsParsingError",status:"error",title:l("compare-version.error.invalidParams.title"),description:(0,c.jsx)("ul",{children:a.map(a=>{let[b,d]=a;return(0,c.jsx)("li",{children:l(`compare-version.error.${b}`,{input:d})},b)})})})}},h[0]=l,h[1]=k,h[2]=b):b=h[2];let{isActive:m}=bQ(b);return h[3]!==j||h[4]!==m?(e=m&&(0,c.jsx)(ca,{documentId:j}),h[3]=j,h[4]=m,h[5]=e):e=h[5],h[6]!==i||h[7]!==e?(g=(0,c.jsxs)(c.Fragment,{children:[i,e]}),h[6]=i,h[7]=e,h[8]=g):g=h[8],g};function cc(){let a=(0,e.useContext)(h.PaneLayoutContext);if(!a)throw Error("PaneLayout: missing context value");return a}let cd=(0,at.styled)(ap.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function ce(a){let b,f,g=(0,d.c)(7),{disabled:h,element:i}=a,{resize:j}=cc(),[k,l]=(0,e.useState)(!1);g[0]!==i||g[1]!==j?(b=a=>{if(!i)return;l(!0),a.preventDefault();let b=a.pageX;j("start",i,0);let c=a=>{a.preventDefault(),j("move",i,a.pageX-b)},d=a=>{a.preventDefault(),l(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),j("end",i,0)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},g[0]=i,g[1]=j,g[2]=b):b=g[2];let m=b,n=h?"":void 0,o=k?"":void 0;return g[3]!==m||g[4]!==n||g[5]!==o?(f=(0,c.jsx)(cd,{"data-disabled":n,"data-dragging":o,onMouseDown:m}),g[3]=m,g[4]=n,g[5]=o,g[6]=f):f=g[6],f}let cf=(0,at.styled)(ap.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,cg=(0,e.forwardRef)(function(a,b){let g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=(0,d.c)(86);K[0]!==a?({children:g,currentMinWidth:j,currentMaxWidth:i,flex:o,id:k,minWidth:m,maxWidth:l,selected:p,...n}=a,K[0]=a,K[1]=g,K[2]=i,K[3]=j,K[4]=k,K[5]=l,K[6]=m,K[7]=n,K[8]=o,K[9]=p):(g=K[1],i=K[2],j=K[3],k=K[4],l=K[5],m=K[6],n=K[7],o=K[8],p=K[9]);let L=void 0===o?1:o,M=void 0!==p&&p,[N,O]=(0,e.useState)(null),{collapse:P,collapsed:Q,expand:R,expandedElement:S,mount:T,panes:U}=cc();if(K[10]!==U||K[11]!==N){let a;K[14]!==N?(a=a=>a.element===N,K[14]=N,K[15]=a):a=K[15],r=(q=U.find(a))&&U.indexOf(q),K[10]=U,K[11]=N,K[12]=q,K[13]=r}else q=K[12],r=K[13];let V=r,W="number"==typeof V?U[V+1]:void 0,X=V===U.length-1,Y=S===N,Z=!Q&&(q?.collapsed||!1),$=W?.collapsed||!1,_=(0,e.useRef)(null),aa=q?.flex??L,ab=q?.currentMinWidth??j,ac=q?.currentMaxWidth??i;K[16]===Symbol.for("react.memo_cache_sentinel")?(s=()=>_.current,K[16]=s):s=K[16],(0,e.useImperativeHandle)(b,s),K[17]===Symbol.for("react.memo_cache_sentinel")?(t=a=>{O(a),_.current=a},K[17]=t):t=K[17];let ad=t;K[18]!==i||K[19]!==j||K[20]!==L||K[21]!==k||K[22]!==l||K[23]!==m||K[24]!==T||K[25]!==N?(u=()=>{if(N)return T(N,{currentMinWidth:j,currentMaxWidth:i,flex:L,id:k,minWidth:m,maxWidth:l})},v=[j,i,L,k,m,l,T,N],K[18]=i,K[19]=j,K[20]=L,K[21]=k,K[22]=l,K[23]=m,K[24]=T,K[25]=N,K[26]=u,K[27]=v):(u=K[26],v=K[27]),(0,e.useLayoutEffect)(u,v),K[28]!==P||K[29]!==N?(w=()=>{N&&P(N)},K[28]=P,K[29]=N,K[30]=w):w=K[30];let ae=w;K[31]!==R||K[32]!==N?(x=()=>{N&&R(N)},K[31]=R,K[32]=N,K[33]=x):x=K[33];let af=x,ag=!Q&&Z;K[34]!==ae||K[35]!==af||K[36]!==X||K[37]!==V||K[38]!==N||K[39]!==ag?(y={collapse:ae,collapsed:ag,expand:af,index:V,isLast:X,rootElement:N},K[34]=ae,K[35]=af,K[36]=X,K[37]=V,K[38]=N,K[39]=ag,K[40]=y):y=K[40];let ah=y;a:{if(Q){z=void 0;break a}if(Z){z=51;break a}if(0===ab||X){z=m||204;break a}z=ab||m||204}let ai=z;b:{if(Z){A=51;break b}if(Q&&X){A=void 0;break b}if(X){if(l){A=ac??l;break b}A=void 0;break b}A=ac??l}let aj=A,ak=Q&&!X;K[41]!==Z||K[42]!==X||K[43]!==Q||K[44]!==$||K[45]!==N?(B=!X&&!Q&&(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,c.jsx)(ce,{disabled:Z||$,element:N})}),K[41]=Z,K[42]=X,K[43]=Q,K[44]=$,K[45]=N,K[46]=B):B=K[46];let al=B,am=aj===1/0?void 0:aj;K[47]!==aa||K[48]!==ai||K[49]!==am?(C={flex:aa,minWidth:ai,maxWidth:am},K[47]=aa,K[48]=ai,K[49]=am,K[50]=C):C=K[50];let an=C,ao=Q?void 0:"hidden",aq=Z?"":void 0,ar=M?"":void 0;return K[51]!==Z||K[52]!==ac||K[53]!==ab||K[54]!==Y||K[55]!==aa||K[56]!==aj||K[57]!==ai||K[58]!==V?(D=!1,K[51]=Z,K[52]=ac,K[53]=ab,K[54]=Y,K[55]=aa,K[56]=aj,K[57]=ai,K[58]=V,K[59]=D):D=K[59],K[60]!==g||K[61]!==ak?(E=!ak&&(0,c.jsx)(ap.Flex,{direction:"column",height:"fill",children:g}),K[60]=g,K[61]=ak,K[62]=E):E=K[62],K[63]!==N||K[64]!==E?(F=(0,c.jsx)(ap.BoundaryElementProvider,{element:N,children:E}),K[63]=N,K[64]=E,K[65]=F):F=K[65],K[66]!==ak||K[67]!==k||K[68]!==V||K[69]!==n||K[70]!==an||K[71]!==ao||K[72]!==aq||K[73]!==ar||K[74]!==D||K[75]!==F?(G=(0,c.jsxs)(cf,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ak,id:k,overflow:ao,...n,"data-pane-collapsed":aq,"data-pane-index":V,"data-pane-selected":ar,ref:ad,style:an,children:[D,F]}),K[66]=ak,K[67]=k,K[68]=V,K[69]=n,K[70]=an,K[71]=ao,K[72]=aq,K[73]=ar,K[74]=D,K[75]=F,K[76]=G):G=K[76],K[77]!==X||K[78]!==G?(H=(0,c.jsx)(f.IsLastPaneProvider,{isLastPane:X,children:G}),K[77]=X,K[78]=G,K[79]=H):H=K[79],K[80]!==ah||K[81]!==H?(I=(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"pane",children:(0,c.jsx)(h.PaneContext.Provider,{value:ah,children:H})}),K[80]=ah,K[81]=H,K[82]=I):I=K[82],K[83]!==al||K[84]!==I?(J=(0,c.jsxs)(c.Fragment,{children:[I,al]}),K[83]=al,K[84]=I,K[85]=J):J=K[85],J}),ch=(0,at.styled)(ap.Card)`
  position: relative;
  outline: none;
`;function ci(){let a=(0,e.useContext)(h.PaneContext);if(!a)throw Error("Pane: missing context value");return a}ch.displayName="PaneContent__root";let cj=(0,e.forwardRef)(function(a,b){let e,f,g,h,i,j,k=(0,d.c)(14);k[0]!==a?({as:e,children:f,overflow:g,padding:h,...i}=a,k[0]=a,k[1]=e,k[2]=f,k[3]=g,k[4]=h,k[5]=i):(e=k[1],f=k[2],g=k[3],h=k[4],i=k[5]);let{collapsed:l}=ci(),{collapsed:m}=cc(),n=m?void 0:g;return k[6]!==e||k[7]!==f||k[8]!==l||k[9]!==h||k[10]!==b||k[11]!==i||k[12]!==n?(j=(0,c.jsx)(ch,{"data-testid":"pane-content",forwardedAs:e,...i,flex:1,hidden:l,overflow:n,padding:h,ref:b,tone:"inherit",children:f}),k[6]=e,k[7]=f,k[8]=l,k[9]=h,k[10]=b,k[11]=i,k[12]=n,k[13]=j):j=k[13],j});function ck(a){return a?a.toLocaleLowerCase().replaceAll(" ",""):""}let cl={constrainSize:!0,placement:"left-start",portal:!0};function cm(a){let b,e,g,h,i=(0,d.c)(35),{disabled:j,isAfterGroup:k,node:l}=a,m=(0,f.useGetI18nText)("i18n"in l?l:void 0);if("divider"===l.type){let a;return i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ap.MenuDivider,{}),i[0]=a):a=i[0],a}i[1]!==m||i[2]!==l?(b=m(l),i[1]=m,i[2]=l,i[3]=b):b=i[3];let{title:n}=b;if("group"===l.type){let a,b,d,e;if(0===l.children.length)return null;if(l.expanded){let a,b,d;return i[4]!==k?(a=k&&(0,c.jsx)(ap.MenuDivider,{}),i[4]=k,i[5]=a):a=i[5],i[6]!==j||i[7]!==l.children||i[8]!==l.disabled?(b=l.children.map((a,b)=>(0,c.jsx)(cm,{disabled:j||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),i[6]=j,i[7]=l.children,i[8]=l.disabled,i[9]=b):b=i[9],i[10]!==a||i[11]!==b?(d=(0,c.jsxs)(c.Fragment,{children:[a,b]}),i[10]=a,i[11]=b,i[12]=d):d=i[12],d}i[13]!==k?(a=k&&(0,c.jsx)(ap.MenuDivider,{}),i[13]=k,i[14]=a):a=i[14];let f=l.icon;return i[15]!==j||i[16]!==l.children||i[17]!==l.disabled?(b=l.children.map((a,b)=>(0,c.jsx)(cm,{disabled:j||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),i[15]=j,i[16]=l.children,i[17]=l.disabled,i[18]=b):b=i[18],i[19]!==j||i[20]!==l.icon||i[21]!==b||i[22]!==n?(d=(0,c.jsx)(aH.MenuGroup,{disabled:j,icon:f,popover:cl,text:n,children:b}),i[19]=j,i[20]=l.icon,i[21]=b,i[22]=n,i[23]=d):d=i[23],i[24]!==a||i[25]!==d?(e=(0,c.jsxs)(c.Fragment,{children:[a,d]}),i[24]=a,i[25]=d,i[26]=e):e=i[26],e}return i[27]!==k?(e=k&&(0,c.jsx)(ap.MenuDivider,{}),i[27]=k,i[28]=e):e=i[28],i[29]!==j||i[30]!==l?(g=(0,c.jsx)(cn,{disabled:j,node:l}),i[29]=j,i[30]=l,i[31]=g):g=i[31],i[32]!==e||i[33]!==g?(h=(0,c.jsxs)(c.Fragment,{children:[e,g]}),i[32]=e,i[33]=g,i[34]=h):h=i[34],h}function cn(a){let b,e=(0,d.c)(5),{node:f}=a;if(f.intent){let b;return e[0]!==f.intent||e[1]!==a?(b=(0,c.jsx)(cp,{...a,intent:f.intent}),e[0]=f.intent,e[1]=a,e[2]=b):b=e[2],b}return e[3]!==a?(b=(0,c.jsx)(co,{...a}),e[3]=a,e[4]=b):b=e[4],b}function co(a){let b,e,g,h,i,k=(0,d.c)(19),{disabled:l,node:m}=a;k[0]!==m.disabled?(b="object"==typeof m.disabled&&(0,c.jsx)(ap.Text,{size:1,children:m.disabled.reason}),k[0]=m.disabled,k[1]=b):b=k[1];let n=b,{title:o}=(0,f.useI18nText)(m),p=l||!!m.disabled;k[2]!==m.hotkey?(e=m.hotkey?.split("+"),k[2]=m.hotkey,k[3]=e):e=k[3];let q=m.icon,r=m.iconRight||m.selected&&j.CheckmarkIcon,s=m.onAction,t=m.selected,u=m.tone;k[4]!==m.title?(g=ck(m.title),k[4]=m.title,k[5]=g):g=k[5];let v=`action-${g}`;return k[6]!==m.icon||k[7]!==m.onAction||k[8]!==m.selected||k[9]!==m.tone||k[10]!==p||k[11]!==e||k[12]!==r||k[13]!==v||k[14]!==o?(h=(0,c.jsx)(ao.MenuItem,{disabled:p,hotkeys:e,icon:q,iconRight:r,onClick:s,pressed:t,text:o,tone:u,"data-testid":v}),k[6]=m.icon,k[7]=m.onAction,k[8]=m.selected,k[9]=m.tone,k[10]=p,k[11]=e,k[12]=r,k[13]=v,k[14]=o,k[15]=h):h=k[15],k[16]!==h||k[17]!==n?(i=(0,c.jsx)(f.TooltipOfDisabled,{content:n,placement:"left",children:h}),k[16]=h,k[17]=n,k[18]=i):i=k[18],i}function cp(a){let b,e,g,h,i,k,l=(0,d.c)(23),{disabled:m,intent:n,node:o}=a;l[0]!==o.disabled?(b="object"==typeof o.disabled&&(0,c.jsx)(ap.Text,{size:1,children:o.disabled.reason}),l[0]=o.disabled,l[1]=b):b=l[1];let p=b;l[2]!==n.params||l[3]!==n.type?(e={intent:n.type,params:n.params},l[2]=n.params,l[3]=n.type,l[4]=e):e=l[4];let q=(0,ay.useIntentLink)(e);l[5]!==q||l[6]!==o?(g=a=>{q.onClick(a),o.onAction()},l[5]=q,l[6]=o,l[7]=g):g=l[7];let r=g,{title:s}=(0,f.useI18nText)(o),t=m||!!o.disabled;l[8]!==o.hotkey?(h=o.hotkey?.split("+"),l[8]=o.hotkey,l[9]=h):h=l[9];let u=o.selected?j.CheckmarkIcon:void 0;return l[10]!==r||l[11]!==q.href||l[12]!==o.icon||l[13]!==o.selected||l[14]!==o.tone||l[15]!==t||l[16]!==h||l[17]!==u||l[18]!==s?(i=(0,c.jsx)(ao.MenuItem,{as:"a",disabled:t,hotkeys:h,href:q.href,icon:o.icon,iconRight:u,onClick:r,pressed:o.selected,text:s,tone:o.tone}),l[10]=r,l[11]=q.href,l[12]=o.icon,l[13]=o.selected,l[14]=o.tone,l[15]=t,l[16]=h,l[17]=u,l[18]=s,l[19]=i):i=l[19],l[20]!==i||l[21]!==p?(k=(0,c.jsx)(f.TooltipOfDisabled,{content:p,placement:"left",children:i}),l[20]=i,l[21]=p,l[22]=k):k=l[22],k}let cq={constrainSize:!0,placement:"bottom",portal:!0};function cr(a,b){return a.some(a=>"item"===a.type&&a.tone===b||"group"===a.type&&cr(a.children,b))}function cs(a){let b,g,h,i,j,k=(0,d.c)(13),{nodes:l,actionsNodes:m}=a,n=(0,e.useId)(),o=cr(l,"critical"),p=cr(l,"caution"),q=o?"critical":p?"caution":void 0;return k[0]!==q?(b=(0,c.jsx)(f.ContextMenuButton,{tone:q,"data-testid":"pane-context-menu-button"}),k[0]=q,k[1]=b):b=k[1],k[2]!==m?(g=m&&(0,c.jsxs)(c.Fragment,{children:[m,(0,c.jsx)(ap.MenuDivider,{})]}),k[2]=m,k[3]=g):g=k[3],k[4]!==l?(h=l.map((a,b)=>{let d=l[b-1]?.type==="group";return(0,c.jsx)(cm,{isAfterGroup:d,node:a},a.key)}),k[4]=l,k[5]=h):h=k[5],k[6]!==g||k[7]!==h?(i=(0,c.jsxs)(ap.Menu,{children:[g,h]}),k[6]=g,k[7]=h,k[8]=i):i=k[8],k[9]!==n||k[10]!==b||k[11]!==i?(j=(0,c.jsx)(ao.MenuButton,{button:b,id:n,menu:i,popover:cq}),k[9]=n,k[10]=b,k[11]=i,k[12]=j):j=k[12],j}let ct=(0,at.styled)(ap.Layer)`
  position: sticky;
  bottom: 0;
`,cu=(0,at.styled)(ap.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,cv=(0,e.forwardRef)(function(a,b){let e,g,h=(0,d.c)(7),{children:i,padding:j}=a,{collapsed:k}=ci();return h[0]!==i||h[1]!==j?(e=(0,c.jsx)(cu,{tone:"inherit",children:(0,c.jsx)(ap.Box,{padding:j,children:i})}),h[0]=i,h[1]=j,h[2]=e):e=h[2],h[3]!==k||h[4]!==b||h[5]!==e?(g=(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(ct,{"data-testid":"pane-footer",hidden:k,ref:b,children:e})}),h[3]=k,h[4]=b,h[5]=e,h[6]=g):g=h[6],g}),cw=(0,at.styled)(ap.Layer)(({$border:a})=>at.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${a?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),cx=(0,at.styled)(ap.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,cy=(0,at.styled)(ap.Card)(({theme:a})=>{let{fg:b,bg:c}=a.sanity.color.card.enabled;return at.css`
    background-color: ${c};

    [data-ui='Text'] {
      color: ${b};
    }
  `}),cz=(0,at.styled)(aq.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,cA=(0,at.styled)(ap.Text)`
  cursor: default;
  outline: none;
`,cB=(0,e.forwardRef)(function(a,b){let e,g,h,i,j,k,l,m,n,o,p,q,r,s=(0,d.c)(48),{actions:t,backButton:u,border:v,contentAfter:w,loading:x,subActions:y,tabs:z,tabIndex:A,title:B,appendTitle:C}=a,{collapse:D,collapsed:E,expand:F,rootElement:G}=ci(),H=(0,aq.useElementRect)(G||null),I=E?H?.height||window.innerHeight:void 0;s[0]!==I?(e={width:I},s[0]=I,s[1]=e):e=s[1];let J=e;s[2]!==D||s[3]!==E?(g=()=>{E||D()},s[2]=D,s[3]=E,s[4]=g):g=s[4];let K=g;s[5]!==E||s[6]!==F?(h=()=>{E&&F()},s[5]=E,s[6]=F,s[7]=h):h=s[7];let L=h,M=!!(!E&&(z||y)),N=E?"":void 0,O=E?"":void 0;s[8]!==u?(i=u&&(0,c.jsx)(ap.Box,{flex:"none",children:u}),s[8]=u,s[9]=i):i=s[9];let P=u?1:2;s[10]!==x?(j=x&&(0,c.jsx)(ap.Box,{children:(0,c.jsx)(cz,{animated:!0,radius:1,size:1})}),s[10]=x,s[11]=j):j=s[11],s[12]!==C||s[13]!==x||s[14]!==B?(k=!x&&(0,c.jsxs)(ap.Flex,{align:"center",gap:1,children:[(0,c.jsx)(cA,{size:1,textOverflow:"ellipsis",weight:"semibold",children:B}),C]}),s[12]=C,s[13]=x,s[14]=B,s[15]=k):k=s[15],s[16]!==K||s[17]!==P||s[18]!==j||s[19]!==k||s[20]!==A?(l=(0,c.jsxs)(cy,{__unstable_focusRing:!0,flex:1,onClick:K,paddingLeft:P,padding:2,tabIndex:A,children:[j,k]}),s[16]=K,s[17]=P,s[18]=j,s[19]=k,s[20]=A,s[21]=l):l=s[21],s[22]!==t||s[23]!==E?(m=t&&(0,c.jsx)(ap.Box,{hidden:E,children:(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:t})}),s[22]=t,s[23]=E,s[24]=m):m=s[24],s[25]!==l||s[26]!==m||s[27]!==i?(n=(0,c.jsxs)(ap.Flex,{align:"flex-start",gap:3,children:[i,l,m]}),s[25]=l,s[26]=m,s[27]=i,s[28]=n):n=s[28],s[29]!==E||s[30]!==M||s[31]!==y||s[32]!==z?(o=M&&(0,c.jsxs)(ap.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,c.jsx)(ap.Box,{flex:1,marginRight:3*!!y,children:z}),y]}),s[29]=E,s[30]=M,s[31]=y,s[32]=z,s[33]=o):o=s[33],s[34]!==L||s[35]!==J||s[36]!==n||s[37]!==o?(p=(0,c.jsxs)(cx,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:J,children:[n,o]}),s[34]=L,s[35]=J,s[36]=n,s[37]=o,s[38]=p):p=s[38];let Q=!E&&w;return s[39]!==p||s[40]!==Q||s[41]!==O?(q=(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,c.jsxs)(ap.Card,{"data-collapsed":O,tone:"inherit",children:[p,Q]})}),s[39]=p,s[40]=Q,s[41]=O,s[42]=q):q=s[42],s[43]!==v||s[44]!==b||s[45]!==q||s[46]!==N?(r=(0,c.jsx)(ap.LayerProvider,{zOffset:100,children:(0,c.jsx)(cw,{$border:v,"data-collapsed":N,"data-testid":"pane-header",ref:b,children:q})}),s[43]=v,s[44]=b,s[45]=q,s[46]=N,s[47]=r):r=s[47],r});function cC(a){return a.disabled?{disabledReason:"object"==typeof a.disabled?a.disabled.reason:void 0,ariaLabel:"object"==typeof a.disabled&&"string"==typeof a.disabled?.reason?a.disabled.reason:"This is disabled",isDisabled:!!a.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function cD(a){let b=(0,d.c)(4),{node:e}=a;if("item"===e.type){let a;return b[0]!==e?(a=(0,c.jsx)(cE,{node:e}),b[0]=e,b[1]=a):a=b[1],a}if("group"===e.type){let a;return b[2]!==e?(a=(0,c.jsx)(cG,{node:e}),b[2]=e,b[3]=a):a=b[3],a}return console.warn('unknown menu node (expected `type: "item" | "group"`):',e),null}function cE(a){let b,e,g,h,i,j=(0,d.c)(23),{node:k}=a,{title:l}=(0,f.useI18nText)(k),{t:m}=(0,f.useTranslation)();if(k.intent){let b;return j[0]!==k.intent||j[1]!==a?(b=(0,c.jsx)(cF,{...a,intent:k.intent}),j[0]=k.intent,j[1]=a,j[2]=b):b=j[2],b}j[3]!==k?(b=cC(k),j[3]=k,j[4]=b):b=j[4];let{disabledReason:n,ariaLabel:o,isDisabled:p}=b;j[5]!==o||j[6]!==m||j[7]!==l?(e=o||l||m("status-button.aria-label"),j[5]=o,j[6]=m,j[7]=l,j[8]=e):e=j[8],j[9]!==p||j[10]!==k.hotkey?(g=!p&&k.hotkey?k.hotkey.split("+"):void 0,j[9]=p,j[10]=k.hotkey,j[11]=g):g=j[11];let q=p?n:l;return j[12]!==g||j[13]!==q?(h={hotkeys:g,content:q},j[12]=g,j[13]=q,j[14]=h):h=j[14],j[15]!==p||j[16]!==k.icon||j[17]!==k.onAction||j[18]!==k.selected||j[19]!==k.tone||j[20]!==e||j[21]!==h?(i=(0,c.jsx)(f.StatusButton,{disabled:p,icon:k.icon,onClick:k.onAction,selected:k.selected,tone:k.tone,"aria-label":e,tooltipProps:h}),j[15]=p,j[16]=k.icon,j[17]=k.onAction,j[18]=k.selected,j[19]=k.tone,j[20]=e,j[21]=h,j[22]=i):i=j[22],i}function cF(a){let b,e,g,h,i,j,k,l=(0,d.c)(27),{intent:m,node:n}=a;l[0]!==m.params||l[1]!==m.type?(b={intent:m.type,params:m.params},l[0]=m.params,l[1]=m.type,l[2]=b):b=l[2];let o=(0,ay.useIntentLink)(b),{t:p}=(0,f.useTranslation)();l[3]!==o||l[4]!==n?(e=a=>{o.onClick(a),n.onAction()},l[3]=o,l[4]=n,l[5]=e):e=l[5];let q=e;l[6]!==n?(g=cC(n),l[6]=n,l[7]=g):g=l[7];let{disabledReason:r,ariaLabel:s,isDisabled:t}=g;l[8]!==s||l[9]!==n.title||l[10]!==p?(h=s||n.title||p("status-button.aria-label"),l[8]=s,l[9]=n.title,l[10]=p,l[11]=h):h=l[11],l[12]!==t||l[13]!==n.hotkey?(i=!t&&n.hotkey?n.hotkey.split("+"):void 0,l[12]=t,l[13]=n.hotkey,l[14]=i):i=l[14];let u=t?r:n.title;return l[15]!==i||l[16]!==u?(j={hotkeys:i,content:u,placement:"bottom",portal:!0},l[15]=i,l[16]=u,l[17]=j):j=l[17],l[18]!==q||l[19]!==o.href||l[20]!==t||l[21]!==n.icon||l[22]!==n.selected||l[23]!==n.tone||l[24]!==h||l[25]!==j?(k=(0,c.jsx)(f.StatusButton,{forwardedAs:"a",disabled:t,href:o.href,icon:n.icon,onClick:q,selected:n.selected,tone:n.tone,"aria-label":h,tooltipProps:j}),l[18]=q,l[19]=o.href,l[20]=t,l[21]=n.icon,l[22]=n.selected,l[23]=n.tone,l[24]=h,l[25]=j,l[26]=k):k=l[26],k}function cG(a){let b,g,h,i,k,l=(0,d.c)(16),{node:m}=a,{title:n}=(0,f.useI18nText)(m),o=!!m.disabled,p=m.icon??j.UnknownIcon;l[0]!==m.title?(b={content:m.title,portal:!0},l[0]=m.title,l[1]=b):b=l[1],l[2]!==o||l[3]!==p||l[4]!==b||l[5]!==n?(g=(0,c.jsx)(ao.Button,{disabled:o,icon:p,label:n,mode:"bleed",tooltipProps:b}),l[2]=o,l[3]=p,l[4]=b,l[5]=n,l[6]=g):g=l[6];let q=(0,e.useId)();return l[7]!==m.children||l[8]!==m.disabled?(h=m.children.map((a,b)=>(0,c.jsx)(cm,{disabled:!!m.disabled,isAfterGroup:m.children[b-1]?.type==="group",node:a},a.key)),l[7]=m.children,l[8]=m.disabled,l[9]=h):h=l[9],l[10]!==h?(i=(0,c.jsx)(ap.Menu,{children:h}),l[10]=h,l[11]=i):i=l[11],l[12]!==g||l[13]!==q||l[14]!==i?(k=(0,c.jsx)(ao.MenuButton,{button:g,id:q,menu:i}),l[12]=g,l[13]=q,l[14]=i,l[15]=k):k=l[15],k}let cH=(0,at.styled)(ap.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,cI=[];function cJ(a){let b,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=(0,d.c)(41);w[0]!==a?({children:b,minWidth:f,onCollapse:g,onExpand:i,...j}=a,w[0]=a,w[1]=b,w[2]=f,w[3]=g,w[4]=i,w[5]=j):(b=w[1],f=w[2],g=w[3],i=w[4],j=w[5]);let[x]=(0,e.useState)(cK),[y,z]=(0,e.useState)(null),A=(0,aq.useElementRect)(y)?.width||0,B=void 0!==A&&f?A<f:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(k={expandedElement:null,panes:[],resizing:!1},w[6]=k):k=w[6];let[C,D]=(0,e.useState)(k);w[7]!==x||w[8]!==y?(l=()=>x.setRootElement(y),m=[x,y],w[7]=x,w[8]=y,w[9]=l,w[10]=m):(l=w[9],m=w[10]),(0,e.useEffect)(l,m),w[11]!==x||w[12]!==A?(n=()=>x.setRootWidth(A),o=[x,A],w[11]=x,w[12]=A,w[13]=n,w[14]=o):(n=w[13],o=w[14]),(0,e.useEffect)(n,o),w[15]!==x?(p=()=>x.subscribe(D),q=[x],w[15]=x,w[16]=p,w[17]=q):(p=w[16],q=w[17]),(0,e.useEffect)(p,q),w[18]!==B||w[19]!==g||w[20]!==i?(r=()=>{void 0!==B&&(B&&g&&g(),!B&&i&&i())},s=[B,g,i],w[18]=B,w[19]=g,w[20]=i,w[21]=r,w[22]=s):(r=w[21],s=w[22]),(0,e.useEffect)(r,s),w[23]!==B||w[24]!==x.collapse||w[25]!==x.expand||w[26]!==x.mount||w[27]!==x.resize||w[28]!==C.expandedElement||w[29]!==C.panes||w[30]!==C.resizing?(t={collapse:x.collapse,collapsed:B,expand:x.expand,expandedElement:C.expandedElement,mount:x.mount,panes:C.panes,resize:x.resize,resizing:C.resizing},w[23]=B,w[24]=x.collapse,w[25]=x.expand,w[26]=x.mount,w[27]=x.resize,w[28]=C.expandedElement,w[29]=C.panes,w[30]=C.resizing,w[31]=t):t=w[31];let E=t,F=B?"":void 0,G=C.resizing?"":void 0,H=A?"":void 0;return w[32]!==b||w[33]!==j||w[34]!==F||w[35]!==G||w[36]!==H?(u=(0,c.jsx)(cH,{"data-ui":"PaneLayout",...j,"data-collapsed":F,"data-resizing":G,"data-mounted":H,ref:z,children:b}),w[32]=b,w[33]=j,w[34]=F,w[35]=G,w[36]=H,w[37]=u):u=w[37],w[38]!==E||w[39]!==u?(v=(0,c.jsx)(h.PaneLayoutContext.Provider,{value:E,children:u}),w[38]=E,w[39]=u,w[40]=v):v=w[40],v}function cK(){return function(){let a=[],b=[],c=new WeakMap,d=new Set,e={},f=null,g=0,h=null,i=null,j=new Map,k=!1;function l(a){d.delete(a),h=a,m()}return{collapse:function(a){d.add(a),h===a&&(h=null),m()},expand:l,maximize:function(a){i=a,m()},mount:function(a,d){return c.set(a,{...d,original:d}),b.push(a),f&&function(a,b){let c=new WeakMap;for(let d of b)c.set(d,function(a,b){let c=[],d=b;for(;d!==a;){let b=d.parentElement;if(!b)break;let e=Array.from(b.childNodes).indexOf(d);if(c.unshift(e),b===a)break;d=b}return c}(a,d));b.sort((a,b)=>{let d=c.get(a)||cI,e=c.get(b)||cI,f=Math.max(d.length,e.length);for(let a=0;a<f;a+=1){let b=d[a]||-1,c=e[a]||-1;if(b!==c)return b-c}return 0})}(f,b),l(a),()=>{let d=b.indexOf(a);d>-1&&b.splice(d,1),c.delete(a),i===a&&(i=null),m()}},resize:function(a,d,f){let g=b.indexOf(d),h=c.get(d);if(!h)return;let i=b[g+1],l=c.get(i);if(l){if("start"===a&&(k=!0,e.left={element:d,flex:h.flex||1,width:d.offsetWidth},e.right={element:i,flex:l.flex||1,width:i.offsetWidth},m()),"move"===a&&e.left&&e.right){let a,b,c,g,k,n,o,p,q,r,s,t;j=new Map;let{leftW:u,rightW:v,leftFlex:w,rightFlex:x}=(a={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},b=h.minWidth??204,c=l.minWidth??204,g=Math.min(h.maxWidth||1/0,a.width-c),k=Math.min(l.maxWidth||1/0,a.width-b),n=b-e.left.width,n<(o=e.right.width-k)&&(n=o),p=e.right.width-c,p>(q=g-e.left.width)&&(p=q),r=Math.min(Math.max(f,n),p),s=e.left.width+r,t=e.right.width-r,{leftFlex:s/a.width*a.flex,leftW:s,rightFlex:t/a.width*a.flex,rightW:t});j.set(d,{flex:w,width:u}),j.set(i,{flex:x,width:v}),m()}if("end"===a){k=!1;let a=j.get(d),b=j.get(i);c.set(d,{...h,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:a?.flex??h.flex}),c.set(i,{...l,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:b?.flex??l.flex}),j=new Map,delete e.left,delete e.right,m()}}},setRootElement:function(a){f=a},setRootWidth:function(a){g=a,m()},subscribe:function(b){return a.push(b),()=>{let c=a.push(b);c>-1&&a.splice(c,1)}}};function m(){if(!g)return;let e=[];for(let a of b)a!==h&&e.unshift(a);h&&e.unshift(h);let f=new WeakMap,l=e.length,m=e[0],n=g-(l-1)*51;for(let a of e){let b=c.get(a);if(!b)continue;let e=b.currentMinWidth||b.minWidth||204,g=a===m,h=d.has(a),k=e>n,l=!g&&(h||k),o=j.get(a);f.set(a,{element:a,collapsed:l,currentMinWidth:o?.width??b.currentMinWidth,currentMaxWidth:o?.width??b.currentMaxWidth,flex:o?.flex??b.flex??1,maximized:a===i}),l?n-=51:n-=e-51}let o=[];for(let a of b){let b=f.get(a);b&&o.push(b)}for(let c of a)c({expandedElement:h||b[b.length-1]||null,panes:o,resizing:k})}}()}function cL(a){let b,e,f,g=(0,d.c)(12),{children:h,currentMinWidth:i,flex:j,minWidth:k,paneKey:l,title:m,tone:n}=a,o=void 0===m?"Error":m,p=void 0===n?"critical":n;return g[0]!==o?(b=(0,c.jsx)(cB,{title:o}),g[0]=o,g[1]=b):b=g[1],g[2]!==h?(e=(0,c.jsx)(cj,{overflow:"auto",children:(0,c.jsx)(ap.Box,{paddingX:4,paddingY:5,children:h})}),g[2]=h,g[3]=e):e=g[3],g[4]!==i||g[5]!==j||g[6]!==k||g[7]!==l||g[8]!==b||g[9]!==e||g[10]!==p?(f=(0,c.jsxs)(cg,{currentMinWidth:i,flex:j,id:l,minWidth:k,tone:p,children:[b,e]}),g[4]=i,g[5]=j,g[6]=k,g[7]=l,g[8]=b,g[9]=e,g[10]=p,g[11]=f):f=g[11],f}function cM(a){let b,f,g,h=(0,d.c)(6),{children:i,ms:j}=a,k=void 0===j?0:j,[l,m]=(0,e.useState)(k<=0);if(h[0]!==k?(b=()=>{if(k<=0)return;let a=setTimeout(()=>m(!0),k);return()=>{clearTimeout(a)}},f=[k],h[0]=k,h[1]=b,h[2]=f):(b=h[1],f=h[2]),(0,e.useEffect)(b,f),!l||!i){let a;return h[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(c.Fragment,{}),h[3]=a):a=h[3],a}return h[4]!==i?(g="function"==typeof i?i():i,h[4]=i,h[5]=g):g=h[5],g}function cN(a){let b=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(f.isDev){let c=["Check console for errors?","Is your observable/promise resolving?",a.length>0?`Structure path: ${a.join(" âž ")}`:""];b.push({ms:1e4,message:c.join(`
`)})}let c=(0,aD.of)(null);return(0,aD.merge)(...b.map(a=>c.pipe((0,aC.mapTo)("messageKey"in a?{messageKey:a.messageKey}:{message:a.message}),(0,aC.delay)(a.ms))))}let cO=(0,at.styled)(ap.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,cP=(0,e.memo)(a=>{let b,g,h,i,j,k,l,m,n,o,p=(0,d.c)(28),{delay:q,flex:r,message:t,minWidth:u,paneKey:v,path:w,selected:x,title:y,tone:z}=a,A=void 0===q?300:q,B=void 0===t?cN:t,{t:C}=(0,f.useTranslation)(s);a:{if("function"==typeof B){let a;p[0]!==B||p[1]!==w?(a=B(w?w.split(";"):[]),p[0]=B,p[1]=w,p[2]=a):a=p[2],b=a;break a}b=B}let D=b;p[3]!==D||p[4]!==C?(g=()=>"string"==typeof D?D:C("panes.resolving.default-message"),p[3]=D,p[4]=C,p[5]=g):g=p[5];let[E,F]=(0,e.useState)(g);p[6]!==D||p[7]!==C?(h=()=>{if("object"!=typeof D||"function"!=typeof D.subscribe)return;let a=D.subscribe(a=>{F("messageKey"in a?C(a.messageKey):a.message)});return()=>a.unsubscribe()},i=[D,C],p[6]=D,p[7]=C,p[8]=h,p[9]=i):(h=p[8],i=p[9]),(0,e.useEffect)(h,i);let[G,H]=(0,e.useState)(null),[I,J]=(0,e.useState)(!1);p[10]!==G?(j=()=>{if(G)return(0,aq._raf2)(()=>J(!0))},k=[G],p[10]=G,p[11]=j,p[12]=k):(j=p[11],k=p[12]),(0,e.useEffect)(j,k);let K=I?"":void 0,L=y||E;p[13]!==L?(l=(0,c.jsx)(f.LoadingBlock,{showText:!0,title:L}),p[13]=L,p[14]=l):l=p[14],p[15]!==l||p[16]!==K?(m=(0,c.jsx)(cO,{align:"center","data-mounted":K,direction:"column",height:"fill",justify:"center",ref:H,children:l}),p[15]=l,p[16]=K,p[17]=m):m=p[17];let M=m;return p[18]!==M||p[19]!==A?(n=(0,c.jsx)(cj,{children:M}),p[18]=M,p[19]=A,p[20]=n):n=p[20],p[21]!==r||p[22]!==u||p[23]!==v||p[24]!==x||p[25]!==n||p[26]!==z?(o=(0,c.jsx)(cg,{flex:r,id:v,minWidth:u,selected:x,tone:z,children:n}),p[21]=r,p[22]=u,p[23]=v,p[24]=x,p[25]=n,p[26]=z,p[27]=o):o=p[27],o});function cQ(){let a=(0,e.useContext)(h.DocumentPaneContext);if(!a)throw Error("DocumentPane: missing context value");return a}function cR(a){let b,e,g=(0,d.c)(8),{children:h,documentId:i,documentType:j}=a;return g[0]!==h||g[1]!==i||g[2]!==j?(b=(0,c.jsx)(cS,{documentId:i,documentType:j,children:h}),g[0]=h,g[1]=i,g[2]=j,g[3]=b):b=g[3],g[4]!==i||g[5]!==j||g[6]!==b?(e=(0,c.jsx)(f.CommentsEnabledProvider,{documentId:i,documentType:j,children:b}),g[4]=i,g[5]=j,g[6]=b,g[7]=e):e=g[7],e}function cS(a){let b,g,h,i,j,k,l=(0,d.c)(26),{children:m,documentId:n,documentType:o}=a,{enabled:p}=(0,f.useCommentsEnabled)(),{connectionState:q,onPathOpen:r,inspector:s,openInspector:t}=cQ(),{selectedReleaseId:u}=(0,f.usePerspective)(),{params:v,setParams:w}=dH(),{resolveIntentLink:x}=(0,ay.useRouter)(),y=v?.comment,z=(0,e.useRef)(v);l[0]!==v?(b=()=>{z.current=v},g=[v],l[0]=v,l[1]=b,l[2]=g):(b=l[1],g=l[2]),(0,e.useLayoutEffect)(b,g),l[3]!==n||l[4]!==o||l[5]!==x?(h=a=>{let b=x("edit",{id:n,type:o,inspect:f.COMMENTS_INSPECTOR_NAME,comment:a});return`${window.location.origin}${b}`},l[3]=n,l[4]=o,l[5]=x,l[6]=h):h=l[6];let A=h;l[7]!==w?(i=()=>{w({...z.current,comment:void 0})},l[7]=w,l[8]=i):i=l[8];let B=i;l[9]!==s?.name||l[10]!==t?(j=()=>{s?.name!==f.COMMENTS_INSPECTOR_NAME&&t(f.COMMENTS_INSPECTOR_NAME)},l[9]=s?.name,l[10]=t,l[11]=j):j=l[11];let C=j;if(!p){let a;return l[12]!==m?(a=(0,c.jsx)(c.Fragment,{children:m}),l[12]=m,l[13]=a):a=l[13],a}let D=s?.name===f.COMMENTS_INSPECTOR_NAME,E="connecting"===q;return l[14]!==m||l[15]!==n||l[16]!==o||l[17]!==A||l[18]!==B||l[19]!==C||l[20]!==r||l[21]!==y||l[22]!==u||l[23]!==D||l[24]!==E?(k=(0,c.jsx)(f.CommentsProvider,{documentId:n,documentType:o,getCommentLink:A,isCommentsOpen:D,isConnecting:E,onClearSelectedComment:B,onCommentsOpen:C,onPathOpen:r,selectedCommentId:y,sortOrder:"desc",type:"field",releaseId:u,children:m}),l[14]=m,l[15]=n,l[16]=o,l[17]=A,l[18]=B,l[19]=C,l[20]=r,l[21]=y,l[22]=u,l[23]=D,l[24]=E,l[25]=k):k=l[25],k}function cT(a){let b,g,h,i,j,k=(0,d.c)(14),{children:l}=a,{actions:m,editState:n,isInitialValueLoading:o,revisionId:p}=cQ(),q=(0,e.useRef)(null);k[0]!==n||k[1]!==o||k[2]!==p?(b=n?{...n,revision:p||void 0,initialValueResolved:!o}:null,k[0]=n,k[1]=o,k[2]=p,k[3]=b):b=k[3];let r=b;if(!r)return null;k[4]===Symbol.for("react.memo_cache_sentinel")?(g=()=>q.current?.(),k[4]=g):g=k[4],k[5]!==r?(h={...r,onComplete:g},k[5]=r,k[6]=h):h=k[6];let s=m||f.EMPTY_ARRAY;return k[7]!==r||k[8]!==l?(i=a=>{let{states:b}=a;return(0,c.jsx)(cV,{states:b,actionProps:r,children:l})},k[7]=r,k[8]=l,k[9]=i):i=k[9],k[10]!==h||k[11]!==s||k[12]!==i?(j=(0,c.jsx)(f.GetHookCollectionState,{args:h,hooks:s,resetRef:q,children:i}),k[10]=h,k[11]=s,k[12]=i,k[13]=j):j=k[13],j}cP.displayName="Memo(LoadingPane)";let cU=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function cV(a){let b,e,g,i=(0,d.c)(9),{states:j,children:k,actionProps:l}=a,{t:m}=(0,f.useTranslation)(s);i[0]!==l?(b=(0,f.getDocumentIdForCanvasLink)(l),i[0]=l,i[1]=b):b=i[1];let{isLinked:n}=(0,f.useCanvasCompanionDoc)(b);return i[2]!==n||i[3]!==j||i[4]!==m?(e=n?j.map(a=>a.action&&cU.includes(a.action)?a:{...a,disabled:!0,title:m("action.disabled-by-canvas.tooltip")}):j,i[2]=n,i[3]=j,i[4]=m,i[5]=e):e=i[5],i[6]!==k||i[7]!==e?(g=(0,c.jsx)(h.DocumentActionsStateContext.Provider,{value:e,children:k}),i[6]=k,i[7]=e,i[8]=g):g=i[8],g}function cW(){let a=(0,e.useContext)(h.StructureToolContext);if(!a)throw Error("StructureTool: missing context value");return a}let cX={},cY="inspect:",cZ=[{id:"inspectors"},{id:"links"}],c$="sanity/structure/history";function c_(a){let b,g,h,i,j,k,l,m,n,o=(0,d.c)(22),{documentId:p,documentType:q,inspectors:r,onMenuItems:s}=a,t=r.length;o[0]!==t?(b=()=>Array.from(Array(t)),o[0]=t,o[1]=b):b=o[1];let[u,v]=(0,e.useState)(b);o[2]!==t||o[3]!==u?(g=()=>{if(u.length!==t){let a=Array.from(Array(t));for(let b=0;b<t;b++)a[b]=u[b];v(a)}},h=[t,u],o[2]=t,o[3]=u,o[4]=g,o[5]=h):(g=o[4],h=o[5]),(0,e.useEffect)(g,h),o[6]===Symbol.for("react.memo_cache_sentinel")?(i=(a,b)=>{v(c=>{let d=[...c];return d[a]=b,d})},o[6]=i):i=o[6];let w=i;if(o[7]!==u||o[8]!==s?(j=()=>{s(u.filter(Boolean))},k=[u,s],o[7]=u,o[8]=s,o[9]=j,o[10]=k):(j=o[9],k=o[10]),(0,e.useEffect)(j,k),o[11]!==p||o[12]!==q||o[13]!==r){let a;o[15]!==p||o[16]!==q?(a=(a,b)=>a.useMenuItem?[function({documentId:a,documentType:b,index:c,setMenuItem:g,useMenuItem:h}){return(0,e.memo)(function(){let i,j,k,l=(0,d.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(i={documentId:a,documentType:b},l[0]=i):i=l[0];let m=h(i),n=(0,f.useUnique)(m);return l[1]!==n?(j=()=>{g(c,n)},k=[n],l[1]=n,l[2]=j,l[3]=k):(j=l[2],k=l[3]),(0,e.useEffect)(j,k),null})}({documentId:p,documentType:q,index:b,setMenuItem:w,useMenuItem:a.useMenuItem}),a.name]:[c1,""],o[15]=p,o[16]=q,o[17]=a):a=o[17],l=r.map(a),o[11]=p,o[12]=q,o[13]=r,o[14]=l}else l=o[14];let x=l;return o[18]!==x?(m=x.map(c0),o[18]=x,o[19]=m):m=o[19],o[20]!==m?(n=(0,c.jsx)(c.Fragment,{children:m}),o[20]=m,o[21]=n):n=o[21],n}function c0(a){let[b,d]=a;return d&&(0,c.jsx)(b,{},d)}function c1(){return null}function c2(){let a,b,c,e,g=(0,d.c)(22),{connectionState:h,schemaType:i,editState:j,isDeleted:k,lastRevisionDocument:l}=cQ(),{selectedPerspectiveName:m}=(0,f.usePerspective)(),{t:n}=(0,f.useTranslation)(s);a:{if(k){a=l;break a}if(m&&(0,f.isPublishedPerspective)(m)){a=j?.published;break a}a=j?.version||j?.draft||j?.published}let o=a,p=!!o;b:{if(k&&l&&i)try{let a;g[0]!==l||g[1]!==i?(a=(0,f.prepareForPreview)(l,i),g[0]=l,g[1]=i,g[2]=a):a=g[2],b=a;break b}catch(a){console.warn("Failed to prepare preview for deleted document:",a),b=null;break b}b=null}let q=b,r=p&&!k;g[3]!==o||g[4]!==i||g[5]!==r?(c={enabled:r,schemaType:i,value:o},g[3]=o,g[4]=i,g[5]=r,g[6]=c):c=g[6];let{error:t,value:u}=(0,f.unstable_useValuePreview)(c);if("connecting"===h&&!p){let a;return g[7]===Symbol.for("react.memo_cache_sentinel")?(a={error:void 0,title:void 0},g[7]=a):a=g[7],a}if(k&&q){let a;return g[8]!==q.title?(a={error:void 0,title:q.title},g[8]=q.title,g[9]=a):a=g[9],a}if(!u&&!k){let a,b,c=i?.title||i?.name;return g[10]!==n||g[11]!==c?(a=n("panes.document-header-title.new.text",{schemaType:c}),g[10]=n,g[11]=c,g[12]=a):a=g[12],g[13]!==a?(b={error:void 0,title:a},g[13]=a,g[14]=b):b=g[14],b}if(t){let a,b;return g[15]!==t.message||g[16]!==n?(a=n("panes.document-list-pane.error.text",{error:t.message}),g[15]=t.message,g[16]=n,g[17]=a):a=g[17],g[18]!==a?(b={error:a,title:void 0},g[18]=a,g[19]=b):b=g[19],b}let v=u?.title;return g[20]!==v?(e={error:void 0,title:v},g[20]=v,g[21]=e):e=g[21],e}c_.displayName="DocumentInspectorMenuItemsResolver";let c3=["patch","commit"],c4=(0,e.memo)(function(){let a,b,g,h,i,j=(0,d.c)(13),{push:k}=(0,aq.useToast)(),{documentId:l,documentType:m,value:n}=cQ(),o=c2(),p=o.error,q=(0,f.useDocumentOperationEvent)(l,m),r=(0,e.useRef)(q),t=dH(),{t:u}=(0,f.useTranslation)(s),{handleOpenDialog:v}=(0,f.useDocumentLimitsUpsellContext)();a:{if(!o.title&&!p&&!c3.includes(q?.op)&&"string"==typeof n.title&&q?.type==="success"){a=n.title;break a}a=o.title}let w=a;j[0]!==u||j[1]!==w?(b=w||u("panes.document-operation-results.operation-undefined-title"),j[0]=u,j[1]=w,j[2]=b):b=j[2];let x=b;j[3]!==x?(g=x.length>25?`${x.slice(0,25)}...`:x,j[3]=x,j[4]=g):g=j[4];let y=g;return j[5]!==y||j[6]!==q||j[7]!==v||j[8]!==t||j[9]!==k||j[10]!==u?(h=()=>{let a;if(q&&q!==r.current){if("error"===q.type){if((0,f.isDocumentLimitError)(q.error))return void v("document_action");k({closable:!0,duration:3e4,status:"error",title:u("panes.document-operation-results.operation-error",{context:q.op}),description:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:u("panes.document-operation-results.error.summary.title")}),q.error.message]})})}return"success"!==q.type||c3.includes(q.op)||k({closable:!0,status:"success",title:(0,c.jsx)(f.Translate,{context:q.op,i18nKey:"panes.document-operation-results.operation-success",t:u,values:{op:q.op,title:y},components:{Strong:"strong"}})}),"success"===q.type&&"delete"===q.op&&(a=setTimeout(()=>t.closeCurrentAndAfter(),0)),r.current=q,()=>clearTimeout(a)}},i=[q,t,k,u,y,v],j[5]=y,j[6]=q,j[7]=v,j[8]=t,j[9]=k,j[10]=u,j[11]=h,j[12]=i):(h=j[11],i=j[12]),(0,e.useEffect)(h,i),null}),c5=(0,at.styled)(ap.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function c6(a){let b,e,g,h,i,k,l,m,n,o,p,q,r=(0,d.c)(25);r[0]!==a?({as:g,children:b,closeButtonLabel:e,onClose:h,title:k,...i}=a,r[0]=a,r[1]=b,r[2]=e,r[3]=g,r[4]=h,r[5]=i,r[6]=k):(b=r[1],e=r[2],g=r[3],h=r[4],i=r[5],k=r[6]);let{t}=(0,f.useTranslation)(s);return r[7]!==k?(l=(0,c.jsx)(ap.Box,{flex:1,padding:3,children:(0,c.jsx)(ap.Text,{as:"h1",size:1,weight:"medium",children:k})}),r[7]=k,r[8]=l):l=r[8],r[9]!==t?(m=t("document-inspector.close-button.tooltip"),r[9]=t,r[10]=m):m=r[10],r[11]!==m?(n={content:m},r[11]=m,r[12]=n):n=r[12],r[13]!==e||r[14]!==h||r[15]!==n?(o=(0,c.jsx)(ap.Box,{flex:"none",padding:1,children:(0,c.jsx)(ao.Button,{"aria-label":e,icon:j.CloseIcon,mode:"bleed",onClick:h,tooltipProps:n})}),r[13]=e,r[14]=h,r[15]=n,r[16]=o):o=r[16],r[17]!==l||r[18]!==o?(p=(0,c.jsxs)(ap.Flex,{padding:2,children:[l,o]}),r[17]=l,r[18]=o,r[19]=p):p=r[19],r[20]!==b||r[21]!==g||r[22]!==i||r[23]!==p?(q=(0,c.jsxs)(c5,{...i,as:g,children:[p,b]}),r[20]=b,r[21]=g,r[22]=i,r[23]=p,r[24]=q):q=r[24],q}function c7(a){let b,e,g,h=(0,d.c)(14),{documentId:i,documentType:j,flex:k}=a,{collapsed:l}=ci(),{closeInspector:m,inspector:n}=cQ(),{features:o}=cW();h[0]!==m||h[1]!==n?(b=()=>{n&&m(n.name)},h[0]=m,h[1]=n,h[2]=b):b=h[2];let p=b;if(l||!n)return null;let q=n.component;h[3]!==q||h[4]!==i||h[5]!==j||h[6]!==p?(e=(0,c.jsx)(q,{onClose:p,documentId:i,documentType:j}),h[3]=q,h[4]=i,h[5]=j,h[6]=p,h[7]=e):e=h[7];let r=e;if(o.resizablePanes){let a;return h[8]!==r||h[9]!==k?(a=(0,c.jsx)(f.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,resizerPosition:"left",maxWidth:540,minWidth:320,children:r}),h[8]=r,h[9]=k,h[10]=a):a=h[10],a}return h[11]!==r||h[12]!==k?(g=(0,c.jsx)(ap.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,children:r}),h[11]=r,h[12]=k,h[13]=g):g=h[13],g}function c8(a,b,c){let e,g,h,i,j=(0,d.c)(16),k=(0,f.useKeyValueStore)();j[0]!==b||j[1]!==a?(e=["studio.structure-tool",a,b].filter(Boolean),j[0]=b,j[1]=a,j[2]=e):e=j[2];let l=e.join(".");if(j[3]!==c||j[4]!==k||j[5]!==l){let a;j[7]!==c?(a=a=>null===a?c:a,j[7]=c,j[8]=a):a=j[8],g=k.getKey(l).pipe((0,aC.map)(a)),j[3]=c,j[4]=k,j[5]=l,j[6]=g}else g=j[6];let m=(0,ax.useObservable)(g,c);j[9]!==k||j[10]!==l||j[11]!==m?(h=async a=>{a!==m&&await k.setKey(l,a)},j[9]=k,j[10]=l,j[11]=m,j[12]=h):h=j[12];let n=h;return j[13]!==n||j[14]!==m?(i=[m,n],j[13]=n,j[14]=m,j[15]=i):i=j[15],i}let c9={id:"parsed",title:"document-inspector.view-mode.parsed"},da={id:"raw",title:"document-inspector.view-mode.raw-json"},db=[c9,da],dc=new aW.default({maxSize:1e3});function dd(a){let{path:b}=a,c=dc.get(b);void 0!==c&&dc.set(b,!c)}function de(a){let b=window.getSelection();if(b){let c=document.createRange();b.removeAllRanges(),c.selectNodeContents(a),b.addRange(c)}}function df(a){de(a.target)}function dg(a){65===a.keyCode&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),de(a.currentTarget))}let dh=at.styled.div(({theme:a})=>{let{color:b,fonts:c,space:d}=a.sanity;return at.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${c.code.family};
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,ap.rem)(d[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,ap.rem)(d[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - ${(0,ap.rem)(d[4])} + 3px);
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,ap.rem)(d[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${b.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${b.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,ap.rem)(d[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${b.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${b.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${b.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function di(a){let b,e,g,h=(0,d.c)(8),{onChange:i,query:k}=a;h[0]!==i?(b=a=>i(a.target.value),h[0]=i,h[1]=b):b=h[1];let l=b,{t:m}=(0,f.useTranslation)(s);h[2]!==m?(e=m("document-inspector.search.placeholder"),h[2]=m,h[3]=e):e=h[3];let n=k||"";return h[4]!==l||h[5]!==e||h[6]!==n?(g=(0,c.jsx)(ap.TextInput,{icon:j.SearchIcon,onChange:l,placeholder:e,radius:2,value:n}),h[4]=l,h[5]=e,h[6]=n,h[7]=g):g=h[7],g}function dj(a){let b,e,g,h,i,j,k,l,m,n,o,p,q,r,t,u,v=(0,d.c)(49),{value:w}=a,{onInspectClose:x,paneKey:y}=cQ(),z=`${y}_inspect_`,[A,B]=c8("inspect-view-mode",null,"parsed");v[0]!==A?(b=db.find(a=>a.id===A),v[0]=A,v[1]=b):b=v[1];let C=b;v[2]!==B?(e=async()=>{await B(c9.id)},v[2]=B,v[3]=e):e=v[3];let D=e;v[4]!==B?(g=async()=>{await B(da.id)},v[4]=B,v[5]=g):g=v[5];let E=g,{t:F}=(0,f.useTranslation)(s),G=`${z}dialog`;v[6]!==F||v[7]!==w?(h=(0,f.isRecord)(w)&&(0,f.isString)(w._id)&&(0,f.isString)(w._type)?(0,c.jsx)(f.Translate,{t:F,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,c.jsx)("em",{children:(0,c.jsx)(gR,{document:w})})}}):(0,c.jsx)("em",{children:F("document-inspector.dialog.title-no-value")}),v[6]=F,v[7]=w,v[8]=h):h=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(i={position:"sticky",bottom:0,zIndex:3},v[9]=i):i=v[9];let H=`${z}tabpanel`,I=`${z}tab-${c9.id}`;v[10]!==F?(j=F(c9.title),v[10]=F,v[11]=j):j=v[11];let J=C===c9;v[12]!==D||v[13]!==H||v[14]!==I||v[15]!==j||v[16]!==J?(k=(0,c.jsx)(ao.Tab,{"aria-controls":H,id:I,label:j,onClick:D,selected:J}),v[12]=D,v[13]=H,v[14]=I,v[15]=j,v[16]=J,v[17]=k):k=v[17];let K=`${z}tabpanel`,L=`${z}tab-${da.id}`;v[18]!==F?(l=F(da.title),v[18]=F,v[19]=l):l=v[19];let M=C===da;v[20]!==E||v[21]!==K||v[22]!==L||v[23]!==l||v[24]!==M?(m=(0,c.jsx)(ao.Tab,{"aria-controls":K,id:L,label:l,onClick:E,selected:M}),v[20]=E,v[21]=K,v[22]=L,v[23]=l,v[24]=M,v[25]=m):m=v[25],v[26]!==k||v[27]!==m?(n=(0,c.jsx)(ap.Card,{padding:3,paddingTop:0,shadow:1,style:i,children:(0,c.jsxs)(ap.TabList,{space:1,children:[k,m]})}),v[26]=k,v[27]=m,v[28]=n):n=v[28];let N=`${z}tab-${A}`,O=`${z}tabpanel`;return v[29]===Symbol.for("react.memo_cache_sentinel")?(o={outline:"none"},v[29]=o):o=v[29],v[30]!==w||v[31]!==C?(p=C===c9&&(0,c.jsx)(dh,{children:(0,c.jsx)(aV.JsonInspector,{data:w,isExpanded:function a(b,c){let d=dc.get(b);return void 0===d?(dc.set(b,Array.isArray(c)||(0,f.isRecord)(c)),a(b,c)):d},onClick:dd,search:di,filterOptions:{ignoreCase:!0}})}),v[30]=w,v[31]=C,v[32]=p):p=v[32],v[33]!==w||v[34]!==C?(q=C===da&&(0,c.jsx)(ap.Code,{language:"json",tabIndex:0,onKeyDown:dg,onDoubleClick:df,size:1,children:JSON.stringify(w,null,2)}),v[33]=w,v[34]=C,v[35]=q):q=v[35],v[36]!==N||v[37]!==O||v[38]!==p||v[39]!==q?(r=(0,c.jsxs)(aq.TabPanel,{"aria-labelledby":N,flex:1,id:O,overflow:"auto",padding:4,style:o,children:[p,q]}),v[36]=N,v[37]=O,v[38]=p,v[39]=q,v[40]=r):r=v[40],v[41]!==n||v[42]!==r?(t=(0,c.jsxs)(ap.Flex,{direction:"column",height:"fill",children:[n,r]}),v[41]=n,v[42]=r,v[43]=t):t=v[43],v[44]!==x||v[45]!==t||v[46]!==G||v[47]!==h?(u=(0,c.jsx)(ao.Dialog,{bodyHeight:"fill",id:G,header:h,onClose:x,onClickOutside:x,padding:!1,width:2,children:t}),v[44]=x,v[45]=t,v[46]=G,v[47]=h,v[48]=u):u=v[48],u}function dk(a){let b,e,f,g,h,i,j,k,l,m,n,o=(0,d.c)(22);o[0]!==a?({action:e,content:f,icon:b,tone:h,paddingY:i,...g}=a,o[0]=a,o[1]=b,o[2]=e,o[3]=f,o[4]=g,o[5]=h,o[6]=i):(b=o[1],e=o[2],f=o[3],g=o[4],h=o[5],i=o[6]);let p=void 0===h?"transparent":h,q=void 0===i?2:i;return o[7]!==b?(j=b&&(0,c.jsx)(ap.Text,{size:0,children:(0,c.jsx)(b,{})}),o[7]=b,o[8]=j):j=o[8],o[9]!==f?(k=(0,c.jsx)(ap.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:f}),o[9]=f,o[10]=k):k=o[10],o[11]!==e?(l=e&&(0,c.jsx)(ao.Button,{...e,mode:e.mode||"ghost",tone:e.tone||"default"}),o[11]=e,o[12]=l):l=o[12],o[13]!==j||o[14]!==k||o[15]!==l?(m=(0,c.jsxs)(ap.Flex,{align:"center",gap:3,paddingX:2,children:[j,k,l]}),o[13]=j,o[14]=k,o[15]=l,o[16]=m):m=o[16],o[17]!==q||o[18]!==g||o[19]!==m||o[20]!==p?(n=(0,c.jsx)(ap.Box,{padding:1,children:(0,c.jsx)(ap.Card,{radius:3,paddingX:2,paddingY:q,tone:p,...g,children:m})}),o[17]=q,o[18]=g,o[19]=m,o[20]=p,o[21]=n):n=o[21],n}function dl(){let a=(0,d.c)(3),{isDeleted:b,isDeleting:e,ready:g}=cQ(),{selectedPerspective:h}=(0,f.usePerspective)();if(!g)return null;if(!(0,f.isPublishedPerspective)(h)&&!(0,f.isDraftPerspective)(h)&&"archived"===h.state){let b;return a[0]!==h?(b=(0,c.jsx)(dn,{release:h}),a[0]=h,a[1]=b):b=a[1],b}if(b&&!e){let b;return a[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(dm,{}),a[2]=b):b=a[2],b}}function dm(){let a,b,e,g,h,i,k=(0,d.c)(17),{documentId:l,documentType:m}=cQ(),{restore:n}=(0,f.useDocumentOperation)(l,m),{navigateIntent:o}=(0,ay.useRouter)();k[0]!==l||k[1]!==m||k[2]!==o||k[3]!==n?(a=()=>{n.execute("lastRevision"),o("edit",{id:l,type:m})},k[0]=l,k[1]=m,k[2]=o,k[3]=n,k[4]=a):a=k[4];let p=a,{t:q}=(0,f.useTranslation)(s);return k[5]!==q?(b=q("banners.deleted-document-banner.restore-button.text"),k[5]=q,k[6]=b):b=k[6],k[7]!==p||k[8]!==b?(e={onClick:p,text:b},k[7]=p,k[8]=b,k[9]=e):e=k[9],k[10]!==q?(g=q("banners.deleted-document-banner.text"),k[10]=q,k[11]=g):g=k[11],k[12]!==g?(h=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:g}),k[12]=g,k[13]=h):h=k[13],k[14]!==e||k[15]!==h?(i=(0,c.jsx)(dk,{action:e,content:h,"data-testid":"deleted-document-banner",icon:j.ReadOnlyIcon}),k[14]=e,k[15]=h,k[16]=i):i=k[16],i}let dn=a=>{let b,e,g,h=(0,d.c)(8),{release:i}=a,{t:k}=(0,f.useTranslation)();return h[0]!==i.metadata?.title||h[1]!==k?(b=i.metadata?.title||k("release.placeholder-untitled-release"),h[0]=i.metadata?.title,h[1]=k,h[2]=b):b=h[2],h[3]!==b?(e={title:b},h[3]=b,h[4]=e):e=h[4],h[5]!==k||h[6]!==e?(g=(0,c.jsx)(dk,{tone:"caution",content:(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:(0,c.jsx)(f.Translate,{t:k,i18nKey:"banners.deleted-release-banner.text",values:e})}),"data-testid":"deleted-release-banner",icon:j.DocumentRemoveIcon}),h[5]=k,h[6]=e,h[7]=g):g=h[7],g};function dp(){let a,b,e=(0,d.c)(5),{schemaType:g}=cQ(),{t:h}=(0,f.useTranslation)(s);return(0,ar.isDeprecatedSchemaType)(g)?(e[0]!==h?(a=(0,c.jsx)(f.Translate,{t:h,i18nKey:"banners.deprecated-document-type-banner.text"}),e[0]=h,e[1]=a):a=e[1],e[2]!==g.deprecated.reason||e[3]!==a?(b=(0,c.jsx)(dk,{content:(0,c.jsxs)(ap.Text,{size:1,weight:"medium",children:[a," ",g.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:j.ErrorOutlineIcon}),e[2]=g.deprecated.reason,e[3]=a,e[4]=b):b=e[4],b):null}let dq=(0,aL.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),dr=(0,aL.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),ds=(0,at.styled)(ap.Box)`
  box-sizing: border-box;
`;function dt(a){let b,g,h,i,j,k,l,m,n,o,p,q,r,t,u,v=(0,d.c)(56),{onClose:w,onRequestSubmitted:x}=a,{t:y}=(0,f.useTranslation)(s),z=(0,aI.useTelemetry)(),A=`request-permissions-${(0,e.useId)()}`,B=(0,f.useProjectId)();v[0]===Symbol.for("react.memo_cache_sentinel")?(b={apiVersion:"2024-09-26"},v[0]=b):b=v[0];let C=(0,f.useClient)(b),D=(0,aq.useToast)(),E=(0,f.useZIndex)(),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(""),[J,K]=(0,e.useState)(),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)(!1);a:{let a,b="administrator";if(!B||!C){let a;v[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aD.of)(b),v[1]=a):a=v[1],g=a;break a}if(v[2]!==C.observable||v[3]!==B){let c,d;v[5]===Symbol.for("react.memo_cache_sentinel")?(c=a=>a.filter(dv).find(du)?"editor":b,v[5]=c):c=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(0,aD.of)(b),v[6]=d):d=v[6],a=C.observable.request({url:`/projects/${B}/roles`}).pipe((0,aD.map)(c),(0,aD.startWith)(b),(0,aD.catchError)(d)),v[2]=C.observable,v[3]=B,v[4]=a}else a=v[4];g=a}let P=(0,ax.useObservable)(g);v[7]!==C||v[8]!==H||v[9]!==x||v[10]!==B||v[11]!==P||v[12]!==z||v[13]!==D?(h=()=>{G(!0),C.request({url:`/access/project/${B}/requests`,method:"post",body:{note:H,requestUrl:window?.location.href,requestedRole:P,type:"role"}}).then(a=>{a&&(x&&x(),z.log(dr),D.push({title:"Edit access requested"}))}).catch(a=>{let b=a?.response?.statusCode,c=a?.response?.body?.message;429===b&&(M(!0),K(c)),409===b?(O(!0),K(c)):D.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{G(!1)})},v[7]=C,v[8]=H,v[9]=x,v[10]=B,v[11]=P,v[12]=z,v[13]=D,v[14]=h):h=v[14];let Q=h,R=E.fullscreen;v[15]!==y?(i=y("request-permission-dialog.header.text"),v[15]=y,v[16]=i):i=v[16],v[17]!==y?(j=y("confirm-dialog.cancel-button.fallback-text"),v[17]=y,v[18]=j):j=v[18],v[19]!==w||v[20]!==j?(k={onClick:w,text:j},v[19]=w,v[20]=j,v[21]=k):k=v[21];let S=L||N;return v[22]!==y?(l=y("request-permission-dialog.confirm-button.text"),v[22]=y,v[23]=l):l=v[23],v[24]!==F||v[25]!==Q||v[26]!==S||v[27]!==l?(m={onClick:Q,loading:F,disabled:S,text:l,tone:"primary",type:"submit"},v[24]=F,v[25]=Q,v[26]=S,v[27]=l,v[28]=m):m=v[28],v[29]!==m||v[30]!==k?(n={cancelButton:k,confirmButton:m},v[29]=m,v[30]=k,v[31]=n):n=v[31],v[32]!==y?(o=y("request-permission-dialog.description.text"),v[32]=y,v[33]=o):o=v[33],v[34]!==o?(p=(0,c.jsx)(ap.Text,{children:o}),v[34]=o,v[35]=p):p=v[35],v[36]!==N||v[37]!==L||v[38]!==F||v[39]!==J||v[40]!==H||v[41]!==Q||v[42]!==y?(q=L||N?(0,c.jsx)(ap.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,c.jsxs)(ap.Text,{size:1,children:[L&&(0,c.jsx)(c.Fragment,{children:J??y("request-permission-dialog.warning.limit-reached.text")}),N&&(0,c.jsx)(c.Fragment,{children:J??y("request-permission-dialog.warning.denied.text")})]})}):(0,c.jsxs)(ap.Stack,{space:3,paddingBottom:0,children:[(0,c.jsx)(ap.TextInput,{placeholder:y("request-permission-dialog.note-input.placeholder.text"),disabled:F,onKeyDown:a=>{"Enter"===a.key&&Q()},maxLength:150,value:H,onChange:a=>{I(a.currentTarget.value)}}),(0,c.jsx)(ap.Text,{align:"right",muted:!0,size:1,children:`${H.length}/150`})]}),v[36]=N,v[37]=L,v[38]=F,v[39]=J,v[40]=H,v[41]=Q,v[42]=y,v[43]=q):q=v[43],v[44]!==p||v[45]!==q?(r=(0,c.jsx)(ds,{children:(0,c.jsxs)(ap.Stack,{space:4,children:[p,q]})}),v[44]=p,v[45]=q,v[46]=r):r=v[46],v[47]!==A||v[48]!==w||v[49]!==n||v[50]!==r||v[51]!==i?(t=(0,c.jsx)(ao.Dialog,{width:1,id:A,header:i,footer:n,onClose:w,onClickOutside:w,children:r}),v[47]=A,v[48]=w,v[49]=n,v[50]=r,v[51]=i,v[52]=t):t=v[52],v[53]!==t||v[54]!==E.fullscreen?(u=(0,c.jsx)(aq.DialogProvider,{position:"fixed",zOffset:R,children:t}),v[53]=t,v[54]=E.fullscreen,v[55]=u):u=v[55],u}function du(a){return"editor"===a.name}function dv(a){return a?.appliesToUsers}(0,at.styled)(ap.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let dw={loading:!0,error:!1,status:void 0},dx={loading:!1,error:!1,status:"none"},dy={loading:!1,error:!1,status:"declined"},dz={loading:!1,error:!1,status:"pending"},dA={loading:!1,error:!1,status:"expired"};function dB(a){let b,g,h,i,k,l,m,n,o=(0,d.c)(29),{requiredPermission:p}=a,q=(0,f.useCurrentUser)(),{data:r,loading:t,error:u}=(()=>{let a,b,c,e=(0,d.c)(9);e[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:"2024-07-01"},e[0]=a):a=e[0];let g=(0,f.useClient)(a),h=(0,f.useProjectId)();a:{var i,j;let a;if(!g||!h){let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aD.of)(dx),e[1]=a):a=e[1],b=a;break a}e[2]!==g||e[3]!==h?(i=g,j=h,a=i.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,aC.map)(a=>{if(!a||0===a.length)return dx;let b=a.filter(a=>a.resourceId===j&&"role"===a.type),c=b.find(a=>"declined"===a.status);return c&&(0,aX.isAfter)((0,aY.addWeeks)(new Date(c.createdAt),2),new Date)?dy:b.find(a=>"pending"===a.status&&(0,aX.isAfter)((0,aY.addWeeks)(new Date(a.createdAt),2),new Date))?dz:b.find(a=>"pending"===a.status&&(0,aZ.isBefore)((0,aY.addWeeks)(new Date(a.createdAt),2),new Date))?dA:dx}),(0,aC.catchError)(a=>(console.error("Failed to fetch access requests",a),(0,aD.of)({loading:!1,error:!0,status:void 0}))),(0,aC.startWith)(dw)),e[2]=g,e[3]=h,e[4]=a):a=e[4],b=a}let k=b,{loading:l,error:m,status:n}=(0,ax.useObservable)(k,dw);return e[5]!==m||e[6]!==l||e[7]!==n?(c={data:n,loading:l,error:m},e[5]=m,e[6]=l,e[7]=n,e[8]=c):c=e[8],c})(),[v,w]=(0,e.useState)(!1),x="pending"===r||"declined"===r||v,y=q?.roles||[],z=1===y.length&&"viewer"===y[0].name,[A,B]=(0,e.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(b={style:"short"},o[0]=b):b=o[0];let C=(0,f.useListFormat)(b),{t:D}=(0,f.useTranslation)(s),E=(0,aI.useTelemetry)(),F=y.map(dD),G=C.formatToParts(F).map(dC);return o[1]!==G?(g={Roles:()=>(0,c.jsx)(c.Fragment,{children:G})},o[1]=G,o[2]=g):g=o[2],o[3]!==F||o[4]!==G.length?(h={count:G.length,roles:F},o[3]=F,o[4]=G.length,o[5]=h):h=o[5],o[6]!==p||o[7]!==D||o[8]!==g||o[9]!==h?(i=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:(0,c.jsx)(f.Translate,{t:D,i18nKey:"banners.permission-check-banner.missing-permission",components:g,values:h,context:p})}),o[6]=p,o[7]=D,o[8]=g,o[9]=h,o[10]=i):i=o[10],o[11]!==z||o[12]!==x||o[13]!==u||o[14]!==t||o[15]!==r||o[16]!==B||o[17]!==D||o[18]!==E?(k=z&&r&&!u&&!t?{onClick:x?void 0:()=>{B(!0),E.log(dq)},text:D(x?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:x?"default":"primary",disabled:x,mode:x?"bleed":void 0}:void 0,o[11]=z,o[12]=x,o[13]=u,o[14]=t,o[15]=r,o[16]=B,o[17]=D,o[18]=E,o[19]=k):k=o[19],o[20]!==i||o[21]!==k?(l=(0,c.jsx)(dk,{content:i,action:k,"data-testid":"permission-check-banner",icon:j.ReadOnlyIcon}),o[20]=i,o[21]=k,o[22]=l):l=o[22],o[23]!==B||o[24]!==A?(m=A&&(0,c.jsx)(dt,{onClose:()=>B(!1),onRequestSubmitted:()=>{w(!0),B(!1)}}),o[23]=B,o[24]=A,o[25]=m):m=o[25],o[26]!==l||o[27]!==m?(n=(0,c.jsxs)(c.Fragment,{children:[l,m]}),o[26]=l,o[27]=m,o[28]=n):n=o[28],n}function dC(a){return"element"===a.type?(0,c.jsx)("code",{children:a.value},a.value):a.value}function dD(a){return a.title}let dE=(0,e.memo)(()=>{let a,b,e,h,i,k,l,m,n=(0,d.c)(30),o=(0,f.useDocumentPreviewStore)(),{selectedReleaseId:p}=(0,f.usePerspective)(),{params:q,groupIndex:r,routerPanesState:t,replaceCurrent:u,BackLink:v}=dH(),w=t[r]?.[0].id,x=t[r-1]?.[0],y=x?.id,z=!!x?.params?.rev;n[0]!==q?(a=q?.parentRefPath&&(0,aE.fromString)(q.parentRefPath)||null,n[0]=q,n[1]=a):a=n[1];let A=a,{t:B}=(0,f.useTranslation)(s);a:{let a,c=A?.[0];if(!y||!c||!A){let a;n[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aD.of)({loading:!1}),n[2]=a):a=n[2],b=a;break a}if(n[3]!==o||n[4]!==y||n[5]!==A||n[6]!==c||n[7]!==p){let b,d=(0,g.getPublishedId)(y),e=(0,aE.fromString)(c),f=e.findIndex(dF);n[9]!==A?(b=a=>{let{draft:b,published:c,version:d}=a;return{loading:!1,result:{availability:{draft:b.availability,published:c.availability,...d?.availability?{version:d.availability}:{}},refValue:(0,aE.get)(d?.snapshot||b.snapshot||c.snapshot,A)?._ref}}},n[9]=A,n[10]=b):b=n[10],a=(0,aD.concat)((0,aD.of)({loading:!0}),o.unstable_observePathsDocumentPair(d,-1===f?e:e.slice(0,f),{version:p}).pipe((0,aC.debounceTime)(750),(0,aC.map)(b))),n[3]=o,n[4]=y,n[5]=A,n[6]=c,n[7]=p,n[8]=a}else a=n[8];b=a}let C=b;n[11]===Symbol.for("react.memo_cache_sentinel")?(e={loading:!0},n[11]=e):e=n[11];let D=(0,ax.useObservable)(C,e);n[12]!==q||n[13]!==D.loading||n[14]!==D.result||n[15]!==u?(h=()=>{D.loading||D.result?.refValue&&u({id:D.result.refValue,params:q})},n[12]=q,n[13]=D.loading,n[14]=D.result,n[15]=u,n[16]=h):h=n[16];let E=h;return y&&A&&!z&&!D.loading&&(D.result?.availability.draft.available||D.result?.availability.published.available)&&D.result?.refValue!==w?(n[17]!==v||n[18]!==E||n[19]!==D.result?.refValue||n[20]!==B?(i=D.result?.refValue?{onClick:E,icon:j.SyncIcon,text:B("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:v,icon:j.CloseIcon,text:B("banners.reference-changed-banner.reason-removed.close-button.text")},n[17]=v,n[18]=E,n[19]=D.result?.refValue,n[20]=B,n[21]=i):i=n[21],n[22]!==D.result?.refValue||n[23]!==B?(k=B(D.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),n[22]=D.result?.refValue,n[23]=B,n[24]=k):k=n[24],n[25]!==k?(l=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:k}),n[25]=k,n[26]=l):l=n[26],n[27]!==i||n[28]!==l?(m=(0,c.jsx)(dk,{action:i,"data-testid":"reference-changed-banner",content:l,icon:j.WarningOutlineIcon,tone:"caution"}),n[27]=i,n[28]=l,n[29]=m):m=n[29],m):null});function dF(a){return"object"==typeof a&&"_key"in a}function dG(){let a,b=(0,d.c)(2),{t:e}=(0,f.useTranslation)(s);return b[0]!==e?(a=(0,c.jsx)(dk,{tone:"caution",icon:j.WarningOutlineIcon,content:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:e,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),b[0]=e,b[1]=a):a=b[1],a}function dH(){return(0,e.useContext)(h.PaneRouterContext)}function dI(){let a,b,e,g,h,i,j,k,l,m,n=(0,d.c)(28),{t:o}=(0,f.useTranslation)(s),{t:p}=(0,f.useTranslation)(),{data:q}=(0,f.useArchivedReleases)(),{params:r,setParams:t}=dH();n[0]!==r||n[1]!==t?(a=()=>{t({...r,rev:r?.historyEvent||void 0,since:void 0,historyVersion:void 0})},n[0]=r,n[1]=t,n[2]=a):a=n[2];let u=a;if(n[3]!==q||n[4]!==r?.historyVersion){let a;n[6]!==r?.historyVersion?(a=a=>(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===r?.historyVersion,n[6]=r?.historyVersion,n[7]=a):a=n[7],b=q.find(a),n[3]=q,n[4]=r?.historyVersion,n[5]=b}else b=n[5];let v=b;a:{if(v?.state==="published"){e="banners.published-release.description";break a}if(v&&(0,f.isCardinalityOneRelease)(v)){e="banners.archived-scheduled-draft.description";break a}e="banners.archived-release.description"}let w=e;n[8]!==v?.metadata.title||n[9]!==p?(g=v?.metadata.title||p("release.placeholder-untitled-release"),n[8]=v?.metadata.title,n[9]=p,n[10]=g):g=n[10];let x=g;return n[11]!==x?(h={title:x},n[11]=x,n[12]=h):h=n[12],n[13]!==v?(i=(0,f.getVersionInlineBadge)(v),n[13]=v,n[14]=i):i=n[14],n[15]!==i?(j={VersionBadge:i},n[15]=i,n[16]=j):j=n[16],n[17]!==w||n[18]!==o||n[19]!==h||n[20]!==j?(k=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:o,i18nKey:w,values:h,components:j})}),n[17]=w,n[18]=o,n[19]=h,n[20]=j,n[21]=k):k=n[21],n[22]!==u||n[23]!==r?.archivedRelease?(l=r?.archivedRelease?void 0:{text:"Go back to published version",onClick:u},n[22]=u,n[23]=r?.archivedRelease,n[24]=l):l=n[24],n[25]!==k||n[26]!==l?(m=(0,c.jsx)(dk,{tone:"caution",content:k,action:l}),n[25]=k,n[26]=l,n[27]=m):m=n[27],m}dE.displayName="Memo(ReferenceChangedBanner)";let dJ=at.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,dK=a=>{let b,g,h,i,k,l,m,n,o,p,q,r,t=(0,d.c)(22),{onClose:u}=a,{t:v}=(0,f.useTranslation)(s),w=(0,e.useRef)(null);return t[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>[w.current],t[0]=b):b=t[0],(0,ap.useClickOutsideEvent)(u,b),t[1]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(dJ,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),t[1]=g):g=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsx)(ap.Text,{size:1,weight:"semibold",children:"Canvas"}),t[2]=h):h=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsxs)(ap.Flex,{paddingY:1,gap:2,children:[h,(0,c.jsx)(ap.Text,{size:1,muted:!0,children:(0,c.jsx)(j.ComposeSparklesIcon,{})})]}),t[3]=i):i=t[3],t[4]!==v?(k=v("canvas.banner.popover-heading"),t[4]=v,t[5]=k):k=t[5],t[6]!==k?(l=(0,c.jsx)(ap.Box,{paddingTop:3,children:(0,c.jsx)(ap.Heading,{size:1,children:k})}),t[6]=k,t[7]=l):l=t[7],t[8]!==v?(m=v("canvas.banner.popover-description"),t[8]=v,t[9]=m):m=t[9],t[10]!==m?(n=(0,c.jsx)(ap.Box,{paddingTop:4,children:(0,c.jsx)(ap.Text,{size:1,children:m})}),t[10]=m,t[11]=n):n=t[11],t[12]!==l||t[13]!==n?(o=(0,c.jsxs)(ap.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[i,l,n]}),t[12]=l,t[13]=n,t[14]=o):o=t[14],t[15]!==v?(p=v("canvas.banner.popover-button-text"),t[15]=v,t[16]=p):p=t[16],t[17]!==p?(q=(0,c.jsx)(ap.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,c.jsx)(ao.Button,{mode:"bleed",text:p,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:j.LaunchIcon})}),t[17]=p,t[18]=q):q=t[18],t[19]!==q||t[20]!==o?(r=(0,c.jsx)(ap.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,c.jsxs)(ap.Container,{width:0,children:[g,o,q]})}),t[19]=q,t[20]=o,t[21]=r):r=t[21],r},dL=a=>{let b,g,h,i,k,l,m,n,o=(0,d.c)(17),{documentId:p}=a,{t:q}=(0,f.useTranslation)(s),[r,t]=(0,e.useState)(!1),u=(0,f.getDocumentVariantType)(p);a:{let a;if("published"===u){let a;o[0]!==q?(a=q("canvas.banner.linked-text.published"),o[0]=q,o[1]=a):a=o[1],b=a;break a}if("draft"===u){let a;o[2]!==q?(a=q("canvas.banner.linked-text.draft"),o[2]=q,o[3]=a):a=o[3],b=a;break a}o[4]!==q?(a=q("canvas.banner.linked-text.version"),o[4]=q,o[5]=a):a=o[5],b=a}let v=b;o[6]===Symbol.for("react.memo_cache_sentinel")?(g=()=>t(dN),o[6]=g):g=o[6];let w=g;o[7]===Symbol.for("react.memo_cache_sentinel")?(h=()=>t(!1),o[7]=h):h=o[7];let x=h;return o[8]!==v?(i=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:v}),o[8]=v,o[9]=i):i=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(k=(0,c.jsx)(dK,{onClose:x}),l=(0,c.jsx)(ao.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:j.InfoOutlineIcon,onClick:w}),o[10]=k,o[11]=l):(k=o[10],l=o[11]),o[12]!==r?(m=(0,c.jsx)(ao.Popover,{open:r,size:0,tone:"default",portal:!0,placement:"bottom-start",content:k,children:l}),o[12]=r,o[13]=m):m=o[13],o[14]!==i||o[15]!==m?(n=(0,c.jsxs)(ap.Flex,{align:"center",gap:2,children:[i,m]}),o[14]=i,o[15]=m,o[16]=n):n=o[16],n};function dM(){let a,b,e,g,h=(0,d.c)(10),{documentId:i,displayed:j}=cQ(),{t:k}=(0,f.useTranslation)(s),l=j?._id||i,{companionDoc:m}=(0,f.useCanvasCompanionDoc)(l),n=(0,f.useNavigateToCanvasDoc)(m?.canvasDocumentId,"banner");return m?(h[0]!==l?(a=(0,c.jsx)(dL,{documentId:l}),h[0]=l,h[1]=a):a=h[1],h[2]!==k?(b=k("canvas.banner.edit-in-canvas-action"),h[2]=k,h[3]=b):b=h[3],h[4]!==n||h[5]!==b?(e={mode:"ghost",text:b,onClick:n},h[4]=n,h[5]=b,h[6]=e):e=h[6],h[7]!==a||h[8]!==e?(g=(0,c.jsx)(dk,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:a,action:e}),h[7]=a,h[8]=e,h[9]=g):g=h[9],g):null}function dN(a){return!a}let dO=a=>{let b,e,g,h,i,k,l,m,n,o=(0,d.c)(27),{schemaType:p,selectedPerspective:q,reason:r}=a,{t}=(0,f.useTranslation)(s),{document:u}=(0,f.useWorkspace)(),{drafts:v}=u,{enabled:w}=v;o[0]!==w||o[1]!==p?(b=a=>{let{perspective:b}=a;return{disabled:!(0,f.isPerspectiveWriteable)({selectedPerspective:b,isDraftModelEnabled:w,schemaType:p}).result}},o[0]=w,o[1]=p,o[2]=b):b=o[2];let x=b;return o[3]!==r||o[4]!==t?(e="PUBLISHED_NOT_WRITEABLE"===r&&t("banners.choose-new-document-destination.cannot-create-published-document"),o[3]=r,o[4]=t,o[5]=e):e=o[5],o[6]!==r||o[7]!==t?(g="DRAFTS_NOT_WRITEABLE"===r&&t("banners.choose-new-document-destination.cannot-create-draft-document"),o[6]=r,o[7]=t,o[8]=g):g=o[8],o[9]!==r||o[10]!==q||o[11]!==t?(h="RELEASE_NOT_ACTIVE"===r&&(0,f.isReleaseDocument)(q)&&(0,c.jsx)(f.Translate,{t,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:q.metadata.title},components:{VersionBadge:(0,f.getVersionInlineBadge)(q)}}),o[9]=r,o[10]=q,o[11]=t,o[12]=h):h=o[12],o[13]!==t?(i=t("banners.choose-new-document-destination.choose-destination"),o[13]=t,o[14]=i):i=o[14],o[15]!==i?(k=(0,c.jsxs)(c.Fragment,{children:[" ",i]}),o[15]=i,o[16]=k):k=o[16],o[17]!==e||o[18]!==g||o[19]!==h||o[20]!==k?(l=(0,c.jsxs)(ap.Text,{size:1,children:[e,g,h,k]}),o[17]=e,o[18]=g,o[19]=h,o[20]=k,o[21]=l):l=o[21],o[22]!==x?(m=(0,c.jsx)(f.ReleasesNav,{menuItemProps:x}),o[22]=x,o[23]=m):m=o[23],o[24]!==m||o[25]!==l?(n=(0,c.jsx)(dk,{tone:"caution",icon:j.WarningOutlineIcon,content:(0,c.jsxs)(ap.Flex,{align:"center",gap:2,children:[l,m]})}),o[24]=m,o[25]=l,o[26]=n):n=o[26],n};function dP(){let a,b,e=(0,d.c)(5),{value:g}=cQ(),{documentLinkedBannerContent:h}=(0,f.useSanityCreateConfig)().components??{};e[0]!==g?(a=(0,f.getSanityCreateLinkMetadata)(g),e[0]=g,e[1]=a):a=e[1];let i=a;return h&&i?(e[2]!==h||e[3]!==i?(b=(0,c.jsx)(dk,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,c.jsx)(h,{metadata:i})}),e[2]=h,e[3]=i,e[4]=b):b=e[4],b):null}function dQ(a){let b,g,h,i,j,k,l,m,n,o,p,q,r=(0,d.c)(39),{documentId:t,currentRelease:u,isScheduledRelease:v}=a,w=u??f.LATEST;r[0]!==w?(b=(0,f.getReleaseTone)(w),r[0]=w,r[1]=b):b=r[1];let x=b,{t:y}=(0,f.useTranslation)(s),{t:z}=(0,f.useTranslation)(),{createVersion:A}=(0,f.useVersionOperations)(),[B,C]=(0,e.useState)(),D=(0,aq.useToast)();r[2]!==A||r[3]!==u._id||r[4]!==t||r[5]!==y||r[6]!==D?(g=async()=>{if(u._id){C({status:"creating",lastUpdate:new Date});try{await A((0,f.getReleaseIdFromReleaseDocumentId)(u._id),t),C({status:"created",lastUpdate:new Date})}catch(a){D.push({status:"error",closable:!0,title:y("banners.release.error.title"),description:y("banners.release.error.description",{message:a.message})}),C(void 0)}}},r[2]=A,r[3]=u._id,r[4]=t,r[5]=y,r[6]=D,r[7]=g):g=r[7];let E=g,F=function(a){let b,c,f,g=(0,d.c)(4);g[0]===Symbol.for("react.memo_cache_sentinel")?(b=new Date,g[0]=b):b=g[0];let[h,i]=(0,e.useState)(b);return 200!==g[1]?(c=()=>{let a=setInterval(()=>{i(new Date)},200);return()=>clearInterval(a)},f=[200],g[1]=200,g[2]=c,g[3]=f):(c=g[2],f=g[3]),(0,e.useEffect)(c,f),h}(200),G=B?.status==="created"&&F.getTime()-B.lastUpdate.getTime()>1e3;return r[8]!==y?(h=y("banners.release.waiting.title"),r[8]=y,r[9]=h):h=r[9],r[10]!==y?(i=y("banners.release.waiting.description"),r[10]=y,r[11]=i):i=r[11],r[12]!==G||r[13]!==h||r[14]!==i?(j={status:"info",id:"add-document-to-release",enabled:G,closable:!0,title:h,description:i},r[12]=G,r[13]=h,r[14]=i,r[15]=j):j=r[15],(0,f.useConditionalToast)(j),r[16]!==u.metadata?.title||r[17]!==z?(k=u?.metadata?.title||z("release.placeholder-untitled-release"),r[16]=u.metadata?.title,r[17]=z,r[18]=k):k=r[18],r[19]!==k?(l={title:k},r[19]=k,r[20]=l):l=r[20],r[21]!==u?(m=(0,f.getVersionInlineBadge)(u),r[21]=u,r[22]=m):m=r[22],r[23]!==m?(n={VersionBadge:m},r[23]=m,r[24]=n):n=r[24],r[25]!==y||r[26]!==n||r[27]!==l?(o=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{i18nKey:"banners.release.not-in-release",t:y,values:l,components:n})}),r[25]=y,r[26]=n,r[27]=l,r[28]=o):o=r[28],r[29]!==E||r[30]!==v||r[31]!==y||r[32]!==x||r[33]!==B?(p=v?void 0:{text:y("banners.release.action.add-to-release"),tone:x,disabled:!!B,onClick:E,mode:"default"},r[29]=E,r[30]=v,r[31]=y,r[32]=x,r[33]=B,r[34]=p):p=r[34],r[35]!==o||r[36]!==p||r[37]!==x?(q=(0,c.jsx)(dk,{tone:x,content:o,action:p}),r[35]=o,r[36]=p,r[37]=x,r[38]=q):q=r[38],q}let dR=(0,aL.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),dS=a=>{let b,h,i,k,l,m,n,o,p,q,r,t,u,v,w,x=(0,d.c)(47),{displayed:y,documentId:z,schemaType:A,i18nKey:B,isEditBlocking:C}=a,{t:D}=(0,f.useTranslation)(s),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),I=(0,aI.useTelemetry)(),{publish:J,discardChanges:K}=(0,f.useDocumentOperation)(z,y?._type||"");x[0]!==J||x[1]!==I?(b=()=>{J.execute(),F(!0),I.log(dR,{liveEditResolveType:"publish"})},x[0]=J,x[1]=I,x[2]=b):b=x[2];let L=b;x[3]!==K||x[4]!==I?(h=()=>{K.execute(),H(!0),I.log(dR,{liveEditResolveType:"discard"})},x[3]=K,x[4]=I,x[5]=h):h=x[5];let M=h;x[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{F(!1),H(!1)},x[6]=i):i=x[6],(0,e.useEffect)(i);let N=bN();x[7]!==N||x[8]!==y?._id||x[9]!==A.name?(k=()=>{typeof y?._id>"u"||N.navigateDiffView({mode:"version",previousDocument:{type:A.name,id:(0,g.getPublishedId)(y?._id)},nextDocument:{type:A.name,id:(0,g.getDraftId)(y?._id)}})},x[7]=N,x[8]=y?._id,x[9]=A.name,x[10]=k):k=x[10];let O=k;return x[11]!==A.title?(l={schemaType:A.title},x[11]=A.title,x[12]=l):l=x[12],x[13]!==B||x[14]!==D||x[15]!==l?(m=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:(0,c.jsx)(f.Translate,{t:D,i18nKey:B,values:l})}),x[13]=B,x[14]=D,x[15]=l,x[16]=m):m=x[16],x[17]!==D?(n=D("banners.obsolete-draft.actions.compare-draft.text"),x[17]=D,x[18]=n):n=x[18],x[19]!==O||x[20]!==n?(o=(0,c.jsx)(ao.Button,{text:n,mode:"ghost",onClick:O}),x[19]=O,x[20]=n,x[21]=o):o=x[21],x[22]!==D?(p=D("banners.obsolete-draft.actions.publish-draft.text"),x[22]=D,x[23]=p):p=x[23],x[24]!==C||x[25]!==D?(q=C?{content:D("banners.live-edit-draft-banner.publish.tooltip")}:{},x[24]=C,x[25]=D,x[26]=q):q=x[26],x[27]!==L||x[28]!==E||x[29]!==q||x[30]!==p?(r=(0,c.jsx)(ao.Button,{onClick:L,text:p,tooltipProps:q,loading:E,tone:"positive"}),x[27]=L,x[28]=E,x[29]=q,x[30]=p,x[31]=r):r=x[31],x[32]!==D?(t=D("banners.obsolete-draft.actions.discard-draft.text"),x[32]=D,x[33]=t):t=x[33],x[34]!==C||x[35]!==D?(u=C?{content:D("banners.live-edit-draft-banner.discard.tooltip")}:{},x[34]=C,x[35]=D,x[36]=u):u=x[36],x[37]!==M||x[38]!==G||x[39]!==t||x[40]!==u?(v=(0,c.jsx)(ao.Button,{onClick:M,text:t,tooltipProps:u,loading:G,tone:"caution"}),x[37]=M,x[38]=G,x[39]=t,x[40]=u,x[41]=v):v=x[41],x[42]!==r||x[43]!==v||x[44]!==m||x[45]!==o?(w=(0,c.jsx)(dk,{content:(0,c.jsxs)(ap.Flex,{align:"center",justify:"space-between",gap:2,children:[m,o,r,v]}),"data-testid":"live-edit-type-banner",icon:j.ErrorOutlineIcon}),x[42]=r,x[43]=v,x[44]=m,x[45]=o,x[46]=w):w=x[46],w};function dT(a){let b,e,h=(0,d.c)(4),{documentId:i,isPinnedDraftOrPublished:j}=a;h[0]!==i?(b={documentId:i},h[0]=i,h[1]=b):b=h[1];let k=(0,f.useOnlyHasVersions)(b);return(0,g.isVersionId)(i)&&k&&j?(h[2]!==i?(e=(0,c.jsx)(dU,{documentId:i}),h[2]=i,h[3]=e):e=h[3],e):null}function dU(a){let b,e,h,i,j,k,l,m,n,o=(0,d.c)(35),{documentId:p}=a,{data:q}=(0,f.useActiveReleases)(),r=(0,f.useSetPerspective)();o[0]!==p?(b=(0,g.getVersionFromId)(p)??"",o[0]=p,o[1]=b):b=o[1];let t=b;if(o[2]!==q||o[3]!==t){let a;o[5]!==t?(a=a=>a._id.includes(t),o[5]=t,o[6]=a):a=o[6],e=q.find(a),o[2]=q,o[3]=t,o[4]=e}else e=o[4];let u=e,{t:v}=(0,f.useTranslation)();o[7]!==p?(h={documentId:p},o[7]=p,o[8]=h):h=o[8];let{data:w}=(0,f.useDocumentVersions)(h);if(o[9]!==q||o[10]!==w||o[11]!==v){let a,b;o[13]!==w?(a=a=>w.find(b=>{let c=(0,g.getVersionFromId)(b)??"";return(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===c})&&!(0,f.isCardinalityOneRelease)(a),o[13]=w,o[14]=a):a=o[14],o[15]!==v?(b=a=>a.metadata.title||v("release.placeholder-untitled-release"),o[15]=v,o[16]=b):b=o[16],i=q.filter(a).map(b),o[9]=q,o[10]=w,o[11]=v,o[12]=i}else i=o[12];let x=i;o[17]!==u?(j=u&&(0,f.getReleaseTone)(u),o[17]=u,o[18]=j):j=o[18];let y=j,{t:z}=(0,f.useTranslation)(s);o[19]!==t||o[20]!==r?(k=async()=>{r(t)},o[19]=t,o[20]=r,o[21]=k):k=o[21];let A=k;return 0===x.length?null:(o[22]!==x[0]||o[23]!==x.length||o[24]!==z?(l=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(ap.Flex,{direction:"row",gap:1,wrap:"wrap",children:x.length>1?(0,c.jsx)(f.Translate,{t:z,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,c.jsxs)(f.VersionInlineBadge,{children:[" ",x[0]]})},values:{count:x.length-1}}):(0,c.jsx)(f.Translate,{t:z,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,c.jsxs)(f.VersionInlineBadge,{children:[" ",x[0]]})}})})}),o[22]=x[0],o[23]=x.length,o[24]=z,o[25]=l):l=o[25],o[26]!==x.length||o[27]!==A||o[28]!==z||o[29]!==y?(m=x.length>0?{text:z("banners.release.action.open-to-edit"),tone:y,onClick:A,mode:"default"}:void 0,o[26]=x.length,o[27]=A,o[28]=z,o[29]=y,o[30]=m):m=o[30],o[31]!==l||o[32]!==m||o[33]!==y?(n=(0,c.jsx)(dk,{tone:y,"data-testid":"open-release-to-edit-banner",content:l,action:m}),o[31]=l,o[32]=m,o[33]=y,o[34]=n):n=o[34],n)}function dV(){let a,b,e=(0,d.c)(4),{revisionNotFound:g}=cQ(),{t:h}=(0,f.useTranslation)(s);return g?(e[0]!==h?(a=h("banners.revision-not-found.description"),e[0]=h,e[1]=a):a=e[1],e[2]!==a?(b=(0,c.jsx)(dk,{tone:"caution","data-test-id":"revision-not-found-banner",icon:j.WarningOutlineIcon,content:(0,c.jsx)(ap.Text,{size:1,children:a})}),e[2]=a,e[3]=b):b=e[3],b):null}function dW(a){let b,e,g,h,i,k=(0,d.c)(12),{currentRelease:l}=a,m=l??f.LATEST;k[0]!==m?(b=(0,f.getReleaseTone)(m),k[0]=m,k[1]=b):b=k[1];let n=b,{t:o}=(0,f.useTranslation)();return k[2]!==l?(e=(0,f.formatRelativeLocalePublishDate)(l),k[2]=l,k[3]=e):e=k[3],k[4]!==e?(g={date:e},k[4]=e,k[5]=g):g=k[5],k[6]!==g||k[7]!==o?(h=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:o,i18nKey:"release.banner.scheduled-for-publishing-on",values:g})}),k[6]=g,k[7]=o,k[8]=h):h=k[8],k[9]!==h||k[10]!==n?(i=(0,c.jsx)(dk,{tone:n,icon:j.LockIcon,content:h}),k[9]=h,k[10]=n,k[11]=i):i=k[11],i}function dX(){let a=(0,d.c)(18),{value:b,editState:e}=cQ(),{selectedPerspective:g}=(0,f.usePerspective)(),h=(0,f.isGoingToUnpublish)(b)||e?.version&&(0,f.isGoingToUnpublish)(e?.version),{t:i}=(0,f.useTranslation)(s),{t:k}=(0,f.useTranslation)();if((0,f.isReleaseDocument)(g)&&h){let b,d,e,h,l,m,n;a[0]!==g.metadata?.title||a[1]!==k?(b=g.metadata?.title||k("release.placeholder-untitled-release"),a[0]=g.metadata?.title,a[1]=k,a[2]=b):b=a[2];let o=b;return a[3]!==o?(d={title:o},a[3]=o,a[4]=d):d=a[4],a[5]!==g?(e=(0,f.getVersionInlineBadge)(g),a[5]=g,a[6]=e):e=a[6],a[7]!==e?(h={VersionBadge:e},a[7]=e,a[8]=h):h=a[8],a[9]!==i||a[10]!==d||a[11]!==h?(l=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:i,i18nKey:"banners.unpublished-release-banner.text",values:d,components:h})}),a[9]=i,a[10]=d,a[11]=h,a[12]=l):l=a[12],a[13]!==i?(m=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:i,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),a[13]=i,a[14]=m):m=a[14],a[15]!==l||a[16]!==m?(n=(0,c.jsx)(dk,{tone:"critical",content:(0,c.jsxs)(ap.Stack,{space:2,children:[l,m]}),icon:j.UnpublishIcon}),a[15]=l,a[16]=m,a[17]=n):n=a[17],n}return null}let dY=(0,at.styled)(ap.Stack)`
  ${({theme:a})=>at.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${a.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${a.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,dZ=a=>{let b,e,g,h,i=(0,d.c)(14),{documentId:k,schemaType:l,title:m}=a,n=k===l.name,o=l.description,{t:p}=(0,f.useTranslation)(s);if(!1===l.__experimental_formPreviewTitle)return null;i[0]!==o||i[1]!==n||i[2]!==l.name||i[3]!==l.title?(b=!n&&(0,c.jsxs)(ap.Inline,{space:1,children:[(0,c.jsx)(ap.Text,{muted:!0,size:1,children:l.title??l.name}),o&&(0,c.jsx)(ao.Tooltip,{content:o,placement:"right",children:(0,c.jsx)(j.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),i[0]=o,i[1]=n,i[2]=l.name,i[3]=l.title,i[4]=b):b=i[4];let q=!m;return i[5]!==p||i[6]!==m?(e=m??p("document-view.form-view.form-title-fallback"),i[5]=p,i[6]=m,i[7]=e):e=i[7],i[8]!==q||i[9]!==e?(g=(0,c.jsx)(ap.Heading,{as:"h2","data-heading":!0,muted:q,"data-testid":"document-panel-document-title",children:e}),i[8]=q,i[9]=e,i[10]=g):g=i[10],i[11]!==b||i[12]!==g?(h=(0,c.jsxs)(dY,{marginBottom:6,space:4,children:[b,g]}),i[11]=b,i[12]=g,i[13]=h):h=i[13],h},d$=a=>a.preventDefault(),d_=(0,e.forwardRef)(function(a,b){let g,h,i,j,k,l,m,n,o,p,q,r,t,u,v,w=(0,d.c)(77),{hidden:x,margins:y}=a,{collapsedFieldSets:z,collapsedPaths:A,displayed:B,editState:C,documentId:D,documentType:E,fieldActions:F,onChange:G,validation:H,ready:I,formState:J,onFocus:K,connectionState:L,onBlur:M,onSetCollapsedPath:N,onPathOpen:O,onSetCollapsedFieldSet:P,onSetActiveFieldGroup:Q,openPath:R,compareValue:S,hasUpstreamVersion:T}=cQ(),{selectedReleaseId:U,selectedPerspective:V}=(0,f.usePerspective)(),W=(0,f.useDocumentStore)(),X=(0,f.useDocumentPresence)(D),{title:Y}=c2(),[Z]=(0,e.useState)(d0),$=C?.transactionSyncLock?.enabled,{t:_}=(0,f.useTranslation)(s);w[0]!==_?(g=_("document-view.form-view.sync-lock-toast.title"),w[0]=_,w[1]=g):g=w[1],w[2]!==_?(h=_("document-view.form-view.sync-lock-toast.description"),w[2]=_,w[3]=h):h=w[3],w[4]!==$||w[5]!==g||w[6]!==h?(i={id:"sync-lock",status:"warning",enabled:$,title:g,description:h,closable:!0},w[4]=$,w[5]=g,w[6]=h,w[7]=i):i=w[7],(0,f.useConditionalToast)(i),w[8]!==D||w[9]!==W.pair||w[10]!==E||w[11]!==Z||w[12]!==U?(j=()=>{let a=W.pair.documentEvents(D,E,U).pipe((0,aC.tap)(a=>{var b,c;let d,e,g;"mutation"===a.type&&Z.publish((d=(b=a).mutations.map(a=>a.patch).filter(Boolean),{type:"mutation",snapshot:b.document,patches:(0,f.fromMutationPatches)(b.origin,d)})),"rebase"===a.type&&Z.publish((e=(c=a).remoteMutations.map(a=>a.patch).filter(Boolean),g=c.localMutations.map(a=>a.patch).filter(Boolean),{type:"rebase",snapshot:c.document,patches:(0,f.fromMutationPatches)("remote",e).concat((0,f.fromMutationPatches)("local",g))}))})).subscribe();return()=>{a.unsubscribe()}},w[8]=D,w[9]=W.pair,w[10]=E,w[11]=Z,w[12]=U,w[13]=j):j=w[13],w[14]!==D||w[15]!==W||w[16]!==E||w[17]!==Z||w[18]!==U?(k=[D,W,E,Z,U],w[14]=D,w[15]=W,w[16]=E,w[17]=Z,w[18]=U,w[19]=k):k=w[19],(0,e.useEffect)(j,k);let aa=!!B?._rev;w[20]!==Z||w[21]!==B?(l=()=>{Z.publish({type:"mutation",patches:[],snapshot:B})},w[20]=Z,w[21]=B,w[22]=l):l=w[22];let ab=(0,a_.useEffectEvent)(l);w[23]!==ab||w[24]!==aa?(m=()=>{aa&&ab()},w[23]=ab,w[24]=aa,w[25]=m):m=w[25],w[26]!==aa?(n=[aa],w[26]=aa,w[27]=n):n=w[27],(0,e.useEffect)(m,n);let[ac,ad]=(0,e.useState)(null),[ae,af]=(0,e.useState)(!1);w[28]!==ae||w[29]!==ac||w[30]!==J?.focusPath.length||w[31]!==I?(o=()=>{!ae&&I&&!J?.focusPath.length&&ac&&(af(!0),(0,aq.focusFirstDescendant)(ac))},w[28]=ae,w[29]=ac,w[30]=J?.focusPath.length,w[31]=I,w[32]=o):o=w[32];let ag=J?.focusPath.length;w[33]!==ae||w[34]!==ac||w[35]!==I||w[36]!==ag?(p=[ae,ac,ag,I],w[33]=ae,w[34]=ac,w[35]=I,w[36]=ag,w[37]=p):p=w[37],(0,e.useEffect)(o,p),w[38]!==b?(q=a=>{ad(a),"function"==typeof b?b(a):b&&(b.current=a)},w[38]=b,w[39]=q):q=w[39];let ah=q,ai="reconnecting"===L||J?.readOnly||!C?.ready,aj=ai?"true":void 0;return w[40]!==z||w[41]!==A||w[42]!==S||w[43]!==L||w[44]!==D||w[45]!==C?.draft||w[46]!==C?.published||w[47]!==F||w[48]!==J||w[49]!==T||w[50]!==x||w[51]!==ai||w[52]!==M||w[53]!==G||w[54]!==K||w[55]!==O||w[56]!==Q||w[57]!==P||w[58]!==N||w[59]!==R||w[60]!==Z||w[61]!==X||w[62]!==V||w[63]!==_||w[64]!==Y||w[65]!==H?(r="connecting"!==L||C?.draft||C?.published?null===J||x?(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsx)(ap.Text,{children:_("document-view.form-view.form-hidden")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(dZ,{documentId:D,schemaType:J.schemaType,title:Y}),(0,c.jsx)(f.FormBuilder,{__internal_fieldActions:F,__internal_patchChannel:Z,changed:J.changed,collapsedFieldSets:z,collapsedPaths:A,compareValue:S??void 0,focused:J.focused,focusPath:J.focusPath,groups:J.groups,id:"root",members:J.members,onChange:G,onFieldGroupSelect:Q,onPathBlur:M,onPathFocus:K,onPathOpen:O,onSetFieldSetCollapsed:P,onSetPathCollapsed:N,openPath:R,perspective:V,hasUpstreamVersion:T,presence:X,readOnly:ai,schemaType:J.schemaType,validation:H,value:J.value})]}):(0,c.jsx)(cM,{ms:300,children:(0,c.jsxs)(ap.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,c.jsx)(ap.Spinner,{muted:!0}),(0,c.jsx)(ap.Box,{marginTop:3,children:(0,c.jsx)(ap.Text,{align:"center",muted:!0,size:1,children:_("document-view.form-view.loading")})})]})}),w[40]=z,w[41]=A,w[42]=S,w[43]=L,w[44]=D,w[45]=C?.draft,w[46]=C?.published,w[47]=F,w[48]=J,w[49]=T,w[50]=x,w[51]=ai,w[52]=M,w[53]=G,w[54]=K,w[55]=O,w[56]=Q,w[57]=P,w[58]=N,w[59]=R,w[60]=Z,w[61]=X,w[62]=V,w[63]=_,w[64]=Y,w[65]=H,w[66]=r):r=w[66],w[67]!==ah||w[68]!==aj||w[69]!==r?(t=(0,c.jsx)(ap.Box,{as:"form",onSubmit:d$,ref:ah,"data-testid":"form-view","data-read-only":aj,children:r}),w[67]=ah,w[68]=aj,w[69]=r,w[70]=t):t=w[70],w[71]!==y||w[72]!==t?(u=(0,c.jsx)(f.PresenceOverlay,{margins:y,children:t}),w[71]=y,w[72]=t,w[73]=u):u=w[73],w[74]!==x||w[75]!==u?(v=(0,c.jsx)(ap.Container,{hidden:x,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:u}),w[74]=x,w[75]=u,w[76]=v):v=w[76],v});function d0(){return(0,f.createPatchChannel)()}function d1(){let a,b,e=(0,d.c)(11),{activeViewId:f,paneKey:g,views:h}=cQ(),i=`${g}tabpanel`;if(e[0]!==f||e[1]!==g||e[2]!==i||e[3]!==h){let b;e[5]!==f||e[6]!==g||e[7]!==i?(b=(a,b)=>(0,c.jsx)(d2,{icon:a.icon,id:`${g}tab-${a.id}`,isActive:f===a.id,label:a.title,tabPanelId:i,viewId:0===b?null:a.id??null},a.id),e[5]=f,e[6]=g,e[7]=i,e[8]=b):b=e[8],a=h.map(b),e[0]=f,e[1]=g,e[2]=i,e[3]=h,e[4]=a}else a=e[4];return e[9]!==a?(b=(0,c.jsx)(ap.TabList,{space:1,children:a}),e[9]=a,e[10]=b):b=e[10],b}function d2(a){let b,e,f,g,h,i,j,k,l,m=(0,d.c)(20);m[0]!==a?({icon:b,id:e,isActive:f,label:g,tabPanelId:i,viewId:j,...h}=a,m[0]=a,m[1]=b,m[2]=e,m[3]=f,m[4]=g,m[5]=h,m[6]=i,m[7]=j):(b=m[1],e=m[2],f=m[3],g=m[4],h=m[5],i=m[6],j=m[7]);let{ready:n,editState:o}=cQ(),{setView:p}=dH();m[8]!==p||m[9]!==j?(k=()=>p(j),m[8]=p,m[9]=j,m[10]=k):k=m[10];let q=k,r=!n&&!o?.draft&&!o?.published;return m[11]!==q||m[12]!==b||m[13]!==e||m[14]!==f||m[15]!==g||m[16]!==h||m[17]!==r||m[18]!==i?(l=(0,c.jsx)(ao.Tab,{...h,"aria-controls":i,disabled:r,icon:b,id:e,label:g,onClick:q,selected:f}),m[11]=q,m[12]=b,m[13]=e,m[14]=f,m[15]=g,m[16]=h,m[17]=r,m[18]=i,m[19]=l):l=m[19],l}function d3(){let a,b=(0,d.c)(1),c=(0,e.useContext)(h.ResolvedPanesContext);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:d4},b[0]=a):a=b[0],c??a}function d4(){}let d5=Object.freeze({}),d6=Symbol("LOADING_PANE"),d7="documentPanelPortalElement",d8=(0,aL.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),d9=(0,aL.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),ea=(0,aL.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function eb(a){let b,e,g,h,i,j,k,l,m=(0,d.c)(27),{paneData:n,index:o}=a,{pane:p}=n,q=(0,ay.useRouter)(),{t:r}=(0,f.useTranslation)(s),t=(0,ay.useRouterState)(),u=(0,aI.useTelemetry)();m[0]!==t?.panes?(b=t?.panes||[],m[0]=t?.panes,m[1]=b):b=m[1];let v=b,{perspectiveStack:w}=(0,f.usePerspective)(),x=p!==d6&&"title"in p?p.title:null,y=p!==d6&&"document"===p.type?p.options.id:null,z=p!==d6&&"document"===p.type?p.options.type:null,A=y??"",B=z??"";m[2]!==w||m[3]!==A||m[4]!==B?(e={documentId:A,documentType:B,perspectiveStack:w},m[2]=w,m[3]=A,m[4]=B,m[5]=e):e=m[5];let{value:C,isLoading:D}=(0,f.useDocumentPreviewValues)(e);a:{if(y&&!D){let a;m[6]!==C?.title||m[7]!==r?(a=C?.title||r("panes.document-header-title.untitled.text"),m[6]=C?.title,m[7]=r,m[8]=a):a=m[8],g=a;break a}g=x}let E=g;m[9]!==n.groupIndex||m[10]!==q||m[11]!==v||m[12]!==u?(h=()=>{u.log(ea),q.navigate({panes:v.slice(0,n.groupIndex)})},m[9]=n.groupIndex,m[10]=q,m[11]=v,m[12]=u,m[13]=h):h=m[13];let F=h;if(!E&&!D)return null;m[14]!==E||m[15]!==r?(i=E||r("panes.document-header-title.untitled.text"),m[14]=E,m[15]=r,m[16]=i):i=m[16],m[17]!==E||m[18]!==r?(j=E||r("panes.document-header-title.untitled.text"),m[17]=E,m[18]=r,m[19]=j):j=m[19],m[20]!==j?(k={content:j},m[20]=j,m[21]=k):k=m[21];let G=+(0!==o);return m[22]!==F||m[23]!==G||m[24]!==i||m[25]!==k?(l=(0,c.jsx)(ao.Button,{mode:"bleed",text:i,tooltipProps:k,onClick:F,paddingLeft:G}),m[22]=F,m[23]=G,m[24]=i,m[25]=k,m[26]=l):l=m[26],l}function ec(a){let b,f,g=(0,d.c)(7),{paneDataItems:h,currentPaneIndex:i}=a;if(g[0]!==i||g[1]!==h){let a;g[3]!==i?(a=(a,b)=>{if(b>i)return null;let d=a.pane!==d6&&"document"===a.pane.type;return(0,c.jsxs)(e.Fragment,{children:[(0,c.jsx)(eb,{paneData:a,index:b}),b<i&&(d?(0,c.jsx)(ap.Box,{padding:1,children:(0,c.jsx)(j.ArrowRightIcon,{})}):(0,c.jsx)(ap.Text,{children:"/"}))]},`breadcrumb-item-${a.key}-${b}`)},g[3]=i,g[4]=a):a=g[4],b=h.map(a),g[0]=i,g[1]=h,g[2]=b}else b=g[2];return g[5]!==b?(f=(0,c.jsx)(ap.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:b}),g[5]=b,g[6]=f):f=g[6],f}function ed(){let a,b,e,g=(0,d.c)(23),{connectionState:h,schemaType:i,title:j,value:k,index:l}=cQ(),{paneDataItems:m}=d3(),{title:n,error:o}=c2(),{t:p}=(0,f.useTranslation)(s);g[0]!==m?(a=m.some(ee),g[0]=m,g[1]=a):a=g[1];let q=a;if("connecting"===h&&!k){let a;return g[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(c.Fragment,{}),g[2]=a):a=g[2],a}if(j){let a;return g[3]!==j?(a=(0,c.jsx)(c.Fragment,{children:j}),g[3]=j,g[4]=a):a=g[4],a}if(!k){let a,b,d=i?.title||i?.name;return g[5]!==p||g[6]!==d?(a=p("panes.document-header-title.new.text",{schemaType:d}),g[5]=p,g[6]=d,g[7]=a):a=g[7],g[8]!==a?(b=(0,c.jsx)(c.Fragment,{children:a}),g[8]=a,g[9]=b):b=g[9],b}if(o){let a,b;return g[10]!==o||g[11]!==p?(a=p("panes.document-header-title.error.text",{error:o}),g[10]=o,g[11]=p,g[12]=a):a=g[12],g[13]!==a?(b=(0,c.jsx)(c.Fragment,{children:a}),g[13]=a,g[14]=b):b=g[14],b}return g[15]!==n||g[16]!==q||g[17]!==l||g[18]!==m||g[19]!==p?(b=q?(0,c.jsx)(ec,{paneDataItems:m,currentPaneIndex:l}):n||(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:p("panes.document-header-title.untitled.text")}),g[15]=n,g[16]=q,g[17]=l,g[18]=m,g[19]=p,g[20]=b):b=g[20],g[21]!==b?(e=(0,c.jsx)(c.Fragment,{children:b}),g[21]=b,g[22]=e):e=g[22],e}function ee(a){return a.maximized}let ef=a=>{let b,e,g,h,i,k,l=(0,d.c)(16);l[0]!==a?({documentExists:b,...e}=a,l[0]=a,l[1]=b,l[2]=e):(b=l[1],e=l[2]);let{isFavorited:m,isReady:n,favorite:o,unfavorite:p}=(0,f.useManageFavorite)(e),{t:q}=(0,f.useTranslation)(s),r=m?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";l[3]!==q||l[4]!==r?(g=q(r),l[3]=q,l[4]=r,l[5]=g):g=l[5];let t=g,u=m?p:o,v=!n||!b;return l[6]!==t?(h={content:(0,c.jsx)(ap.Text,{size:1,children:t}),placement:"right"},l[6]=t,l[7]=h):h=l[7],l[8]!==m?(i=(0,c.jsx)(ap.Text,{size:1,children:m?(0,c.jsx)(j.StarFilledIcon,{}):(0,c.jsx)(j.StarIcon,{})}),l[8]=m,l[9]=i):i=l[9],l[10]!==t||l[11]!==u||l[12]!==v||l[13]!==h||l[14]!==i?(k=(0,c.jsx)(ao.Button,{mode:"bleed",onClick:u,disabled:v,"aria-label":t,"aria-live":"assertive",tooltipProps:h,children:i}),l[10]=t,l[11]=u,l[12]=v,l[13]=h,l[14]=i,l[15]=k):k=l[15],k},eg=(0,e.memo)(function(){let a,b,e,g,h,i,k=(0,d.c)(24),{editState:l,connectionState:m,views:n,documentId:o,displayed:p}=cQ(),{features:q}=cW(),{index:r,BackLink:t}=dH(),{activeWorkspace:u}=(0,f.useActiveWorkspace)(),v=n.length>1,{collapsed:w,isLast:x}=ci(),y=x&&!w?-1:0,z=q.backButton&&r>0,{t:A}=(0,f.useTranslation)(s);k[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ed,{}),k[0]=a):a=k[0];let B=a;k[1]!==v?(b=v&&(0,c.jsx)(d1,{}),k[1]=v,k[2]=b):b=k[2];let C=b;k[3]!==t||k[4]!==z||k[5]!==A?(e=z&&(0,c.jsx)(ao.Button,{as:t,"data-as":"a",icon:j.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:A("pane-header.back-button.text")}}),k[3]=t,k[4]=z,k[5]=A,k[6]=e):e=k[6];let D=e,E=p?._id??o,F=p?._type??"";k[7]!==u.dataset||k[8]!==u.projectId?(g=[u.projectId,u.dataset],k[7]=u.dataset,k[8]=u.projectId,k[9]=g):g=k[9];let G=g.join("."),H=(l?.ready&&(l.version??l.draft??l.published)!==null)??!1;k[10]!==u.dataset||k[11]!==u.name||k[12]!==u.projectId||k[13]!==E||k[14]!==F||k[15]!==G||k[16]!==H?(h=(0,c.jsx)(f.CapabilityGate,{capability:"comlink",condition:"available",children:(0,c.jsx)(ef,{resourceType:"studio",documentId:E,documentType:F,resourceId:G,schemaName:u.name,projectId:u.projectId,dataset:u.dataset,documentExists:H})}),k[10]=u.dataset,k[11]=u.name,k[12]=u.projectId,k[13]=E,k[14]=F,k[15]=G,k[16]=H,k[17]=h):h=k[17];let I=h,J="connecting"===m&&!l?.draft&&!l?.published;return k[18]!==D||k[19]!==I||k[20]!==J||k[21]!==y||k[22]!==C?(i=(0,c.jsx)(cB,{loading:J,title:B,tabs:C,tabIndex:y,backButton:D,appendTitle:I}),k[18]=D,k[19]=I,k[20]=J,k[21]=y,k[22]=C,k[23]=i):i=k[23],i}),eh=(0,at.styled)(ap.Box)({position:"relative"}),ei=(0,at.styled)(f.ScrollContainer)(({$disabled:a})=>a?{height:"100%"}:at.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),ej=function(a){let b,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=(0,d.c)(109),{footerHeight:x,headerHeight:y,isInspectOpen:z,rootElement:A,setDocumentPanelPortalElement:B,footer:C}=a,{activeViewId:D,displayed:E,documentId:F,editState:G,inspector:H,value:I,views:J,ready:K,schemaType:L,permissions:M,isPermissionsLoading:N}=cQ();if(w[0]!==I){let a=(0,f.getSanityCreateLinkMetadata)(I);b=(0,f.isSanityCreateLinked)(a),w[0]=I,w[1]=b}else b=w[1];let O=b,{params:P}=dH(),{collapsed:Q}=cc(),{collapsed:R}=ci(),S=(0,ap.usePortal)(),{features:T}=cW(),[U,V]=(0,e.useState)(null),[W,X]=(0,e.useState)(null),Y=(0,e.useRef)(null),Z=(0,f.useWorkspace)(),$=I._createdAt?"update":"create";w[2]!==D||w[3]!==J?(h=J.find(a=>a.id===D)||J[0]||{type:"form"},w[2]=D,w[3]=J,w[4]=h):h=w[4];let _=h,aa=T.splitPanes&&U||S.element;a:{let a;if(Q){let a,b=y||0,c=x?x+2:2;w[5]!==b||w[6]!==c?(a=[b,0,c,0],w[5]=b,w[6]=c,w[7]=a):a=w[7],i=a;break a}w[8]===Symbol.for("react.memo_cache_sentinel")?(a=[0,0,2,0],w[8]=a):a=w[8],i=a}let ab=i,ac="form"!==_.type;w[9]!==_.component||w[10]!==_.options||w[11]!==_.type||w[12]!==E||w[13]!==F||w[14]!==G?.draft||w[15]!==G?.published||w[16]!==L||w[17]!==I?(j=()=>{if("component"===_.type&&_.component){let a=_.component;return(0,c.jsx)(a,{document:{draft:G?.draft||null,displayed:E||I,historical:E,published:G?.published||null},documentId:F,options:_.options,schemaType:L})}return!1},w[9]=_.component,w[10]=_.options,w[11]=_.type,w[12]=E,w[13]=F,w[14]=G?.draft,w[15]=G?.published,w[16]=L,w[17]=I,w[18]=j):j=w[18],w[19]!==j?(k=j(),w[19]=j,w[20]=k):k=w[20];let ad=k;w[21]!==W?(l=()=>{W?.scrollTo&&W.scrollTo(0,0)},w[21]=W,w[22]=l):l=w[22],w[23]!==F||w[24]!==W?(m=[F,W],w[23]=F,w[24]=W,w[25]=m):m=w[25],(0,e.useEffect)(l,m),w[26]!==aa||w[27]!==B?(n=()=>{aa&&B(aa)},o=[aa,B],w[26]=aa,w[27]=B,w[28]=n,w[29]=o):(n=w[28],o=w[29]),(0,e.useEffect)(n,o),w[30]!==E||w[31]!==z||w[32]!==I?(p=z?(0,c.jsx)(dj,{value:E||I}):null,w[30]=E,w[31]=z,w[32]=I,w[33]=p):p=w[33];let ae=p,af=!!(!R&&H),{selectedPerspective:ag,selectedReleaseId:ah}=(0,f.usePerspective)(),ai=P?.historyVersion;w[34]!==E||w[35]!==F||w[36]!==ai?(q={historyVersion:ai,displayed:E,documentId:F},w[34]=E,w[35]=F,w[36]=ai,w[37]=q):q=w[37];let aj=(0,f.useFilteredReleases)(q);b:{let a,b,d,e,h,i,j,k,l,m,n,o,p,q;if(P?.historyVersion){let a;w[38]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(dI,{}),w[38]=a):a=w[38],r=a;break b}w[39]!==ag?(a=(0,f.isReleaseDocument)(ag)&&(0,f.isReleaseScheduledOrScheduling)(ag),w[39]=ag,w[40]=a):a=w[40];let s=a,t=!!(s&&E?._id&&(0,g.getVersionFromId)(E?._id)===ah);if(w[41]!==G||w[42]!==L||w[43]!==ag||w[44]!==Z.document.drafts.enabled?(d=function({isSelectedPerspectiveWriteable:a,editState:b}){return(0,f.isNewDocument)(b)&&!a.result}({isSelectedPerspectiveWriteable:b=(0,f.isPerspectiveWriteable)({selectedPerspective:ag,isDraftModelEnabled:Z.document.drafts.enabled,schemaType:L}),editState:G}),w[41]=G,w[42]=L,w[43]=ag,w[44]=Z.document.drafts.enabled,w[45]=b,w[46]=d):(b=w[45],d=w[46]),d){let a;w[47]!==b.reason||w[48]!==b.result||w[49]!==L||w[50]!==ag?(a=!b.result&&(0,c.jsx)(dO,{schemaType:L,selectedPerspective:ag,reason:b.reason}),w[47]=b.reason,w[48]=b.result,w[49]=L,w[50]=ag,w[51]=a):a=w[51],r=a;break b}if(t){let a;w[52]!==ag?(a=(0,c.jsx)(dW,{currentRelease:ag}),w[52]=ag,w[53]=a):a=w[53],r=a;break b}let u=aj.currentReleases.some(f.isCardinalityOneRelease),v=E?._id&&(0,g.isDraftId)(E._id);if("drafts"===ag&&u&&v){let a;w[54]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(dG,{}),w[54]=a):a=w[54],r=a;break b}w[55]!==ag?(e=(0,f.isSystemBundle)(ag),w[55]=ag,w[56]=e):e=w[56];let x=e,y=G?.version&&(0,f.isGoingToUnpublish)(G?.version);if(E?._id&&(0,g.getVersionFromId)(E._id)!==ah&&K&&!x&&!1===(0,f.isNewDocument)(G)&&!y){let a;w[57]!==s||w[58]!==ag||w[59]!==I._id?(a=(0,c.jsx)(dQ,{documentId:I._id,currentRelease:ag,isScheduledRelease:s}),w[57]=s,w[58]=ag,w[59]=I._id,w[60]=a):a=w[60],r=a;break b}let z=function({editState:a,workspace:b,schemaType:c}){if(!a?.ready)return{result:void 0};let d=null!==a.draft,{document:{drafts:{enabled:e}}}=b;return!1===d?{result:!1}:e?!0===c.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:G,workspace:Z,schemaType:L});if("form"===_.type&&!ah&&z.result){if("DRAFT_MODEL_INACTIVE"===z.reason){let a;w[61]!==E||w[62]!==F||w[63]!==L?(a=(0,c.jsx)(dS,{displayed:E,documentId:F,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[61]=E,w[62]=F,w[63]=L,w[64]=a):a=w[64],r=a;break b}if("LIVE_EDIT_ACTIVE"===z.reason){let a;w[65]!==E||w[66]!==F||w[67]!==L?(a=(0,c.jsx)(dS,{displayed:E,documentId:F,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[65]=E,w[66]=F,w[67]=L,w[68]=a):a=w[68],r=a;break b}}if("form"!==_.type||N){r=null;break b}w[69]!==O?(h=O&&(0,c.jsx)(dP,{}),w[69]=O,w[70]=h):h=w[70],w[71]!==M?.granted||w[72]!==$?(i=!M?.granted&&(0,c.jsx)(dB,{requiredPermission:$}),w[71]=M?.granted,w[72]=$,w[73]=i):i=w[73],w[74]===Symbol.for("react.memo_cache_sentinel")?(j=(0,c.jsx)(dV,{}),k=(0,c.jsx)(dE,{}),l=(0,c.jsx)(dp,{}),m=(0,c.jsx)(dM,{}),n=(0,c.jsx)(dl,{}),o=(0,c.jsx)(dX,{}),w[74]=j,w[75]=k,w[76]=l,w[77]=m,w[78]=n,w[79]=o):(j=w[74],k=w[75],l=w[76],m=w[77],n=w[78],o=w[79]);let A=E?._id??F;w[80]!==x||w[81]!==A?(p=(0,c.jsx)(dT,{documentId:A,isPinnedDraftOrPublished:x}),w[80]=x,w[81]=A,w[82]=p):p=w[82],w[83]!==h||w[84]!==i||w[85]!==p?(q=(0,c.jsxs)(c.Fragment,{children:[h,i,j,k,l,m,n,o,p]}),w[83]=h,w[84]=i,w[85]=p,w[86]=q):q=w[86],r=q}let ak=r;w[87]!==W?(s={documentScrollElement:W},w[87]=W,w[88]=s):s=w[88];let al=s,am=T.resizablePanes||!af;return w[89]!==ad||w[90]!==ak||w[91]!==W||w[92]!==C||w[93]!==ac||w[94]!==ae||w[95]!==Q||w[96]!==ab||w[97]!==aa||w[98]!==al||w[99]!==am?(t=am&&(0,c.jsxs)(ap.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,c.jsxs)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:[ak,(0,c.jsx)(eg,{})]}),(0,c.jsx)(eh,{flex:2,children:(0,c.jsx)(ap.PortalProvider,{element:aa,__unstable_elements:al,children:(0,c.jsx)(ap.BoundaryElementProvider,{element:W,children:(0,c.jsxs)(f.VirtualizerScrollInstanceProvider,{scrollElement:W,containerElement:Y,children:[(0,c.jsxs)(ei,{$disabled:Q||!1,"data-testid":"document-panel-scroller",ref:X,children:[(0,c.jsx)(d_,{hidden:ac,margins:ab,ref:Y}),ad]}),ae,(0,c.jsx)("div",{"data-testid":"document-panel-portal",ref:V})]})})})}),C]}),w[89]=ad,w[90]=ak,w[91]=W,w[92]=C,w[93]=ac,w[94]=ae,w[95]=Q,w[96]=ab,w[97]=aa,w[98]=al,w[99]=am,w[100]=t):t=w[100],w[101]!==F||w[102]!==A||w[103]!==L||w[104]!==af?(u=af&&(0,c.jsx)(ap.BoundaryElementProvider,{element:A,children:(0,c.jsx)(c7,{documentId:F,documentType:L.name,flex:1})}),w[101]=F,w[102]=A,w[103]=L,w[104]=af,w[105]=u):u=w[105],w[106]!==t||w[107]!==u?(v=(0,c.jsx)(cj,{children:(0,c.jsxs)(ap.Flex,{height:"fill",children:[t,u]})}),w[106]=t,w[107]=u,w[108]=v):v=w[108],v};ej.displayName="DocumentPanel";let ek=a=>{let b,c,g,h,i,k,l,m=(0,d.c)(26),{id:n,type:o,revision:p,release:q}=a,{restore:r}=(0,f.useDocumentOperation)(n,o,q),{revisionNotFound:t}=cQ(),u=(0,f.useDocumentOperationEvent)(n,o),{navigateIntent:v}=(0,ay.useRouter)(),w=(0,e.useRef)(u),[x,y]=(0,e.useState)(!1),{t:z}=(0,f.useTranslation)(s);m[0]!==r||m[1]!==p?(b=()=>{r.execute(p),y(!1)},m[0]=r,m[1]=p,m[2]=b):b=m[2];let A=b;m[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{y(!1)},m[3]=c):c=m[3];let B=c;m[4]!==u||m[5]!==n||m[6]!==v||m[7]!==o?(g=()=>{u&&u!==w.current&&("success"===u.type&&"restore"===u.op&&v("edit",{id:n,type:o}),w.current=u)},h=[u,n,v,o],m[4]=u,m[5]=n,m[6]=v,m[7]=o,m[8]=g,m[9]=h):(g=m[8],h=m[9]),(0,e.useEffect)(g,h),m[10]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{y(!0)},m[10]=i):i=m[10];let C=i;a:{if(x){let a,b;m[11]!==z?(a=z("action.restore.confirm.message"),m[11]=z,m[12]=a):a=m[12],m[13]!==A||m[14]!==a?(b={type:"confirm",tone:"critical",onCancel:B,onConfirm:A,message:a},m[13]=A,m[14]=a,m[15]=b):b=m[15],k=b;break a}k=null}let D=k,E="@initial"===p,F=void 0===p;b:{let a,b,c;if(F||t){l=null;break b}m[16]!==z?(a=z("action.restore.label"),m[16]=z,m[17]=a):a=m[17];let d=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";m[18]!==z||m[19]!==d?(b=z(d),m[18]=z,m[19]=d,m[20]=b):b=m[20],m[21]!==D||m[22]!==E||m[23]!==b||m[24]!==a?(c={label:a,tone:"caution",onHandle:C,title:b,icon:j.RevertIcon,dialog:D,disabled:E},m[21]=D,m[22]=E,m[23]=b,m[24]=a,m[25]=c):c=m[25],l=c}return l};function el(a){return("item"===a.type||"group"===a.type)&&a.renderAsButton}ek.action="restore",ek.displayName="HistoryRestoreAction";let em=(0,aG.default)(el);function en(a){let{fieldActions:b=[],menuItems:c,menuItemGroups:d}=a,e=[],f=0;for(let a=0;a<b.length;a+=1){let c=b[a];e.push(function a(b,c){return"divider"===b.type?{type:"divider",key:c}:"group"===b.type?{type:"group",key:c,children:b.children.map((b,d)=>a(b,`${c}-${d}-${b.type}`)),disabled:b.disabled,expanded:b.expanded??!0,icon:b.icon,title:b.title,i18n:b.i18n,renderAsButton:b.renderAsButton??!1}:{type:"item",key:c,intent:b.intent,disabled:b.disabled,icon:b.icon,iconRight:b.iconRight,onAction:b.onAction,renderAsButton:b.renderAsButton??!1,selected:b.selected,title:b.title,i18n:b.i18n,tone:b.tone}}(c,`${a}-${c.type}`))}f+=e.length;let g=[];for(let a of d)g.find(b=>b.key===a.id)||g.push({type:"group",key:a.id,children:[],expanded:!0,renderAsButton:!1,title:a.title,i18n:a.i18n});let h=[];for(let b=0;b<c.length;b+=1){let d=c[b],e=d.group&&g.find(a=>a.key===d.group),i="string"==typeof d.disabled?{reason:d.disabled}:d.disabled;d.group&&!e&&(e={type:"group",key:d.group,disabled:i,expanded:!0,icon:d.icon,title:d.group,children:[],renderAsButton:!1},g.push(e)),e?e.children.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone}):h.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone})}return[...h,...g,...e]}let eo=["left","bottom"],ep={small:0,medium:1,large:2,full:"auto"};function eq(a){let b,e,g,h=(0,d.c)(16),{dialog:i,referenceElement:j}=a,{t:k}=(0,f.useTranslation)(s),{cancelButtonIcon:l,cancelButtonText:m,confirmButtonIcon:n,confirmButtonText:o,message:p,onCancel:q,onConfirm:r,tone:t}=i;return h[0]!==m||h[1]!==k?(b=m||k("confirm-dialog.cancel-button.fallback-text"),h[0]=m,h[1]=k,h[2]=b):b=h[2],h[3]!==o||h[4]!==k?(e=o||k("confirm-dialog.confirm-button.fallback-text"),h[3]=o,h[4]=k,h[5]=e):e=h[5],h[6]!==l||h[7]!==n||h[8]!==p||h[9]!==q||h[10]!==r||h[11]!==j||h[12]!==b||h[13]!==e||h[14]!==t?(g=(0,c.jsx)(aH.ConfirmPopover,{cancelButtonIcon:l,cancelButtonText:b,confirmButtonIcon:n,confirmButtonText:e,message:p,onCancel:q,onConfirm:r,open:!0,referenceElement:j,tone:t,placement:"top",fallbackPlacements:eo}),h[6]=l,h[7]=n,h[8]=p,h[9]=q,h[10]=r,h[11]=j,h[12]=b,h[13]=e,h[14]=t,h[15]=g):g=h[15],g}function er(a){let b,g,h,i=(0,d.c)(12),{dialog:j}=a,k=(0,e.useId)();i[0]!==j.footer?(b=j.footer&&(0,c.jsx)(ap.Box,{paddingX:4,paddingY:3,children:j.footer}),i[0]=j.footer,i[1]=b):b=i[1];let l=b,m=!1===j.showCloseButton,n=void 0===j.width?1:ep[j.width];return i[2]!==j.content?(g=(0,c.jsx)(ap.Box,{padding:4,children:j.content}),i[2]=j.content,i[3]=g):g=i[3],i[4]!==j.header||i[5]!==j.onClose||i[6]!==k||i[7]!==l||i[8]!==m||i[9]!==n||i[10]!==g?(h=(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,c.jsx)(aq.Dialog,{animate:!0,__unstable_hideCloseButton:m,footer:l,header:j.header,id:k,onClose:j.onClose,onClickOutside:j.onClose,width:n,children:g})}),i[4]=j.header,i[5]=j.onClose,i[6]=k,i[7]=l,i[8]=m,i[9]=n,i[10]=g,i[11]=h):h=i[11],h}function es(a){let b,e,f=(0,d.c)(5),{dialog:g,referenceElement:h}=a;return f[0]!==g?(b=(0,c.jsx)(et,{dialog:g}),f[0]=g,f[1]=b):b=f[1],f[2]!==h||f[3]!==b?(e=(0,c.jsx)(ap.Popover,{content:b,fallbackPlacements:eo,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:h}),f[2]=h,f[3]=b,f[4]=e):e=f[4],e}function et(a){let b,f,g,h=(0,d.c)(6),{dialog:i}=a,{content:j,onClose:k}=i,{isTopLayer:l}=(0,ap.useLayer)(),m=(0,e.useRef)(null);return h[0]!==l||h[1]!==k?(b=a=>{"Escape"===a.key&&l&&k()},h[0]=l,h[1]=k,h[2]=b):b=h[2],(0,ap.useGlobalKeyDown)(b),h[3]===Symbol.for("react.memo_cache_sentinel")?(f=()=>[m.current],h[3]=f):f=h[3],(0,ap.useClickOutsideEvent)(l&&k,f),h[4]!==j?(g=(0,c.jsx)("div",{ref:m,children:j}),h[4]=j,h[5]=g):g=h[5],g}function eu(a){let b,e=(0,d.c)(3),{children:f}=a,{element:g,elements:h}=(0,ap.usePortal)(),i=h?.[d7]||g;return e[0]!==f||e[1]!==i?(b=(0,c.jsx)(ap.PortalProvider,{element:i,children:f}),e[0]=f,e[1]=i,e[2]=b):b=e[2],b}function ev(a){let b,f,g=(0,d.c)(17),{dialog:h,referenceElement:i}=a,j=void 0===i?null:i,k=(0,e.useId)();if("confirm"===h.type){let a;return g[0]!==h||g[1]!==j?(a=(0,c.jsx)(eq,{dialog:h,referenceElement:j}),g[0]=h,g[1]=j,g[2]=a):a=g[2],a}if("popover"===h.type){let a;return g[3]!==h||g[4]!==j?(a=(0,c.jsx)(es,{dialog:h,referenceElement:j}),g[3]=h,g[4]=j,g[5]=a):a=g[5],a}if("dialog"===h.type||!h.type){let a;return g[6]!==h?(a=(0,c.jsx)(eu,{children:(0,c.jsx)(er,{dialog:h})}),g[6]=h,g[7]=a):a=g[7],a}if("custom"===h.type){let a,b=h?.component;return g[8]!==b?(a=(0,c.jsx)(eu,{children:b}),g[8]=b,g[9]=a):a=g[9],a}return console.warn(`Unsupported modal type ${h.type}`),g[10]!==h.content||g[11]!==h.type?(b=h.content||(0,c.jsxs)(ap.Text,{size:1,children:["Unexpected modal type (",(0,c.jsx)("code",{children:h.type}),")"]}),g[10]=h.content,g[11]=h.type,g[12]=b):b=g[12],g[13]!==k||g[14]!==b||g[15]!==h.onClose?(f=(0,c.jsx)(ao.Dialog,{id:k,onClose:h.onClose,onClickOutside:h.onClose,width:1,children:b}),g[13]=k,g[14]=b,g[15]=h.onClose,g[16]=f):f=g[16],f}let ew=(0,e.memo)(function(a){let b,g,h,i,j=(0,d.c)(9),{actionStates:k,children:l,referenceElement:m}=a,[n,o]=(0,e.useState)(-1),p=k[n];j[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{o(a)},j[0]=b):b=j[0];let q=b;j[1]!==l?(g=l({handleAction:q}),j[1]=l,j[2]=g):g=j[2];let r=g;return j[3]!==p||j[4]!==m?(h=p&&p.dialog&&(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(ev,{dialog:p.dialog,referenceElement:m})}),j[3]=p,j[4]=m,j[5]=h):h=j[5],j[6]!==r||j[7]!==h?(i=(0,c.jsxs)(c.Fragment,{children:[h,r]}),j[6]=r,j[7]=h,j[8]=i):i=j[8],i});function ex(a){let b,g,h,i=(0,d.c)(10),{actionStates:j,disabled:k}=a,l=(0,e.useId)(),[m,n]=(0,e.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(b={placement:"top-end",portal:!0,preventOverflow:!0},i[0]=b):b=i[0];let o=b,{t:p}=(0,f.useTranslation)(s);i[1]!==j||i[2]!==k||i[3]!==l||i[4]!==p?(g=a=>{let{handleAction:b}=a;return(0,c.jsx)(ao.MenuButton,{id:`${l}-action-menu`,button:(0,c.jsx)(f.ContextMenuButton,{"aria-label":p("buttons.action-menu-button.aria-label"),disabled:k,"data-testid":"action-menu-button",tooltipProps:{content:p("buttons.action-menu-button.tooltip")}}),menu:(0,c.jsx)(ap.Menu,{padding:1,children:j.map((a,d)=>(0,c.jsx)(ey,{actionState:a,disabled:k,index:d,onAction:b},d))}),popover:o,ref:n})},i[1]=j,i[2]=k,i[3]=l,i[4]=p,i[5]=g):g=i[5];let q=g;return i[6]!==j||i[7]!==m||i[8]!==q?(h=(0,c.jsx)(ew,{actionStates:j,referenceElement:m,children:q}),i[6]=j,i[7]=m,i[8]=q,i[9]=h):h=i[9],h}function ey(a){let b,e,f,g,h,i=(0,d.c)(20),{actionState:j,disabled:k,index:l,onAction:m}=a,{onHandle:n}=j;i[0]!==l||i[1]!==m||i[2]!==n?(b=()=>{m(l),n&&n()},i[0]=l,i[1]=m,i[2]=n,i[3]=b):b=i[3];let o=b;i[4]!==j.shortcut?(e=j.shortcut?String(j.shortcut).split("+").map(ez):void 0,i[4]=j.shortcut,i[5]=e):e=i[5];let p=e;i[6]!==j.label?(f=j.label.replace(" ",""),i[6]=j.label,i[7]=f):f=i[7];let q=`action-${f}`,r=k||!!j.disabled;return i[8]!==j.disabled||i[9]!==j.title?(g=j.disabled&&{tooltipProps:{content:j.title}},i[8]=j.disabled,i[9]=j.title,i[10]=g):g=i[10],i[11]!==j.icon||i[12]!==j.label||i[13]!==j.tone||i[14]!==o||i[15]!==p||i[16]!==q||i[17]!==r||i[18]!==g?(h=(0,c.jsx)(ao.MenuItem,{"data-testid":q,disabled:r,hotkeys:p,icon:j.icon,onClick:o,text:j.label,tone:j.tone,...g}),i[11]=j.icon,i[12]=j.label,i[13]=j.tone,i[14]=o,i[15]=p,i[16]=q,i[17]=r,i[18]=g,i[19]=h):h=i[19],h}function ez(a){return a.slice(0,1).toUpperCase()+a.slice(1)}let eA=a=>{let b=(0,d.c)(16),{release:e}=a,{t:g}=(0,f.useTranslation)();if("archived"===e.state){let a,d;return b[0]!==g?(a=g("release.chip.tooltip.archived"),b[0]=g,b[1]=a):a=b[1],b[2]!==a?(d=(0,c.jsx)(ap.Text,{size:1,children:a}),b[2]=a,b[3]=d):d=b[3],d}if("asap"===e.metadata.releaseType){let a,d;return b[4]!==g?(a=g("release.type.asap"),b[4]=g,b[5]=a):a=b[5],b[6]!==a?(d=(0,c.jsx)(ap.Text,{size:1,children:a}),b[6]=a,b[7]=d):d=b[7],d}if("scheduled"===e.metadata.releaseType){let a,d="active"===e.state;return b[8]!==d||b[9]!==e||b[10]!==g?(a=e.metadata.intendedPublishAt&&(0,c.jsx)(ap.Text,{size:1,children:d?(0,c.jsx)(f.Translate,{t:g,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,f.formatRelativeLocalePublishDate)(e)}}):(0,c.jsx)(f.Translate,{t:g,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,f.formatRelativeLocalePublishDate)(e)}})}),b[8]=d,b[9]=e,b[10]=g,b[11]=a):a=b[11],a}if("undecided"===e.metadata.releaseType){let a,d;return b[12]!==g?(a=g("release.type.undecided"),b[12]=g,b[13]=a):a=b[13],b[14]!==a?(d=(0,c.jsx)(ap.Text,{size:1,children:a}),b[14]=a,b[15]=d):d=b[15],d}return null},eB={dateStyle:"medium",timeStyle:"short"},eC=(0,e.memo)(function(){let a,b,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=(0,d.c)(97),{selectedReleaseId:y,selectedPerspectiveName:z}=(0,f.usePerspective)(),{t:A}=(0,f.useTranslation)(),B=(0,f.useSetPerspective)(),{params:C,setParams:D}=dH(),E=(0,f.useDateTimeFormat)(eB),{loading:F}=(0,f.useActiveReleases)(),G=(0,f.useSchema)(),{editState:H,displayed:I,documentType:J,documentId:K}=cQ(),L=I&&!I._createdAt,M=(0,f.useGetDefaultPerspective)(),N=C?.historyVersion;x[0]!==I||x[1]!==K||x[2]!==N?(a={historyVersion:N,displayed:I,documentId:K},x[0]=I,x[1]=K,x[2]=N,x[3]=a):a=x[3];let O=(0,f.useFilteredReleases)(a);x[4]!==K?(b={documentId:K},x[4]=K,x[5]=b):b=x[5];let P=(0,f.useOnlyHasVersions)(b),Q=(0,f.useWorkspace)(),{onSetScheduledDraftPerspective:R}=(0,f.useSingleDocRelease)();x[6]!==R||x[7]!==C?.scheduledDraft||x[8]!==B?(e=()=>{C?.scheduledDraft?R(""):B("drafts")},x[6]=R,x[7]=C?.scheduledDraft,x[8]=B,x[9]=e):e=x[9];let S=e;x[10]!==M||x[11]!==R||x[12]!==C||x[13]!==D||x[14]!==B?(h=a=>()=>{if((0,f.isReleaseDocument)(a)&&(0,f.isCardinalityOneRelease)(a))return void R((0,f.getReleaseIdFromReleaseDocumentId)(a._id));"published"===a&&C?.historyVersion&&D({...C,rev:C?.historyEvent||void 0,since:void 0,historyVersion:void 0});let b=(0,f.isReleaseDocument)(a)?(0,f.getReleaseIdFromReleaseDocumentId)(a._id):a===M?"":a;C?.scheduledDraft?D({...C,scheduledDraft:void 0},{perspective:b}):B(b)},x[10]=M,x[11]=R,x[12]=C,x[13]=D,x[14]=B,x[15]=h):h=x[15];let T=h;if(x[16]!==J||x[17]!==G){let a=G.get(J);i=!!a&&!0===a.liveEdit,x[16]=J,x[17]=G,x[18]=i}else i=x[18];let U=i;a:{if(U&&!y){j=!1;break a}j=!H?.published}let V=j;x[19]!==I?._id||x[20]!==H?.version||x[21]!==C?(k=a=>{if(!C?.historyVersion){let b=H?.version&&(0,f.isGoingToUnpublish)(H?.version)&&(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===(0,g.getVersionFromId)(H?.version?._id);return{selected:!!((0,f.getReleaseIdFromReleaseDocumentId)(a._id)===(0,g.getVersionFromId)(I?._id||"")||b)}}let b=(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===C.historyVersion;return{selected:b,disabled:b}},x[19]=I?._id,x[20]=H?.version,x[21]=C,x[22]=k):k=x[22];let W=k;x[23]!==I?._id||x[24]!==H?.draft?._id||x[25]!==U||x[26]!==z||x[27]!==y?(l=()=>!!(U&&!H?.draft?._id&&!y||(0,g.isPublishedId)(I?._id||"")&&(0,f.isPublishedPerspective)(z||"")),x[23]=I?._id,x[24]=H?.draft?._id,x[25]=U,x[26]=z,x[27]=y,x[28]=l):l=x[28];let X=l();b:{let a=I?._id||"";if(X||C?.historyVersion||z||(0,g.isVersionId)(a)){m=!1;break b}if((0,g.isDraftId)(a)){m=!0;break b}if((0,g.isPublishedId)(a)&&H?.published&&(0,f.isPublishedPerspective)(z||"")){m=!1;break b}m=!0}let Y=m;x[29]!==H?.draft||x[30]!==L||x[31]!==U||x[32]!==P||x[33]!==y?(n=()=>!!P||!!L&&!!y||(!!H?.draft||!!U)&&!!(L&&y||U),x[29]=H?.draft,x[30]=L,x[31]=U,x[32]=P,x[33]=y,x[34]=n):n=x[34];let Z=n(),$=Q.document.drafts?.enabled;x[35]!==E||x[36]!==H?.published||x[37]!==A?(o=(0,c.jsx)(ap.Text,{size:1,children:H?.published&&H?.published?._updatedAt?(0,c.jsx)(f.Translate,{t:A,i18nKey:"release.chip.tooltip.published-date",values:{date:E.format(new Date(H?.published._updatedAt))}}):(0,c.jsx)(c.Fragment,{children:A("release.chip.tooltip.not-published")})}),x[35]=E,x[36]=H?.published,x[37]=A,x[38]=o):o=x[38],x[39]!==T?(p=T("published"),x[39]=T,x[40]=p):p=x[40],x[41]!==A?(q=A("release.chip.published"),x[41]=A,x[42]=q):q=x[42];let _=H?.published?._id||H?.id||"",aa=H?.published?._id||H?.id||"",ab=!H?.published;return x[43]!==J||x[44]!==O.notCurrentReleases||x[45]!==F||x[46]!==_||x[47]!==aa||x[48]!==ab?(r={documentId:_,menuReleaseId:aa,releases:O.notCurrentReleases,releasesLoading:F,documentType:J,fromRelease:"published",isVersion:!1,disabled:ab},x[43]=J,x[44]=O.notCurrentReleases,x[45]=F,x[46]=_,x[47]=aa,x[48]=ab,x[49]=r):r=x[49],x[50]!==S||x[51]!==X||x[52]!==V||x[53]!==o||x[54]!==p||x[55]!==q||x[56]!==r?(s=(0,c.jsx)(f.VersionChip,{tooltipContent:o,disabled:V,onClick:p,selected:X,text:q,tone:"positive",onCopyToDraftsNavigate:S,contextValues:r}),x[50]=S,x[51]=X,x[52]=V,x[53]=o,x[54]=p,x[55]=q,x[56]=r,x[57]=s):s=x[57],x[58]!==E||x[59]!==J||x[60]!==H?.draft||x[61]!==H?.id||x[62]!==H?.published?._id||x[63]!==O.notCurrentReleases||x[64]!==S||x[65]!==T||x[66]!==Z||x[67]!==$||x[68]!==Y||x[69]!==U||x[70]!==F||x[71]!==A?(t=$&&(0,c.jsx)(f.VersionChip,{tooltipContent:(0,c.jsx)(ap.Text,{size:1,children:H?.draft?(0,c.jsx)(c.Fragment,{children:H?.draft._updatedAt?(0,c.jsx)(f.Translate,{t:A,i18nKey:"release.chip.tooltip.edited-date",values:{date:E.format(new Date(H?.draft._updatedAt))}}):(0,c.jsx)(f.Translate,{t:A,i18nKey:"release.chip.tooltip.created-date",values:{date:E.format(new Date(H?.draft._createdAt))}})}):(0,c.jsx)(c.Fragment,{children:A(U?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:Y,disabled:Z,text:A("release.chip.draft"),tone:H?.draft?"caution":"neutral",onClick:T("drafts"),onCopyToDraftsNavigate:S,contextValues:{documentId:H?.draft?._id||H?.published?._id||H?.id||"",menuReleaseId:H?.draft?._id||H?.published?._id||H?.id||"",releases:O.notCurrentReleases,releasesLoading:F,documentType:J,fromRelease:"draft",isVersion:!1}}),x[58]=E,x[59]=J,x[60]=H?.draft,x[61]=H?.id,x[62]=H?.published?._id,x[63]=O.notCurrentReleases,x[64]=S,x[65]=T,x[66]=Z,x[67]=$,x[68]=Y,x[69]=U,x[70]=F,x[71]=A,x[72]=t):t=x[72],x[73]!==I?._id||x[74]!==J||x[75]!==O.inCreation||x[76]!==O.notCurrentReleases||x[77]!==S||x[78]!==F||x[79]!==A?(u=O.inCreation&&(0,c.jsx)(f.VersionChip,{tooltipContent:(0,c.jsx)(eA,{release:O.inCreation}),selected:!0,onClick:eD,locked:!1,tone:(0,f.getReleaseTone)(O.inCreation),text:O.inCreation.metadata.title||A("release.placeholder-untitled-release"),onCopyToDraftsNavigate:S,contextValues:{disabled:!0,documentId:I?._id||"",menuReleaseId:O.inCreation._id,releases:O.notCurrentReleases,releasesLoading:F,documentType:J,fromRelease:(0,f.getReleaseIdFromReleaseDocumentId)(O.inCreation._id),releaseState:O.inCreation.state,isVersion:!0,release:O.inCreation}}),x[73]=I?._id,x[74]=J,x[75]=O.inCreation,x[76]=O.notCurrentReleases,x[77]=S,x[78]=F,x[79]=A,x[80]=u):u=x[80],x[81]!==I||x[82]!==J||x[83]!==H?.version||x[84]!==O.currentReleases||x[85]!==O.notCurrentReleases||x[86]!==W||x[87]!==S||x[88]!==T||x[89]!==F||x[90]!==A?(v=I&&O.currentReleases?.map(a=>(0,c.jsx)(f.VersionChip,{tooltipContent:(0,c.jsx)(eA,{release:a}),...W(a),onClick:T(a),text:a.metadata.title||A("release.placeholder-untitled-release"),tone:(0,f.getReleaseTone)(a),locked:(0,f.isReleaseScheduledOrScheduling)(a),onCopyToDraftsNavigate:S,contextValues:{documentId:I?._id||"",menuReleaseId:a._id,releases:O.notCurrentReleases,releasesLoading:F,documentType:J,fromRelease:(0,f.getReleaseIdFromReleaseDocumentId)(a._id),releaseState:a.state,isVersion:!0,isGoingToUnpublish:!!H?.version&&(0,f.isGoingToUnpublish)(H?.version),release:a}},a._id)),x[81]=I,x[82]=J,x[83]=H?.version,x[84]=O.currentReleases,x[85]=O.notCurrentReleases,x[86]=W,x[87]=S,x[88]=T,x[89]=F,x[90]=A,x[91]=v):v=x[91],x[92]!==s||x[93]!==t||x[94]!==u||x[95]!==v?(w=(0,c.jsxs)(c.Fragment,{children:[s,t,u,v]}),x[92]=s,x[93]=t,x[94]=u,x[95]=v,x[96]=w):w=x[96],w});function eD(){}let eE=(0,at.styled)(ap.Card)(a=>{let b=(0,a0.getTheme_v2)(a.theme);return at.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${a.$showGradient&&at.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,a0.rgba)(b.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),eF=(0,e.memo)((0,e.forwardRef)(function(a,b){let g,h,i,k,l,m,n,o=(0,d.c)(41),{menuItems:p}=a,{editState:q,onMenuAction:r,onPaneClose:t,onPaneSplit:u,onSetMaximizedPane:v,menuItemGroups:w,schemaType:x,connectionState:y,views:z,unstable_languageFilter:A,documentId:B}=cQ(),{features:C}=cW(),{index:D,BackLink:E,hasGroupSiblings:F}=dH(),{maximizedPane:G}=d3(),{actions:H}=(0,f.useFieldActions)(),[I,J]=(0,e.useState)(null),K=(0,e.useRef)(null),L=function(a){let b,c,f=(0,d.c)(3),[g,h]=(0,e.useState)(!1);return f[0]!==a?(b=()=>{let b=()=>{let b=a.current;if(!b)return;let{scrollWidth:c,clientWidth:d}=b;if(!(c>d))return void h(!1);let{scrollLeft:e}=b;h(!(e+d>=c))},{intersectionObserver:c,mutationObserver:d}=function(){b();let c=a.current;if(!c)return{intersectionObserver:null,mutationObserver:null};let d=new IntersectionObserver(a=>{let b=a[0];b&&h(!b.isIntersecting)}),e=()=>{d.disconnect();let a=c.children[c.children.length-1];d.observe(a)};e();let f=new MutationObserver(()=>{e(),b()});return f.observe(c,{childList:!0,subtree:!1}),{intersectionObserver:d,mutationObserver:f}}();return()=>{c?.disconnect(),d?.disconnect()}},c=[a],f[0]=a,f[1]=b,f[2]=c):(b=f[1],c=f[2]),(0,e.useEffect)(b,c),g}(K),M=(0,aI.useTelemetry)();o[0]!==H||o[1]!==w||o[2]!==p||o[3]!==r?(g=en({actionHandler:r,fieldActions:H,menuItems:p,menuItemGroups:w}),o[0]=H,o[1]=w,o[2]=p,o[3]=r,o[4]=g):g=o[4];let N=g;o[5]!==N?(h=N.filter(el),o[5]=N,o[6]=h):h=o[6];let O=h;o[7]!==N?(i=N.filter(em),o[7]=N,o[8]=i):i=o[8];let P=i,{collapsed:Q,isLast:R}=ci(),S=R&&!Q?-1:0,T=C.splitViews&&u&&z.length>1,U=T&&F,V=C.backButton&&D>0,W=!U&&!V&&!!E,{t:X}=(0,f.useTranslation)(s),Y=G?.pane&&"object"==typeof G.pane&&"document"===G.pane.type&&G.pane.options.id===B;o[9]!==Y||o[10]!==v||o[11]!==M?(k=()=>{v?.(),Y?M.log(d9):M.log(d8)},o[9]=Y,o[10]=v,o[11]=M,o[12]=k):k=o[12];let Z=k;o[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)(ed,{}),o[13]=l):l=o[13];let $=l;o[14]!==E||o[15]!==V||o[16]!==X?(m=V&&(0,c.jsx)(ao.Button,{as:E,"data-as":"a",icon:j.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:X("pane-header.back-button.text")}}),o[14]=E,o[15]=V,o[16]=X,o[17]=m):m=o[17];let _=m;return o[18]!==E||o[19]!==_||o[20]!==Q||o[21]!==y||o[22]!==P||o[23]!==q||o[24]!==Z||o[25]!==Y||o[26]!==O||o[27]!==t||o[28]!==u||o[29]!==v||o[30]!==b||o[31]!==I||o[32]!==x||o[33]!==L||o[34]!==W||o[35]!==T||o[36]!==U||o[37]!==X||o[38]!==S||o[39]!==A?(n=(0,c.jsx)(ao.TooltipDelayGroupProvider,{children:Q?(0,c.jsx)(cB,{border:!0,ref:b,loading:"connecting"===y&&!q?.draft&&!q?.published,title:$,tabIndex:S,backButton:_}):(0,c.jsx)(ap.Card,{hidden:Q,style:{lineHeight:0},borderBottom:!0,children:(0,c.jsxs)(ap.Flex,{gap:3,paddingY:3,children:[(0,c.jsx)(eE,{$showGradient:L,children:(0,c.jsx)(ap.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:K,children:(0,c.jsx)(eC,{})})}),(0,c.jsx)(ap.Box,{flex:"none",paddingRight:3,children:(0,c.jsxs)(ap.Flex,{align:"center",gap:1,children:[A.length>0&&(0,c.jsx)(c.Fragment,{children:A.map((a,b)=>(0,c.jsx)(a,{schemaType:x},`language-filter-${b}`))}),O.map(eI),q&&(0,c.jsx)(hx,{group:"paneActions",children:a=>{let{states:b}=a;return(0,c.jsx)(eG,{contextMenuNodes:P,setReferenceElement:J,referenceElement:I,states:b})}}),T&&(0,c.jsx)(ao.Button,{"aria-label":X("buttons.split-pane-button.aria-label"),icon:j.SplitVerticalIcon,mode:"bleed",onClick:u,tooltipProps:{content:X("buttons.split-pane-button.tooltip")}},"split-pane-button"),U&&(0,c.jsx)(ao.Button,{icon:j.CloseIcon,mode:"bleed",onClick:t,tooltipProps:{content:X("buttons.split-pane-close-button.title")}},"close-view-button"),v&&(0,c.jsx)(ao.Button,{"aria-label":X(Y?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:Y?j.CollapseIcon:j.ExpandIcon,mode:"bleed",onClick:Z,tooltipProps:{content:X(Y?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":Y?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),W&&(0,c.jsx)(ao.Button,{icon:j.CloseIcon,mode:"bleed",tooltipProps:{content:X("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),o[18]=E,o[19]=_,o[20]=Q,o[21]=y,o[22]=P,o[23]=q,o[24]=Z,o[25]=Y,o[26]=O,o[27]=t,o[28]=u,o[29]=v,o[30]=b,o[31]=I,o[32]=x,o[33]=L,o[34]=W,o[35]=T,o[36]=U,o[37]=X,o[38]=S,o[39]=A,o[40]=n):n=o[40],n})),eG=(0,e.memo)(function(a){let b,f,g=(0,d.c)(7),{setReferenceElement:h,referenceElement:i,contextMenuNodes:j}=a,k=(0,e.useDeferredValue)(a.states);return g[0]!==k?(b=k.filter(eJ),g[0]=k,g[1]=b):b=g[1],g[2]!==j||g[3]!==i||g[4]!==h||g[5]!==b?(f=(0,c.jsx)(eH,{setReferenceElement:h,referenceElement:i,contextMenuNodes:j,states:b}),g[2]=j,g[3]=i,g[4]=h,g[5]=b,g[6]=f):f=g[6],f}),eH=(0,e.memo)(function(a){let b,e,f=(0,d.c)(8),{states:g,setReferenceElement:h,contextMenuNodes:i,referenceElement:j}=a;f[0]!==i||f[1]!==h||f[2]!==g?(b=a=>{let{handleAction:b}=a;return(0,c.jsx)("div",{ref:h,children:(0,c.jsx)(cs,{nodes:i,actionsNodes:g.length>0?g.map((a,d)=>(0,c.jsx)(ey,{actionState:a,disabled:!!a.disabled,index:d,onAction:b},a.label)):void 0},"context-menu")})},f[0]=i,f[1]=h,f[2]=g,f[3]=b):b=f[3];let k=b;return f[4]!==j||f[5]!==k||f[6]!==g?(e=(0,c.jsx)(ew,{actionStates:g,referenceElement:j,children:k}),f[4]=j,f[5]=k,f[6]=g,f[7]=e):e=f[7],e});function eI(a){return(0,c.jsx)(cD,{node:a},a.key)}function eJ(a){return!a.action||a.action!==ek.action}function eK(a){let b,e,f=(0,d.c)(3),{size:g}=a;return f[0]===Symbol.for("react.memo_cache_sentinel")?(b={pointerEvents:"none",visibility:"hidden",width:0},f[0]=b):b=f[0],f[1]!==g?(e=(0,c.jsx)(ao.Button,{"aria-hidden":!0,disabled:!0,size:g,style:b,text:"-"}),f[1]=g,f[2]=e):e=f[2],e}let eL={primary:"primary",success:"positive",warning:"caution",danger:"critical"},eM=(0,e.memo)(function(a){let b,e,f=(0,d.c)(4),{states:g}=a;return 0===g.length?null:(f[0]!==g?(b=g.map(eQ),f[0]=g,f[1]=b):b=f[1],f[2]!==b?(e=(0,c.jsx)(ap.Inline,{space:1,children:b}),f[2]=b,f[3]=e):e=f[3],e)}),eN=(0,e.memo)(function(a){let b,f=(0,d.c)(2),g=(0,e.useDeferredValue)(a.states);return f[0]!==g?(b=(0,c.jsx)(eM,{states:g}),f[0]=g,f[1]=b):b=f[1],b});function eO(){let a,b=(0,d.c)(3),{badges:e,editState:f}=cQ();return f&&e?(b[0]!==e||b[1]!==f?(a=(0,c.jsx)(hy,{badges:e,badgeProps:f,children:eP}),b[0]=e,b[1]=f,b[2]=a):a=b[2],a):null}function eP(a){let{states:b}=a;return(0,c.jsx)(eN,{states:b})}function eQ(a,b){return(0,c.jsx)(ao.Tooltip,{content:a.title,disabled:!a.title,placement:"top",portal:!0,children:(0,c.jsx)(ap.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:a.color?eL[a.color]:void 0,style:{whiteSpace:"nowrap"},children:a.label})},`${a.label}-${b}`)}let eR={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},eS=a=>{let b,g,h,i,k,l=(0,d.c)(32),{id:m,type:n,draft:o,release:p,published:q}=a;cQ();let{delete:r}=(0,f.useDocumentOperation)(m,n,p),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),{t:x}=(0,f.useTranslation)(s);l[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{w(!1)},l[0]=b):b=l[0];let y=b;l[1]!==r?(g=a=>{w(!1),u(!0),r.execute(a),u(!1)},l[1]=r,l[2]=g):g=l[2];let z=g;l[3]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{w(!0)},l[3]=h):h=l[3];let A=h;l[4]!==m||l[5]!==p||l[6]!==n?(i={id:m,type:n,version:p,permission:"delete"},l[4]=m,l[5]=p,l[6]=n,l[7]=i):i=l[7];let[B,C]=(0,f.useDocumentPairPermissions)(i),D=(0,f.useCurrentUser)();a:{let a,b,d,e;if(!q){k=null;break a}if(!C&&!B?.granted){let a,b,d;l[8]!==x?(a=x("action.delete.label"),l[8]=x,l[9]=a):a=l[9],l[10]!==D?(b=(0,c.jsx)(f.InsufficientPermissionsMessage,{context:"delete-document",currentUser:D}),l[10]=D,l[11]=b):b=l[11],l[12]!==a||l[13]!==b?(d={tone:"critical",icon:j.TrashIcon,disabled:!0,label:a,title:b},l[12]=a,l[13]=b,l[14]=d):d=l[14],k=d;break a}let g=t||!!r.disabled||C;l[15]!==r.disabled||l[16]!==x?(a=r.disabled&&x(eR[r.disabled])||"",l[15]=r.disabled,l[16]=x,l[17]=a):a=l[17],l[18]!==t||l[19]!==x?(b=x(t?"action.delete.running.label":"action.delete.label"),l[18]=t,l[19]=x,l[20]=b):b=l[20],l[21]!==o?._id||l[22]!==z||l[23]!==m||l[24]!==v||l[25]!==n?(d=v&&{type:"custom",component:(0,c.jsx)(he,{action:"delete",id:o?._id||m,type:n,onCancel:y,onConfirm:z})},l[21]=o?._id,l[22]=z,l[23]=m,l[24]=v,l[25]=n,l[26]=d):d=l[26],l[27]!==g||l[28]!==a||l[29]!==b||l[30]!==d?(e={tone:"critical",icon:j.TrashIcon,disabled:g,title:a,label:b,shortcut:"Ctrl+Alt+D",onHandle:A,dialog:d},l[27]=g,l[28]=a,l[29]=b,l[30]=d,l[31]=e):e=l[31],k=e}return k};function eT(a){let b,g,h,i,j,k,l=(0,d.c)(18),{publishedExists:m,onCancel:n,onConfirm:o}=a,{t:p}=(0,f.useTranslation)(s),q=`deletion-confirmation-${(0,e.useId)()}`;return l[0]!==p?(b=p("action.discard-changes.confirm-dialog.header.text"),l[0]=p,l[1]=b):b=l[1],l[2]!==p?(g=p("action.discard-changes.label"),l[2]=p,l[3]=g):g=l[3],l[4]!==o||l[5]!==g?(h={confirmButton:{text:g,onClick:o}},l[4]=o,l[5]=g,l[6]=h):h=l[6],l[7]!==m||l[8]!==p?(i=p(m?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),l[7]=m,l[8]=p,l[9]=i):i=l[9],l[10]!==i?(j=(0,c.jsx)(ap.Text,{size:1,children:i}),l[10]=i,l[11]=j):j=l[11],l[12]!==q||l[13]!==n||l[14]!==b||l[15]!==h||l[16]!==j?(k=(0,c.jsx)(ao.Dialog,{width:1,id:q,header:b,footer:h,onClose:n,onClickOutside:n,children:j}),l[12]=q,l[13]=n,l[14]=b,l[15]=h,l[16]=j,l[17]=k):k=l[17],k}eS.action="delete",eS.displayName="DeleteAction";let eU={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},eV=a=>{let b,h,i,k,l,m=(0,d.c)(29),{id:n,type:o,published:p,liveEdit:q,release:r}=a,{discardChanges:t}=(0,f.useDocumentOperation)(n,o,r),[u,v]=(0,e.useState)(!1);m[0]!==n||m[1]!==r||m[2]!==o?(b={id:n,type:o,version:r,permission:"discardDraft"},m[0]=n,m[1]=r,m[2]=o,m[3]=b):b=m[3];let[w,x]=(0,f.useDocumentPairPermissions)(b),y=(0,f.useCurrentUser)(),{displayed:z}=cQ(),{t:A}=(0,f.useTranslation)(s),B=z?._id&&(0,g.isPublishedId)(z?._id);m[4]!==t?(h=()=>{t.execute(),v(!1)},m[4]=t,m[5]=h):h=m[5];let C=h;m[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{v(!1)},m[6]=i):i=m[6];let D=i;m[7]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{v(!0)},m[7]=k):k=m[7];let E=k;a:{let a,b,d,e;if(q||B){l=null;break a}if(!x&&!w?.granted){let a,b,d;m[8]!==A?(a=A("action.discard-changes.label"),m[8]=A,m[9]=a):a=m[9],m[10]!==y?(b=(0,c.jsx)(f.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:y}),m[10]=y,m[11]=b):b=m[11],m[12]!==a||m[13]!==b?(d={tone:"critical",icon:j.ResetIcon,disabled:!0,label:a,title:b},m[12]=a,m[13]=b,m[14]=d):d=m[14],l=d;break a}let g=!!t.disabled||x,h=t.disabled&&eU[t.disabled]||"";m[15]!==A||m[16]!==h?(a=A(h),m[15]=A,m[16]=h,m[17]=a):a=m[17],m[18]!==A?(b=A("action.discard-changes.label"),m[18]=A,m[19]=b):b=m[19],m[20]!==C||m[21]!==u||m[22]!==p?(d=u&&{type:"custom",component:(0,c.jsx)(eT,{onCancel:D,onConfirm:C,publishedExists:!!p})},m[20]=C,m[21]=u,m[22]=p,m[23]=d):d=m[23],m[24]!==d||m[25]!==g||m[26]!==a||m[27]!==b?(e={tone:"critical",icon:j.ResetIcon,disabled:g,title:a,label:b,onHandle:E,dialog:d},m[24]=d,m[25]=g,m[26]=a,m[27]=b,m[28]=e):e=m[28],l=e}return l};eV.action="discardChanges",eV.displayName="DiscardChangesAction";let eW={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},eX=a=>{let b,g,h,i=(0,d.c)(29),{id:k,type:l,release:m,mapDocument:n}=a,o=(0,f.useDocumentStore)(),{duplicate:p}=(0,f.useDocumentOperation)(k,l,m),{navigateIntent:q}=(0,ay.useRouter)(),[r,t]=(0,e.useState)(!1);i[0]!==k||i[1]!==m||i[2]!==l?(b={id:k,type:l,version:m,permission:"duplicate"},i[0]=k,i[1]=m,i[2]=l,i[3]=b):b=i[3];let[u,v]=(0,f.useDocumentPairPermissions)(b),{t:w}=(0,f.useTranslation)(s),x=(0,f.useCurrentUser)();i[4]!==o.pair||i[5]!==p||i[6]!==k||i[7]!==n||i[8]!==q||i[9]!==l?(g=async()=>{let a=(0,as.uuid)();t(!0);let b=(0,aD.firstValueFrom)(o.pair.operationEvents(k,l).pipe((0,aD.filter)(eY)));p.execute(a,{mapDocument:n}),await b,q("edit",{id:a,type:l}),t(!1)},i[4]=o.pair,i[5]=p,i[6]=k,i[7]=n,i[8]=q,i[9]=l,i[10]=g):g=i[10];let y=g;a:{let a,b,d;if(!v&&!u?.granted){let a,b,d;i[11]!==w?(a=w("action.duplicate.label"),i[11]=w,i[12]=a):a=i[12],i[13]!==x?(b=(0,c.jsx)(f.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:x}),i[13]=x,i[14]=b):b=i[14],i[15]!==a||i[16]!==b?(d={icon:j.CopyIcon,disabled:!0,label:a,title:b},i[15]=a,i[16]=b,i[17]=d):d=i[17],h=d;break a}let e=r||!!p.disabled||v;i[18]!==r||i[19]!==w?(a=w(r?"action.duplicate.running.label":"action.duplicate.label"),i[18]=r,i[19]=w,i[20]=a):a=i[20],i[21]!==p.disabled||i[22]!==w?(b=p.disabled?w(eW[p.disabled]):"",i[21]=p.disabled,i[22]=w,i[23]=b):b=i[23],i[24]!==y||i[25]!==e||i[26]!==a||i[27]!==b?(d={icon:j.CopyIcon,disabled:e,label:a,title:b,onHandle:y},i[24]=y,i[25]=e,i[26]=a,i[27]=b,i[28]=d):d=i[28],h=d}return h};function eY(a){return"duplicate"===a.op&&"success"===a.type}eX.action="duplicate",eX.displayName="DuplicateAction";let eZ=(0,aL.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),e$={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},e_={status:"published"};function e0(a,b,d){return"ALREADY_PUBLISHED"===a&&b?(0,c.jsx)(e1,{publishedAt:b}):d(e$[a])}function e1(a){let b,e,g,h=(0,d.c)(6),{publishedAt:i}=a,{t:j}=(0,f.useTranslation)(s);h[0]===Symbol.for("react.memo_cache_sentinel")?(b={useTemporalPhrase:!0},h[0]=b):b=h[0];let k=(0,f.useRelativeTime)(i,b);return h[1]!==j||h[2]!==k?(e=j("action.publish.already-published.tooltip",{timeSincePublished:k}),h[1]=j,h[2]=k,h[3]=e):e=h[3],h[4]!==e?(g=(0,c.jsx)("span",{children:e}),h[4]=e,h[5]=g):g=h[5],g}let e2=a=>{let b,h,i,k,l,m,n,o,p,q,r,t=(0,d.c)(79),{id:u,type:v,liveEdit:w,draft:x,published:y,release:z}=a,[A,B]=(0,e.useState)(null),{publish:C}=(0,f.useDocumentOperation)(u,v),{changesOpen:D,documentId:E,documentType:F,value:G}=cQ(),H=(0,f.useValidationStatus)(G._id,v),I=(0,f.useSyncState)(u,v),J=(0,f.useEditState)(E,F),{t:K}=(0,f.useTranslation)(s);t[0]!==J?.draft||t[1]!==J?.published?(b=J?.draft||J?.published||{},t[0]=J?.draft,t[1]=J?.published,t[2]=b):b=t[2];let L=b._rev;t[3]!==H.validation?(h=H.validation.some(ar.isValidationErrorMarker),t[3]=H.validation,t[4]=h):h=t[4];let M=h,[N,O]=(0,e.useState)(!1),P=I.isSyncing,Q=H.isValidating;t[5]!==u||t[6]!==v?(i={id:u,type:v,permission:"publish"},t[5]=u,t[6]=v,t[7]=i):i=t[7];let[R,S]=(0,f.useDocumentPairPermissions)(i),T=(0,f.useCurrentUser)();t[8]!==M||t[9]!==C.disabled||t[10]!==y||t[11]!==K?(k=C.disabled?e0(C.disabled,(y||{})._updatedAt,K)||"":M?K("action.publish.validation-issues.tooltip"):"",t[8]=M,t[9]=C.disabled,t[10]=y,t[11]=K,t[12]=k):k=t[12];let U=k,V=y?._rev;t[13]!==V||t[14]!==C?(l=()=>{C.execute(),B({status:"publishing",publishRevision:V})},t[13]=V,t[14]=C,t[15]=l):l=t[15];let W=l;t[16]!==W||t[17]!==M||t[18]!==P||t[19]!==N||t[20]!==L||t[21]!==H.isValidating||t[22]!==H.revision?(m=()=>{let a=!1===H.isValidating&&H.revision!==L;N&&!P&&a&&(M||W(),O(!1))},t[16]=W,t[17]=M,t[18]=P,t[19]=N,t[20]=L,t[21]=H.isValidating,t[22]=H.revision,t[23]=m):m=t[23],t[24]!==W||t[25]!==M||t[26]!==P||t[27]!==Q||t[28]!==N||t[29]!==L||t[30]!==H.isValidating||t[31]!==H.revision?(n=[P,W,M,N,H.revision,L,Q,H.isValidating],t[24]=W,t[25]=M,t[26]=P,t[27]=Q,t[28]=N,t[29]=L,t[30]=H.isValidating,t[31]=H.revision,t[32]=n):n=t[32],(0,e.useEffect)(m,n),t[33]!==V||t[34]!==A?(o=()=>{let a=A?.status==="publishing"&&V!==A.publishRevision,b=a?e_:null,c=setTimeout(()=>{B(b)},a?200:4e3);return()=>clearTimeout(c)},t[33]=V,t[34]=A,t[35]=o):o=t[35],t[36]!==D||t[37]!==V||t[38]!==A?(p=[D,A,V],t[36]=D,t[37]=V,t[38]=A,t[39]=p):p=t[39],(0,e.useEffect)(o,p);let X=(0,aI.useTelemetry)();t[40]!==W||t[41]!==x?._createdAt||t[42]!==y||t[43]!==L||t[44]!==I.isSyncing||t[45]!==X||t[46]!==H.isValidating||t[47]!==H.revision?(q=()=>{X.log(eZ,{publishedImmediately:!x?._createdAt,previouslyPublished:!!y}),I.isSyncing||H.isValidating||H.revision!==L?O(!0):W()},t[40]=W,t[41]=x?._createdAt,t[42]=y,t[43]=L,t[44]=I.isSyncing,t[45]=X,t[46]=H.isValidating,t[47]=H.revision,t[48]=q):q=t[48];let Y=q;a:{let a,b,d;if(z||w){r=null;break a}if((0,g.isPublishedId)(G._id)&&null!==x){let a,b,c;t[49]!==K?(a=K("action.publish.label"),t[49]=K,t[50]=a):a=t[50];let d=y?._updatedAt;t[51]!==K||t[52]!==d?(b=e0("ALREADY_PUBLISHED",d,K),t[51]=K,t[52]=d,t[53]=b):b=t[53],t[54]!==a||t[55]!==b?(c={tone:"default",icon:j.PublishIcon,label:a,title:b,disabled:!0},t[54]=a,t[55]=b,t[56]=c):c=t[56],r=c;break a}if(!S&&!R?.granted){let a,b,d;t[57]!==K?(a=K("action.publish.label"),t[57]=K,t[58]=a):a=t[58],t[59]!==T?(b=(0,c.jsx)(f.InsufficientPermissionsMessage,{context:"publish-document",currentUser:T}),t[59]=T,t[60]=b):b=t[60],t[61]!==a||t[62]!==b?(d={tone:"default",icon:j.PublishIcon,label:a,title:b,disabled:!0},t[61]=a,t[62]=b,t[63]=d):d=t[63],r=d;break a}let e=!!(N||J?.transactionSyncLock?.enabled||A?.status==="publishing"||A?.status==="published"||M||C.disabled),h=e||S;t[64]!==N||t[65]!==A?.status||t[66]!==K?(a=K(A?.status==="published"?"action.publish.published.label":N||A?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),t[64]=N,t[65]=A?.status,t[66]=K,t[67]=a):a=t[67],t[68]!==N||t[69]!==A?.status||t[70]!==K||t[71]!==U?(b=N?K("action.publish.waiting"):A?.status==="published"||A?.status==="publishing"?null:U,t[68]=N,t[69]=A?.status,t[70]=K,t[71]=U,t[72]=b):b=t[72];let i=e||N?null:"Ctrl+Alt+P";t[73]!==Y||t[74]!==h||t[75]!==a||t[76]!==b||t[77]!==i?(d={disabled:h,tone:"default",label:a,icon:j.PublishIcon,title:b,shortcut:i,onHandle:Y},t[73]=Y,t[74]=h,t[75]=a,t[76]=b,t[77]=i,t[78]=d):d=t[78],r=d}return r};e2.action="publish",e2.displayName="PublishAction";let e3={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},e4=a=>{let b,g,h,i,k,l,m=(0,d.c)(22),{id:n,type:o,draft:p,liveEdit:q,release:r}=a,{unpublish:t}=(0,f.useDocumentOperation)(n,o),[u,v]=(0,e.useState)(!1);m[0]!==n||m[1]!==o?(b={id:n,type:o,permission:"unpublish"},m[0]=n,m[1]=o,m[2]=b):b=m[2];let[w,x]=(0,f.useDocumentPairPermissions)(b),y=(0,f.useCurrentUser)(),{t:z}=(0,f.useTranslation)(s),{selectedPerspective:A}=(0,f.usePerspective)(),B="drafts"===A;m[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{v(!1)},m[3]=g):g=m[3];let C=g;m[4]!==t?(h=()=>{v(!1),t.execute()},m[4]=t,m[5]=h):h=m[5];let D=h;a:{if(u){let a,b=p?._id||n;m[6]!==D||m[7]!==b||m[8]!==o?(a={type:"dialog",onClose:C,content:(0,c.jsx)(he,{id:b,type:o,action:"unpublish",onCancel:C,onConfirm:D})},m[6]=D,m[7]=b,m[8]=o,m[9]=a):a=m[9],i=a;break a}i=null}let E=i;return m[10]!==y||m[11]!==E||m[12]!==B||m[13]!==x||m[14]!==q||m[15]!==w?.granted||m[16]!==r||m[17]!==z||m[18]!==t.disabled?(k=()=>r||B||q?null:x||w?.granted?{tone:"critical",icon:j.UnpublishIcon,disabled:!!t.disabled||x,label:z("action.unpublish.label"),title:t.disabled?z(e3[t.disabled]):"",onHandle:()=>v(!0),dialog:E}:{tone:"critical",icon:j.UnpublishIcon,label:"Unpublish",title:(0,c.jsx)(f.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:y}),disabled:!0},m[10]=y,m[11]=E,m[12]=B,m[13]=x,m[14]=q,m[15]=w?.granted,m[16]=r,m[17]=z,m[18]=t.disabled,m[19]=k):k=m[19],m[20]!==k?(l=k(),m[20]=k,m[21]=l):l=m[21],l};e4.action="unpublish",e4.displayName="UnpublishAction";let e5=(0,e.memo)(function(a){let b,g,h,i,j,k,l,m,n,o=(0,d.c)(37),{disabled:p,states:q}=a,{__internal_tasks:r}=(0,f.useSource)(),{editState:s}=cQ(),{params:t}=dH(),u=!!t?.rev,{selectedReleaseId:v}=(0,f.usePerspective)();o[0]!==q?([b,...g]=q,o[0]=q,o[1]=b,o[2]=g):(b=o[1],g=o[2]);let[w,x]=(0,e.useState)(null);a:{let a,d,e,f;if(!b||!b.title&&!b.shortcut){h=null;break a}o[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:300},o[3]=a):a=o[3],o[4]!==b.title?(d=b.title&&(0,c.jsx)(ap.Text,{size:1,children:b.title}),o[4]=b.title,o[5]=d):d=o[5],o[6]!==b.shortcut?(e=b.shortcut&&(0,c.jsx)(ao.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(b.shortcut).split("+").map(fc)}),o[6]=b.shortcut,o[7]=e):e=o[7],o[8]!==d||o[9]!==e?(f=(0,c.jsxs)(ap.Flex,{style:a,align:"center",gap:3,children:[d,e]}),o[8]=d,o[9]=e,o[10]=f):f=o[10],h=f}let y=h;o[11]!==s?.liveEdit||o[12]!==b||o[13]!==v||o[14]!==u?(i=u?!!b:v?b&&!(0,f.isSanityDefinedAction)(b):b&&!s?.liveEdit,o[11]=s?.liveEdit,o[12]=b,o[13]=v,o[14]=u,o[15]=i):i=o[15];let z=i;o[16]!==b||o[17]!==g||o[18]!==z?(j=z?g:[b,...g].filter(Boolean),o[16]=b,o[17]=g,o[18]=z,o[19]=j):j=o[19];let A=j,B=r&&r.footerAction;return o[20]!==p||o[21]!==b||o[22]!==z||o[23]!==y?(k=z&&(0,c.jsx)(ap.LayerProvider,{zOffset:200,children:(0,c.jsx)(ao.Tooltip,{disabled:!y,content:y,placement:"top",children:(0,c.jsx)(ap.Stack,{children:(0,c.jsx)(ao.Button,{"data-testid":`action-${ck(b.label)}`,disabled:p||!!b.disabled,icon:b.icon,onClick:b.onHandle,ref:x,text:b.label,tone:b.tone||"primary"})})})}),o[20]=p,o[21]=b,o[22]=z,o[23]=y,o[24]=k):k=o[24],o[25]!==p||o[26]!==A?(l=A.length>0&&(0,c.jsx)(ex,{actionStates:A,disabled:p}),o[25]=p,o[26]=A,o[27]=l):l=o[27],o[28]!==w||o[29]!==b||o[30]!==z?(m=z&&b&&b.dialog&&(0,c.jsx)(ev,{dialog:b.dialog,referenceElement:w}),o[28]=w,o[29]=b,o[30]=z,o[31]=m):m=o[31],o[32]!==B||o[33]!==k||o[34]!==l||o[35]!==m?(n=(0,c.jsxs)(ap.Flex,{align:"center",gap:1,children:[B,k,l,m]}),o[32]=B,o[33]=k,o[34]=l,o[35]=m,o[36]=n):n=o[36],n}),e6=(0,e.memo)(function(){let a,b=(0,d.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(hx,{group:"default",children:fd}),b[0]=a):a=b[0],a});function e7(a){let b,e,f=(0,d.c)(6),{connectionState:g,documentId:h}=cQ();f[0]!==a.states?(b=a.states.filter(e8),f[0]=a.states,f[1]=b):b=f[1];let i=b;if(0===i.length)return null;let j="connected"!==g;return f[2]!==h||f[3]!==i||f[4]!==j?(e=(0,c.jsx)(e5,{disabled:j,states:i},h),f[2]=h,f[3]=i,f[4]=j,f[5]=e):e=f[5],e}function e8(a){return!a.action||a.action!==ek.action}let e9=(0,e.memo)(function(){let a,b=(0,d.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(hx,{group:"default",children:fe}),b[0]=a):a=b[0],a});function fa(a){let b,e,f,g=(0,d.c)(8),{states:h}=a,{connectionState:i,editState:j,revisionId:k}=cQ();g[0]!==j?.draft||g[1]!==j?.published?(b=j?.draft||j?.published||{},g[0]=j?.draft,g[1]=j?.published,g[2]=b):b=g[2];let l=b._rev===k,m="connected"!==i||!!l;return g[3]!==h?(e=h.filter(fb).slice(-1),g[3]=h,g[4]=e):e=g[4],g[5]!==m||g[6]!==e?(f=(0,c.jsx)(e5,{disabled:m,states:e}),g[5]=m,g[6]=e,g[7]=f):f=g[7],f}function fb(a){return!!a.action&&a.action===ek.action}function fc(a){return a.slice(0,1).toUpperCase()+a.slice(1).toLowerCase()}function fd(a){let{states:b}=a;return(0,c.jsx)(e7,{states:b})}function fe(a){let{states:b}=a;return(0,c.jsx)(fa,{states:b})}let ff={create:j.AddIcon,delete:j.TrashIcon,discardDraft:j.CloseIcon,initial:j.AddIcon,editDraft:j.EditIcon,editLive:j.EditIcon,publish:j.PublishIcon,unpublish:j.UnpublishIcon},fg=(0,at.styled)(j.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function fh(a){let b,e,g,h,i,j=(0,d.c)(14),{isExpanded:k,onExpand:l}=a,{t:m}=(0,f.useTranslation)(s);j[0]!==k||j[1]!==l?(b=a=>{a.stopPropagation(),function(a){if(a)return;let b=document.getElementById(fx);if(b){let a=b.children[0];if(!(a.scrollHeight>a.clientHeight)){let b=getComputedStyle(a).overflowY;a.style.overflowY="hidden",setTimeout(()=>{a.style.overflowY=b},0)}}}(k),l()},j[0]=k,j[1]=l,j[2]=b):b=j[2];let n=b;return j[3]!==k?(e=(0,c.jsx)(fg,{"data-expanded":k}),j[3]=k,j[4]=e):e=j[4],j[5]!==k||j[6]!==m?(g=m(k?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),j[5]=k,j[6]=m,j[7]=g):g=j[7],j[8]!==g?(h={content:g},j[8]=g,j[9]=h):h=j[9],j[10]!==n||j[11]!==e||j[12]!==h?(i=(0,c.jsx)(ao.Button,{mode:"bleed",icon:e,tooltipProps:h,onClick:n}),j[10]=n,j[11]=e,j[12]=h,j[13]=i):i=j[13],i}let fi=(0,at.styled)(ap.Stack)`
  max-width: 200px;
`,fj=(0,at.styled)(ap.Flex)`
  max-height: ${a=>a.$maxHeight};
  min-width: 244px;
`,fk=(0,at.styled)(ap.Box)(({$visible:a})=>at.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${a&&at.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),fl={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function fm(a){let b,e,g=(0,d.c)(9),{maxLength:h,userIds:i,size:j,withTooltip:k}=a,l=void 0===k||k;if(g[0]!==i||g[1]!==l){let a;g[3]!==l?(a=a=>(0,c.jsx)(f.UserAvatar,{user:a,withTooltip:l},a),g[3]=l,g[4]=a):a=g[4],b=i.map(a),g[0]=i,g[1]=l,g[2]=b}else b=g[2];return g[5]!==h||g[6]!==j||g[7]!==b?(e=(0,c.jsx)(ap.AvatarStack,{maxLength:h,size:j,children:b}),g[5]=h,g[6]=j,g[7]=b,g[8]=e):e=g[8],e}let fn=(0,at.styled)(ap.Flex)(a=>{let b=(0,a0.getTheme_v2)(a.theme),c=a.$color;return at.css`
    --card-icon-color: ${b.color.avatar[c].fg};
    background-color: ${b.color.avatar[c].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${b.avatar.sizes[0].size}px;
    height: ${b.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),fo={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},fp={minimal:!0,useTemporalPhrase:!0},fq=(0,at.styled)(aq.Skeleton)(a=>{let b=(0,a0.getTheme_v2)(a.theme);return at.css`
    width: 6ch;
    height: ${b.font.text.sizes[0].lineHeight}px;
  `}),fr=a=>{let b,e,g,h=(0,d.c)(10),{userId:i}=a,[j,k]=(0,f.useUser)(i);return h[0]!==k||h[1]!==j?(b=(0,c.jsx)(ap.Box,{children:k||!j?(0,c.jsx)(f.AvatarSkeleton,{animated:!0}):(0,c.jsx)(f.UserAvatar,{user:j})}),h[0]=k,h[1]=j,h[2]=b):b=h[2],h[3]!==k||h[4]!==j?(e=(0,c.jsx)(ap.Box,{children:k||!j?.displayName?(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(fq,{animated:!0})}):(0,c.jsx)(ap.Text,{muted:!0,size:1,children:j.displayName})}),h[3]=k,h[4]=j,h[5]=e):e=h[5],h[6]!==b||h[7]!==e||h[8]!==i?(g=(0,c.jsxs)(ap.Flex,{align:"center",gap:2,padding:1,children:[b,e]},i),h[6]=b,h[7]=e,h[8]=i,h[9]=g):g=h[9],g},fs=a=>{let b,e,g,h,i=(0,d.c)(9),{collaborators:j}=a,{t:k}=(0,f.useTranslation)("studio");return i[0]!==k?(b=k("timeline.changes.title"),i[0]=k,i[1]=b):b=i[1],i[2]!==b?(e=(0,c.jsx)(ap.Box,{padding:1,paddingBottom:2,children:(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:b})}),i[2]=b,i[3]=e):e=i[3],i[4]!==j?(g=j.map(fu),i[4]=j,i[5]=g):g=i[5],i[6]!==e||i[7]!==g?(h=(0,c.jsxs)(ap.Stack,{paddingBottom:1,children:[e,g]}),i[6]=e,i[7]=g,i[8]=h):h=i[8],h};function ft(a){let b,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=(0,d.c)(55),{chunk:A,isSelected:B,onSelect:C,collaborators:D,optionsMenu:E}=a,{t:F}=(0,f.useTranslation)("studio"),{type:G,endTimestamp:H}=A;z[0]!==G?(b=ff[G],z[0]=G,z[1]=b):b=z[1];let I=b;z[2]!==A.authors?(e=Array.from(A.authors),z[2]=A.authors,z[3]=e):e=z[3];let J=e;z[4]!==D?(g=D?Array.from(D):[],z[4]=D,z[5]=g):g=z[5];let K=g,L="delete"!==G;z[6]===Symbol.for("react.memo_cache_sentinel")?(h={dateStyle:"medium",timeStyle:"short"},z[6]=h):h=z[6];let M=(0,f.useDateTimeFormat)(h);z[7]!==H?(i=new Date(H),z[7]=H,z[8]=i):i=z[8];let N=(0,f.useRelativeTime)(i||"",fp);if(z[9]!==M||z[10]!==H){let a=new Date(H);j=M.format(a),z[9]=M,z[10]=H,z[11]=j}else j=z[11];let O=j;z[12]!==A||z[13]!==L||z[14]!==C?(k=a=>{a.preventDefault(),a.stopPropagation(),L&&C(A)},z[12]=A,z[13]=L,z[14]=C,z[15]=k):k=z[15];let P=k;z[16]===Symbol.for("react.memo_cache_sentinel")?(l={position:"relative"},z[16]=l):l=z[16],z[17]!==J?(m=(0,c.jsx)(fm,{maxLength:3,userIds:J,size:2}),z[17]=J,z[18]=m):m=z[18];let Q=fo[G];return z[19]!==I?(n=I&&(0,c.jsx)(I,{}),z[19]=I,z[20]=n):n=z[20],z[21]!==n?(o=(0,c.jsx)(ap.Text,{size:0,children:n}),z[21]=n,z[22]=o):o=z[22],z[23]!==Q||z[24]!==o?(p=(0,c.jsx)(fn,{align:"center",justify:"center",$color:Q,children:o}),z[23]=Q,z[24]=o,z[25]=p):p=z[25],z[26]!==p||z[27]!==m?(q=(0,c.jsxs)("div",{style:l,children:[m,p]}),z[26]=p,z[27]=m,z[28]=q):q=z[28],z[29]!==F||z[30]!==G?(r=F(fl[G])||(0,c.jsx)("code",{children:G}),z[29]=F,z[30]=G,z[31]=r):r=z[31],z[32]!==r?(s=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:r}),z[32]=r,z[33]=s):s=z[33],z[34]!==O||z[35]!==H||z[36]!==N?(t=(0,c.jsx)(ap.Text,{as:"time",size:1,muted:!0,dateTime:H,title:O,children:N}),z[34]=O,z[35]=H,z[36]=N,z[37]=t):t=z[37],z[38]!==s||z[39]!==t?(u=(0,c.jsxs)(ap.Stack,{space:2,children:[s,t]}),z[38]=s,z[39]=t,z[40]=u):u=z[40],z[41]!==K?(v=K.length>0&&(0,c.jsx)(ap.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,c.jsx)(ao.Tooltip,{placement:"top",content:(0,c.jsx)(fs,{collaborators:K}),portal:!0,children:(0,c.jsx)(ap.Box,{paddingLeft:2,paddingY:2,children:(0,c.jsx)(fm,{maxLength:3,userIds:K,size:0,withTooltip:!1})})})}),z[41]=K,z[42]=v):v=z[42],z[43]!==q||z[44]!==u||z[45]!==v?(w=(0,c.jsxs)(ap.Flex,{align:"center",gap:3,children:[q,u,v]}),z[43]=q,z[44]=u,z[45]=v,z[46]=w):w=z[46],z[47]!==A.id||z[48]!==P||z[49]!==B||z[50]!==w?(x=(0,c.jsx)(ap.Card,{as:"button",onClick:P,padding:2,pressed:B,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":A.id,children:w}),z[47]=A.id,z[48]=P,z[49]=B,z[50]=w,z[51]=x):x=z[51],z[52]!==E||z[53]!==x?(y=(0,c.jsxs)(ap.Flex,{align:"center",gap:1,children:[x,E]}),z[52]=E,z[53]=x,z[54]=y):y=z[54],y}function fu(a){return(0,c.jsx)(fr,{userId:a},a)}let fv=a=>"publish"!==a.type,fw=a=>"publish"===a.type,fx="timeline-list-wrapper",fy=a=>{let b,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=(0,d.c)(51),{chunks:w,hasMoreChunks:x,lastChunk:y,onLoadMore:z,onSelect:A,listMaxHeight:B}=a,C=void 0===B?"calc(100vh - 280px)":B,[D,E]=(0,e.useState)(!1),{t:F}=(0,f.useTranslation)("studio"),G=y?.id;v[0]!==w?(b=function(a){let b=[];for(let c of a){if(fw(c)){b.push({...c,type:"publish",children:[],collaborators:new Set});continue}if(fv(c)){let a=function(a){let b=null;for(let c=a.length-1;c>=0;c--){let d=a[c];if(fw(d)){b=d;break}if("editDraft"!==d.type)break}return b}(b);if("editDraft"===c.type&&a?.type==="publish"){Array.from(c.authors).forEach(b=>{a.collaborators.add(b)}),a.children.push(c.id),b.push({...c,parentId:a.id});continue}}fv(c)&&b.push(c)}return b}(w),v[0]=w,v[1]=b):b=v[1];let H=b;v[2]!==H||v[3]!==G?(g=()=>{if(G){let a=H.find(a=>a.id===G);if(a&&fv(a)&&a.parentId)return new Set([a.parentId])}return new Set},v[2]=H,v[3]=G,v[4]=g):g=v[4];let[I,J]=(0,e.useState)(g);if(v[5]!==H||v[6]!==G?(h=()=>{if(G){let a=H.find(a=>a.id===G);if(a&&fv(a)&&a.parentId){let b=a.parentId;J(a=>{if(a.has(b))return a;let c=new Set(a);return c.add(b),c})}}},i=[H,G],v[5]=H,v[6]=G,v[7]=h,v[8]=i):(h=v[7],i=v[8]),(0,e.useEffect)(h,i),v[9]!==H||v[10]!==I){let a;v[12]!==I?(a=a=>!!fw(a)||!a.parentId||I.has(a.parentId),v[12]=I,v[13]=a):a=v[13],j=H.filter(a),v[9]=H,v[10]=I,v[11]=j}else j=v[11];let K=j;v[14]!==K.length||v[15]!==x||v[16]!==z?(k=()=>{K.length<16&&x&&z()},v[14]=K.length,v[15]=x,v[16]=z,v[17]=k):k=v[17],v[18]!==K||v[19]!==x||v[20]!==z?(l=[K,x,z],v[18]=K,v[19]=x,v[20]=z,v[21]=l):l=v[21],(0,e.useEffect)(k,l),v[22]===Symbol.for("react.memo_cache_sentinel")?(m=a=>()=>J(b=>{let c=new Set(b);return b.has(a)?c.delete(a):c.add(a),c}),v[22]=m):m=v[22];let L=m;v[23]!==K||v[24]!==G?(n=G?K.findIndex(a=>a.id===G):-1,v[23]=K,v[24]=G,v[25]=n):n=v[25];let M=n;v[26]!==w||v[27]!==A?(o=a=>{let b=w.find(b=>b.id===a.id);b?A(b):(console.error("TimelineItem: chunk not found"),A(a))},v[26]=w,v[27]=A,v[28]=o):o=v[28];let N=o;v[29]!==I||v[30]!==K.length||v[31]!==N||v[32]!==x||v[33]!==G?(p=(a,b)=>{let{activeIndex:d}=b;return(0,c.jsxs)(ap.Box,{paddingBottom:1,paddingTop:+(0===d),paddingRight:1,paddingLeft:fv(a)&&a.parentId?4:1,children:[(0,c.jsx)(ft,{chunk:a,isSelected:G===a.id,onSelect:N,collaborators:fw(a)?a.collaborators:void 0,optionsMenu:fw(a)&&a.children.length>0?(0,c.jsx)(fh,{isExpanded:I.has(a.id),onExpand:L(a.id)}):null}),d===K.length-1&&x&&(0,c.jsx)(f.LoadingBlock,{})]})},v[29]=I,v[30]=K.length,v[31]=N,v[32]=x,v[33]=G,v[34]=p):p=v[34];let O=p;v[35]===Symbol.for("react.memo_cache_sentinel")?(q=()=>E(!0),r=[],v[35]=q,v[36]=r):(q=v[35],r=v[36]),(0,e.useEffect)(q,r);let P=!M||D;return v[37]!==K.length||v[38]!==F?(s=0===K.length&&(0,c.jsxs)(fi,{padding:3,space:3,children:[(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:F("timeline.error.no-document-history-title")}),(0,c.jsx)(ap.Text,{muted:!0,size:1,children:F("timeline.error.no-document-history-description")})]}),v[37]=K.length,v[38]=F,v[39]=s):s=v[39],v[40]!==K||v[41]!==C||v[42]!==z||v[43]!==O||v[44]!==M||v[45]!==F?(t=K.length>0&&(0,c.jsx)(fj,{direction:"column",$maxHeight:C,id:fx,children:(0,c.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:F("timeline.list.aria-label"),autoFocus:"list",initialIndex:M,initialScrollAlign:"center",itemHeight:57,items:K,onEndReached:z,onEndReachedIndexOffset:20,overscan:5,renderItem:O,wrapAround:!1})}),v[40]=K,v[41]=C,v[42]=z,v[43]=O,v[44]=M,v[45]=F,v[46]=t):t=v[46],v[47]!==P||v[48]!==s||v[49]!==t?(u=(0,c.jsxs)(fk,{$visible:P,"data-ui":"timeline",children:[s,t]}),v[47]=P,v[48]=s,v[49]=t,v[50]=u):u=v[50],u};function fz(a){let b,e,g,h,i,k,l=(0,d.c)(14),{versionError:m}=a,{t:n}=(0,f.useTranslation)("studio");return l[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(f.TextWithTone,{tone:"critical",children:(0,c.jsx)(j.ErrorOutlineIcon,{})}),l[0]=b):b=l[0],l[1]!==n||l[2]!==m?(e=n(m?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),l[1]=n,l[2]=m,l[3]=e):e=l[3],l[4]!==e?(g=(0,c.jsx)(f.TextWithTone,{size:1,tone:"critical",weight:"medium",children:e}),l[4]=e,l[5]=g):g=l[5],l[6]!==n||l[7]!==m?(h=n(m?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),l[6]=n,l[7]=m,l[8]=h):h=l[8],l[9]!==h?(i=(0,c.jsx)(f.TextWithTone,{size:1,tone:"critical",children:h}),l[9]=h,l[10]=i):i=l[10],l[11]!==g||l[12]!==i?(k=(0,c.jsxs)(ap.Flex,{align:"flex-start",gap:3,padding:4,children:[b,(0,c.jsxs)(ap.Stack,{space:4,children:[g,i]})]}),l[11]=g,l[12]=i,l[13]=k):k=l[13],k}let fA=(0,at.styled)(ao.Popover)`
  overflow: hidden;
  overflow: clip;
`,fB="timeline-menu";function fC(a){let b,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w=(0,d.c)(62),{chunk:x,mode:y,placement:z}=a,{setTimelineRange:A,timelineError:B,ready:C,timelineStore:D}=cQ(),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(null),[I,J]=(0,e.useState)(null),K=(0,aq.useToast)(),L=(0,f.useTimelineSelector)(D,fH),M=(0,f.useTimelineSelector)(D,fG),N=(0,f.useTimelineSelector)(D,fF),O=(0,f.useTimelineSelector)(D,fE),P=(0,f.useTimelineSelector)(D,fD),{t:Q}=(0,f.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{F(!0)},w[0]=b):b=w[0];let R=b;w[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{F(!1)},w[1]=g):g=w[1];let S=g;w[2]!==G||w[3]!==E?(h=a=>{E&&("Escape"===a.key||"Tab"===a.key)&&(S(),G?.focus())},w[2]=G,w[3]=E,w[4]=h):h=w[4],(0,ap.useGlobalKeyDown)(h),w[5]!==G||w[6]!==I?(i=()=>[G,I],w[5]=G,w[6]=I,w[7]=i):i=w[7],(0,ap.useClickOutsideEvent)(E&&S,i),w[8]!==A||w[9]!==Q||w[10]!==D||w[11]!==K?(k=a=>{try{(()=>{let[b,c]=D?.findRangeForRev(a)||[null,null];A(b,c)})()}catch(a){K.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[8]=A,w[9]=Q,w[10]=D,w[11]=K,w[12]=k):k=w[12];let T=k;w[13]!==A||w[14]!==Q||w[15]!==D||w[16]!==K?(l=a=>{try{(()=>{let[b,c]=D?.findRangeForSince(a)||[null,null];A(b,c)})()}catch(a){K.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[13]=A,w[14]=Q,w[15]=D,w[16]=K,w[17]=l):l=w[17];let U=l;w[18]!==M||w[19]!==D?(m=()=>{M||D?.loadMore()},w[18]=M,w[19]=D,w[20]=m):m=w[20];let V=m;a:{let a,b;if(B){let a;w[21]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fz,{}),w[21]=a):a=w[21],n=a;break a}if("rev"===y){let a;w[22]!==L||w[23]!==V||w[24]!==N||w[25]!==O||w[26]!==T?(a=(0,c.jsx)(fy,{chunks:L,hasMoreChunks:N,lastChunk:O,onLoadMore:V,onSelect:T}),w[22]=L,w[23]=V,w[24]=N,w[25]=O,w[26]=T,w[27]=a):a=w[27],n=a;break a}w[28]!==L||w[29]!==O?(a=O?L.filter(a=>a.index<O.index):L,w[28]=L,w[29]=O,w[30]=a):a=w[30];let d=a;w[31]!==d||w[32]!==V||w[33]!==N||w[34]!==U||w[35]!==P?(b=(0,c.jsx)(fy,{chunks:d,hasMoreChunks:N,lastChunk:P,onLoadMore:V,onSelect:U}),w[31]=d,w[32]=V,w[33]=N,w[34]=U,w[35]=P,w[36]=b):b=w[36],n=b}let W=n;if(w[37]!==x||w[38]!==Q){let a={timestamp:{dateStyle:"medium",timeStyle:"short"}};o=x?Q(fl[x.type],{context:"timestamp",timestamp:new Date(x?.endTimestamp),formatParams:a}):Q("timeline.latest-revision"),p=x?Q("timeline.since",{timestamp:new Date(x?.endTimestamp),formatParams:a}):Q("timeline.since-version-missing"),w[37]=x,w[38]=Q,w[39]=o,w[40]=p}else o=w[39],p=w[40];let X="rev"===y?o:p;w[41]!==I?(q={[fB]:I},w[41]=I,w[42]=q):q=w[42];let Y=q,Z=E&&W,$=E?"timeline-menu-close-button":"timeline-menu-open-button",_=!C,aa=E?S:R;return w[43]===Symbol.for("react.memo_cache_sentinel")?(r={maxWidth:"100%"},w[43]=r):r=w[43],w[44]!==X||w[45]!==C||w[46]!==Q?(s=C?X:Q("timeline.loading-history"),w[44]=X,w[45]=C,w[46]=Q,w[47]=s):s=w[47],w[48]!==E||w[49]!==$||w[50]!==_||w[51]!==aa||w[52]!==s?(t=(0,c.jsx)(ap.Flex,{width:"fill",children:(0,c.jsx)(ao.Button,{"data-testid":$,disabled:_,mode:"ghost",onClick:aa,ref:H,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:r,iconRight:j.ChevronDownIcon,text:s})}),w[48]=E,w[49]=$,w[50]=_,w[51]=aa,w[52]=s,w[53]=t):t=w[53],w[54]!==E||w[55]!==z||w[56]!==Z||w[57]!==t?(u=(0,c.jsx)(fA,{"data-testid":"timeline-menu",constrainSize:!0,content:Z,"data-ui":"versionMenu",open:E,placement:z,matchReferenceWidth:!0,portal:!0,ref:J,children:t}),w[54]=E,w[55]=z,w[56]=Z,w[57]=t,w[58]=u):u=w[58],w[59]!==Y||w[60]!==u?(v=(0,c.jsx)(ap.PortalProvider,{__unstable_elements:Y,children:u}),w[59]=Y,w[60]=u,w[61]=v):v=w[61],v}function fD(a){return a.sinceTime}function fE(a){return a.realRevChunk}function fF(a){return a.hasMoreChunks}function fG(a){return a.isLoading}function fH(a){return a.chunks}let fI=(0,at.styled)(av.motion.path)`
  transform-origin: center;
`,fJ=a=>{let b,e=(0,d.c)(2);return e[0]!==a?(b=(0,c.jsx)(av.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...a}),e[0]=a,e[1]=b):b=e[1],b},fK=a=>{let b,e=(0,d.c)(2);return e[0]!==a?(b=(0,c.jsx)(fI,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...a}),e[0]=a,e[1]=b):b=e[1],b},fL=a=>{let b,e=(0,d.c)(2);return e[0]!==a?(b=(0,c.jsx)(av.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...a}),e[0]=a,e[1]=b):b=e[1],b},fM=at.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,fN=at.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${fM} 1s ease-in-out infinite;
  }
`,fO={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},fP={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},fQ={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},fR={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function fS(a){let b,e,f,g,h,i=(0,d.c)(13),{status:j}=a;if(!j)return null;let k="changes"===j?void 0:"";return i[0]!==j?(b=(0,c.jsx)(fK,{variants:fQ,initial:j,animate:j}),e=(0,c.jsx)(fJ,{variants:fP,initial:j,animate:j}),i[0]=j,i[1]=b,i[2]=e):(b=i[1],e=i[2]),i[3]!==k||i[4]!==b||i[5]!==e?(f=(0,c.jsxs)(fN,{"data-rotate":k,children:[b,e]}),i[3]=k,i[4]=b,i[5]=e,i[6]=f):f=i[6],i[7]!==j?(g=(0,c.jsx)(fL,{variants:fR,initial:j,animate:j}),i[7]=j,i[8]=g):g=i[8],i[9]!==j||i[10]!==f||i[11]!==g?(h=(0,c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,c.jsxs)(av.motion.g,{variants:fO,initial:j,animate:j,children:[f,g]})}),i[9]=j,i[10]=f,i[11]=g,i[12]=h):h=i[12],h}let fT={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},fU=a=>{let b,e,g,h,i,j=(0,d.c)(13),{status:k}=a,{t:l}=(0,f.useTranslation)(s);if("saved"!==k&&"syncing"!==k)return null;let m=fT[k];return j[0]!==k?(b=(0,c.jsx)(fS,{status:k}),j[0]=k,j[1]=b):b=j[1],j[2]!==m.tone||j[3]!==b?(e=(0,c.jsx)(f.TextWithTone,{size:1,tone:m.tone,children:b}),j[2]=m.tone,j[3]=b,j[4]=e):e=j[4],j[5]!==m.i18nKey||j[6]!==l?(g=l(m.i18nKey),j[5]=m.i18nKey,j[6]=l,j[7]=g):g=j[7],j[8]!==g?(h=(0,c.jsx)(ap.Text,{muted:!0,size:1,children:g}),j[8]=g,j[9]=h):h=j[9],j[10]!==e||j[11]!==h?(i=(0,c.jsxs)(ap.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[e,h]}),j[10]=e,j[11]=h,j[12]=i):i=j[12],i},fV={minimal:!0,useTemporalPhrase:!0},fW=av.motion.create(ap.Button),fX=av.motion.create(ap.Box);function fY(a){return"timeline.operation.published"===a?"document-status.last-published":a}let fZ=()=>{let a,b,e=(0,d.c)(2);return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)("div",{style:{margin:-5},children:(0,c.jsx)(f.AvatarSkeleton,{$size:0,animated:!0})}),e[0]=a):a=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsxs)(ap.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[a,(0,c.jsx)(aq.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),e[1]=b):b=e[1],b},f$=a=>{let b,e,g,h,i,j,k,l,m=(0,d.c)(17),{author:n,translationKey:o,timestamp:p}=a,{onHistoryOpen:q,inspector:r,onHistoryClose:s}=cQ(),{t}=(0,f.useTranslation)(),u=(0,f.useRelativeTime)(void 0===p?"":p,fV);m[0]===Symbol.for("react.memo_cache_sentinel")?(b={opacity:1},e={opacity:0},g={opacity:0},m[0]=b,m[1]=e,m[2]=g):(b=m[0],e=m[1],g=m[2]);let v=r?.name===c$?s:q;return m[3]!==n?(h=n&&(0,c.jsx)("div",{style:{margin:-5},children:(0,c.jsx)(f.UserAvatar,{user:n,size:0})}),m[3]=n,m[4]=h):h=m[4],m[5]!==t||m[6]!==o?(i=t(o),m[5]=t,m[6]=o,m[7]=i):i=m[7],m[8]!==u||m[9]!==i?(j=(0,c.jsxs)(ap.Text,{muted:!0,size:1,children:[i," ",u]}),m[8]=u,m[9]=i,m[10]=j):j=m[10],m[11]!==h||m[12]!==j?(k=(0,c.jsxs)(ap.Flex,{align:"center",flex:"none",gap:3,children:[h,j]}),m[11]=h,m[12]=j,m[13]=k):k=m[13],m[14]!==v||m[15]!==k?(l=(0,c.jsx)(fW,{"data-testid":"pane-footer-document-status",animate:b,initial:e,exit:g,mode:"bleed",onClick:v,padding:2,muted:!0,children:k}),m[14]=v,m[15]=k,m[16]=l):l=m[16],l},f_=()=>{let a,b,e=(0,d.c)(6),{editState:g}=cQ(),{selectedPerspective:h}=(0,f.usePerspective)();e[0]!==g||e[1]!==h?(a=(0,f.isPublishedPerspective)(h)&&g?.published?._updatedAt?{translationKey:f.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:g.published._updatedAt}:g?.version?._updatedAt?{translationKey:g.version._updatedAt===g.version._createdAt?f.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:f.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:g.version._updatedAt}:g?.draft?._updatedAt?{translationKey:g.draft._updatedAt===g.draft._createdAt?f.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:f.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:g.draft._updatedAt}:null,e[0]=g,e[1]=h,e[2]=a):a=e[2];let i=a;return i?(e[3]!==i.timestamp||e[4]!==i.translationKey?(b=(0,c.jsx)(f$,{author:"",translationKey:i.translationKey,timestamp:i.timestamp}),e[3]=i.timestamp,e[4]=i.translationKey,e[5]=b):b=e[5],b):null},f0=()=>{let a,b,e=(0,d.c)(8),{events:g,loading:h}=(0,f.useEvents)(),i=g?.[0];if(!i&&h){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fZ,{}),e[0]=a):a=e[0],a}if(!i){let a;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f_,{}),e[1]=a):a=e[1],a}let j=i.author,k=f.TIMELINE_ITEM_I18N_KEY_MAPPING[i.documentVariantType][i.type];return e[2]!==k?(a=fY(k),e[2]=k,e[3]=a):a=e[3],e[4]!==i.author||e[5]!==i.timestamp||e[6]!==a?(b=(0,c.jsx)(f$,{author:j,translationKey:a,timestamp:i.timestamp}),e[4]=i.author,e[5]=i.timestamp,e[6]=a,e[7]=b):b=e[7],b},f1=()=>{let a,b,e,g=(0,d.c)(10),{timelineStore:h}=cQ(),i=(0,f.useTimelineSelector)(h,f3),j=(0,f.useTimelineSelector)(h,f4),k=i?.[0];if(!k&&j){let a;return g[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fZ,{}),g[0]=a):a=g[0],a}if(!k){let a;return g[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f_,{}),g[1]=a):a=g[1],a}g[2]!==k.authors?(a=Array.from(k.authors),g[2]=k.authors,g[3]=a):a=g[3];let l=a[0],m=fl[k.type];return g[4]!==m?(b=fY(m),g[4]=m,g[5]=b):b=g[5],g[6]!==l||g[7]!==k.endTimestamp||g[8]!==b?(e=(0,c.jsx)(f$,{author:l,translationKey:b,timestamp:k.endTimestamp}),g[6]=l,g[7]=k.endTimestamp,g[8]=b,g[9]=e):e=g[9],e};function f2(){let a,b,g,h,i,j,k,l=(0,d.c)(18),{documentId:m,documentType:n,editState:o,value:p}=cQ(),[q,r]=(0,e.useState)(null),s=(0,f.useSource)().beta?.eventsAPI?.documents,t=(0,f.useSyncState)(m,n,o?.release),u=p?._updatedAt;return l[0]!==q||l[1]!==t.isSyncing?(a=()=>{if("syncing"===q&&!t.isSyncing){let a=setTimeout(()=>r("saved"),1e3);return()=>clearTimeout(a)}if("saved"===q){let a=setTimeout(()=>r(null),3e3);return()=>clearTimeout(a)}},l[0]=q,l[1]=t.isSyncing,l[2]=a):a=l[2],l[3]!==u||l[4]!==q||l[5]!==t.isSyncing?(b=[q,u,t.isSyncing],l[3]=u,l[4]=q,l[5]=t.isSyncing,l[6]=b):b=l[6],(0,e.useEffect)(a,b),l[7]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{r(null)},l[7]=g):g=l[7],l[8]!==m?(h=[m],l[8]=m,l[9]=h):h=l[9],(0,e.useLayoutEffect)(g,h),l[10]!==t.isSyncing?(i=()=>{t.isSyncing&&r("syncing")},l[10]=t.isSyncing,l[11]=i):i=l[11],l[12]!==u||l[13]!==t.isSyncing?(j=[t.isSyncing,u],l[12]=u,l[13]=t.isSyncing,l[14]=j):j=l[14],(0,e.useLayoutEffect)(i,j),l[15]!==s||l[16]!==q?(k=(0,c.jsx)(aw.AnimatePresence,{children:q?(0,c.jsx)(fX,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,c.jsx)(fU,{status:q||void 0})}):(0,c.jsx)(c.Fragment,{children:s?(0,c.jsx)(f0,{}):(0,c.jsx)(f1,{})})}),l[15]=s,l[16]=q,l[17]=k):k=l[17],k}function f3(a){return a.chunks}function f4(a){return a.isLoading}let f5=(0,at.styled)(ap.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function f6(){let a,b,g,i,k=(0,d.c)(9),{displayed:l,revisionNotFound:m}=cQ(),n=(0,e.useContext)(h.EventsContext),o=n?.revision,p=n?.events.find(a=>a.id===o?.revisionId),{t:q}=(0,f.useTranslation)(),r=p?.timestamp||l?._updatedAt||l?._createdAt,s=r?(0,c.jsx)(f.Translate,{t:q,i18nKey:"document-status.revision-from",values:{date:(0,a$.format)(new Date(r),"MMM d, yyyy '@' pp")}}):null;k[0]!==s?(a={name:"revision",text:s,tone:"caution"},k[0]=s,k[1]=a):a=k[1];let t=a;return k[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(ap.Box,{flex:"none",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(j.RestoreIcon,{})})}),k[2]=b):b=k[2],k[3]!==t||k[4]!==m||k[5]!==q?(g=m?(0,c.jsx)(f.Translate,{t:q,i18nKey:"document-status.revision-not-found"}):t.text,k[3]=t,k[4]=m,k[5]=q,k[6]=g):g=k[6],k[7]!==g?(i=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(ap.Flex,{flex:1,gap:3,padding:2,children:[b,(0,c.jsx)(ap.Box,{flex:1,children:(0,c.jsx)(f5,{size:1,textOverflow:"ellipsis",children:g})})]})}),k[7]=g,k[8]=i):i=k[8],i}let f7=av.motion.create(ap.Card);function f8(a){let b,g,h,i,j,k,l,m,n=(0,d.c)(22),{actionsBoxRef:o,createLinkMetadata:p}=a,{editState:q,onChange:r,revisionNotFound:s}=cQ(),{params:t}=dH(),u=void 0===t?cX:t,{selectedPerspective:v}=(0,f.usePerspective)(),{title:w}=c2(),x=(0,f.useSanityCreateConfig)().components?.documentLinkedActions,y=!!u.rev,[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(null);n[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{A(a.contentRect.width<480)},n[0]=b):b=n[0];let D=b;n[1]!==B?(g={element:B,onResize:D},n[1]=B,n[2]=g):g=n[2],function(a){let b,c,g=(0,d.c)(4),{element:h,onResize:i}=a;g[0]!==h||g[1]!==i?(b=()=>(h&&f.resizeObserver.observe(h,i),()=>{h&&f.resizeObserver.unobserve(h)}),c=[h,i],g[0]=h,g[1]=i,g[2]=b,g[3]=c):(b=g[2],c=g[3]),(0,e.useLayoutEffect)(b,c)}(g);a:{let a=!!(q?.ready&&"boolean"==typeof z);if(v){if((0,f.isPublishedPerspective)(v)){h=a&&!!q?.published;break a}if((0,f.isReleaseDocument)(v)){h=a&&!!q?.version;break a}}h=a}let E=h;if(p&&(0,f.isSanityCreateLinked)(p)&&x){let a;n[3]!==x||n[4]!==p||n[5]!==r||n[6]!==w?(a=(0,c.jsx)(x,{metadata:p,panelPortalElementId:d7,onDocumentChange:r,documentTitle:w}),n[3]=x,n[4]=p,n[5]=r,n[6]=w,n[7]=a):a=n[7],i=a}else if(y){let a;n[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e9,{}),n[8]=a):a=n[8],i=a}else{let a;n[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e6,{}),n[9]=a):a=n[9],i=a}if(y&&s)return null;let F=y?"revision":"published";n[10]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:.2},n[10]=j):j=n[10],n[11]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:1,transition:{duration:.3}},n[11]=k):k=n[11];let G=y?"caution":void 0;return n[12]!==i||n[13]!==o||n[14]!==z||n[15]!==E||n[16]!==y?(l=E&&(0,c.jsxs)(ap.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!y,paddingRight:+!y,children:[(0,c.jsxs)(ap.Flex,{align:"center",flex:1,gap:z?2:3,wrap:"wrap",paddingRight:3,children:[(0,c.jsxs)(ap.Flex,{align:"center",children:[y?(0,c.jsx)(f6,{}):(0,c.jsx)(f2,{}),(0,c.jsx)(eK,{})]}),(0,c.jsx)(eO,{})]}),(0,c.jsxs)(ap.Flex,{align:"flex-start",justify:"flex-end",ref:o,style:{flexShrink:0,marginLeft:"auto"},children:[(0,c.jsx)(eK,{}),i]})]}),n[12]=i,n[13]=o,n[14]=z,n[15]=E,n[16]=y,n[17]=l):l=n[17],n[18]!==F||n[19]!==G||n[20]!==l?(m=(0,c.jsx)(f7,{initial:j,animate:k,tone:G,radius:3,ref:C,sizing:"border",padding:2,children:l},F),n[18]=F,n[19]=G,n[20]=l,n[21]=m):m=n[21],m}let f9=(0,e.memo)(function(a){let b,e,g,h,i,j,k,l,m,n,o,p,q,r=(0,d.c)(26);r[0]!==a?({actionsBoxElement:b,activeIndex:e,as:n,children:g,id:h,onActionStart:i,onKeyDown:j,rootRef:l,states:m,...k}=a,r[0]=a,r[1]=b,r[2]=e,r[3]=g,r[4]=h,r[5]=i,r[6]=j,r[7]=k,r[8]=l,r[9]=m,r[10]=n):(b=r[1],e=r[2],g=r[3],h=r[4],i=r[5],j=r[6],k=r[7],l=r[8],m=r[9],n=r[10]);let s=void 0===n?"div":n,t=m[e];r[11]!==i||r[12]!==j||r[13]!==m?(o=a=>{let b=m.filter(b=>b.shortcut&&(0,aU.isHotkey)(b.shortcut,a)),c=b[0];if(b.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${c.shortcut}"`),c&&!c.disabled&&c.onHandle){a.preventDefault(),c.onHandle(),i(m.indexOf(c));return}j&&j(a)},r[11]=i,r[12]=j,r[13]=m,r[14]=o):o=r[14];let u=o;return r[15]!==b||r[16]!==t?(p=t&&t.dialog&&(0,c.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(ev,{dialog:t.dialog,referenceElement:b})}),r[15]=b,r[16]=t,r[17]=p):p=r[17],r[18]!==s||r[19]!==g||r[20]!==u||r[21]!==h||r[22]!==k||r[23]!==l||r[24]!==p?(q=(0,c.jsxs)(s,{id:h,onKeyDown:u,tabIndex:-1,...k,ref:l,children:[g,p]}),r[18]=s,r[19]=g,r[20]=u,r[21]=h,r[22]=k,r[23]=l,r[24]=p,r[25]=q):q=r[25],q}),ga=(0,e.memo)(a=>{let b,f,g,h,i,j,k=(0,d.c)(12);k[0]!==a?({actionsBoxElement:b,as:h,children:f,...g}=a,k[0]=a,k[1]=b,k[2]=f,k[3]=g,k[4]=h):(b=k[1],f=k[2],g=k[3],h=k[4]);let l=void 0===h?"div":h,[m,n]=(0,e.useState)(-1);k[5]===Symbol.for("react.memo_cache_sentinel")?(i=a=>{n(a)},k[5]=i):i=k[5];let o=i;return k[6]!==b||k[7]!==m||k[8]!==l||k[9]!==f||k[10]!==g?(j=(0,c.jsx)(hx,{children:a=>{let{states:d}=a;return(0,c.jsx)(f9,{...g,activeIndex:m,actionsBoxElement:b,as:l,onActionStart:o,states:d,children:f})}}),k[6]=b,k[7]=m,k[8]=l,k[9]=f,k[10]=g,k[11]=j):j=k[11],j});ga.displayName="Memo(DocumentActionShortcuts)";let gb=()=>{let a,b=(0,d.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(j.CheckmarkIcon,{style:{visibility:"hidden"}}),b[0]=a):a=b[0],a};function gc(a){let b,e,g,h,i,j,k,l=(0,d.c)(23),{documentType:m,value:n,currentMinWidth:o,paneKey:p,minWidth:q}=a,{t:r}=(0,f.useTranslation)();return l[0]!==m?(b={documentType:m},l[0]=m,l[1]=b):b=l[1],l[2]!==r||l[3]!==b?(e=(0,c.jsx)(f.Translate,{t:r,i18nKey:"panes.document-pane.document-unknown-type.title",values:b}),l[2]=r,l[3]=b,l[4]=e):e=l[4],l[5]!==m||l[6]!==r?(g=m&&(0,c.jsx)(ap.Text,{as:"p",children:(0,c.jsx)(f.Translate,{t:r,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:m}})}),l[5]=m,l[6]=r,l[7]=g):g=l[7],l[8]!==m||l[9]!==r?(h=!m&&(0,c.jsx)(ap.Text,{as:"p",children:r("panes.document-pane.document-unknown-type.without-schema.text")}),l[8]=m,l[9]=r,l[10]=h):h=l[10],l[11]!==n?(i=f.isDev&&n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ap.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,c.jsx)(ap.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,c.jsx)(ap.Code,{language:"json",size:[1,1,2],children:JSON.stringify(n,null,2)})})]}),l[11]=n,l[12]=i):i=l[12],l[13]!==g||l[14]!==h||l[15]!==i?(j=(0,c.jsxs)(ap.Stack,{space:4,children:[g,h,i]}),l[13]=g,l[14]=h,l[15]=i,l[16]=j):j=l[16],l[17]!==o||l[18]!==q||l[19]!==p||l[20]!==e||l[21]!==j?(k=(0,c.jsx)(cL,{currentMinWidth:o,flex:2.5,minWidth:q,paneKey:p,title:e,tone:"caution",children:j}),l[17]=o,l[18]=q,l[19]=p,l[20]=e,l[21]=j,l[22]=k):k=l[22],k}let gd=["fixed","fixed","absolute"];function ge(a){let b,e,g,h,i,j,k=(0,d.c)(16),{documentPanelPortalElement:l,setFooterElement:m,setActionsBoxElement:n}=a,o=(0,f.useZIndex)(),{value:p}=cQ();k[0]!==l?(b={[d7]:l},k[0]=l,k[1]=b):b=k[1];let q=b;k[2]!==p?(e=(0,f.getSanityCreateLinkMetadata)(p),k[2]=p,k[3]=e):e=k[3];let r=e;return k[4]!==r||k[5]!==n?(g=(0,c.jsx)(ao.TooltipDelayGroupProvider,{children:(0,c.jsx)(f8,{actionsBoxRef:n,createLinkMetadata:r})}),k[4]=r,k[5]=n,k[6]=g):g=k[6],k[7]!==m||k[8]!==g?(h=(0,c.jsx)(cv,{ref:m,padding:1,children:g}),k[7]=m,k[8]=g,k[9]=h):h=k[9],k[10]!==h||k[11]!==o.portal?(i=(0,c.jsx)(aq.DialogProvider,{position:gd,zOffset:o.portal,children:h}),k[10]=h,k[11]=o.portal,k[12]=i):i=k[12],k[13]!==q||k[14]!==i?(j=(0,c.jsx)(ap.PortalProvider,{__unstable_elements:q,children:i}),k[13]=q,k[14]=i,k[15]=j):j=k[15],j}let gf=[],gg=["fixed","fixed","absolute"],gh=(0,at.styled)(f.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function gi(){var a;let b,g,h,i,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D=(0,d.c)(82),{changesOpen:E,displayed:F,documentId:G,documentType:H,editState:I,fieldActions:J,focusPath:K,inspectOpen:L,inspector:M,inspectors:N,onFocus:O,onHistoryOpen:P,onMenuAction:Q,onPathOpen:R,paneKey:S,schemaType:T,value:U,previewUrl:V}=cQ(),{stickyParams:W}=(0,ay.useRouter)(),{params:X}=dH(),{features:Y}=cW(),{t:Z}=(0,f.useTranslation)(s),{collapsed:$}=cc(),_=(0,f.useZIndex)(),[aa,ab]=(0,e.useState)(null),[ac,ad]=(0,e.useState)(null),[ae,af]=(0,e.useState)(null),[ag,ah]=(0,e.useState)(null),[ai,aj]=(0,e.useState)(null);D[0]!==K||D[1]!==aa||D[2]!==U?(b={element:aa,focusPath:K,value:U},D[0]=K,D[1]=aa,D[2]=U,D[3]=b):b=D[3],(0,f.useGlobalCopyPasteElementHandler)(b),D[4]===Symbol.for("react.memo_cache_sentinel")?(g=[],D[4]=g):g=D[4];let[ak,al]=(0,e.useState)(g);D[5]===Symbol.for("react.memo_cache_sentinel")?(h=[],D[5]=h):h=D[5];let[am,an]=(0,e.useState)(h),ao=(0,aq.useElementRect)(ac),ar=(0,aq.useElementRect)(ae),as=ao?.height,at=ar?.height,au=600+320*!!M,av=320+320*!!M;D[6]!==M?.name||D[7]!==N?(i=N?.find(a=>a.name===M?.name),D[6]=M?.name,D[7]=N,D[8]=i):i=D[8];let aw=i;D[9]!==F||D[10]!==G||D[11]!==I?(k={displayed:F,documentId:G,editState:I},D[9]=F,D[10]=G,D[11]=I,D[12]=k):k=D[12];let ax=(0,f.useDocumentIdStack)(k),az=!!U,aA="true"===W.displayInlineChanges;D[13]!==aw||D[14]!==ax||D[15]!==Y||D[16]!==az||D[17]!==ak||D[18]!==N||D[19]!==V||D[20]!==Z||D[21]!==aA?(B=function({currentInspector:a,hasValue:b,inspectors:c,inspectorMenuItems:d}){return c.map((c,e)=>{let f=d[e];return!f||f.hidden?null:{action:`${cY}${c.name}`,group:f.showAsAction?void 0:"inspectors",icon:f.icon,disabled:!b,selected:a?.name===c.name,shortcut:f.hotkeys?.join("+"),showAsAction:f.showAsAction,title:f.title,tone:f.tone}}).filter(Boolean)}(a={currentInspector:aw,features:Y,hasValue:az,inspectorMenuItems:ak,inspectors:N,previewUrl:V,documentIdStack:ax,t:Z,displayInlineChanges:aA}),C=[function({previewUrl:a,t:b}){return a?{action:"production-preview",group:"links",title:b("production-preview.menu-item.title"),icon:j.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(a),function({documentIdStack:a,t:b}){let c=typeof a?.previousId>"u"&&{reason:b("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:b("compare-versions.menu-item.title"),icon:j.TransferIcon,disabled:c}}(a),function({displayInlineChanges:a,t:b}){return{action:"toggleInlineChanges",group:"inspectors",title:b("toggle-inline-changes.menu-item.title"),icon:a?j.CheckmarkIcon:gb}}(a)].filter(Boolean),l=[{action:"copy-document-url",showAsAction:!0,title:a.t("action.copy-document-url.label"),icon:j.LinkIcon},...B,function({hasValue:a,t:b}){return{action:"inspect",group:"inspectors",title:b("document-inspector.menu-item.title"),icon:j.JsonIcon,disabled:!a,shortcut:"Ctrl+Alt+I"}}(a),...C],D[13]=aw,D[14]=ax,D[15]=Y,D[16]=az,D[17]=ak,D[18]=N,D[19]=V,D[20]=Z,D[21]=aA,D[22]=l):l=D[22];let aB=l;D[23]!==aB||D[24]!==Q?(m=a=>{for(let b of aB)if(b.shortcut&&(0,aU.isHotkey)(b.shortcut,a)){a.preventDefault(),a.stopPropagation(),Q(b);return}},D[23]=aB,D[24]=Q,D[25]=m):m=D[25];let aC=m;D[26]!==O||D[27]!==R?(n=a=>{R(a),O(a)},D[26]=O,D[27]=R,D[28]=n):n=D[28];let aD=n;if(!T){let a;return D[29]!==au||D[30]!==H||D[31]!==av||D[32]!==S||D[33]!==U?(a=(0,c.jsx)(gc,{currentMinWidth:au,documentType:H,minWidth:av,paneKey:S,value:U}),D[29]=au,D[30]=H,D[31]=av,D[32]=S,D[33]=U,D[34]=a):a=D[34],a}D[35]!==G||D[36]!==H||D[37]!==N?(o=N.length>0&&(0,c.jsx)(c_,{documentId:G,documentType:H,inspectors:N,onMenuItems:al}),D[35]=G,D[36]=H,D[37]=N,D[38]=o):o=D[38],D[39]!==G||D[40]!==H||D[41]!==J||D[42]!==T?(p=J.length>0&&T&&(0,c.jsx)(f.FieldActionsResolver,{actions:J,documentId:G,documentType:H,onActions:an,path:gf,schemaType:T}),D[39]=G,D[40]=H,D[41]=J,D[42]=T,D[43]=p):p=D[43],D[44]!==aB?(q=(0,c.jsx)(eF,{ref:af,menuItems:aB}),D[44]=aB,D[45]=q):q=D[45];let aE=$?void 0:"fill",aF=E&&X?.changesInspectorTab==="review",aG=as||null,aH=at||null;return D[46]!==ai?(r=(0,c.jsx)(ge,{documentPanelPortalElement:ai,setFooterElement:ad,setActionsBoxElement:ah}),D[46]=ai,D[47]=r):r=D[47],D[48]!==L||D[49]!==aa||D[50]!==aG||D[51]!==aH||D[52]!==r?(t=(0,c.jsx)(ej,{footerHeight:aG,headerHeight:aH,isInspectOpen:L,rootElement:aa,setDocumentPanelPortalElement:aj,footer:r}),D[48]=L,D[49]=aa,D[50]=aG,D[51]=aH,D[52]=r,D[53]=t):t=D[53],D[54]!==aD||D[55]!==P||D[56]!==aF||D[57]!==t?(u=(0,c.jsx)(gh,{"data-testid":"change-connector-root",isReviewChangesOpen:aF,onOpenReviewChanges:P,onSetFocus:aD,children:t}),D[54]=aD,D[55]=P,D[56]=aF,D[57]=t,D[58]=u):u=D[58],D[59]!==aE||D[60]!==u?(v=(0,c.jsx)(ap.Flex,{direction:"column",flex:1,height:aE,children:u}),D[59]=aE,D[60]=u,D[61]=v):v=D[61],D[62]!==v||D[63]!==_.paneDialog?(w=(0,c.jsx)(aq.DialogProvider,{position:gg,zOffset:_.paneDialog,children:v}),D[62]=v,D[63]=_.paneDialog,D[64]=w):w=D[64],D[65]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)(c4,{}),D[65]=x):x=D[65],D[66]!==ag||D[67]!==au||D[68]!==aC||D[69]!==av||D[70]!==S||D[71]!==q||D[72]!==w?(y=(0,c.jsxs)(ga,{actionsBoxElement:ag,as:cg,currentMinWidth:au,"data-testid":"document-pane",flex:2.5,id:S,minWidth:av,onKeyUp:aC,rootRef:ab,children:[q,w,x]}),D[66]=ag,D[67]=au,D[68]=aC,D[69]=av,D[70]=S,D[71]=q,D[72]=w,D[73]=y):y=D[73],D[74]!==am||D[75]!==y?(z=(0,c.jsx)(cT,{children:(0,c.jsx)(f.FieldActionsProvider,{actions:am,path:gf,children:y})}),D[74]=am,D[75]=y,D[76]=z):z=D[76],D[77]!==p||D[78]!==z||D[79]!==o||D[80]!==U?(A=(0,c.jsxs)(f.GetFormValueProvider,{value:U,children:[o,p,z]}),D[77]=p,D[78]=z,D[79]=o,D[80]=U,D[81]=A):A=D[81],A}let gj=(a,b)=>{let c,g,h,i,j=(0,d.c)(11),k=(0,f.useHistoryStore)(),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(!1);j[0]!==a||j[1]!==b?(c={documentId:a,documentType:b},j[0]=a,j[1]=b,j[2]=c):c=j[2];let p=(0,f.useTimelineStore)(c),q=(0,f.useTimelineSelector)(p,gk);return j[3]!==a||j[4]!==k||j[5]!==q?(g=()=>{q&&a?(o(!0),k.getDocumentAtRevision(a,q).then(a=>{m(a||null),o(!1)}).catch(()=>{m(null),o(!1)})):(m(null),o(!1))},h=[a,q,k],j[3]=a,j[4]=k,j[5]=q,j[6]=g,j[7]=h):(g=j[6],h=j[7]),(0,e.useEffect)(g,h),j[8]!==l||j[9]!==n?(i={lastRevisionDocument:l,loading:n},j[8]=l,j[9]=n,j[10]=i):i=j[10],i};function gk(a){return a.lastNonDeletedRevId}let gl=(0,aL.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),gm=(0,aL.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),gn=(0,aL.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function go(a){return a.name===c$}function gp(a){let b=(0,f.isRecord)(a)&&"string"==typeof a.message?a.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${b}`)}function gq(a){let b,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=(0,d.c)(205),{children:T,index:U,pane:V,paneKey:W,onFocusPath:X,onSetMaximizedPane:Y,maximized:Z,forcedVersion:$,historyStore:_}=a,aa=void 0!==Z&&Z,{store:ab,error:ac,ready:ad,revisionDocument:ae,onOlderRevision:af,sinceDocument:ag,isPristine:ah,revisionId:ai,lastNonDeletedRevId:aj}=_,ak=(0,f.useSchema)(),{setDocumentMeta:al}=(0,f.useCopyPaste)(),{document:am}=(0,f.useSource)(),{actions:an,badges:ao,unstable_fieldActions:ap,unstable_languageFilter:ar,drafts:as}=am,{enabled:at}=as,au=(0,aI.useTelemetry)(),av=(0,ay.useRouter)(),aw=dH(),az=aw.setParams,{push:aA}=(0,aq.useToast)(),{options:aB,menuItemGroups:aF,title:aG,views:aH}=V,aJ=void 0===aF?cZ:aF,aK=void 0===aG?null:aG;S[0]!==aH?(b=void 0===aH?[]:aH,S[0]=aH,S[1]=b):b=S[1];let aL=b,aM=(0,f.useUnique)(aB),aN=aM.id;S[2]!==aN?(i=(0,g.getPublishedId)(aN),S[2]=aN,S[3]=i):i=S[3];let aO=i,aP=aB.type,aQ=(0,f.useUnique)(aw.params)||cX,{buildStudioUrl:aR}=(0,f.useStudioUrl)(),aS=(0,f.usePerspective)(),{document:aT,beta:aU}=(0,f.useWorkspace)(),{drafts:aV}=aT,{enabled:aW}=aV,aX=aU?.form?.enhancedObjectDialog?.enabled;a:{let a;if($){j=$;break a}S[4]!==aS.selectedPerspectiveName||S[5]!==aS.selectedReleaseId?(a={selectedPerspectiveName:aS.selectedPerspectiveName,selectedReleaseId:aS.selectedReleaseId},S[4]=aS.selectedPerspectiveName,S[5]=aS.selectedReleaseId,S[6]=a):a=S[6],j=a}let{selectedReleaseId:aY,selectedPerspectiveName:aZ}=j,a$=bN();S[7]!==aO||S[8]!==aP||S[9]!==aM||S[10]!==aQ?(k={paneOptions:aM,documentId:aO,documentType:aP,params:aQ},S[7]=aO,S[8]=aP,S[9]=aM,S[10]=aQ,S[11]=k):k=S[11];let a_=(a=>{var b;let c,e,g,h,i,j,k,l,m=(0,d.c)(13),{paneOptions:n,documentType:o,documentId:p,params:q}=a,r=(0,f.useTemplates)(),s=dH(),t=(0,f.useUnique)(s.payload);m[0]!==o||m[1]!==n.template||m[2]!==n.templateParameters||m[3]!==t||m[4]!==q.template||m[5]!==r?(g=(b={documentType:o,templateName:n.template,templateParams:n.templateParameters,panePayload:t,urlTemplate:q.template}).panePayload||{},h=b.templateName,b.urlTemplate&&h&&h!==b.urlTemplate&&console.warn(`Conflicting templates: URL says "${b.urlTemplate}", structure node says "${h}". Using "${h}".`),i=h||b.urlTemplate,j=r.filter(a=>a.schemaType===b.documentType),k={...b.templateParams,..."object"==typeof g&&g||{}},l=i,i||1!==j.length||(l=j[0].id),c={templateName:l,templateParams:k},m[0]=o,m[1]=n.template,m[2]=n.templateParameters,m[3]=t,m[4]=q.template,m[5]=r,m[6]=c):c=m[6];let{templateName:u,templateParams:v}=c;m[7]!==p||m[8]!==o||m[9]!==q.version||m[10]!==u||m[11]!==v?(e={documentId:p,documentType:o,templateName:u,templateParams:v,version:q.version},m[7]=p,m[8]=o,m[9]=q.version,m[10]=u,m[11]=v,m[12]=e):e=m[12];let w=(0,f.useInitialValue)(e);return(0,f.useUnique)(w)})(k),a0=a_.loading;S[12]!==aO||S[13]!==aP||S[14]!==aQ||S[15]!==az?(l={documentId:aO,documentType:aP,params:aQ,setParams:az},S[12]=aO,S[13]=aP,S[14]=aQ,S[15]=az,S[16]=l):l=S[16];let{changesOpen:a1,currentInspector:a2,inspectors:a3,closeInspector:a4,openInspector:a5,handleHistoryClose:a6,handleHistoryOpen:a7,handleInspectorAction:a8,inspectOpen:a9,handleLegacyInspectClose:ba}=function(a){let b,c,g,h,i,j,k,l,m,n,o,p,q,r,s=(0,d.c)(54),{documentId:t,documentType:u,params:v,setParams:w}=a,{features:x}=cW(),y=(0,f.useSource)().document.inspectors;s[0]!==t||s[1]!==u||s[2]!==y?(b=y({documentId:t,documentType:u}),s[0]=t,s[1]=u,s[2]=y,s[3]=b):b=s[3];let z=b;s[4]!==v.inspect?(c=()=>v.inspect||null,s[4]=v.inspect,s[5]=c):c=s[5];let[A,B]=(0,e.useState)(c),C=(0,e.useRef)(v.inspect);s[6]!==v.inspect?(g=()=>{C.current!==v.inspect&&(C.current=v.inspect,B(v.inspect||null))},h=[v.inspect],s[6]=v.inspect,s[7]=g,s[8]=h):(g=s[7],h=s[8]),(0,e.useEffect)(g,h),s[9]!==A||s[10]!==z?(i=z?.find(a=>a.name===A),s[9]=A,s[10]=z,s[11]=i):i=s[11];let D=i;s[12]!==z?(j=z.find(go),s[12]=z,s[13]=j):j=s[13];let E=j,F=D?.name===c$;s[14]!==D||s[15]!==z||s[16]!==v||s[17]!==w?(k=a=>{let b=a&&z.find(b=>b.name===a);if(a&&!b)return void console.warn(`No inspector named "${a}"`);if(D){if(b){let a=b.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0});return}if(D){let a=D.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0})}}},s[14]=D,s[15]=z,s[16]=v,s[17]=w,s[18]=k):k=s[18];let G=k;s[19]!==D||s[20]!==z||s[21]!==v||s[22]!==w?(l=(a,b)=>{let c=z.find(b=>b.name===a);if(!c)return void console.warn(`No inspector named "${a}"`);if(D?.name===c.name)return void w({...v,...b,inspect:c.name});let d=v;D&&(d=(c.onClose?.({params:d})??{params:d}).params);let e=c.onOpen?.({params:d})??{params:d};B(c.name),C.current=c.name,w({...e.params,...b,inspect:c.name})},s[19]=D,s[20]=z,s[21]=v,s[22]=w,s[23]=l):l=s[23];let H=l;s[24]!==G||s[25]!==E?(m=()=>{E&&G(E.name)},s[24]=G,s[25]=E,s[26]=m):m=s[26];let I=m;s[27]!==x.reviewChanges||s[28]!==E||s[29]!==H?(n=()=>{x.reviewChanges&&E&&H(E.name,{changesInspectorTab:"review"})},s[27]=x.reviewChanges,s[28]=E,s[29]=H,s[30]=n):n=s[30];let J=n,K="on"===v.inspect;s[31]!==K||s[32]!==v||s[33]!==w?(o=a=>{w((void 0===a?!K:a)?{...v,inspect:"on"}:{...v,inspect:void 0})},s[31]=K,s[32]=v,s[33]=w,s[34]=o):o=s[34];let L=o;s[35]!==L?(p=()=>L(!1),s[35]=L,s[36]=p):p=s[36];let M=p;s[37]!==G||s[38]!==A||s[39]!==z||s[40]!==H||s[41]!==L?(q=a=>{if("inspect"===a.action)return L(!0),!0;if("string"!=typeof a.action)return!1;let b=a.action.slice(cY.length),c=z.find(a=>a.name===b);return!!c&&(c.name===A?G(c.name):H(c.name),!0)},s[37]=G,s[38]=A,s[39]=z,s[40]=H,s[41]=L,s[42]=q):q=s[42];let N=q;return s[43]!==F||s[44]!==G||s[45]!==D||s[46]!==I||s[47]!==J||s[48]!==N||s[49]!==M||s[50]!==K||s[51]!==z||s[52]!==H?(r={changesOpen:F,currentInspector:D,inspectors:z,closeInspector:G,openInspector:H,handleHistoryClose:I,handleHistoryOpen:J,handleInspectorAction:N,handleLegacyInspectClose:M,inspectOpen:K},s[43]=F,s[44]=G,s[45]=D,s[46]=I,s[47]=J,s[48]=N,s[49]=M,s[50]=K,s[51]=z,s[52]=H,s[53]=r):r=s[53],r}(l),[bb,bc]=(0,e.useState)(!1),{lastRevisionDocument:bd}=gj(aO,aP);S[17]!==ah||S[18]!==ad?(m=a=>!!ad&&!a?.draft&&!a?.published&&!a?.version&&!ah,S[17]=ah,S[18]=ad,S[19]=m):m=S[19];let be=m;S[20]!==a1||S[21]!==ag?(n=a=>{let b=(0,f.selectUpstreamVersion)(a);return a1?ag||b:b||null},S[20]=a1,S[21]=ag,S[22]=n):n=S[22];let bf=n;S[23]!==aP||S[24]!==ak?(o=ak.get(aP),S[23]=aP,S[24]=ak,S[25]=o):o=S[25];let bg=o;S[26]!==be||S[27]!==bb||S[28]!==aW||S[29]!==aQ.rev||S[30]!==aS.selectedPerspective||S[31]!==bg?(p=a=>{let b=be(a);return!!aQ.rev||bb||b||!(0,f.isPerspectiveWriteable)({selectedPerspective:aS.selectedPerspective,isDraftModelEnabled:aW,schemaType:bg}).result},S[26]=be,S[27]=bb,S[28]=aW,S[29]=aQ.rev,S[30]=aS.selectedPerspective,S[31]=bg,S[32]=p):p=S[32];let bh=p;S[33]!==aj||S[34]!==bd||S[35]!==af||S[36]!==ae?(q=a=>af?ae||{_id:a._id,_type:a._type}:!a._createdAt&&!a._updatedAt&&aj&&bd?bd:a,S[33]=aj,S[34]=bd,S[35]=af,S[36]=ae,S[37]=q):q=S[37];let bi=q;S[38]!==aQ.path?(r=aQ.path?(0,aE.fromString)(aQ.path):f.EMPTY_ARRAY,S[38]=aQ.path,S[39]=r):r=S[39];let bj="true"===av.stickyParams.displayInlineChanges;S[40]!==a1||S[41]!==aO||S[42]!==aP||S[43]!==bf||S[44]!==bi||S[45]!==bh||S[46]!==a_||S[47]!==X||S[48]!==aZ||S[49]!==aY||S[50]!==r||S[51]!==bj?(t={changesOpen:a1,documentType:aP,documentId:aO,initialValue:a_,comparisonValue:bf,releaseId:aY,selectedPerspectiveName:aZ,initialFocusPath:r,readOnly:bh,onFocusPath:X,getFormDocumentValue:bi,displayInlineChanges:bj},S[40]=a1,S[41]=aO,S[42]=aP,S[43]=bf,S[44]=bi,S[45]=bh,S[46]=a_,S[47]=X,S[48]=aZ,S[49]=aY,S[50]=r,S[51]=bj,S[52]=t):t=S[52];let{editState:bk,upstreamEditState:bl,hasUpstreamVersion:bm,connectionState:bn,focusPath:bo,onChange:bp,validation:bq,ready:br,value:bs,formState:bt,permissions:bu,onPathOpen:bv,isPermissionsLoading:bw,formStateRef:bx,onProgrammaticFocus:by,collapsedFieldSets:bz,collapsedPaths:bA,onBlur:bB,onFocus:bC,onSetActiveFieldGroup:bD,onSetCollapsedPath:bE,onSetCollapsedFieldSet:bF,openPath:bG}=(0,f.useDocumentForm)(t),{data:bH}=(0,f.useActiveReleases)();S[53]!==bH?(u=void 0===bH?[]:bH,S[53]=bH,S[54]=u):u=S[54];let bI=u;S[55]!==at||S[56]!==aQ||S[57]!==bI||S[58]!==aZ||S[59]!==aY||S[60]!==bs?(v=function(a,b,c,d,e,h){let i;switch(!0){case!!a?.rev:i="revision";break;case b&&(0,g.isVersionId)(c._id):{let a=h.find(a=>(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===b);i=a&&(0,f.isCardinalityOneRelease)(a)?"scheduled-draft":"version";break}case"published"===d:i="published";break;case e:i="draft";break;default:i="published"}return i}(aQ,aY,bs,aZ,at,bI),S[55]=at,S[56]=aQ,S[57]=bI,S[58]=aZ,S[59]=aY,S[60]=bs,S[61]=v):v=S[61];let bJ=v;S[62]!==bJ||S[63]!==aO||S[64]!==aP||S[65]!==aY?(w={schemaType:aP,documentId:aO,versionType:bJ,releaseId:aY},S[62]=bJ,S[63]=aO,S[64]=aP,S[65]=aY,S[66]=w):w=S[66];let bK=w;S[67]!==an||S[68]!==bK?(x=an(bK),S[67]=an,S[68]=bK,S[69]=x):x=S[69];let bL=x;S[70]!==aX||S[71]!==bv||S[72]!==aQ||S[73]!==az?(y=a=>{if(bv(a),aX){let b=(0,f.pathToString)(a);aQ.path!==b&&az({...aQ,path:b})}},S[70]=aX,S[71]=bv,S[72]=aQ,S[73]=az,S[74]=y):y=S[74];let bM=y;S[75]!==ao||S[76]!==aO||S[77]!==aP?(z=ao({schemaType:aP,documentId:aO}),S[75]=ao,S[76]=aO,S[77]=aP,S[78]=z):z=S[78];let bO=z;S[79]!==aO||S[80]!==aP||S[81]!==ar?(A=ar({schemaType:aP,documentId:aO}),S[79]=aO,S[80]=aP,S[81]=ar,S[82]=A):A=S[82];let bP=A,bQ=(0,f.useUnique)(aL),bR=aQ.view||bQ[0]&&bQ[0].id||null,bS=function(a){let b,c,g,h,i=(0,d.c)(6),{resolveProductionUrl:j}=(0,f.useSource)().document;i[0]===Symbol.for("react.memo_cache_sentinel")?(b=new aD.BehaviorSubject(void 0),i[0]=b):b=i[0];let k=b;return i[1]!==a?(c=()=>{k.next(a)},g=[k,a],i[1]=a,i[2]=c,i[3]=g):(c=i[2],g=i[3]),(0,e.useEffect)(c,g),i[4]!==j?(h=k.asObservable().pipe((0,aC.distinctUntilChanged)(),(0,aC.debounceTime)(500),(0,aC.switchMap)(a=>(0,f.isRecord)(a)&&"string"==typeof a._id&&"string"==typeof a._type?(0,aD.from)(j({document:a})):(0,aD.of)(void 0)),(0,aC.distinctUntilChanged)(),(0,aC.catchError)(gp)),i[4]=j,i[5]=h):h=i[5],(0,ax.useObservable)(h)}(bs),{t:bT}=(0,f.useTranslation)(s);S[83]!==aO||S[84]!==aP||S[85]!==ap||S[86]!==bg?(B=bg?ap({documentId:aO,documentType:aP,schemaType:bg}):[],S[83]=aO,S[84]=aP,S[85]=ap,S[86]=bg,S[87]=B):B=S[87];let bU=B,bV=br&&(!aQ.rev||ad||!!ac);S[88]!==bi||S[89]!==bs?(C=bi(bs),S[88]=bi,S[89]=bs,S[90]=C):C=S[90];let bW=C;S[91]!==bW||S[92]!==aO||S[93]!==bk?(D={strict:!0,displayed:bW,documentId:aO,editState:bk},S[91]=bW,S[92]=aO,S[93]=bk,S[94]=D):D=S[94];let{previousId:bX}=(0,f.useDocumentIdStack)(D);S[95]!==aQ||S[96]!==az?(E=(a,b)=>{az({...aQ,since:a,rev:b||void 0})},S[95]=aQ,S[96]=az,S[97]=E):E=S[97];let bY=E;S[98]!==aw?(F=()=>aw.closeCurrent(),S[98]=aw,S[99]=F):F=S[99];let bZ=F;S[100]!==aw?(G=()=>aw.duplicateCurrent(),S[100]=aw,S[101]=G):G=S[101];let b$=G;S[102]!==av||S[103]!==au?(H=()=>{let a="true"!==av.stickyParams.displayInlineChanges;au.log(a?gm:gn),av.navigate({stickyParams:{displayInlineChanges:String(a)}})},S[102]=av,S[103]=au,S[104]=H):H=S[104];let b_=H;S[105]!==aR||S[106]!==a$||S[107]!==aO||S[108]!==aP||S[109]!==a7||S[110]!==a8||S[111]!==bS||S[112]!==bX||S[113]!==aA||S[114]!==bT||S[115]!==au||S[116]!==b_||S[117]!==bs._id?(I=async a=>{if("production-preview"===a.action&&bS)return window.open(bS),!0;if("copy-document-url"===a.action&&navigator){au.log(gl);let a=aR({coreUi:a=>`${a}/intent/edit/id=${aO};type=${aP}`});return await navigator.clipboard.writeText(a),aA({id:"copy-document-url",status:"info",title:bT("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===a.action?(a7(),!0):(("inspect"===a.action||"string"==typeof a.action&&a.action.startsWith(cY))&&a8(a),"compareVersions"===a.action&&"u">typeof bX?(a$.navigateDiffView({mode:"version",previousDocument:{type:aP,id:bX},nextDocument:{type:aP,id:bs._id}}),!0):"toggleInlineChanges"===a.action&&(b_(),!0))},S[105]=aR,S[106]=a$,S[107]=aO,S[108]=aP,S[109]=a7,S[110]=a8,S[111]=bS,S[112]=bX,S[113]=aA,S[114]=bT,S[115]=au,S[116]=b_,S[117]=bs._id,S[118]=I):I=S[118];let b0=I;S[119]!==aO||S[120]!==aP||S[121]!==bp||S[122]!==bg||S[123]!==al?(J=()=>{al({documentId:aO,documentType:aP,schemaType:bg,onChange:bp})},K=[aO,aP,bg,bp,al],S[119]=aO,S[120]=aP,S[121]=bp,S[122]=bg,S[123]=al,S[124]=J,S[125]=K):(J=S[124],K=S[125]),(0,e.useEffect)(J,K),S[126]!==bf||S[127]!==bl?(L=bf(bl),S[126]=bf,S[127]=bl,S[128]=L):L=S[128];let b1=L,b2=be(bk),b3=af&&!ae;b:{if(bk.version&&(0,f.isGoingToUnpublish)(bk.version)){M=bk.published;break b}M=bW}let b4=M,b5=a2||null;S[129]!==aJ?(N=aJ||[],S[129]=aJ,S[130]=N):N=S[130],S[131]!==bL||S[132]!==bR||S[133]!==bO||S[134]!==a1||S[135]!==a4||S[136]!==bz||S[137]!==bA||S[138]!==b1||S[139]!==bn||S[140]!==b4||S[141]!==aO||S[142]!==aN||S[143]!==aP||S[144]!==bk||S[145]!==bU||S[146]!==bo||S[147]!==bt||S[148]!==a6||S[149]!==a7||S[150]!==ba||S[151]!==b0||S[152]!==bZ||S[153]!==b$||S[154]!==bM||S[155]!==bm||S[156]!==U||S[157]!==a9||S[158]!==a3||S[159]!==b2||S[160]!==bb||S[161]!==a0||S[162]!==bw||S[163]!==bP||S[164]!==aj||S[165]!==bd||S[166]!==aa||S[167]!==bB||S[168]!==bp||S[169]!==bC||S[170]!==bD||S[171]!==bF||S[172]!==bE||S[173]!==Y||S[174]!==a5||S[175]!==bG||S[176]!==W||S[177]!==bu||S[178]!==bS||S[179]!==bV||S[180]!==ai||S[181]!==b3||S[182]!==bg||S[183]!==aY||S[184]!==bY||S[185]!==b5||S[186]!==N||S[187]!==ac||S[188]!==ab||S[189]!==aK||S[190]!==bq||S[191]!==bs||S[192]!==bQ?(O={actions:bL,activeViewId:bR,badges:bO,changesOpen:a1,closeInspector:a4,collapsedFieldSets:bz,collapsedPaths:bA,compareValue:b1,connectionState:bn,displayed:b4,documentId:aO,documentIdRaw:aN,documentType:aP,editState:bk,fieldActions:bU,focusPath:bo,inspector:b5,inspectors:a3,onBlur:bB,onChange:bp,onFocus:bC,onPathOpen:bM,onHistoryClose:a6,onHistoryOpen:a7,onInspectClose:ba,onMenuAction:b0,onPaneClose:bZ,onPaneSplit:b$,onSetActiveFieldGroup:bD,onSetCollapsedPath:bE,onSetCollapsedFieldSet:bF,onSetMaximizedPane:Y,maximized:aa,openInspector:a5,openPath:bG,index:U,inspectOpen:a9,validation:bq,menuItemGroups:N,paneKey:W,previewUrl:bS,ready:bV,schemaType:bg,hasUpstreamVersion:bm,isPermissionsLoading:bw,isInitialValueLoading:a0,permissions:bu,setTimelineRange:bY,setIsDeleting:bc,isDeleting:bb,isDeleted:b2,timelineError:ac,timelineStore:ab,title:aK,value:bs,selectedReleaseId:aY,views:bQ,formState:bt,unstable_languageFilter:bP,revisionId:ai,revisionNotFound:b3,lastNonDeletedRevId:aj,lastRevisionDocument:bd},S[131]=bL,S[132]=bR,S[133]=bO,S[134]=a1,S[135]=a4,S[136]=bz,S[137]=bA,S[138]=b1,S[139]=bn,S[140]=b4,S[141]=aO,S[142]=aN,S[143]=aP,S[144]=bk,S[145]=bU,S[146]=bo,S[147]=bt,S[148]=a6,S[149]=a7,S[150]=ba,S[151]=b0,S[152]=bZ,S[153]=b$,S[154]=bM,S[155]=bm,S[156]=U,S[157]=a9,S[158]=a3,S[159]=b2,S[160]=bb,S[161]=a0,S[162]=bw,S[163]=bP,S[164]=aj,S[165]=bd,S[166]=aa,S[167]=bB,S[168]=bp,S[169]=bC,S[170]=bD,S[171]=bF,S[172]=bE,S[173]=Y,S[174]=a5,S[175]=bG,S[176]=W,S[177]=bu,S[178]=bS,S[179]=bV,S[180]=ai,S[181]=b3,S[182]=bg,S[183]=aY,S[184]=bY,S[185]=b5,S[186]=N,S[187]=ac,S[188]=ab,S[189]=aK,S[190]=bq,S[191]=bs,S[192]=bQ,S[193]=O):O=S[193];let b6=O,b7=(0,e.useRef)(void 0);return S[194]!==aX||S[195]!==bx||S[196]!==by||S[197]!==aw||S[198]!==aQ||S[199]!==bV?(P=()=>{if(bV&&aQ.path){let{path:a,...b}=aQ;a!==b7.current&&by((0,aE.resolveKeyedPath)(bx.current?.value,(0,aE.fromString)(a))),aX||aw.setParams(b)}b7.current=aQ.path},Q=[bx,by,aw,aQ,bV,aX],S[194]=aX,S[195]=bx,S[196]=by,S[197]=aw,S[198]=aQ,S[199]=bV,S[200]=P,S[201]=Q):(P=S[200],Q=S[201]),(0,e.useEffect)(P,Q),S[202]!==T||S[203]!==b6?(R=(0,c.jsx)(h.DocumentPaneContext.Provider,{value:b6,children:T}),S[202]=T,S[203]=b6,S[204]=R):R=S[204],R}let gr=a=>{let b,e,h,i,j,k,l,m=(0,d.c)(37),{params:n}=dH(),o=void 0===n?cX:n,p=gG(a.pane.options,o),q=(0,f.useSchema)(),r=p.type,s=!!q.get(p.type)?.liveEdit,{selectedPerspectiveName:t,selectedReleaseId:u,selectedPerspective:v}=(0,f.usePerspective)(),{data:w}=(0,f.useArchivedReleases)();m[0]!==p.id?(b=(0,g.getPublishedId)(p.id),m[0]=p.id,m[1]=b):b=m[1];let x=(0,f.useEditState)(b,r,"default",u),y=s&&"drafts"===v&&!x?.draft,{rev:z,since:A}=o,B=o.historyVersion;a:{if(y){let a;m[2]!==p.id?(a=(0,g.getPublishedId)(p.id),m[2]=p.id,m[3]=a):a=m[3],e=a;break a}if(B&&w.some(a=>(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===B)){let a;m[4]!==B||m[5]!==p.id?(a=(0,g.getVersionId)(p.id,B),m[4]=B,m[5]=p.id,m[6]=a):a=m[6],e=a;break a}if(typeof t>"u"){let a;m[7]!==p.id?(a=(0,g.getDraftId)(p.id),m[7]=p.id,m[8]=a):a=m[8],e=a;break a}if("published"===t){let a;m[9]!==p.id?(a=(0,g.getPublishedId)(p.id),m[9]=p.id,m[10]=a):a=m[10],e=a;break a}if(u){let a;m[11]!==p.id||m[12]!==t?(a=(0,g.getVersionId)(p.id,t),m[11]=p.id,m[12]=t,m[13]=a):a=m[13],e=a;break a}e=p.id}let C=e;m[14]!==C||m[15]!==p.type||m[16]!==z||m[17]!==A?(h={documentId:C,documentType:p.type,rev:z,since:A},m[14]=C,m[15]=p.type,m[16]=z,m[17]=A,m[18]=h):h=m[18];let D=(0,f.useEventsStore)(h),E=D.error,F=D.revision?.revisionId||null,G=!!(z&&!D.revision?.loading),H=D.revision?.document||null,I=D.sinceRevision?.document||null,J=!D.loading,K=0===D.events.length;m[19]!==D.events?(i=D.events.find(gs)?.id||null,m[19]=D.events,m[20]=i):i=m[20],m[21]!==D.error||m[22]!==K||m[23]!==i||m[24]!==F||m[25]!==G||m[26]!==H||m[27]!==I||m[28]!==J?(j={error:E,revisionId:F,onOlderRevision:G,revisionDocument:H,sinceDocument:I,ready:J,isPristine:K,lastNonDeletedRevId:i},m[21]=D.error,m[22]=K,m[23]=i,m[24]=F,m[25]=G,m[26]=H,m[27]=I,m[28]=J,m[29]=j):j=m[29];let L=j;return m[30]!==L||m[31]!==B||m[32]!==a?(k=B?(0,c.jsx)(f.PerspectiveProvider,{selectedPerspectiveName:B,excludedPerspectives:f.EMPTY_ARRAY,children:(0,c.jsx)(gq,{...a,historyStore:L})}):(0,c.jsx)(gq,{...a,historyStore:L}),m[30]=L,m[31]=B,m[32]=a,m[33]=k):k=m[33],m[34]!==k||m[35]!==D?(l=(0,c.jsx)(f.EventsProvider,{value:D,children:k}),m[34]=k,m[35]=D,m[36]=l):l=m[36],l};function gs(a){return!(0,f.isDeleteDocumentGroupEvent)(a)&&!(0,f.isDeleteDocumentVersionEvent)(a)}let gt=a=>{let b,h,i,j,k=(0,d.c)(20),{pane:l}=a,m=dH(),n=gG(l.options,m.params),o=m.params||cX,[p,q]=(0,e.useState)(null);k[0]!==n.id?(b=(0,g.getPublishedId)(n.id),k[0]=n.id,k[1]=b):b=k[1],k[2]!==n.type||k[3]!==o.rev||k[4]!==o.since||k[5]!==b?(h={documentId:b,documentType:n.type,onError:q,rev:o.rev,since:o.since},k[2]=n.type,k[3]=o.rev,k[4]=o.since,k[5]=b,k[6]=h):h=k[6];let r=(0,f.useTimelineStore)(h),s=(0,f.useTimelineSelector)(r,gu),t=(0,f.useTimelineSelector)(r,gv),u=(0,f.useTimelineSelector)(r,gw),v=(0,f.useTimelineSelector)(r,gx),w=(0,f.useTimelineSelector)(r,gy),x=(0,f.useTimelineSelector)(r,gz),y=(0,f.useTimelineSelector)(r,gA),z=t?.id||null,A=!!x;k[7]!==y||k[8]!==s||k[9]!==r||k[10]!==z||k[11]!==v||k[12]!==u||k[13]!==A||k[14]!==p||k[15]!==w?(i={store:r,error:p,revisionId:z,onOlderRevision:s,revisionDocument:v,sinceDocument:u,ready:w,isPristine:A,lastNonDeletedRevId:y},k[7]=y,k[8]=s,k[9]=r,k[10]=z,k[11]=v,k[12]=u,k[13]=A,k[14]=p,k[15]=w,k[16]=i):i=k[16];let B=i;return k[17]!==B||k[18]!==a?(j=(0,c.jsx)(gq,{...a,historyStore:B}),k[17]=B,k[18]=a,k[19]=j):j=k[19],j};function gu(a){return a.onOlderRevision}function gv(a){return a.revTime}function gw(a){return a.sinceAttributes}function gx(a){return a.timelineDisplayed}function gy(a){return a.timelineReady}function gz(a){return a.isPristine}function gA(a){return a.lastNonDeletedRevId}function gB(a){let b=(0,d.c)(4),{children:e}=a,g=dH(),{excludedPerspectives:h}=(0,f.usePerspective)(),{scheduledDraft:i}=g.params;if(i){let a;return b[0]!==e||b[1]!==h||b[2]!==i?(a=(0,c.jsx)(f.PerspectiveProvider,{selectedPerspectiveName:i,excludedPerspectives:h,children:e}),b[0]=e,b[1]=h,b[2]=i,b[3]=a):a=b[3],a}return e}let gC=(0,e.memo)(a=>{let b,e,g,h=(0,d.c)(9),i=(0,f.useSource)(),{setParams:j,params:k}=dH();h[0]!==k||h[1]!==j?(b=a=>{j({...k,scheduledDraft:a},{perspective:""})},h[0]=k,h[1]=j,h[2]=b):b=h[2];let l=b;return h[3]!==a||h[4]!==i.beta?.eventsAPI?.documents?(e=i.beta?.eventsAPI?.documents?(0,c.jsx)(gr,{...a}):(0,c.jsx)(gt,{...a}),h[3]=a,h[4]=i.beta?.eventsAPI?.documents,h[5]=e):e=h[5],h[6]!==l||h[7]!==e?(g=(0,c.jsx)(gB,{children:(0,c.jsx)(f.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:l,children:e})}),h[6]=l,h[7]=e,h[8]=g):g=h[8],g});gC.displayName="Memo(DocumentPaneProviderWrapper)";let gD=(0,e.memo)(function(a){let b,e,g=(0,d.c)(5),{name:h}=(0,f.useSource)(),i=a.pane.source||h;return g[0]!==a?(b=(0,c.jsx)(f.CopyPasteProvider,{children:(0,c.jsx)(gE,{...a})}),g[0]=a,g[1]=b):b=g[1],g[2]!==i||g[3]!==b?(e=(0,c.jsx)(f.SourceProvider,{name:i,children:b}),g[2]=i,g[3]=b,g[4]=e):e=g[4],e});function gE(a){var b,g,h;let i,j,k,l,m,n,o,p,q,r,t,u,v=(0,d.c)(57),{pane:w,paneKey:x}=a,{resolveNewDocumentOptions:y}=(0,f.useSource)().document,{selectedPerspectiveName:z}=(0,f.usePerspective)(),A=dH(),B=gG(w.options,A.params),{documentType:C,isLoaded:D}=(0,f.useDocumentType)(B.id,B.type);!function(){let a,b,c,g,h,i=(0,d.c)(10),{params:j,setParams:k}=dH(),l=void 0===j?cX:j,{selectedPerspectiveName:m}=(0,f.usePerspective)(),n=(0,e.useRef)(!1);i[0]!==l||i[1]!==k?(a=a=>{["since","historyVersion","rev","preserveRev"].some(a=>l[a])&&k({...l,rev:"true"===l.preserveRev?l.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},i[0]=l,i[1]=k,i[2]=a):a=i[2];let o=(0,a_.useEffectEvent)(a);i[3]!==m||i[4]!==o?(b=()=>{n.current&&o(m)},i[3]=m,i[4]=o,i[5]=b):b=i[5],i[6]!==m?(c=[m],i[6]=m,i[7]=c):c=i[7],(0,e.useEffect)(b,c),i[8]===Symbol.for("react.memo_cache_sentinel")?(g=()=>(n.current=!0,()=>{n.current=!1}),h=[],i[8]=g,i[9]=h):(g=i[8],h=i[9]),(0,e.useEffect)(g,h)}();let E=((u=(0,d.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(t={pick:b_,defaultComponent:gi},u[0]=t):t=u[0],(0,f.useMiddlewareComponents)(t));v[0]!==B.id||v[1]!==B.type||v[2]!==y?(i=y({type:"document",documentId:B.id,schemaType:B.type}),v[0]=B.id,v[1]=B.type,v[2]=y,v[3]=i):i=v[3];let F=i;v[4]!==F?(j={templateItems:F},v[4]=F,v[5]=j):j=v[5];let[G,H]=(0,f.useTemplatePermissions)(j),I=D&&!H;v[6]!==C||v[7]!==I||v[8]!==B||v[9]!==a?(k=I&&C&&B.type!==C?(b=a,g=B,h=C,{...b,pane:{...b.pane,options:{...g,type:h}}}):a,v[6]=C,v[7]=I,v[8]=B,v[9]=a,v[10]=k):k=v[10];let J=k,{ReferenceChildLink:K,handleEditReference:L,groupIndex:M,routerPanesState:N}=A;v[11]!==M||v[12]!==N?(l=N[M+1]?.[0].params||{},v[11]=M,v[12]=N,v[13]=l):l=v[13];let O=l,P=N.length,{parentRefPath:Q}=O;v[14]!==M||v[15]!==Q||v[16]!==P?(m=Q?{path:(0,aE.fromString)(Q),state:M>=P-1?"none":M>=P-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=M,v[15]=Q,v[16]=P,v[17]=m):m=v[17];let R=m,{t:S}=(0,f.useTranslation)(s);if("*"===B.type&&!I){let a,b;return v[18]!==S?(a=S("panes.document-pane.document-not-found.loading"),v[18]=S,v[19]=a):a=v[19],v[20]!==x||v[21]!==a?(b=(0,c.jsx)(cP,{flex:2.5,minWidth:320,paneKey:x,title:a}),v[20]=x,v[21]=a,v[22]=b):b=v[22],b}if(!C){let a,b,d,e,g;return v[23]!==S?(a=S("panes.document-pane.document-not-found.title"),v[23]=S,v[24]=a):a=v[24],v[25]!==B.id?(b={id:B.id},v[25]=B.id,v[26]=b):b=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(d={Code:gF},v[27]=d):d=v[27],v[28]!==S||v[29]!==b?(e=(0,c.jsx)(ap.Stack,{space:4,children:(0,c.jsx)(ap.Text,{as:"p",children:(0,c.jsx)(f.Translate,{t:S,i18nKey:"panes.document-pane.document-not-found.text",values:b,components:d})})}),v[28]=S,v[29]=b,v[30]=e):e=v[30],v[31]!==x||v[32]!==a||v[33]!==e?(g=(0,c.jsx)(cL,{flex:2.5,minWidth:320,paneKey:x,title:a,children:e}),v[31]=x,v[32]=a,v[33]=e,v[34]=g):g=v[34],g}let T=`${C}-${B.id}-${z||""}`;return v[35]!==E||v[36]!==B.id||v[37]!==B.type?(n=(0,c.jsx)(E,{documentId:B.id,documentType:B.type}),v[35]=E,v[36]=B.id,v[37]=B.type,v[38]=n):n=v[38],v[39]!==B.id||v[40]!==B.type||v[41]!==n?(o=(0,c.jsx)(cR,{documentId:B.id,documentType:B.type,children:n}),v[39]=B.id,v[40]=B.type,v[41]=n,v[42]=o):o=v[42],v[43]!==B.id||v[44]!==B.type||v[45]!==o?(p=(0,c.jsx)(cb,{documentId:B.id,documentType:B.type,children:o}),v[43]=B.id,v[44]=B.type,v[45]=o,v[46]=p):p=v[46],v[47]!==K||v[48]!==R||v[49]!==L||v[50]!==p||v[51]!==G?(q=(0,c.jsx)(f.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:K,onEditReference:L,initialValueTemplateItems:G,activePath:R,children:p}),v[47]=K,v[48]=R,v[49]=L,v[50]=p,v[51]=G,v[52]=q):q=v[52],v[53]!==J||v[54]!==T||v[55]!==q?(r=(0,c.jsx)(gC,{...J,children:q},T),v[53]=J,v[54]=T,v[55]=q,v[56]=r):r=v[56],r}function gF(a){let{children:b}=a;return(0,c.jsx)("code",{children:b})}function gG(a,b){let c,e,g=(0,d.c)(8);g[0]!==b?(c=void 0===b?{}:b,g[0]=b,g[1]=c):c=g[1];let h=c,i=(0,f.useTemplates)();a:{let b,c;if(a.type&&"*"!==a.type){e=a;break a}let d=a.template||h.template;g[2]!==d||g[3]!==i?(b=d?i.find(a=>a.id===d):void 0,g[2]=d,g[3]=i,g[4]=b):b=g[4];let f=b?.schemaType;if(!f){e=a;break a}g[5]!==f||g[6]!==a?(c={...a,type:f},g[5]=f,g[6]=a,g[7]=c):c=g[7],e=c}return e}let gH=(0,e.forwardRef)(function(a,b){let f,g,i,j=(0,d.c)(9),{routerPanesState:k,groupIndex:l}=(0,e.useContext)(h.PaneRouterContext);j[0]!==l||j[1]!==k?(f=k.slice(0,l),j[0]=l,j[1]=k,j[2]=f):f=j[2];let m=f;j[3]!==m?(g={panes:m},j[3]=m,j[4]=g):g=j[4];let n=g;return j[5]!==a||j[6]!==b||j[7]!==n?(i=(0,c.jsx)(ay.StateLink,{...a,ref:b,state:n}),j[5]=a,j[6]=b,j[7]=n,j[8]=i):i=j[8],i}),gI=(0,e.forwardRef)(function(a,b){let f,g,i,j,k,l,m=(0,d.c)(19);m[0]!==a?({childId:f,childPayload:i,childParameters:g,...j}=a,m[0]=a,m[1]=f,m[2]=g,m[3]=i,m[4]=j):(f=m[1],g=m[2],i=m[3],j=m[4]);let{routerPanesState:n,groupIndex:o}=(0,e.useContext)(h.PaneRouterContext);if(m[5]!==f||m[6]!==g||m[7]!==i||m[8]!==o||m[9]!==n){let a;m[11]!==f||m[12]!==g||m[13]!==i?(a=[{id:f,params:g,payload:i}],m[11]=f,m[12]=g,m[13]=i,m[14]=a):a=m[14],k={panes:[...n.slice(0,o+1),a]},m[5]=f,m[6]=g,m[7]=i,m[8]=o,m[9]=n,m[10]=k}else k=m[10];return m[15]!==b||m[16]!==j||m[17]!==k?(l=(0,c.jsx)(ay.StateLink,{...j,ref:b,state:k}),m[15]=b,m[16]=j,m[17]=k,m[18]=l):l=m[18],l}),gJ=(0,e.forwardRef)(function(a,b){let g,i,j,k,l,m,n,o=(0,d.c)(20),{routerPanesState:p,groupIndex:q,siblingIndex:r}=(0,e.useContext)(h.PaneRouterContext);o[0]!==a?({params:g,payload:i,...j}=a,o[0]=a,o[1]=g,o[2]=i,o[3]=j):(g=o[1],i=o[2],j=o[3]);let s=(0,f.useUnique)(g),t=(0,f.useUnique)(i),u=p[q],v=u[r],w=s??v.params,x=t??v.payload;o[4]!==v||o[5]!==w||o[6]!==x?(k={...v,params:w,payload:x},o[4]=v,o[5]=w,o[6]=x,o[7]=k):k=o[7];let y=k;o[8]!==u||o[9]!==y||o[10]!==r?(l=[...u.slice(0,r),y,...u.slice(r+1)],o[8]=u,o[9]=y,o[10]=r,o[11]=l):l=o[11];let z=l;o[12]!==p||o[13]!==q||o[14]!==z?(m={panes:[...p.slice(0,q),z,...p.slice(q+1)]},o[12]=p,o[13]=q,o[14]=z,o[15]=m):m=o[15];let A=m;return o[16]!==A||o[17]!==b||o[18]!==j?(n=(0,c.jsx)(ay.StateLink,{ref:b,...j,state:A}),o[16]=A,o[17]=b,o[18]=j,o[19]=n):n=o[19],n}),gK=(0,e.forwardRef)(function(a,b){let e,f,h,i,j,k,l,m,n,o,p,q=(0,d.c)(24);q[0]!==a?({documentId:f,documentType:h,parentRefPath:i,children:e,template:k,...j}=a,q[0]=a,q[1]=e,q[2]=f,q[3]=h,q[4]=i,q[5]=j,q[6]=k):(e=q[1],f=q[2],h=q[3],i=q[4],j=q[5],k=q[6]),q[7]!==f?(l=(0,g.getPublishedId)(f),q[7]=f,q[8]=l):l=q[8];let r=k?.params;return q[9]!==i?(m=(0,aE.toString)(i),q[9]=i,q[10]=m):m=q[10],q[11]!==k?(n=k&&{template:k?.id},q[11]=k,q[12]=n):n=q[12],q[13]!==h||q[14]!==m||q[15]!==n?(o={type:h,parentRefPath:m,...n},q[13]=h,q[14]=m,q[15]=n,q[16]=o):o=q[16],q[17]!==e||q[18]!==b||q[19]!==j||q[20]!==l||q[21]!==r||q[22]!==o?(p=(0,c.jsx)(gI,{...j,ref:b,childId:l,childPayload:r,childParameters:o,children:e}),q[17]=e,q[18]=b,q[19]=j,q[20]=l,q[21]=r,q[22]=o,q[23]=p):p=q[23],p}),gL=[];function gM(a){let b,e,f,g,i,j,k,l,m,n,o,p,q,r=(0,d.c)(60),{children:s,flatIndex:t,index:u,params:v,payload:w,siblingIndex:x}=a,{navigate:y,navigateIntent:z,resolvePathFromState:A}=(0,ay.useRouter)(),B=(0,ay.useRouterState)(),{panes:C,expand:D}=cc(),E=B?.panes||gL,F=C?.[C.length-2],G=u-1;r[0]!==G||r[1]!==E||r[2]!==B||r[3]!==x?(b=a=>{let b=E[G]||[],c=b[x],d=a(b,c),e=[...E.slice(0,G),d,...E.slice(G+1)];return{...B,panes:e}},r[0]=G,r[1]=E,r[2]=B,r[3]=x,r[4]=b):b=r[4];let H=b;r[5]!==H||r[6]!==y?(e=(a,b)=>{let c=H(a);return setTimeout(()=>y(c,b?{stickyParams:b}:void 0),0),c},r[5]=H,r[6]=y,r[7]=e):e=r[7];let I=e;r[8]!==H||r[9]!==A||r[10]!==x?(f=a=>A(H((b,c)=>[...b.slice(0,x),{...c,params:a},...b.slice(x+1)])),r[8]=H,r[9]=A,r[10]=x,r[11]=f):f=r[11];let J=f;r[12]!==I||r[13]!==x?(g=a=>{I((b,c)=>[...b.slice(0,x),{...c,payload:a},...b.slice(x+1)])},r[12]=I,r[13]=x,r[14]=g):g=r[14];let K=g;r[15]!==I||r[16]!==x?(i=(a,b)=>{I((b,c)=>[...b.slice(0,x),{...c,params:a},...b.slice(x+1)],b)},r[15]=I,r[16]=x,r[17]=i):i=r[17];let L=i;r[18]!==G||r[19]!==y||r[20]!==E?(j=a=>{let{id:b,parentRefPath:c,type:d,template:e,version:f}=a;y({panes:[...E.slice(0,G+1),[{id:b,params:{template:e.id,parentRefPath:(0,aE.toString)(c),type:d,version:f},payload:e.params}]]})},r[18]=G,r[19]=y,r[20]=E,r[21]=j):j=r[21];let M=j,N=!!E[G]&&E[G].length>1,O=E[G]?E[G].length:0,P=t?gH:void 0;r[22]!==I?(l=a=>{let b=void 0===a?{}:a;I(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},k=()=>{I(gN)},r[22]=I,r[23]=k,r[24]=l):(k=r[23],l=r[24]),r[25]!==D||r[26]!==G||r[27]!==F||r[28]!==y||r[29]!==E?(m=a=>{(void 0===a||a)&&F&&D(F.element),y({panes:E.slice(0,G)})},r[25]=D,r[26]=G,r[27]=F,r[28]=y,r[29]=E,r[30]=m):m=r[30],r[31]!==I||r[32]!==x?(n=a=>{I((b,c)=>{let d={...c,payload:a?.payload||c.payload,params:a?.params||c.params};return[...b.slice(0,x),d,...b.slice(x)]})},r[31]=I,r[32]=x,r[33]=n):n=r[33],r[34]!==v||r[35]!==L?(o=a=>{let b=(0,az.default)(v,"view");return L(a?{...b,view:a}:b)},r[34]=v,r[35]=L,r[36]=o):o=r[36],r[37]!==J||r[38]!==t||r[39]!==G||r[40]!==M||r[41]!==z||r[42]!==v||r[43]!==w||r[44]!==E||r[45]!==L||r[46]!==K||r[47]!==x||r[48]!==k||r[49]!==m||r[50]!==n||r[51]!==o||r[52]!==N||r[53]!==O||r[54]!==P||r[55]!==l?(p={index:t,groupIndex:G,siblingIndex:x,payload:w,params:v,hasGroupSiblings:N,groupLength:O,routerPanesState:E,ChildLink:gI,BackLink:P,ReferenceChildLink:gK,handleEditReference:M,ParameterizedLink:gJ,replaceCurrent:l,closeCurrent:k,closeCurrentAndAfter:m,duplicateCurrent:n,setView:o,setParams:L,setPayload:K,createPathWithParams:J,navigateIntent:z},r[37]=J,r[38]=t,r[39]=G,r[40]=M,r[41]=z,r[42]=v,r[43]=w,r[44]=E,r[45]=L,r[46]=K,r[47]=x,r[48]=k,r[49]=m,r[50]=n,r[51]=o,r[52]=N,r[53]=O,r[54]=P,r[55]=l,r[56]=p):p=r[56];let Q=p;return r[57]!==s||r[58]!==Q?(q=(0,c.jsx)(h.PaneRouterContext.Provider,{value:Q,children:s}),r[57]=s,r[58]=Q,r[59]=q):q=r[59],q}function gN(a,b){return a.length>1?a.filter(a=>a!==b):a}function gO(a){let b,e,g,h,i,j=(0,d.c)(14),{isSelected:k,pane:l,paneKey:m}=a;j[0]!==l?(b=(0,f.isRecord)(l)&&l.type||null,j[0]=l,j[1]=b):b=j[1];let n=b,{t:o}=(0,f.useTranslation)(s);return j[2]!==o?(e=o("panes.unknown-pane-type.title"),j[2]=o,j[3]=e):e=j[3],j[4]!==e?(g=(0,c.jsx)(cB,{title:e}),j[4]=e,j[5]=g):g=j[5],j[6]!==o||j[7]!==n?(h=(0,c.jsx)(cj,{children:(0,c.jsx)(ap.Box,{padding:4,children:"string"==typeof n?(0,c.jsx)(ap.Text,{as:"p",muted:!0,children:(0,c.jsx)(f.Translate,{t:o,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:n}})}):(0,c.jsx)(ap.Text,{as:"p",muted:!0,children:(0,c.jsx)(f.Translate,{t:o,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),j[6]=o,j[7]=n,j[8]=h):h=j[8],j[9]!==k||j[10]!==m||j[11]!==g||j[12]!==h?(i=(0,c.jsxs)(cg,{id:m,selected:k,children:[g,h]}),j[9]=k,j[10]=m,j[11]=g,j[12]=h,j[13]=i):i=j[13],i}let gP={component:(0,e.lazy)(()=>a.A(93448)),document:(0,e.lazy)(()=>Promise.resolve().then(function(){return jp})),documentList:(0,e.lazy)(()=>Promise.resolve().then(function(){return jq})),list:(0,e.lazy)(()=>a.A(55027))},gQ=(0,e.memo)(function(a){let b,f,g,h,i=(0,d.c)(25),{active:j,childItemId:k,groupIndex:l,index:m,itemId:n,pane:o,paneKey:p,params:q,payload:r,path:s,selected:t,siblingIndex:u,maximized:v,onSetMaximizedPane:w}=a,x=gP[o.type]||gO;i[0]!==p||i[1]!==s||i[2]!==t?(b=(0,c.jsx)(cP,{paneKey:p,path:s,selected:t}),i[0]=p,i[1]=s,i[2]=t,i[3]=b):b=i[3];let y=k||"";return i[4]!==x||i[5]!==j||i[6]!==m||i[7]!==n||i[8]!==v||i[9]!==w||i[10]!==o||i[11]!==p||i[12]!==t||i[13]!==y?(f=(0,c.jsx)(x,{childItemId:y,index:m,itemId:n,isActive:j,isSelected:t,paneKey:p,pane:o,maximized:v,onSetMaximizedPane:w}),i[4]=x,i[5]=j,i[6]=m,i[7]=n,i[8]=v,i[9]=w,i[10]=o,i[11]=p,i[12]=t,i[13]=y,i[14]=f):f=i[14],i[15]!==b||i[16]!==f?(g=(0,c.jsx)(e.Suspense,{fallback:b,children:f}),i[15]=b,i[16]=f,i[17]=g):g=i[17],i[18]!==l||i[19]!==m||i[20]!==q||i[21]!==r||i[22]!==u||i[23]!==g?(h=(0,c.jsx)(gM,{flatIndex:m,index:l,params:q,payload:r,siblingIndex:u,children:g}),i[18]=l,i[19]=m,i[20]=q,i[21]=r,i[22]=u,i[23]=g,i[24]=h):h=i[24],h},({params:a={},payload:b=null,...c},{params:d={},payload:e=null,...f})=>{if(!(0,aA.default)(a,d)||!(0,aA.default)(b,e))return!1;for(let a of new Set([...Object.keys(c),...Object.keys(f)]))if(c[a]!==f[a])return!1;return!0});function gR(a){let b,e,g=(0,d.c)(10),{document:h}=a,i=(0,f.useSchema)().get(h._type),{t:j}=(0,f.useTranslation)(s),{title:k}=c2();if(!i){let a,b;return g[0]!==h._type||g[1]!==j?(a=j("doc-title.unknown-schema-type.text",{schemaType:h._type}),g[0]=h._type,g[1]=j,g[2]=a):a=g[2],g[3]!==a?(b=(0,c.jsx)("code",{children:a}),g[3]=a,g[4]=b):b=g[4],b}return g[5]!==j||g[6]!==k?(b=k||(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:j("doc-title.fallback.text")}),g[5]=j,g[6]=k,g[7]=b):b=g[7],g[8]!==b?(e=(0,c.jsx)(c.Fragment,{children:b}),g[8]=b,g[9]=e):e=g[9],e}let gS=(0,at.styled)(ap.Box)`
  margin-left: auto;
`,gT=at.styled.details`
  flex: none;

  &[open] ${gS} {
    transform: rotate(180deg);
  }
`,gU=at.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,gV=at.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:a})=>(0,ap.rem)(a.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:a})=>(0,ap.rem)(a.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:a})=>(0,ap.rem)(a.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,gW=(0,at.styled)(ap.Flex)`
  min-height: 33px;
`,gX=a=>{let b,e,g,h,i,k,l=(0,d.c)(13),{t:m}=(0,f.useTranslation)(s),n=a.totalCount-a.references.length;return n?(l[0]!==n||l[1]!==m?(b=m("confirm-delete-dialog.other-reference-count.title",{count:n}),l[0]=n,l[1]=m,l[2]=b):b=l[2],l[3]!==b?(e=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:b}),l[3]=b,l[4]=e):e=l[4],l[5]!==m?(g=m("confirm-delete-dialog.other-reference-count.tooltip"),l[5]=m,l[6]=g):g=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:(0,c.jsx)(j.InfoOutlineIcon,{})}),l[7]=h):h=l[7],l[8]!==g?(i=(0,c.jsx)(ao.Tooltip,{portal:!0,placement:"top",content:g,children:h}),l[8]=g,l[9]=i):i=l[9],l[10]!==e||l[11]!==i?(k=(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsxs)(ap.Inline,{space:2,children:[e,i]})}),l[10]=e,l[11]=i,l[12]=k):k=l[12],k):null};function gY(a){let b,e,g,h,i,j,k=(0,d.c)(27),{icon:l,layout:m,presence:n,schemaType:o,value:p}=a,q=(0,f.useDocumentVersionInfo)(p._id),{perspectiveStack:r}=(0,f.usePerspective)();k[0]!==r||k[1]!==a.documentPreviewStore||k[2]!==o||k[3]!==p._id?(b=(0,f.getPreviewStateObservable)(a.documentPreviewStore,o,p._id,r),k[0]=r,k[1]=a.documentPreviewStore,k[2]=o,k[3]=p._id,k[4]=b):b=k[4];let s=b;k[5]===Symbol.for("react.memo_cache_sentinel")?(e={snapshot:null,isLoading:!0,original:null},k[5]=e):e=k[5];let{snapshot:t,original:u,isLoading:v}=(0,ax.useObservable)(s,e);k[6]!==v||k[7]!==n||k[8]!==q.draft||k[9]!==q.published||k[10]!==q.versions?(g=v?null:(0,c.jsx)(ao.TooltipDelayGroupProvider,{children:(0,c.jsxs)(ap.Flex,{align:"center",gap:3,children:[n&&n.length>0&&(0,c.jsx)(f.DocumentPreviewPresence,{presence:n}),(0,c.jsx)(f.DocumentStatusIndicator,{draft:q.draft,published:q.published,versions:q.versions})]})}),k[6]=v,k[7]=n,k[8]=q.draft,k[9]=q.published,k[10]=q.versions,k[11]=g):g=k[11];let w=g;k[12]!==q.draft||k[13]!==q.published||k[14]!==q.versions?(h=(0,c.jsx)(f.DocumentStatus,{draft:q.draft,published:q.published,versions:q.versions}),k[12]=q.draft,k[13]=q.published,k[14]=q.versions,k[15]=h):h=k[15];let x=h;return k[16]!==u||k[17]!==t||k[18]!==p?(i=(0,f.getPreviewValueWithFallback)({snapshot:t,original:u,fallback:p}),k[16]=u,k[17]=t,k[18]=p,k[19]=i):i=k[19],k[20]!==l||k[21]!==v||k[22]!==m||k[23]!==w||k[24]!==i||k[25]!==x?(j=(0,c.jsx)(f.SanityDefaultPreview,{...i,isPlaceholder:v,icon:l,layout:m,status:w,tooltip:x}),k[20]=l,k[21]=v,k[22]=m,k[23]=w,k[24]=i,k[25]=x,k[26]=j):j=k[26],j}let gZ=[];function g$(a){let b,e,h,i,j=(0,d.c)(16),{onClick:k,type:l,value:m}=a,n=m?._id;j[0]!==n?(b=(0,g.getPublishedId)(n),j[0]=n,j[1]=b):b=j[1];let o=(0,f.useDocumentPresence)(b),p=(0,f.useDocumentPreviewStore)(),{ReferenceChildLink:q}=dH();j[2]!==q||j[3]!==l?.name||j[4]!==m?._id?(e=function(a){return(0,c.jsx)(q,{documentId:m?._id,documentType:l?.name,parentRefPath:gZ,...a})},j[2]=q,j[3]=l?.name,j[4]=m?._id,j[5]=e):e=j[5];let r=e,s=l?.icon,t=o?.length>0?o:gZ;return j[6]!==p||j[7]!==s||j[8]!==t||j[9]!==l||j[10]!==m?(h=(0,c.jsx)(gY,{documentPreviewStore:p,icon:s,layout:"default",presence:t,schemaType:l,value:m}),j[6]=p,j[7]=s,j[8]=t,j[9]=l,j[10]=m,j[11]=h):h=j[11],j[12]!==k||j[13]!==r||j[14]!==h?(i=(0,c.jsx)(f.PreviewCard,{__unstable_focusRing:!0,as:r,"data-as":"a",onClick:k,radius:2,children:h}),j[12]=k,j[13]=r,j[14]=h,j[15]=i):i=j[15],i}let g_=(0,at.styled)(ap.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,g0=a=>{let b,e,h,i,j,k,l,m,n,o,p,q,r,s,t=(0,d.c)(44),{versionId:u,schemaType:v}=a,{t:w}=(0,f.useTranslation)(),x=(0,f.useDocumentPreviewStore)();t[0]!==u?(b=(0,f.getDocumentVariantType)(u),t[0]=u,t[1]=b):b=t[1];let y=b,{data:z}=(0,f.useActiveReleases)();if(t[2]!==x||t[3]!==y||t[4]!==v||t[5]!==u){let a=["version"===y?(0,g.getVersionFromId)(u):"published"===y?"published":"drafts"];e=(0,f.getPreviewStateObservable)(x,v,(0,g.getPublishedId)(u),a),t[2]=x,t[3]=y,t[4]=v,t[5]=u,t[6]=e}else e=t[6];let A=e;t[7]===Symbol.for("react.memo_cache_sentinel")?(h={snapshot:null,isLoading:!0,original:null},t[7]=h):h=t[7];let{snapshot:B,original:C,isLoading:D}=(0,ax.useObservable)(A,h);a:{let a;if("version"!==y){i=void 0;break a}if(t[8]!==z||t[9]!==u){let b;t[11]!==u?(b=a=>(0,f.getReleaseIdFromReleaseDocumentId)(a._id)===(0,g.getVersionFromId)(u),t[11]=u,t[12]=b):b=t[12],a=z.find(b),t[8]=z,t[9]=u,t[10]=a}else a=t[10];i=a}let E=i;t[13]!==y||t[14]!==E?.metadata?.title||t[15]!==w||t[16]!==u?(j=()=>"version"===y?E?.metadata?.title||(0,g.getVersionFromId)(u):w("published"===y?"release.chip.published":"release.chip.draft"),t[13]=y,t[14]=E?.metadata?.title,t[15]=w,t[16]=u,t[17]=j):j=t[17];let F=j;t[18]!==y||t[19]!==E?(k=E?(0,f.getReleaseTone)(E):"published"===y?"positive":"caution",t[18]=y,t[19]=E,t[20]=k):k=t[20];let G=k;t[21]!==C||t[22]!==v.name||t[23]!==B||t[24]!==u?(l=(0,f.getPreviewValueWithFallback)({snapshot:B,original:C,fallback:{_id:u,_type:v.name}}),t[21]=C,t[22]=v.name,t[23]=B,t[24]=u,t[25]=l):l=t[25];let H=v.icon;return t[26]===Symbol.for("react.memo_cache_sentinel")?(m={backgroundColor:"transparent"},t[26]=m):m=t[26],t[27]!==G?(n=(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.ReleaseAvatarIcon,{tone:G})}),t[27]=G,t[28]=n):n=t[28],t[29]!==F?(o=F(),t[29]=F,t[30]=o):o=t[30],t[31]!==o?(p=(0,c.jsx)(g_,{size:1,weight:"medium",textOverflow:"ellipsis",children:o}),t[31]=o,t[32]=p):p=t[32],t[33]!==n||t[34]!==p?(q=(0,c.jsxs)(ap.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[n,p]}),t[33]=n,t[34]=p,t[35]=q):q=t[35],t[36]!==q||t[37]!==G?(r=(0,c.jsx)(ap.Card,{border:!0,radius:"full",children:(0,c.jsx)(ap.Card,{radius:"full",tone:G,style:m,children:q})}),t[36]=q,t[37]=G,t[38]=r):r=t[38],t[39]!==D||t[40]!==v.icon||t[41]!==r||t[42]!==l?(s=(0,c.jsx)(f.SanityDefaultPreview,{...l,isPlaceholder:D,icon:H,layout:"default",status:r}),t[39]=D,t[40]=v.icon,t[41]=r,t[42]=l,t[43]=s):s=t[43],s},g1=a=>{let b,e,g,h=(0,d.c)(8),{documentType:i,documentVersions:j}=a,k=(0,f.useSchema)();h[0]!==i||h[1]!==k?(b=k.get(i),h[0]=i,h[1]=k,h[2]=b):b=h[2];let l=b;if(!l)throw Error(`Schema type ${i} not found`);return h[3]!==j||h[4]!==l?(e=j?.map(a=>(0,c.jsx)(g0,{versionId:a,schemaType:l},a)),h[3]=j,h[4]=l,h[5]=e):e=h[5],h[6]!==e?(g=(0,c.jsx)(ap.Card,{border:!0,padding:1,radius:2,children:(0,c.jsx)(ap.Stack,{children:e})}),h[6]=e,h[7]=g):g=h[7],g};function g2(a){let b,e,g,h,i,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z=(0,d.c)(66),{crossDatasetReferences:A,internalReferences:B,documentTitle:C,totalCount:D,action:E,datasetNames:F,hasUnknownDatasetNames:G,documentId:H,documentType:I,onReferenceLinkClick:J,documentVersions:K}=a,L=(0,f.useSchema)(),M=(0,aq.useToast)(),{t:N}=(0,f.useTranslation)(s);z[0]!==J||z[1]!==L||z[2]!==N?(b=a=>{let b=L.get(a._type);return b?(0,c.jsx)(g$,{type:b,value:a,onClick:J}):(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsx)(f.SanityDefaultPreview,{icon:j.UnknownIcon,title:N("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:N("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:a._id}),layout:"default"})})},z[0]=J,z[1]=L,z[2]=N,z[3]=b):b=z[3];let O=b;z[4]!==E||z[5]!==C||z[6]!==I||z[7]!==K||z[8]!==N?(e=()=>(0,c.jsxs)(ap.Stack,{space:4,children:[(0,c.jsx)(ap.Text,{as:"p",size:1,children:(0,c.jsx)(f.Translate,{t:N,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,c.jsx)("strong",{children:C})}})}),"delete"===E&&(0,c.jsx)(g1,{documentType:I,documentVersions:K})]}),z[4]=E,z[5]=C,z[6]=I,z[7]=K,z[8]=N,z[9]=e):e=z[9];let P=e;if(B?.totalCount===0&&A?.totalCount===0){let a;return z[10]!==P?(a=P(),z[10]=P,z[11]=a):a=z[11],a}z[12]!==G?(g=G?["unavailable"]:[],z[12]=G,z[13]=g):g=z[13],z[14]!==F||z[15]!==g?(h=[...F,...g],z[14]=F,z[15]=g,z[16]=h):h=z[16];let Q=h,R=Q.length,S=Q.join(", "),T=G&&Q.length?"unavailable":"";z[17]!==Q.length||z[18]!==N||z[19]!==S||z[20]!==T?(i=N("confirm-delete-dialog.cdr-summary.subtitle",{count:R,datasets:S,context:T}),z[17]=Q.length,z[18]=N,z[19]=S,z[20]=T,z[21]=i):i=z[21];let U=i;return z[22]!==P?(k=P(),z[22]=P,z[23]=k):k=z[23],z[24]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)(ap.Card,{borderTop:!0,padding:1}),z[24]=l):l=z[24],z[25]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(ap.Text,{"aria-hidden":"true",size:1,children:(0,c.jsx)(j.WarningOutlineIcon,{})}),z[25]=m):m=z[25],z[26]!==C?(n={DocumentTitle:()=>C},z[26]=C,z[27]=n):n=z[27],z[28]!==D?(o={count:D},z[28]=D,z[29]=o):o=z[29],z[30]!==N||z[31]!==n||z[32]!==o?(p=(0,c.jsxs)("div",{children:[l,(0,c.jsx)(ap.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,c.jsxs)(ap.Flex,{children:[m,(0,c.jsx)(ap.Box,{flex:1,marginLeft:3,children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:n,t:N,values:o})})})]})})]}),z[30]=N,z[31]=n,z[32]=o,z[33]=p):p=z[33],z[34]!==C?(q={DocumentTitle:()=>C},z[34]=C,z[35]=q):q=z[35],z[36]!==E||z[37]!==N||z[38]!==q?(r=(0,c.jsx)(ap.Box,{flex:"none",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:N,context:E,components:q})})}),z[36]=E,z[37]=N,z[38]=q,z[39]=r):r=z[39],z[40]!==B||z[41]!==O?(t=B.totalCount>0&&(0,c.jsxs)(ap.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[B?.references.map(a=>(0,c.jsx)(ap.Box,{as:"li",children:O(a)},a._id)),B.totalCount>B.references.length&&(0,c.jsx)(ap.Box,{as:"li",padding:3,children:(0,c.jsx)(gX,{...B})})]}),z[40]=B,z[41]=O,z[42]=t):t=z[42],z[43]!==A||z[44]!==U||z[45]!==H||z[46]!==B.totalCount||z[47]!==Q.length||z[48]!==N||z[49]!==M?(u=A.totalCount>0&&(0,c.jsxs)(gT,{"data-testid":"cross-dataset-references",style:{borderTop:B.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,c.jsx)(gU,{children:(0,c.jsx)(ap.Card,{as:"a",marginTop:2*(B.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,c.jsxs)(ap.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(j.DocumentsIcon,{})}),(0,c.jsxs)(ap.Stack,{space:2,children:[(0,c.jsx)(ap.Text,{textOverflow:"ellipsis",size:1,children:N("confirm-delete-dialog.cdr-summary.title",{count:Q.length,documentCount:N("confirm-delete-dialog.cdr-summary.document-count",{count:A.totalCount})})}),(0,c.jsx)(ap.Text,{title:U,textOverflow:"ellipsis",size:1,muted:!0,children:U})]}),(0,c.jsx)(gS,{children:(0,c.jsx)(ap.Text,{muted:!0,size:1,children:(0,c.jsx)(j.ChevronDownIcon,{})})})]})})}),(0,c.jsxs)(ap.Box,{overflow:"auto",paddingTop:2,children:[(0,c.jsxs)(gV,{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)(ap.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:N("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,c.jsx)("th",{children:(0,c.jsx)(ap.Text,{muted:!0,size:1,weight:"medium",children:N("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,c.jsx)("th",{children:(0,c.jsx)(ap.Text,{muted:!0,size:1,weight:"medium",children:N("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,c.jsx)("tbody",{children:A.references.filter(g3).map((a,b)=>{let{projectId:d,datasetName:e,documentId:f}=a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(ap.Text,{size:1,children:d})}),(0,c.jsx)("td",{children:(0,c.jsx)(ap.Text,{size:1,children:e||"unavailable"})}),(0,c.jsx)("td",{children:(0,c.jsxs)(gW,{align:"center",gap:2,justify:"flex-end",children:[(0,c.jsx)(ap.Text,{textOverflow:"ellipsis",size:1,children:f||"unavailable"}),f&&(0,c.jsx)(ao.Button,{mode:"bleed",icon:j.CopyIcon,tooltipProps:{content:N("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(f).catch(()=>{M.push({status:"error",title:N("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${H}-${b}`)})})]}),(0,c.jsx)(gX,{...A})]})]}),z[43]=A,z[44]=U,z[45]=H,z[46]=B.totalCount,z[47]=Q.length,z[48]=N,z[49]=M,z[50]=u):u=z[50],z[51]!==t||z[52]!==u?(v=(0,c.jsx)(ap.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,c.jsxs)(ap.Flex,{direction:"column",children:[t,u]})}),z[51]=t,z[52]=u,z[53]=v):v=z[53],z[54]!==C?(w={DocumentTitle:()=>C},z[54]=C,z[55]=w):w=z[55],z[56]!==E||z[57]!==N||z[58]!==w?(x=(0,c.jsx)(ap.Box,{flex:"none",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:N,context:E,components:w})})}),z[56]=E,z[57]=N,z[58]=w,z[59]=x):x=z[59],z[60]!==p||z[61]!==r||z[62]!==v||z[63]!==x||z[64]!==k?(y=(0,c.jsxs)(ap.Flex,{direction:"column",gap:4,children:[k,p,r,v,x]}),z[60]=p,z[61]=r,z[62]=v,z[63]=x,z[64]=k,z[65]=y):y=z[65],y}function g3(a){return"projectId"in a}let g4=()=>(b||(b=(0,aD.fromEvent)(document,"visibilitychange").pipe((0,aC.startWith)(null),(0,aC.map)(()=>"visible"===document.visibilityState),(0,aC.distinctUntilChanged)(),(0,aC.switchMap)(a=>a?(0,aD.timer)(0,5e3):aD.EMPTY),(0,aC.shareReplay)({refCount:!0,bufferSize:1}))),b),g5=(0,f.createHookFromObservableFactory)(([a,b])=>b.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:a},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),g6=(0,f.createHookFromObservableFactory)(([a,b])=>g4().pipe((0,aC.switchMap)(()=>(function(a,b){let{versionedClient:c}=b;return g4().pipe((0,aC.switchMap)(()=>(function(a,{versionedClient:b}){let c=(0,g.getDraftId)(a),d=(0,g.getPublishedId)(a),e={uri:b.getDataUrl("doc",`${c},${d}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return b.observable.request(e).pipe((0,aC.map)(({omitted:a})=>{let b=a.filter(a=>"existence"===a.reason);if(2!==b.length)return 0===b.length||b.some(a=>a.id===c)?d:c}))})(a,b)),(0,aC.switchMap)(a=>{if(!a)return(0,aD.of)({totalCount:0,references:[]});let b=c.config().dataset;return c.observable.request({url:`/data/references/${b}/documents/${a}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,aC.catchError)(a=>{if("object"==typeof a&&a&&"statusCode"in a&&"response"in a&&404===a.statusCode)return(0,aD.of)({totalCount:0,references:[]});throw a}))}))})(a,{versionedClient:b}))));function g7(a){return"string"!=typeof a.datasetName}function g8(a){return!!a&&""!==a}function g9(a){return a?.datasetName||""}function ha(a){return a.projectId}let hb=(0,at.styled)(ap.Box)`
  box-sizing: border-box;
`,hc=(0,at.styled)(ap.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function hd(a){let b,h,i,j,k,l,m,n,o,p,q,r,t=(0,d.c)(51),{id:u,type:v,action:w,onCancel:x,onConfirm:y}=a,z=void 0===w?"delete":w,{t:A}=(0,f.useTranslation)(s),B=`deletion-confirmation-${(0,e.useId)()}`,{internalReferences:C,crossDatasetReferences:D,isLoading:E,totalCount:F,projectIds:G,datasetNames:H,hasUnknownDatasetNames:I}=function(a){let b,c,e,h,i,j,k,l,m=(0,d.c)(24),n=(0,f.useClient)(f.DEFAULT_STUDIO_CLIENT_OPTIONS),o=(0,f.useDocumentStore)();m[0]!==a?(b=(0,g.getPublishedId)(a),m[0]=a,m[1]=b):b=m[1];let p=b;m[2]!==o||m[3]!==p?(c=[p,o],m[2]=o,m[3]=p,m[4]=c):c=m[4];let[q,r]=g5(c);m[5]!==p||m[6]!==n?(e=[p,n],m[5]=p,m[6]=n,m[7]=e):e=m[7];let[s,t]=g6(e);m[8]!==s?.references?(h=()=>Array.from(new Set(s?.references.map(ha).filter(Boolean))).sort(),m[8]=s?.references,m[9]=h):h=m[9],m[10]!==h?(i=h(),m[10]=h,m[11]=i):i=m[11];let u=i;m[12]!==s?.references?(j=Array.from(new Set(s?.references.map(g9).filter(g8))).sort(),m[12]=s?.references,m[13]=j):j=m[13];let v=j;m[14]!==s?.references?(k=()=>!!s?.references.some(g7),m[14]=s?.references,m[15]=k):k=m[15];let w=k(),x=(q?.totalCount||0)+(s?.totalCount||0),y=r||t;return m[16]!==s||m[17]!==v||m[18]!==w||m[19]!==q||m[20]!==u||m[21]!==x||m[22]!==y?(l={totalCount:x,projectIds:u,datasetNames:v,hasUnknownDatasetNames:w,internalReferences:q,crossDatasetReferences:s,isLoading:y},m[16]=s,m[17]=v,m[18]=w,m[19]=q,m[20]=u,m[21]=x,m[22]=y,m[23]=l):l=m[23],l}(u);t[0]!==u||t[1]!==v?(b={_id:u,_type:v},t[0]=u,t[1]=v,t[2]=b):b=t[2];let J=b;t[3]!==J?(h=(0,c.jsx)(gR,{document:J}),t[3]=J,t[4]=h):h=t[4];let K=h,L=!E;t[5]!==u?(i=(0,g.getPublishedId)(u),t[5]=u,t[6]=i):i=t[6],t[7]!==i?(j={documentId:i},t[7]=i,t[8]=j):j=t[8];let{data:M,loading:N}=(0,f.useDocumentVersions)(j);t[9]!==M||t[10]!==y?(k=()=>{y(M)},t[9]=M,t[10]=y,t[11]=k):k=t[11];let O=k;return t[12]!==z||t[13]!==A?(l=A("confirm-delete-dialog.header.text",{context:z}),t[12]=z,t[13]=A,t[14]=l):l=t[14],t[15]!==A?(m=A("confirm-delete-dialog.cancel-button.text"),t[15]=A,t[16]=m):m=t[16],t[17]!==x||t[18]!==m?(n={onClick:x,text:m},t[17]=x,t[18]=m,t[19]=n):n=t[19],t[20]!==z||t[21]!==O||t[22]!==L||t[23]!==A||t[24]!==F?(o=L?{text:A(F>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:z}),onClick:O}:void 0,t[20]=z,t[21]=O,t[22]=L,t[23]=A,t[24]=F,t[25]=o):o=t[25],t[26]!==n||t[27]!==o?(p={cancelButton:n,confirmButton:o},t[26]=n,t[27]=o,t[28]=p):p=t[28],t[29]!==z||t[30]!==D||t[31]!==H||t[32]!==K||t[33]!==M||t[34]!==I||t[35]!==u||t[36]!==C||t[37]!==E||t[38]!==x||t[39]!==G||t[40]!==A||t[41]!==F||t[42]!==v||t[43]!==N?(q=(0,c.jsx)(hb,{children:D&&C&&!E&&!N?(0,c.jsx)(g2,{crossDatasetReferences:D,internalReferences:C,documentTitle:K,isLoading:E,totalCount:F,action:z,projectIds:G,datasetNames:H,hasUnknownDatasetNames:I,onReferenceLinkClick:x,documentId:u,documentType:v,documentVersions:M}):(0,c.jsx)(hc,{"data-testid":"loading-container",children:(0,c.jsx)(f.LoadingBlock,{showText:!0,title:A("confirm-delete-dialog.loading.text")})})}),t[29]=z,t[30]=D,t[31]=H,t[32]=K,t[33]=M,t[34]=I,t[35]=u,t[36]=C,t[37]=E,t[38]=x,t[39]=G,t[40]=A,t[41]=F,t[42]=v,t[43]=N,t[44]=q):q=t[44],t[45]!==B||t[46]!==x||t[47]!==p||t[48]!==q||t[49]!==l?(r=(0,c.jsx)(ao.Dialog,{width:1,id:B,header:l,footer:p,onClose:x,onClickOutside:x,children:q}),t[45]=B,t[46]=x,t[47]=p,t[48]=q,t[49]=l,t[50]=r):r=t[50],r}function he(a){let b,g,h=(0,d.c)(6),{t:i}=(0,f.useTranslation)(s),j=(0,e.useId)(),[k,l]=(0,e.useState)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>l(null),h[0]=b):b=h[0];let m=b;return h[1]!==k||h[2]!==j||h[3]!==a||h[4]!==i?(g=k?(0,c.jsx)(ao.Dialog,{id:`dialog-error-${j}`,"data-testid":"confirm-delete-error-dialog",header:i("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:i("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:a.onCancel,children:(0,c.jsx)(ap.Box,{padding:4,children:(0,c.jsx)(ap.Text,{size:1,children:i("confirm-delete-dialog.error.message.text")})})}):(0,c.jsx)(ao.ErrorBoundary,{onCatch:l,children:(0,c.jsx)(hd,{...a})}),h[1]=k,h[2]=j,h[3]=a,h[4]=i,h[5]=g):g=h[5],g}let hf=(0,e.forwardRef)(function(a,b){let f,g,h,i,j=(0,d.c)(10);j[0]!==a?({intent:f,...g}=a,j[0]=a,j[1]=f,j[2]=g):(f=j[1],g=j[2]),j[3]!==f?(h=(0,e.forwardRef)(function(a,b){return(0,c.jsx)(ay.IntentLink,{...a,intent:f.type,params:f.params,ref:b,searchParams:f.searchParams})}),j[3]=f,j[4]=h):h=j[4];let k=h;return j[5]!==k||j[6]!==a.disabled||j[7]!==b||j[8]!==g?(i=a.disabled?(0,c.jsx)(ao.Button,{...g,as:"a",role:"link","aria-disabled":"true"}):(0,c.jsx)(ao.Button,{...g,as:k,"data-as":"a",ref:b}),j[5]=k,j[6]=a.disabled,j[7]=b,j[8]=g,j[9]=i):i=j[9],i});function hg(a){let b,e,g,h=(0,d.c)(12),{reveal:i,context:j,loading:k,children:l}=a,m=(0,f.useCurrentUser)(),{t:n}=(0,f.useTranslation)(s);if(!i){let a;return h[0]!==l?(a=(0,c.jsx)(c.Fragment,{children:l}),h[0]=l,h[1]=a):a=h[1],a}return h[2]!==j||h[3]!==m||h[4]!==k||h[5]!==n?(b=k?n("insufficient-permissions-message-tooltip.loading-text"):(0,c.jsx)(f.InsufficientPermissionsMessage,{context:j,currentUser:m}),h[2]=j,h[3]=m,h[4]=k,h[5]=n,h[6]=b):b=h[6],h[7]!==l?(e=(0,c.jsx)("div",{children:l}),h[7]=l,h[8]=e):e=h[8],h[9]!==b||h[10]!==e?(g=(0,c.jsx)(ao.Tooltip,{content:b,portal:!0,children:e}),h[9]=b,h[10]=e,h[11]=g):g=h[11],g}let hh={constrainSize:!0,placement:"bottom",portal:!0},hi=(a,b,c)=>{let d=a.find(a=>a.id===b.templateId)?.schemaType;if(!d)return null;let e={template:b.templateId,type:d,version:c,id:b.initialDocumentId};return{type:"create",params:b.parameters?[e,b.parameters]:e,searchParams:c?[["perspective",c]]:void 0}};function hj(a){let b,g,h,i,k,l,m,n,o=(0,d.c)(60),{templateItems:p}=a,q=(0,f.useTemplates)(),{selectedReleaseId:r}=(0,f.usePerspective)(),{t}=(0,f.useTranslation)(s);o[0]!==p||o[1]!==q?(b=[...p,...q],o[0]=p,o[1]=q,o[2]=b):b=o[2];let u=(0,f.useGetI18nText)(b);o[3]!==p?(g={templateItems:p},o[3]=p,o[4]=g):g=o[4];let[v,w]=(0,f.useTemplatePermissions)(g),x=!w&&v?.length!==0&&v?.every(hl);a:{let a;if(!v){let a;o[5]===Symbol.for("react.memo_cache_sentinel")?(a={},o[5]=a):a=o[5],h=a;break a}o[6]!==v?(a=v.reduce(hk,{}),o[6]=v,o[7]=a):a=o[7],h=a}let y=h;if(0===p.length)return null;if(x){let a,b,d;return o[8]!==t?(a=t("pane-header.disabled-created-button.aria-label"),o[8]=t,o[9]=a):a=o[9],o[10]!==a?(b=(0,c.jsx)(ao.Button,{"aria-label":a,icon:j.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),o[10]=a,o[11]=b):b=o[11],o[12]!==w||o[13]!==b?(d=(0,c.jsx)(hg,{context:"create-document-type",reveal:!0,loading:w,children:b}),o[12]=w,o[13]=b,o[14]=d):d=o[14],d}if(1===p.length){let a,b,d,e,f,g,h=p[0],i=!y[h.id]?.granted;o[15]!==h||o[16]!==r||o[17]!==q?(a=hi(q,h,r),o[15]=h,o[16]=r,o[17]=q,o[18]=a):a=o[18];let k=a;if(!k)return null;o[19]!==h||o[20]!==u?(b=u(h),o[19]=h,o[20]=u,o[21]=b):b=o[21];let l=b.title,m=h.icon||j.AddIcon;return o[22]!==t?(d=t("pane-header.create-new-button.tooltip"),o[22]=t,o[23]=d):d=o[23],o[24]!==d?(e={content:d},o[24]=d,o[25]=e):e=o[25],o[26]!==i||o[27]!==k||o[28]!==b.title||o[29]!==m||o[30]!==e?(f=(0,c.jsx)(hf,{"aria-label":l,icon:m,intent:k,mode:"bleed",disabled:i,"data-testid":"action-intent-button",tooltipProps:e}),o[26]=i,o[27]=k,o[28]=b.title,o[29]=m,o[30]=e,o[31]=f):f=o[31],o[32]!==i||o[33]!==w||o[34]!==f?(g=(0,c.jsx)(hg,{reveal:i,loading:w,context:"create-document-type",children:f}),o[32]=i,o[33]=w,o[34]=f,o[35]=g):g=o[35],g}if(o[36]!==t?(i=t("pane-header.create-new-button.tooltip"),o[36]=t,o[37]=i):i=o[37],o[38]!==i?(k=(0,c.jsx)(ao.Button,{icon:j.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:i}}),o[38]=i,o[39]=k):k=o[39],o[40]!==u||o[41]!==w||o[42]!==y||o[43]!==r||o[44]!==t||o[45]!==p||o[46]!==q){let a;o[48]!==u||o[49]!==w||o[50]!==y||o[51]!==r||o[52]!==t||o[53]!==q?(a=(a,b)=>{let d=!y[a.id]?.granted,f=hi(q,a,r),g=q.find(b=>b.id===a.templateId);if(!g||!f)return null;let h=(0,e.forwardRef)((a,b)=>d?(0,c.jsx)("button",{type:"button",disabled:!0,...a,ref:b}):(0,c.jsx)(ay.IntentLink,{...a,intent:f.type,params:f.params,searchParams:f.searchParams,ref:b}));h.displayName="Link";let{title:i}=u({...a,title:a.title||u(g).title});return(0,c.jsx)(hg,{context:"create-document-type",reveal:d,loading:w,children:(0,c.jsx)(ao.MenuItem,{as:h,"data-as":d?"button":"a",text:i,"aria-label":d?t("pane-header.disabled-created-button.aria-label"):i,disabled:d,"data-testid":`action-intent-button-${b}`})},a.id)},o[48]=u,o[49]=w,o[50]=y,o[51]=r,o[52]=t,o[53]=q,o[54]=a):a=o[54],l=p.map(a),o[40]=u,o[41]=w,o[42]=y,o[43]=r,o[44]=t,o[45]=p,o[46]=q,o[47]=l}else l=o[47];return o[55]!==l?(m=(0,c.jsx)(ap.Menu,{children:l}),o[55]=l,o[56]=m):m=o[56],o[57]!==k||o[58]!==m?(n=(0,c.jsx)(ao.MenuButton,{button:k,id:"create-menu",menu:m,popover:hh}),o[57]=k,o[58]=m,o[59]=n):n=o[59],n}function hk(a,b){return a[b.id]=b,a}function hl(a){return!a.granted}function hm(a){return null!=a}let hn=(0,e.memo)(function(a){let b,e,g,h,i,j,k,l,m,n,o=(0,d.c)(28),{initialValueTemplateItems:p,menuItems:q,menuItemGroups:r,actionHandlers:s}=a,t=void 0===p?f.EMPTY_ARRAY:p,u=void 0===q?f.EMPTY_ARRAY:q,v=void 0===r?f.EMPTY_ARRAY:r,w=void 0===s?f.EMPTY_OBJECT:s,x=(0,f.useTemplates)();o[0]!==w?(b=a=>{if("string"==typeof a.action&&!(a.action in w))return console.warn("No handler for action:",a.action),!1;let b="function"==typeof a.action?a.action:"string"==typeof a.action?w[a.action]:null;return!!b&&(b(a.params),!0)},o[0]=w,o[1]=b):b=o[1];let y=b;o[2]!==y||o[3]!==v||o[4]!==u?(e=en({actionHandler:y,menuItemGroups:v,menuItems:u.filter(ho)}),o[2]=y,o[3]=v,o[4]=u,o[5]=e):e=o[5];let z=e;o[6]!==z?(g=z.filter(el),o[6]=z,o[7]=g):g=o[7];let A=g;o[8]!==z?(h=z.filter(em),o[8]=z,o[9]=h):h=o[9];let B=h;if(o[10]!==u||o[11]!==x){let a;o[13]!==x?(a=(a,b)=>{if(a.intent?.type!=="create")return null;let{params:c}=a.intent;if(!c)return null;let d=Array.isArray(c)?c[0]:c,e=Array.isArray(c)?c[1]:void 0,f=d.template||d.type;if(!f)return null;let g=x.find(a=>a.id===f);return g?{item:a,template:g,templateParams:e,menuItemIndex:b,initialDocumentId:d.id}:null},o[13]=x,o[14]=a):a=o[14],i=u.map(a).filter(hm).map(hp),o[10]=u,o[11]=x,o[12]=i}else i=o[12];let C=i;o[15]!==C||o[16]!==t?(j=(0,aF.default)([...C,...t],hq),o[15]=C,o[16]=t,o[17]=j):j=o[17];let D=j;return o[18]!==D?(k=(0,c.jsx)(hj,{templateItems:D}),o[18]=D,o[19]=k):k=o[19],o[20]!==A?(l=A.map(hr),o[20]=A,o[21]=l):l=o[21],o[22]!==B?(m=B.length>0&&(0,c.jsx)(cs,{nodes:B}),o[22]=B,o[23]=m):m=o[23],o[24]!==k||o[25]!==l||o[26]!==m?(n=(0,c.jsxs)(ap.Flex,{gap:1,children:[k,l,m]}),o[24]=k,o[25]=l,o[26]=m,o[27]=n):n=o[27],n});function ho(a){return a.intent?.type!=="create"}function hp(a){let{initialDocumentId:b,item:c,template:d,menuItemIndex:e,templateParams:f}=a;return{id:`menuItem${e}`,initialDocumentId:b,templateId:d.id,type:"initialValueTemplateItem",title:c.title||d.title,i18n:c.i18n||d.i18n,icon:c.icon,description:d.description,parameters:f,schemaType:d.schemaType}}function hq(a){var b=[a.initialDocumentId,a.templateId,a.parameters];let c=a=>"object"==typeof a&&a?Array.isArray(a)?a.map(c):Object.entries(a).sort(([a],[b])=>a.localeCompare(b,"en")):a;return JSON.stringify(c(JSON.parse(JSON.stringify(b))))}function hr(a){return(0,c.jsx)(cD,{node:a},a.key)}function hs(a){let b,e,g,h,i,j,k,l=(0,d.c)(16),{t:m}=(0,f.useTranslation)(s),{layout:n,value:o}=a;return l[0]===Symbol.for("react.memo_cache_sentinel")?(b={Code:"code"},l[0]=b):b=l[0],l[1]!==o._type?(e={documentType:o._type},l[1]=o._type,l[2]=e):e=l[2],l[3]!==m||l[4]!==e?(g=(0,c.jsx)("em",{children:(0,c.jsx)(f.Translate,{t:m,i18nKey:"pane-item.missing-schema-type.title",components:b,values:e})}),l[3]=m,l[4]=e,l[5]=g):g=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(h={Code:"code"},l[6]=h):h=l[6],l[7]!==o._id?(i={documentId:o._id},l[7]=o._id,l[8]=i):i=l[8],l[9]!==m||l[10]!==i?(j=(0,c.jsx)(f.Translate,{t:m,i18nKey:"pane-item.missing-schema-type.subtitle",components:h,values:i}),l[9]=m,l[10]=i,l[11]=j):j=l[11],l[12]!==n||l[13]!==g||l[14]!==j?(k=(0,c.jsx)(f.SanityDefaultPreview,{title:g,subtitle:j,media:ht,layout:n}),l[12]=n,l[13]=g,l[14]=j,l[15]=k):k=l[15],k}function ht(){return(0,c.jsx)(j.WarningOutlineIcon,{})}function hu(a,b,c){return!1!==a&&(a||b&&b.icon||c||!1)}function hv(a){let b,g,h,i,k,l,m,n,o=(0,d.c)(42),{icon:p,id:q,layout:r,pressed:s,schemaType:t,selected:u,title:v,value:w,margin:x,marginBottom:y,marginTop:z}=a,A=void 0===r?"default":r,B=(0,f.useSchema)(),C=(0,f.useDocumentPreviewStore)(),{ChildLink:D}=dH(),E=(0,f.useDocumentPresence)(q),F=!!(t&&t.name&&B.get(t.name)),[G,H]=(0,e.useState)(!1);a:{let a,d,e,g;if(w&&(0,ar.isSanityDocument)(w)){let a,d;if(!t||!F){let a;o[0]!==w?(a=(0,c.jsx)(hs,{value:w}),o[0]=w,o[1]=a):a=o[1],b=a;break a}o[2]!==p||o[3]!==t?(a=hu(p,t,j.DocumentIcon),o[2]=p,o[3]=t,o[4]=a):a=o[4],o[5]!==E||o[6]!==C||o[7]!==A||o[8]!==t||o[9]!==a||o[10]!==w?(d=(0,c.jsx)(gY,{documentPreviewStore:C,icon:a,layout:A,schemaType:t,value:w,presence:E}),o[5]=E,o[6]=C,o[7]=A,o[8]=t,o[9]=a,o[10]=w,o[11]=d):d=o[11],b=d;break a}o[12]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.5},o[12]=a):a=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)(ap.Box,{style:a,children:(0,c.jsx)(ap.Text,{muted:!0,size:1,children:(0,c.jsx)(j.ChevronRightIcon,{})})}),o[13]=d):d=o[13],o[14]!==p||o[15]!==t?(e=hu(p,t,j.FolderIcon),o[14]=p,o[15]=t,o[16]=e):e=o[16],o[17]!==e||o[18]!==v?(g=(0,c.jsx)(f.SanityDefaultPreview,{status:d,icon:e,layout:"compact",title:v}),o[17]=e,o[18]=v,o[19]=g):g=o[19],b=g}let I=b;o[20]===Symbol.for("react.memo_cache_sentinel")?(g=a=>{a.metaKey?H(!1):H(!0)},o[20]=g):g=o[20];let J=g;o[21]===Symbol.for("react.memo_cache_sentinel")?(h=()=>H(!1),o[21]=h):h=o[21],o[22]!==u?(i=[u],o[22]=u,o[23]=i):i=o[23],(0,e.useEffect)(h,i);let[K,L]=(0,e.useState)(!1),M=(0,e.useRef)(null);o[24]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{M.current=setTimeout(()=>(0,e.startTransition)(()=>L(!0)),400)},o[24]=k):k=o[24];let N=k;o[25]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{M.current&&clearTimeout(M.current),(0,e.startTransition)(()=>L(!1))},o[25]=l):l=o[25];let O=l,P=`pane-item-${v}`,Q=u||G;return o[26]!==q||o[27]!==K||o[28]!==t||o[29]!==w?(m=K&&t?.name&&w&&(0,ar.isSanityDocument)(w)&&(0,c.jsx)(hw,{documentId:q,documentType:t.name}),o[26]=q,o[27]=K,o[28]=t,o[29]=w,o[30]=m):m=o[30],o[31]!==q||o[32]!==x||o[33]!==y||o[34]!==z||o[35]!==s||o[36]!==I||o[37]!==m||o[38]!==P||o[39]!==D||o[40]!==Q?(n=(0,c.jsxs)(f.PreviewCard,{"data-testid":P,__unstable_focusRing:!0,as:D,childId:q,"data-as":"a",margin:x,marginBottom:y,marginTop:z,onClick:J,onMouseEnter:N,onMouseLeave:O,pressed:s,radius:2,selected:Q,sizing:"border",tabIndex:-1,tone:"inherit",children:[I,m]}),o[31]=q,o[32]=x,o[33]=y,o[34]=z,o[35]=s,o[36]=I,o[37]=m,o[38]=P,o[39]=D,o[40]=Q,o[41]=n):n=o[41],n}function hw(a){let b,c=(0,d.c)(2),{documentId:e,documentType:h}=a;return c[0]!==e?(b=(0,g.getPublishedId)(e),c[0]=e,c[1]=b):b=c[1],(0,f.useEditState)(b,h),null}hw.displayName="PreloadDocumentPane";let hx=(0,e.memo)(a=>{let b,c=(0,d.c)(4),{children:f,group:g}=a,i=(0,e.useContext)(h.DocumentActionsStateContext);if(null===i)throw Error("DocumentActionsStateContext is not set. This should not happen.");return c[0]!==f||c[1]!==g||c[2]!==i?(b=f({states:g?i.filter(a=>(a.group||["default"]).includes(g)):i}),c[0]=f,c[1]=g,c[2]=i,c[3]=b):b=c[3],b});hx.displayName="Memo(RenderActionCollectionState)";let hy=(0,e.memo)(a=>{let b,e=(0,d.c)(4),{badges:g,children:h,badgeProps:i}=a;return e[0]!==i||e[1]!==g||e[2]!==h?(b=(0,c.jsx)(f.GetHookCollectionState,{hooks:g,args:i,children:h}),e[0]=i,e[1]=g,e[2]=h,e[3]=b):b=e[3],b});hy.displayName="Memo(RenderBadgeCollectionState)";let hz={by:[{field:"_updatedAt",direction:"desc"}]},hA={},hB=(0,at.styled)(ap.Box)`
  position: relative;
  opacity: ${a=>a.$opacity||1};
  transition: opacity 0.4s;
`,hC=(0,at.styled)(ap.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,hD=[...Array(30).keys()];function hE(a){let b,e,g=(0,d.c)(4),{layout:h}=a;return g[0]!==h?(b=hD.map(a=>(0,c.jsx)(f.SanityDefaultPreview,{isPlaceholder:!0,layout:h},a)),g[0]=h,g[1]=b):b=g[1],g[2]!==b?(e=(0,c.jsx)(ap.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:b}),g[2]=b,g[3]=e):e=g[3],e}function hF(a){let b,h,i,j,k,l,m,n=(0,d.c)(66),{childItemId:o,error:p,isRetrying:q,autoRetry:r,filterIsSimpleTypeConstraint:t,hasMaxItems:u,hasSearchQuery:v,isActive:w,isLazyLoading:x,muted:y,isLoading:z,isConnected:A,retryCount:B,canRetry:C,items:D,layout:E,loadingVariant:F,onEndReached:G,onRetry:H,paneTitle:I,searchInputElement:J,showIcons:K}=a,L=(0,f.useSchema)(),{collapsed:M}=cc(),{collapsed:N,index:O}=ci(),[P,Q]=(0,e.useState)(!N),{t:R}=(0,f.useTranslation)(s);n[0]!==G||n[1]!==P?(b=()=>{P&&G()},n[0]=G,n[1]=P,n[2]=b):b=n[2];let S=b;n[3]!==N?(h=()=>{if(N)return;let a=setTimeout(()=>{Q(!0)},0);return()=>{clearTimeout(a)}},n[3]=N,n[4]=h):h=n[4],n[5]!==N||n[6]!==D?(i=[N,D],n[5]=N,n[6]=D,n[7]=i):i=n[7],(0,e.useEffect)(h,i),n[8]!==o||n[9]!==u||n[10]!==w||n[11]!==x||n[12]!==D.length||n[13]!==E||n[14]!==L||n[15]!==K||n[16]!==R?(j=(a,b)=>{let{activeIndex:d}=b,e=(0,g.getPublishedId)(a._id),h=o===e,i=!w&&h,j=w&&h,k=d===D.length-1,l=k&&x,m=k&&u;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(hv,{icon:!1!==K&&void 0,id:e,layout:E,marginBottom:1,pressed:i,schemaType:L.get(a._type),selected:j,value:a}),l&&(0,c.jsx)(f.LoadingBlock,{}),m&&(0,c.jsx)(ap.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,c.jsx)(ap.Text,{align:"center",muted:!0,size:1,children:R("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},n[8]=o,n[9]=u,n[10]=w,n[11]=x,n[12]=D.length,n[13]=E,n[14]=L,n[15]=K,n[16]=R,n[17]=j):j=n[17];let T=j;a:{let a,b;if(v){let a,b;n[18]!==R?(a=R("panes.document-list-pane.no-documents.text"),n[18]=R,n[19]=a):a=n[19],n[20]!==a?(b=(0,c.jsx)(ap.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(ap.Container,{width:1,children:(0,c.jsx)(ap.Box,{paddingX:4,paddingY:5,children:(0,c.jsx)(ap.Text,{align:"center",muted:!0,children:a})})})}),n[20]=a,n[21]=b):b=n[21],k=b;break a}n[22]!==t||n[23]!==R?(a=R(t?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),n[22]=t,n[23]=R,n[24]=a):a=n[24],n[25]!==a?(b=(0,c.jsx)(ap.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(ap.Container,{width:1,children:(0,c.jsx)(ap.Box,{paddingX:4,paddingY:5,children:(0,c.jsx)(ap.Text,{align:"center",muted:!0,children:a})})})}),n[25]=a,n[26]=b):b=n[26],k=b}let U=k;b:{let a,b;if(!P){l=null;break b}let d=window.navigator.onLine;if(p){let a,b,e,g,h,i,j;n[27]!==R?(a=R("panes.document-list-pane.error.title"),n[27]=R,n[28]=a):a=n[28],n[29]!==a?(b=(0,c.jsx)(ap.Heading,{as:"h3",children:a}),n[29]=a,n[30]=b):b=n[30],n[31]!==p||n[32]!==R?(e=f.isDev?(0,c.jsx)(f.Translate,{t:R,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:p.message},components:{Code:hG}}):R(d?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),n[31]=p,n[32]=R,n[33]=e):e=n[33],n[34]!==e?(g=(0,c.jsx)(ap.Text,{as:"p",children:e}),n[34]=e,n[35]=g):g=n[35];let k=d&&C?H:void 0;n[36]!==p||n[37]!==q||n[38]!==k?(h=(0,c.jsx)(f.ErrorActions,{error:p,eventId:null,onRetry:k,isRetrying:q}),n[36]=p,n[37]=q,n[38]=k,n[39]=h):h=n[39],n[40]!==r||n[41]!==C||n[42]!==q||n[43]!==B||n[44]!==R?(i=C?(0,c.jsx)(ap.Text,{as:"p",muted:!0,size:1,children:q?R("panes.document-list-pane.error.retrying",{count:B}):r?R("panes.document-list-pane.error.will-retry-automatically",{count:B}):R("panes.document-list-pane.error.max-retries-attempted",{count:B})}):null,n[40]=r,n[41]=C,n[42]=q,n[43]=B,n[44]=R,n[45]=i):i=n[45],n[46]!==h||n[47]!==i||n[48]!==b||n[49]!==g?(j=(0,c.jsx)(ap.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(ap.Container,{width:1,children:(0,c.jsxs)(ap.Stack,{paddingX:4,paddingY:5,space:4,children:[b,g,h,i]})})}),n[46]=h,n[47]=i,n[48]=b,n[49]=g,n[50]=j):j=n[50],l=j;break b}if(A&&!z&&0===D.length){l=U;break b}if("initial"===F&&z){let a;n[51]!==E?(a=(0,c.jsx)(cM,{ms:300,children:(0,c.jsx)(hE,{layout:E})}),n[51]=E,n[52]=a):a=n[52],l=a;break b}if("spinner"===F&&z){l=null;break b}let e=`${O}-${N}`,g=y?.8:1;n[53]!==S||n[54]!==D||n[55]!==e||n[56]!==I||n[57]!==T||n[58]!==J?(a=(0,c.jsx)(hC,{children:(0,c.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:I,canReceiveFocus:!0,inputElement:J,itemHeight:51,items:D,onEndReached:S,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:T,wrapAround:!1},e)}),n[53]=S,n[54]=D,n[55]=e,n[56]=I,n[57]=T,n[58]=J,n[59]=a):a=n[59],n[60]!==g||n[61]!==a?(b=(0,c.jsx)(hB,{overflow:"hidden",height:"fill",$opacity:g,children:a}),n[60]=g,n[61]=a,n[62]=b):b=n[62],l=b}let V=l,W=M||"initial"===F?"hidden":"auto";return n[63]!==V||n[64]!==W?(m=(0,c.jsx)(cj,{"data-testid":"document-list-pane",overflow:W,children:V}),n[63]=V,n[64]=W,n[65]=m):m=n[65],m}function hG(a){let{children:b}=a;return(0,c.jsx)("code",{children:b})}function hH(a,b={}){try{let c=function a(b){switch(b.type){case"OpCall":{let{left:a,right:c}=b;switch(b.op){case"==":return"AccessAttribute"!==a.type||"_type"!==a.name||a.base?"AccessAttribute"!==c.type||"_type"!==c.name||c.base||"Value"!==a.type||"string"!=typeof a.value?null:new Set([a.value]):"Value"!==c.type||"string"!=typeof c.value?null:new Set([c.value]);case"in":{if("AccessAttribute"!==a.type||"_type"!==a.name||a.base||"Array"!==c.type)return null;let b=new Set;for(let a of c.elements){if(a.isSplat||"Value"!==a.value.type||"string"!=typeof a.value.value)return null;b.add(a.value.value)}return b.size?b:null}default:return null}}case"Group":return a(b.base);case"Or":{let c=a(b.left);if(!c)return null;let d=a(b.right);return d?new Set([...c,...d]):null}case"And":{let c=a(b.left),d=a(b.right);return c||d?new Set([...c||[],...d||[]]):null}default:return null}}((0,a1.parse)(a,{params:b}));return c?Array.from(c).sort():null}catch{return null}}let hI=(0,f.createSWR)({maxSize:100});function hJ(a){let{client:b,schema:c,sort:d,perspective:e,limit:g,params:h,filter:i,searchQuery:j,staticTypeNames:k,maxFieldDepth:l,searchStrategy:m}=a,n=d.by,o=d?.extendedProjection,p=(0,aD.defer)(()=>b.listen(`*[${i}]`,h,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,aD.mergeMap)((a,b)=>{let c=0===b;return c&&"reconnect"===a.type?(0,aD.throwError)(()=>Error("Failed to establish EventSource connection")):c&&"welcome"!==a.type?(0,aD.throwError)(()=>Error(`Received unexpected type of first event "${a.type}"`)):(0,aD.of)(a)}),(0,aD.share)()),[q,r]=(0,aD.partition)(p,a=>"welcome"===a.type),s=JSON.stringify({fiilter:i,limit:g,params:h,searchQuery:j,perspective:e,sort:d,staticTypeNames:k});return(0,aD.merge)(q,r.pipe((0,aD.throttleTime)(1e3,aD.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,a4.exhaustMapWithTrailing)(a=>(k?(0,aD.of)(k):b.observable.fetch(`array::unique(*[${i}][]._type)`,h)).pipe((0,aD.mergeMap)(p=>{let q=(0,f.getSearchableTypes)(c,k||[]).filter(a=>!!p.includes(a.name)&&(v(a,d.by,!0),!0)),r=(0,f.createSearch)(q,b,{filter:i,params:h,strategy:m,maxDepth:l}),s=()=>r({query:j||"",types:q},{__unstable_extendedProjection:o,comments:[`findability-source: ${j?"list-query":"list"}`],limit:g,skipSortByScore:!0,sort:n,perspective:e}).pipe((0,aD.map)(a=>a.hits.map(({hit:a})=>a)),(0,aD.map)(a=>({type:"result",documents:a})));return"mutation"===a.type&&"query"!==a.visibility?(0,aD.timer)(1200).pipe((0,aD.mergeMap)(s)):"reconnect"===a.type?(0,aD.of)(a):s()}))),(0,aC.scan)((a,b)=>({connected:"reconnect"!==b.type,documents:"result"===b.type?b.documents:a?.documents||[]}),null),(0,aD.filter)(a=>null!==a),hI(s),(0,aD.map)(({fromCache:a,value:b})=>({fromCache:a,...b})))}let hK={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function hL(a,b){if("error"===b.type)return{...a,error:b.error,retryCount:b.retryCount,isRetrying:b.retrying,autoRetry:b.autoRetry,canRetry:b.canRetry};if("result"===b.type){var c;return{...a,error:null,isRetrying:!1,fromCache:b.result.fromCache,connected:b.result.connected,isLoading:!1,items:(c=b.result.documents,(0,f.collate)(c).map(a=>{let b=a.draft||a.published||a.versions[0],c=!!a.draft;return{...b,hasPublished:!!a.published,hasDraft:c}})),isLoadingFullList:!1}}if("loadFullList"===b.type)return{...a,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${b.type}`)}function hM(a){return{type:"result",result:a}}function hN(a){return{type:"result",result:a}}function hO(a){let[,b]=a;return b?.documents.length===100}function hP(){return(0,a3.observableCallback)()}function hQ(){return(0,a3.observableCallback)()}let hR="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",hS=at.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hT=at.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,hU=(0,at.styled)(j.SpinnerIcon)`
  animation: ${hS} 500ms linear infinite;
`,hV=(0,at.styled)(j.SpinnerIcon)`
  animation: ${hS} 1500ms linear infinite;
  opacity: 0.4;
`,hW=(0,at.styled)(j.SpinnerIcon)`
  animation:
    ${hS} 1500ms linear infinite,
    ${hT} 1000ms linear;
  opacity: 0.4;
`,hX=(0,e.memo)(function(a){var b;let g,h,i,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D=(0,d.c)(69),{childItemId:E,isActive:F,pane:G,paneKey:H,sortOrder:I,layout:J}=a,K=(0,f.useSchema)(),L=(0,f.useActiveReleases)(),{perspectiveStack:M}=(0,f.usePerspective)(),{displayOptions:N,options:O}=G,{apiVersion:P,filter:Q}=O,R=is(O.params||hA);a:{let a;D[0]!==Q||D[1]!==R?(a=hH(Q,R),D[0]=Q,D[1]=R,D[2]=a):a=D[2];let b=a;if(b?.length===1){g=b[0];break a}g=null}let S=g,T=N?.showIcons!==!1,{t:U}=(0,f.useTranslation)(s),{title:V}=(0,f.useI18nText)(G),[W,X]=(0,e.useState)(""),[Y,Z]=(0,e.useState)(""),[$,_]=(0,e.useState)(null);D[3]!==K||D[4]!==I||D[5]!==S?(h=S&&I?(b=K.get(S),(C=I.by.map(a=>{if(a.mapWith)return a;let c=function(a,b){let c=aE.fromString(b),d=a;for(let a of c){if(!d)return;if("string"==typeof a){d=function(a,b){if(!("fields"in a))return;let c=a.fields.find(a=>a.name===b);return c?c.type:void 0}(d,a);continue}if(!((0,ar.isKeySegment)(a)||(0,ar.isIndexSegment)(a))||"array"!==d.jsonType)return;let[b,c]=d.of||[];if(c||!b)return;if(!(0,ar.isReferenceSchemaType)(b)){d=b;continue}let[e,f]=b.to||[];if(f||!e)return;d=e}return d}(b,a.field);return c?!function(a,b){let c=a.type;for(;c;){if(c.name===b||!c.type&&c.jsonType===b)return!0;c=c.type}return!1}(c,"datetime")?"string"===c.jsonType?{...a,mapWith:"lower"}:a:{...a,mapWith:"dateTime"}:a})).every((a,b)=>a===I.by[b])?I:{...I,by:C}):I,D[3]=K,D[4]=I,D[5]=S,D[6]=h):h=D[6];let aa=(0,f.useUnique)(h),ab=P||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;D[7]!==ab?(i={...f.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:ab},D[7]=ab,D[8]=i):i=D[8];let ac=(0,f.useClient)(i);D[9]!==W?(k=W?.trim(),D[9]=W,D[10]=k):k=D[10],D[11]!==ac||D[12]!==Q||D[13]!==R||D[14]!==M||D[15]!==aa||D[16]!==k?(l={client:ac,filter:Q,perspective:M,params:R,searchQuery:k,sortOrder:aa},D[11]=ac,D[12]=Q,D[13]=R,D[14]=M,D[15]=aa,D[16]=k,D[17]=l):l=D[17];let{error:ad,isLoadingFullList:ae,isLoading:af,items:ag,fromCache:ah,isRetrying:ai,autoRetry:aj,canRetry:ak,retryCount:al,connected:am,onLoadFullList:an,onRetry:ao}=function(a){let b,c,g,h=(0,d.c)(31),{client:i,filter:j,params:k,sortOrder:l,searchQuery:m,perspective:n}=a,{strategy:o}=(0,f.useWorkspace)().search,p=(0,f.useSchema)(),q=(0,f.useSearchMaxFieldDepth)();h[0]!==k||h[1]!==j?(b=hH(j,k),h[0]=k,h[1]=j,h[2]=b):b=h[2];let r=b,[s]=(0,e.useState)(hQ),[t,u]=s,[v]=(0,e.useState)(hP),[w,x]=v,y=m||"",z=l||hz;if(h[3]!==i||h[4]!==q||h[5]!==w||h[6]!==t||h[7]!==k||h[8]!==n||h[9]!==p||h[10]!==j||h[11]!==o||h[12]!==y||h[13]!==z||h[14]!==r){let a,b={client:i,filter:j,limit:100,params:k,schema:p,perspective:n,searchQuery:y,sort:z,staticTypeNames:r,maxFieldDepth:q,searchStrategy:o},d=hJ(b).pipe((0,aC.shareReplay)({refCount:!0,bufferSize:1})),e=w.pipe((0,aC.withLatestFrom)(d),(0,aC.filter)(hO),(0,aC.take)(1),(0,aC.mergeMap)(()=>(0,aD.concat)((0,aD.of)({type:"loadFullList"}),hJ({...b,limit:2e3}).pipe((0,aC.map)(hN)))),(0,aC.share)());h[16]!==t?(a=(a,b,c)=>{var d,e;let f=(e=a)instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${hR}`):Error(`${String(e)} ${hR}`),g=window.navigator.onLine,h=g&&!((d=a)instanceof a2.ChannelError)&&(d instanceof a2.ServerError||!(d instanceof a2.ClientError)||403===d.statusCode),i=b<10,j=(0,aD.merge)(g?t:(0,aD.fromEvent)(window,"online"),g&&i?(0,aD.timer)(1e3*b):aD.NEVER).pipe((0,aC.take)(1),(0,aC.switchMap)(()=>(0,aD.merge)((0,aD.of)({type:"error",error:f,retrying:!0,autoRetry:i,canRetry:h,retryCount:b}),c)));return(0,aD.concat)((0,aD.of)({type:"error",error:f,retrying:!1,autoRetry:i,canRetry:h,retryCount:b}),j)},h[16]=t,h[17]=a):a=h[17],c=(0,aD.merge)(d.pipe((0,aC.map)(hM),(0,aC.takeUntil)(e)),e).pipe((0,f.catchWithCount)(a),(0,aC.scan)(hL,hK)),h[3]=i,h[4]=q,h[5]=w,h[6]=t,h[7]=k,h[8]=n,h[9]=p,h[10]=j,h[11]=o,h[12]=y,h[13]=z,h[14]=r,h[15]=c}else c=h[15];let A=c,{error:B,items:C,isLoading:D,fromCache:E,connected:F,canRetry:G,isLoadingFullList:H,isRetrying:I,autoRetry:J,retryCount:K}=(0,ax.useObservable)(A,hK);return h[18]!==J||h[19]!==G||h[20]!==F||h[21]!==B||h[22]!==E||h[23]!==D||h[24]!==H||h[25]!==I||h[26]!==C||h[27]!==x||h[28]!==u||h[29]!==K?(g={error:B,onRetry:u,isLoading:D,items:C,isRetrying:I,canRetry:G,retryCount:K,autoRetry:J,connected:F,fromCache:E,onLoadFullList:x,isLoadingFullList:H},h[18]=J,h[19]=G,h[20]=F,h[21]=B,h[22]=E,h[23]=D,h[24]=H,h[25]=I,h[26]=C,h[27]=x,h[28]=u,h[29]=K,h[30]=g):g=h[30],g}(l),aq=af||L.loading;D[18]===Symbol.for("react.memo_cache_sentinel")?(m=a=>a.pipe((0,aD.map)(hY),(0,aD.tap)(Z),(0,aD.debounce)(hZ),(0,aD.tap)(X)),D[18]=m):m=D[18];let as=(0,ax.useObservableEvent)(m);D[19]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{X(""),Z("")},D[19]=n):n=D[19];let at=n;D[20]===Symbol.for("react.memo_cache_sentinel")?(o=a=>{"Escape"===a.key&&at()},D[20]=o):o=D[20];let au=o,[av,aw]=(0,e.useState)();D[21]!==av||D[22]!==aq||D[23]!==H?(q=()=>{av||aq||aw(H)},p=[av,aq,H],D[21]=av,D[22]=aq,D[23]=H,D[24]=p,D[25]=q):(p=D[24],q=D[25]),(0,e.useEffect)(q,p),D[26]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{at(),aw()},D[26]=r):r=D[26],D[27]!==H?(t=[H,at],D[27]=H,D[28]=t):t=D[28],(0,e.useEffect)(r,t);b:{if(am&&aq&&av===H){u="spinner";break b}if(am&&ah){u="subtle";break b}u="initial"}let ay=u;c:{if("spinner"===ay){v=hU;break c}if(Y&&"subtle"===ay){v=hV;break c}v=j.SearchIcon}let az=v;(0,f.useReconnectingToast)(!am),D[29]!==U?(w=U("panes.document-list-pane.search-input.aria-label"),D[29]=U,D[30]=w):w=D[30];let aA=!!W;D[31]===Symbol.for("react.memo_cache_sentinel")?(x=[2,2,1],D[31]=x):x=D[31];let aB=am&&("subtle"!==ay||Y)?null:hW;D[32]!==U?(y=U("panes.document-list-pane.search-input.placeholder"),D[32]=U,D[33]=y):y=D[33],D[34]!==as||D[35]!==Y||D[36]!==w||D[37]!==aA||D[38]!==aB||D[39]!==y||D[40]!==az?(z=(0,c.jsx)(ap.Box,{paddingX:3,paddingBottom:3,children:(0,c.jsx)(ap.TextInput,{"aria-label":w,autoComplete:"off",border:!1,clearButton:aA,fontSize:x,icon:az,iconRight:aB,onChange:as,onClear:at,onKeyDown:au,padding:2,placeholder:y,radius:2,ref:_,spellCheck:!1,value:Y})}),D[34]=as,D[35]=Y,D[36]=w,D[37]=aA,D[38]=aB,D[39]=y,D[40]=az,D[41]=z):z=D[41];let aF=!!S,aG=2e3===ag.length,aH=!!W,aI="subtle"===ay;return D[42]!==aj||D[43]!==ak||D[44]!==E||D[45]!==am||D[46]!==ad||D[47]!==F||D[48]!==aq||D[49]!==ae||D[50]!==ai||D[51]!==ag||D[52]!==J||D[53]!==ay||D[54]!==an||D[55]!==ao||D[56]!==H||D[57]!==al||D[58]!==$||D[59]!==T||D[60]!==aF||D[61]!==aG||D[62]!==aH||D[63]!==aI||D[64]!==V?(A=(0,c.jsx)(hF,{childItemId:E,error:ad,filterIsSimpleTypeConstraint:aF,hasMaxItems:aG,hasSearchQuery:aH,isActive:F,isLazyLoading:ae,isLoading:aq,autoRetry:aj,canRetry:ak,retryCount:al,isRetrying:ai,isConnected:am,items:ag,layout:J,muted:aI,loadingVariant:ay,onEndReached:an,onRetry:ao,paneTitle:V,searchInputElement:$,showIcons:T},H),D[42]=aj,D[43]=ak,D[44]=E,D[45]=am,D[46]=ad,D[47]=F,D[48]=aq,D[49]=ae,D[50]=ai,D[51]=ag,D[52]=J,D[53]=ay,D[54]=an,D[55]=ao,D[56]=H,D[57]=al,D[58]=$,D[59]=T,D[60]=aF,D[61]=aG,D[62]=aH,D[63]=aI,D[64]=V,D[65]=A):A=D[65],D[66]!==z||D[67]!==A?(B=(0,c.jsxs)(c.Fragment,{children:[z,A]}),D[66]=z,D[67]=A,D[68]=B):B=D[68],B});function hY(a){return a.target.value}function hZ(a){return""===a?(0,aD.of)(""):(0,aD.timer)(300)}let h$=(0,e.memo)(a=>{let b,e,f,g,h,i,k,l,m,n=(0,d.c)(27),{contentAfter:o,index:p,initialValueTemplates:q,menuItemGroups:r,menuItems:s,setLayout:t,setSortOrder:u,title:v}=a;n[0]!==q?(b=void 0===q?[]:q,n[0]=q,n[1]=b):b=n[1];let w=b;n[2]!==r?(e=void 0===r?[]:r,n[2]=r,n[3]=e):e=n[3];let x=e;n[4]!==s?(f=void 0===s?[]:s,n[4]=s,n[5]=f):f=n[5];let y=f,{features:z}=cW(),{collapsed:A,isLast:B}=ci(),C=B&&!A?-1:0;n[6]!==t?(g=a=>{let{layout:b}=a;t(b)},n[6]=t,n[7]=g):g=n[7],n[8]!==u?(h=a=>{u(a)},n[8]=u,n[9]=h):h=n[9],n[10]!==g||n[11]!==h?(i={setLayout:g,setSortOrder:h},n[10]=g,n[11]=h,n[12]=i):i=n[12];let D=i;return n[13]!==D||n[14]!==w||n[15]!==x||n[16]!==y?(k=(0,c.jsx)(hn,{initialValueTemplateItems:w,actionHandlers:D,menuItemGroups:x,menuItems:y}),n[13]=D,n[14]=w,n[15]=x,n[16]=y,n[17]=k):k=n[17],n[18]!==z.backButton||n[19]!==p?(l=z.backButton&&p>0&&(0,c.jsx)(ao.Button,{as:gH,"data-as":"a",icon:j.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),n[18]=z.backButton,n[19]=p,n[20]=l):l=n[20],n[21]!==o||n[22]!==k||n[23]!==l||n[24]!==C||n[25]!==v?(m=(0,c.jsx)(ao.TooltipDelayGroupProvider,{children:(0,c.jsx)(cB,{actions:k,backButton:l,contentAfter:o,tabIndex:C,title:v})}),n[21]=o,n[22]=k,n[23]=l,n[24]=C,n[25]=v,n[26]=m):m=n[26],m});function h_(a){let{row:b,table:d}=a,{selectedAnchor:f,setSelectedAnchor:g}=d.options.meta||{},h=(0,e.useCallback)(a=>{if(a.shiftKey&&null!=f){let a=b.index,c=a<f?a:f,e=a<f?f:a,g=d.getRowModel().flatRows.slice(c,e+1).map(({id:a})=>a),h=d.getSelectedRowModel().rows.map(({id:a})=>a);d.setRowSelection(()=>[...g,...h].reduce((a,b)=>({...a,[b]:!0}),{}))}else g&&(g(b.getIsSelected()?null:b.index),b.toggleSelected())},[f,b,g,d]);return(0,c.jsx)(ap.Checkbox,{style:{paddingLeft:4},checked:a.row.getIsSelected(),disabled:!a.row.getCanSelect(),onChange:()=>null,onClick:h})}function h0(a){let b,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=(0,d.c)(49),{children:x,table:y}=a,[z,A]=(0,e.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],w[0]=b):b=w[0];let[B,C]=(0,e.useState)(b);w[1]!==z?.state?(f=a=>{z?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),A(void 0===a?null:a),C([])},w[1]=z?.state,w[2]=f):f=w[2];let D=f;w[3]!==D?(g=()=>D(),w[3]=D,w[4]=g):g=w[4];let E=g;w[5]!==D||w[6]!==z||w[7]!==y?(i=a=>{if(!z)return;let b=y.getVisibleLeafColumns(),c=b.findIndex(a=>a.id===z.colId)+("left"===a?-1:1);c<0||c>=b.length||D({colId:b[c].id,rowIndex:z.rowIndex,state:"selected"})},w[5]=D,w[6]=z,w[7]=y,w[8]=i):i=w[8];let F=i;w[9]!==z?(j=a=>{z&&C(b=>{let{rowIndex:c}=z,d=b=>b+("down"===a?1:-1);if(!b.length){let a=d(c);return a<0?[]:[a]}let e=d(b[b.length-1]);return e<0?b:e===c?[]:b.includes(e)?b.slice(0,-1):[...b,e]})},w[9]=z,w[10]=j):j=w[10];let G=j;w[11]!==D?(k=(a,b)=>{D({colId:a,rowIndex:b,state:"selected"})},w[11]=D,w[12]=k):k=w[12];let H=k;w[13]!==D||w[14]!==z||w[15]!==B.length?(l=()=>{z&&(B.length?C([]):D("selected"===z.state?null:{...z,state:"selected"}))},w[13]=D,w[14]=z,w[15]=B.length,w[16]=l):l=w[16];let I=l;w[17]!==G||w[18]!==z||w[19]!==H?(m=(a,b)=>{if(!z)return;let c="ArrowDown"===b?"down":"up",d="down"===c?1:-1;if(a)G(c);else{let a=z.rowIndex+d;if(a<0)return;H(z.colId,a)}},w[17]=G,w[18]=z,w[19]=H,w[20]=m):m=w[20];let J=m;w[21]!==F||w[22]!==I||w[23]!==J||w[24]!==z?(n=a=>{if(!z)return;let{key:b,shiftKey:c}=a;switch(b){case"Shift":break;case"Escape":I();break;case"ArrowDown":case"ArrowUp":a.preventDefault(),J(c,b);break;case"ArrowLeft":case"ArrowRight":"selected"===z.state&&(a.preventDefault(),F("ArrowLeft"===b?"left":"right"))}},w[21]=F,w[22]=I,w[23]=J,w[24]=z,w[25]=n):n=w[25];let K=n;w[26]!==E||w[27]!==z?(o=a=>{z&&(document.getElementById(`cell-${z.colId}-${z.rowIndex}`)?.contains(a.target)||E())},w[26]=E,w[27]=z,w[28]=o):o=w[28];let L=o;w[29]!==L||w[30]!==K||w[31]!==z?(p=()=>(z&&(document.addEventListener("keydown",K),document.addEventListener("click",L)),()=>{z&&(document.removeEventListener("keydown",K),document.removeEventListener("click",L))}),q=[L,K,z],w[29]=L,w[30]=K,w[31]=z,w[32]=p,w[33]=q):(p=w[32],q=w[33]),(0,e.useEffect)(p,q),w[34]===Symbol.for("react.memo_cache_sentinel")?(r=()=>A(h1),w[34]=r):r=w[34];let M=r;w[35]!==z||w[36]!==B?(s=(a,b)=>z?.colId!==a?null:z.rowIndex===b?"focused"===z.state?"focused":"selectedAnchor":B.includes(b)?"selectedRange":null,w[35]=z,w[36]=B,w[37]=s):s=w[37];let N=s;w[38]!==D||w[39]!==z?(t=()=>{z&&D({colId:z.colId,rowIndex:z.rowIndex+1,state:"selected"})},w[38]=D,w[39]=z,w[40]=t):t=w[40];let O=t;w[41]!==N||w[42]!==E||w[43]!==H||w[44]!==O?(u={focusAnchorCell:M,resetFocusSelection:E,setSelectedAnchorCell:H,getStateByCellId:N,submitFocusedCell:O},w[41]=N,w[42]=E,w[43]=H,w[44]=O,w[45]=u):u=w[45];let P=u;return w[46]!==x||w[47]!==P?(v=(0,c.jsx)(h.DocumentSheetListContext.Provider,{value:P,children:x}),w[46]=x,w[47]=P,w[48]=v):v=w[48],v}function h1(a){return a?{...a,state:"focused"}:null}h$.displayName="Memo(PaneHeader)";let h2=at.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:a})=>a}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,h3=(0,at.styled)(h2)`
  position: sticky;
  z-index: 2;
`;function h4(a){let{getValue:b,column:d,row:f,fieldType:g}=a,i=`cell-${d.id}-${f.index}`,[j,k]=(0,e.useState)(()=>b()),[l,m]=(0,e.useState)(!1),n=(0,e.useRef)(null),{focusAnchorCell:o,resetFocusSelection:p,setSelectedAnchorCell:q,getStateByCellId:r,submitFocusedCell:s}=(()=>{let a=(0,e.useContext)(h.DocumentSheetListContext);if(void 0===a)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return a})(),t=r(d.id,f.index),u=(0,e.useCallback)(()=>{q(d.id,f.index),o()},[d.id,o,f.index,q]),{patchDocument:v}=a.table.options.meta||{},w=()=>{n.current?.focus(),n.current instanceof HTMLInputElement&&n.current.select()},x=(0,e.useCallback)(a=>{let{key:b}=a;"Enter"===b&&("selectedAnchor"===t&&w(),"focused"===t&&s())},[t,s]),y=(0,e.useCallback)(a=>{let b=a.clipboardData?.getData("Text");("string"==typeof b||"number"==typeof b)&&(k(b),v?.(f.id,d.id,b))},[d.id,v,f.id]),z=(0,e.useCallback)(()=>navigator.clipboard.writeText(j.toString()),[j]);(0,e.useEffect)(()=>(("selectedAnchor"===t||"focused"===t)&&document.addEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.addEventListener("paste",y),"selectedAnchor"===t&&document.addEventListener("copy",z),()=>{("selectedAnchor"===t||"focused"===t)&&document.removeEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.removeEventListener("paste",y),"selectedAnchor"===t&&document.removeEventListener("copy",z)}),[i,t,d.id,r,z,x,y,f.index]);let A=()=>"focused"===t?"2px solid blue":"selectedRange"===t?"1px solid green":"selectedAnchor"===t?"1px solid blue":"1px solid transparent",B={onFocus:u,onBlur:()=>{l&&(v?.(f.id,d.id,j),m(!1)),p()},onMouseDown:a=>{2===a.detail?w():(a.preventDefault(),q(d.id,f.index))},"aria-selected":!!t,"data-testid":i,id:i,ref:a=>{n.current=a}};return"boolean"===g.name?(0,c.jsxs)(ap.Select,{...B,onChange:()=>null,radius:0,style:{boxShadow:"none",border:A(),padding:0},value:JSON.stringify(j),children:[(0,c.jsx)("option",{value:"True",children:"True"}),(0,c.jsx)("option",{value:"False",children:"False"})]}):(0,c.jsx)(ap.TextInput,{...B,size:0,radius:0,border:!1,style:{border:A(),padding:"22px 16px"},value:"string"==typeof j||"number"==typeof j?j:JSON.stringify(j),onChange:a=>{m(!0),k(a.target.value)}})}function h5(a){let b=a.column.getIsPinned(),d=b&&a.column.getIsLastColumn("left")?2:1;return(0,c.jsx)(b?h3:h2,{style:{left:a.column.getStart("left")??void 0,borderRight:`${d}px solid var(--card-border-color)`},width:a.column.getSize(),children:bJ(a.column.columnDef.cell,a.getContext?.())},a.row.original._id+a.id)}let h6=a=>{let{documentPreviewStore:b,row:d,schemaType:g}=a,h=(0,e.useMemo)(()=>(0,f.getPreviewStateObservable)(b,g,d.original._id),[b,d.original._id,g]),i=(0,f.useDocumentVersionInfo)(d.original._id),{snapshot:j,isLoading:k}=(0,ax.useObservable)(h,{snapshot:null,isLoading:!0});if(k)return(0,c.jsx)(ap.Text,{size:1,muted:!0,children:"Loading..."});let l=j?.title??"Untitled";return(0,c.jsxs)(ap.Flex,{align:"center",gap:3,children:[(0,c.jsx)(f.DocumentStatusIndicator,{draft:i.draft,published:i.published,versions:void 0}),(0,c.jsx)(ap.Text,{size:1,children:l})]})},h7=(a,b)=>"function"==typeof a?{...b,accessorFn:a}:{...b,accessorKey:a},h8=["string","number","boolean"],h9=(a,b)=>a.fields.reduce((a,d)=>{let{type:e,name:f}=d;return h8.includes(e.name)?[...a,h7(b?`${b}.${d.name}`:d.name,{id:b?`${b}_${d.name}`:d.name,header:d.type.title,enableHiding:!0,cell:a=>(0,c.jsx)(h4,{...a,fieldType:e})})]:"object"===e.name&&(0,ar.isObjectSchemaType)(e)&&!b?[...a,{header:f,columns:h9(e,d.name)}]:a},[]),ia=a=>a.flatMap(a=>"accessorKey"in a?a:"columns"in a&&a.columns?ia(a.columns):[]);function ib({table:a}){let{t:b}=(0,f.useTranslation)(),d=a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length>=5,g=(0,e.useCallback)(()=>{a.resetColumnVisibility()},[a]);return(0,c.jsx)(ao.MenuButton,{button:(0,c.jsx)(ao.Button,{mode:"bleed",text:b("sheet-list.edit-columns")}),id:"columns-control",menu:(0,c.jsx)(ap.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,c.jsxs)(ap.Flex,{direction:"column",height:"fill",gap:3,children:[(0,c.jsx)(ap.Text,{weight:"semibold",size:1,children:b("sheet-list.select-fields")}),(0,c.jsx)(ap.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,c.jsx)(ap.Stack,{children:a.getAllLeafColumns().filter(a=>a.getCanHide()).map(b=>{let e,f,g=b.id.replace(/ /g,"-");return(0,c.jsxs)(ap.Flex,{marginY:2,align:"center",children:[(0,c.jsx)(ap.Checkbox,{readOnly:(e=b.getIsVisible(),f=1===a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length,d&&!e||f&&e),checked:b.getIsVisible(),onChange:()=>{b.toggleVisibility()},id:`col-visibility-${g}`,style:{display:"block"}}),(0,c.jsx)(ap.Box,{flex:1,paddingLeft:3,children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)("label",{htmlFor:`col-visibility-${g}`,children:b.columnDef.header?.toString()})})})]},b.id)})})}),(0,c.jsx)(ao.Button,{width:"fill",mode:"ghost",text:b("sheet-list.reset-columns"),onClick:g})]})}),placement:"bottom",popover:{portal:!0}})}let ic=(0,at.styled)(ap.Flex)`
  flex-shrink: 0;
`;function id(){let a,b,e,g=(0,d.c)(5),{state:h}=(0,f.useSearchState)(),{filtersVisible:i}=h;return g[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f.SearchHeader,{}),g[0]=a):a=g[0],g[1]!==i?(b=i&&(0,c.jsx)(f.Filters,{showTypeFilter:!1}),g[1]=i,g[2]=b):b=g[2],g[3]!==b?(e=(0,c.jsxs)(ic,{children:[a,b]}),g[3]=b,g[4]=e):e=g[4],e}let ie=at.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:a})=>a}px;
  max-width: ${({width:a})=>a}px;
`,ig=(0,at.styled)(ie)`
  position: sticky;
  z-index: 2;
`,ih=at.styled.div`
  visibility: hidden;

  ${ie}:hover & {
    visibility: visible;
  }
`;function ii(a){let{header:b,headerGroup:d}=a,{t:e}=(0,f.useTranslation)(),g=b.column.getIsPinned(),h=d.depth>0&&!b.column.parent?null:(0,c.jsx)(ap.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:bJ(b.column.columnDef.header,b.getContext())}),i=b.column.getCanHide()&&(0===d.depth?!b.column.columns.length:b.column.parent),k=g&&b.column.getIsLastColumn("left")?2:1;return(0,c.jsx)(g?ig:ie,{style:{left:b.column.getStart("left")??void 0,borderRight:`${k}px solid var(--card-border-color)`},"data-testid":`header-${b.id}`,width:b.getSize(),children:(0,c.jsxs)(ap.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,c.jsx)(ao.Tooltip,{delay:500,content:h,children:(0,c.jsx)(ap.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:h})}),i&&(0,c.jsx)(ih,{children:(0,c.jsx)(ao.MenuButton,{button:(0,c.jsx)(ao.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:j.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,c.jsx)(ap.Menu,{children:(0,c.jsx)(ao.MenuItem,{text:e("sheet-list.hide-field"),icon:j.CloseIcon,onClick:()=>b.column.toggleVisibility()})})})})]})},b.id)}function ij({table:a}){return(0,c.jsx)(ao.TooltipDelayGroupProvider,{children:(0,c.jsxs)(ap.Flex,{gap:3,align:"center",children:[(0,c.jsx)(ao.Button,{onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),icon:j.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,c.jsx)(ao.Button,{onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),icon:j.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,c.jsxs)(ap.Text,{style:{whiteSpace:"nowrap"},children:[a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),(0,c.jsx)(ao.Button,{onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),icon:j.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,c.jsx)(ao.Button,{onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),icon:j.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,c.jsx)("select",{value:a.getState().pagination.pageSize,onChange:b=>{a.setPageSize(Number(b.target.value))},children:[25,50,100].map(a=>(0,c.jsx)("option",{value:a,children:a},a))})]})})}function ik(a,b){switch(b.type){case"DOCUMENTS_SET":{let c=b.documents.reduce((a,b)=>({...a,[b._id]:b}),{});return{...a,documents:c}}case"DOCUMENT_RECEIVED":{let c=b.payload;return{...a,documents:{...a.documents,[c._id]:c}}}case"DOCUMENT_DELETED":{let{[b.id]:c,...d}=a.documents;return{...a,documents:d}}case"DOCUMENT_UPDATED":{let c=b.payload,d=c._id,e={...a.documents[d],...c};return{...a,documents:{...a.documents,[d]:e}}}default:return a}}let il={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},im=(0,at.styled)(ap.Flex)`
  height: 100%;
`,io=at.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,ip=at.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function iq({documentSchemaType:a}){let{dispatch:b,state:h}=(0,f.useSearchState)(),{columns:i,initialColumnsVisibility:j}=function(a){let b=(0,f.useDocumentPreviewStore)(),d=(0,e.useMemo)(()=>a?[{id:"selected",enableHiding:!1,header:a=>(0,c.jsxs)(ap.Box,{children:[(0,c.jsx)(ap.Checkbox,{style:{paddingLeft:4},indeterminate:a.table.getIsSomeRowsSelected(),onChange:a.table.getToggleAllPageRowsSelectedHandler()}),a.table.getSelectedRowModel().rows.length," selected"]}),cell:h_},h7("Preview",{enableHiding:!1,id:"Preview",cell:d=>(0,c.jsx)(h6,{...d,documentPreviewStore:b,schemaType:a})}),...h9(a)]:[],[b,a]),[g]=(0,e.useMemo)(()=>ia(d).reduce(([a,b],c)=>{if(!c.id)throw Error("Column must have an id");let d=c.id;return c.enableHiding?5===b?[{...a,[d]:!1},b]:[{...a,[d]:!0},b+1]:[{...a,[d]:!0},b]},[{},0]),[d]);return{columns:d,initialColumnsVisibility:g}}(a),{data:k}=function(a){let b,c,h,i,j=(0,d.c)(12),{typeName:k}=a,{state:l}=(0,f.useSearchState)();j[0]!==l.result.hits?(b=new Map,l.result.hits.forEach(a=>b.set((0,g.getPublishedId)(a.hit._id),a.hit)),j[0]=l.result.hits,j[1]=b):b=j[1];let m=b,n=`_type == "${k}"`;j[2]!==n?(c={filter:n},j[2]=n,j[3]=c):c=j[3];let{data:o,isLoading:p}=function(a){let b,c,h,i,j,k,l,m,n,o,p=(0,d.c)(27),{filter:q,params:r,apiVersion:s}=a,t=`*[${q}][0...2000]`,u=s||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;p[0]!==u?(b={...f.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:u},p[0]=u,p[1]=b):b=p[1];let v=(0,f.useClient)(b);p[2]===Symbol.for("react.memo_cache_sentinel")?(c={documents:{}},p[2]=c):c=p[2];let[w,x]=(0,e.useReducer)(ik,c),[y,z]=(0,e.useState)(null!==v),[A,B]=(0,e.useState)(null);p[3]!==t||p[4]!==v||p[5]!==r?(h=async()=>{if(!v)return void z(!1);try{let a=await v.fetch(t,r);x({type:"DOCUMENTS_SET",documents:a}),z(!1)}catch(a){B(a)}},p[3]=t,p[4]=v,p[5]=r,p[6]=h):h=p[6];let C=h;p[7]!==C?(i=async a=>{if("welcome"===a.type&&(z(!0),await C(),z(!1)),"reconnect"===a.type&&z(!0),"mutation"===a.type){if("appear"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_RECEIVED",payload:b})}if("disappear"===a.transition&&x({type:"DOCUMENT_DELETED",id:a.documentId}),"update"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_UPDATED",payload:b})}}},p[7]=C,p[8]=i):i=p[8];let D=i;a:{let a;if(!v){let a;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aD.of)(),p[9]=a):a=p[9],j=a;break a}if(p[10]!==t||p[11]!==v.observable||p[12]!==r){let b;p[14]===Symbol.for("react.memo_cache_sentinel")?(b=a=>(B(a),(0,aD.of)(a)),p[14]=b):b=p[14],a=v.observable.listen(t,r,il).pipe((0,aD.catchError)(b)),p[10]=t,p[11]=v.observable,p[12]=r,p[13]=a}else a=p[13];j=a}let E=j;p[15]!==D||p[16]!==E?(k=()=>{let a=E.subscribe(D);return()=>{a?.unsubscribe()}},l=[D,E],p[15]=D,p[16]=E,p[17]=k,p[18]=l):(k=p[17],l=p[18]),(0,e.useEffect)(k,l),p[19]!==w.documents?(m=Object.keys(w.documents).reduce((a,b)=>{let c=w.documents[b],d=c._id===(0,g.getDraftId)(c._id),e=d?c._id:(0,g.getDraftId)(c._id);return a[e]&&!d||(a[e]=c),a},{}),p[19]=w.documents,p[20]=m):m=p[20];let F=m;p[21]!==F?(n=Object.values(F),p[21]=F,p[22]=n):n=p[22];let G=n;return p[23]!==G||p[24]!==A||p[25]!==y?(o={data:G,isLoading:y,error:A},p[23]=G,p[24]=A,p[25]=y,p[26]=o):o=p[26],o}(c);if(j[4]!==o||j[5]!==m){let a;j[7]!==m?(a=a=>m.has((0,g.getPublishedId)(a._id)),j[7]=m,j[8]=a):a=j[8],h=o.filter(a),j[4]=o,j[5]=m,j[6]=h}else h=j[6];let q=h;return j[9]!==q||j[10]!==p?(i={data:q,isLoading:p},j[9]=q,j[10]=p,j[11]=i):i=j[11],i}({typeName:a.name}),[l,m]=(0,e.useState)(null),n=h.result.hits.length,o=function(a){let b={state:{},onStateChange:()=>{},renderFallbackValue:null,...a},[c]=e.useState(()=>({current:function(a){var b,c;let d=[...bI,...null!=(b=a._features)?b:[]],e={_features:d},f=e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultOptions?void 0:b.getDefaultOptions(e)),{}),g={...null!=(c=a.initialState)?c:{}};e._features.forEach(a=>{var b;g=null!=(b=null==a.getInitialState?void 0:a.getInitialState(g))?b:g});let h=[],i=!1,j={_features:d,options:{...f,...a},initialState:g,_queue:a=>{h.push(a),i||(i=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();i=!1}).catch(a=>setTimeout(()=>{throw a})))},reset:()=>{e.setState(e.initialState)},setOptions:a=>{var b;b=a5(a,e.options),e.options=e.options.mergeOptions?e.options.mergeOptions(f,b):{...f,...b}},getState:()=>e.options.state,setState:a=>{null==e.options.onStateChange||e.options.onStateChange(a)},_getRowId:(a,b,c)=>{var d;return null!=(d=null==e.options.getRowId?void 0:e.options.getRowId(a,b,c))?d:`${c?[c.id,b].join("."):b}`},getCoreRowModel:()=>(e._getCoreRowModel||(e._getCoreRowModel=e.options.getCoreRowModel(e)),e._getCoreRowModel()),getRowModel:()=>e.getPaginationRowModel(),getRow:(a,b)=>{let c=(b?e.getPrePaginationRowModel():e.getRowModel()).rowsById[a];if(!c&&!(c=e.getCoreRowModel().rowsById[a]))throw Error();return c},_getDefaultColumnDef:a8(()=>[e.options.defaultColumn],a=>{var b;return a=null!=(b=a)?b:{},{header:a=>{let b=a.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:a=>{var b,c;return null!=(b=null==(c=a.renderValue())||null==c.toString?void 0:c.toString())?b:null},...e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultColumnDef?void 0:b.getDefaultColumnDef()),{}),...a}},a9(a,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>e.options.columns,getAllColumns:a8(()=>[e._getColumnDefs()],a=>{let b=function(a,c,d){return void 0===d&&(d=0),a.map(a=>{let f=function(a,b,c,d){var e,f;let g,h={...a._getDefaultColumnDef(),...b},i=h.accessorKey,j=null!=(e=null!=(f=h.id)?f:i?"function"==typeof String.prototype.replaceAll?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)?e:"string"==typeof h.header?h.header:void 0;if(h.accessorFn?g=h.accessorFn:i&&(g=i.includes(".")?a=>{let b=a;for(let a of i.split(".")){var c;b=null==(c=b)?void 0:c[a]}return b}:a=>a[h.accessorKey]),!j)throw Error();let k={id:`${String(j)}`,accessorFn:g,parent:d,depth:c,columnDef:h,columns:[],getFlatColumns:a8(()=>[!0],()=>{var a;return[k,...null==(a=k.columns)?void 0:a.flatMap(a=>a.getFlatColumns())]},a9(a.options,"debugColumns","column.getFlatColumns")),getLeafColumns:a8(()=>[a._getOrderColumnsFn()],a=>{var b;return null!=(b=k.columns)&&b.length?a(k.columns.flatMap(a=>a.getLeafColumns())):[k]},a9(a.options,"debugColumns","column.getLeafColumns"))};for(let b of a._features)null==b.createColumn||b.createColumn(k,a);return k}(e,a,d,c);return f.columns=a.columns?b(a.columns,f,d+1):[],f})};return b(a)},a9(a,"debugColumns","getAllColumns")),getAllFlatColumns:a8(()=>[e.getAllColumns()],a=>a.flatMap(a=>a.getFlatColumns()),a9(a,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:a8(()=>[e.getAllFlatColumns()],a=>a.reduce((a,b)=>(a[b.id]=b,a),{}),a9(a,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:a8(()=>[e.getAllColumns(),e._getOrderColumnsFn()],(a,b)=>b(a.flatMap(a=>a.getLeafColumns())),a9(a,"debugColumns","getAllLeafColumns")),getColumn:a=>e._getAllFlatColumnsById()[a]};Object.assign(e,j);for(let a=0;a<e._features.length;a++){let b=e._features[a];null==b||null==b.createTable||b.createTable(e)}return e}(b)})),[d,f]=e.useState(()=>c.current.initialState);return c.current.setOptions(b=>({...b,...a,state:{...d,...a.state},onStateChange:b=>{f(b),null==a.onStateChange||a.onStateChange(b)}})),c.current}({data:k,columns:i,getCoreRowModel:a=>a8(()=>[a.options.data],b=>{let c={rows:[],flatRows:[],rowsById:{}},d=function(b,e,f){void 0===e&&(e=0);let g=[];for(let i=0;i<b.length;i++){let j=bd(a,a._getRowId(b[i],i,f),b[i],i,e,void 0,null==f?void 0:f.id);if(c.flatRows.push(j),c.rowsById[j.id]=j,g.push(j),a.options.getSubRows){var h;j.originalSubRows=a.options.getSubRows(b[i],i),null!=(h=j.originalSubRows)&&h.length&&(j.subRows=d(j.originalSubRows,e+1,j))}}return g};return c.rows=d(b),c},a9(a.options,"debugTable","getRowModel",()=>a._autoResetPageIndex())),getFilteredRowModel:a=>a8(()=>[a.getPreFilteredRowModel(),a.getState().columnFilters,a.getState().globalFilter],(b,c,d)=>{var e,f,g,h,i,j,k,l,m,n;let o,p,q,r,s,t,u,v,w,x;if(!b.rows.length||!(null!=c&&c.length)&&!d){for(let a=0;a<b.flatRows.length;a++)b.flatRows[a].columnFilters={},b.flatRows[a].columnFiltersMeta={};return b}let y=[],z=[];(null!=c?c:[]).forEach(b=>{var c;let d=a.getColumn(b.id);if(!d)return;let e=d.getFilterFn();e&&y.push({id:b.id,filterFn:e,resolvedValue:null!=(c=null==e.resolveFilterValue?void 0:e.resolveFilterValue(b.value))?c:b.value})});let A=(null!=c?c:[]).map(a=>a.id),B=a.getGlobalFilterFn(),C=a.getAllLeafColumns().filter(a=>a.getCanGlobalFilter());d&&B&&C.length&&(A.push("__global__"),C.forEach(a=>{var b;z.push({id:a.id,filterFn:B,resolvedValue:null!=(b=null==B.resolveFilterValue?void 0:B.resolveFilterValue(d))?b:d})}));for(let a=0;a<b.flatRows.length;a++){let c=b.flatRows[a];if(c.columnFilters={},y.length)for(let a=0;a<y.length;a++){let b=(o=y[a]).id;c.columnFilters[b]=o.filterFn(c,b,o.resolvedValue,a=>{c.columnFiltersMeta[b]=a})}if(z.length){for(let a=0;a<z.length;a++){let b=(p=z[a]).id;if(p.filterFn(c,b,p.resolvedValue,a=>{c.columnFiltersMeta[b]=a})){c.columnFilters.__global__=!0;break}}!0!==c.columnFilters.__global__&&(c.columnFilters.__global__=!1)}}return e=b.rows,f=a=>{for(let b=0;b<A.length;b++)if(!1===a.columnFilters[A[b]])return!1;return!0},a.options.filterFromLeafRows?(g=e,h=f,q=[],r={},s=null!=(j=(i=a).options.maxLeafRowFilterDepth)?j:100,{rows:(t=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){var d;let f=a[e],g=bd(i,f.id,f.original,f.index,f.depth,void 0,f.parentId);if(g.columnFilters=f.columnFilters,null!=(d=f.subRows)&&d.length&&b<s){if(g.subRows=t(f.subRows,b+1),h(f=g)&&!g.subRows.length||h(f)||g.subRows.length){c.push(f),r[f.id]=f,q.push(f);continue}}else h(f=g)&&(c.push(f),r[f.id]=f,q.push(f))}return c})(g),flatRows:q,rowsById:r}):(k=e,l=f,u=[],v={},w=null!=(n=(m=a).options.maxLeafRowFilterDepth)?n:100,{rows:(x=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){let f=a[e];if(l(f)){var d;if(null!=(d=f.subRows)&&d.length&&b<w){let a=bd(m,f.id,f.original,f.index,f.depth,void 0,f.parentId);a.subRows=x(f.subRows,b+1),f=a}c.push(f),u.push(f),v[f.id]=f}}return c})(k),flatRows:u,rowsById:v})},a9(a.options,"debugTable","getFilteredRowModel",()=>a._autoResetPageIndex())),getPaginationRowModel:a=>a8(()=>[a.getState().pagination,a.getPrePaginationRowModel(),a.options.paginateExpandedRows?void 0:a.getState().expanded],(b,c)=>{let d;if(!c.rows.length)return c;let{pageSize:e,pageIndex:f}=b,{rows:g,flatRows:h,rowsById:i}=c,j=e*f;if(g=g.slice(j,j+e),a.options.paginateExpandedRows)d={rows:g,flatRows:h,rowsById:i};else{var k;let a,b;k={rows:g,flatRows:h,rowsById:i},a=[],b=c=>{var d;a.push(c),null!=(d=c.subRows)&&d.length&&c.getIsExpanded()&&c.subRows.forEach(b)},k.rows.forEach(b),d={rows:a,flatRows:k.flatRows,rowsById:k.rowsById}}d.flatRows=[];let l=a=>{d.flatRows.push(a),a.subRows.length&&a.subRows.forEach(l)};return d.rows.forEach(l),d},a9(a.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:j},getRowId:a=>a._id,meta:{selectedAnchor:l,setSelectedAnchor:m,patchDocument:(a,b,c)=>null}}),{rows:p}=o.getRowModel();(0,e.useEffect)(()=>(b({type:"TERMS_TYPE_ADD",schemaType:a}),()=>{b({type:"TERMS_TYPE_REMOVE",schemaType:a})}),[a,b]);let q=(0,e.useCallback)(a=>(0,c.jsx)(ap.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:a.getVisibleCells().map(b=>(0,c.jsx)(h5,{...b},a.original._id+b.id))},a.original._id+a.id),[]),r=`Total: ${n} rows, showing ${p.length} rows`;return(0,c.jsxs)(im,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,c.jsxs)(ap.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,c.jsxs)(ap.Flex,{direction:"row",align:"center",children:[(0,c.jsx)(id,{}),(0,c.jsx)(ap.Text,{size:0,muted:!0,children:r})]}),(0,c.jsx)(ib,{table:o})]}),(0,c.jsx)(io,{children:(0,c.jsx)(h0,{table:o,children:(0,c.jsxs)(ip,{children:[(0,c.jsx)("thead",{children:o.getHeaderGroups().map(a=>(0,c.jsx)(ap.Box,{as:"tr",children:a.headers.map(b=>(0,c.jsx)(ii,{header:b,headerGroup:a},b.id))},a.id))}),(0,c.jsx)("tbody",{children:o.getRowModel().rows.map(q)})]})})}),(0,c.jsx)(ap.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,c.jsx)(ij,{table:o})})]})}function ir(a){let b,e,g,h=(0,d.c)(7),i=(0,f.useSchema)(),j=a.pane.schemaTypeName;if(h[0]!==i||h[1]!==j?(e=!(b=i.get(j))||!(0,ar.isDocumentSchemaType)(b),h[0]=i,h[1]=j,h[2]=b,h[3]=e):(b=h[2],e=h[3]),e)throw Error(`Schema type "${j}" not found or not a document schema`);return h[4]!==a||h[5]!==b?(g=(0,c.jsx)(f.SearchProvider,{children:(0,c.jsx)(iq,{...a,documentSchemaType:b})}),h[4]=a,h[5]=b,h[6]=g):g=h[6],g}function is(a){let[b,c]=(0,e.useState)(a);return(0,aB.default)(b,a)?b:(c(a),a)}let it=(0,e.memo)(function(a){let b,e,g,h,i,j,k,l,m,n=(0,d.c)(36),{index:o,isSelected:p,pane:q,paneKey:r}=a,{name:s}=(0,f.useSource)(),{defaultLayout:t,initialValueTemplates:u,menuItemGroups:v,menuItems:w,options:x}=q,y=void 0===u?f.EMPTY_ARRAY:u,{defaultOrdering:z,filter:A}=x,B=void 0===z?f.EMPTY_ARRAY:z,C=is(x.params||hA),D=q.source;a:{let a;n[0]!==A||n[1]!==C?(a=hH(A,C),n[0]=A,n[1]=C,n[2]=a):a=n[2];let c=a;if(c?.length===1){b=c[0];break a}b=null}let E=b,[F,G]=c8("layout",E??q.id,void 0===t?"default":t),{title:H}=(0,f.useI18nText)(q);n[3]!==B?(e=B?.length>0?{by:B}:hz,n[3]=B,n[4]=e):e=n[4];let I=e,[J,K]=c8("sort-order",E??q.id,I);n[5]!==F||n[6]!==w||n[7]!==J?(g=(a=>{let{menuItems:b,sortOrderRaw:c,layout:d}=a;return b?.map(a=>a.params?.layout?{...a,selected:d===a.params?.layout}:a?.params?.by?{...a,selected:(0,aA.default)(c?.by,a?.params?.by||f.EMPTY_ARRAY)}:{...a,selected:!1})})({menuItems:w,sortOrderRaw:J,layout:F}),n[5]=F,n[6]=w,n[7]=J,n[8]=g):g=n[8];let L=g,M="sheetList"===F;n[9]!==M||n[10]!==F||n[11]!==a||n[12]!==J?(h=M?(0,c.jsx)(ir,{...a},a.pane.id):(0,c.jsx)(hX,{...a,sortOrder:J,layout:F}),n[9]=M,n[10]=F,n[11]=a,n[12]=J,n[13]=h):h=n[13];let N=h,O=D||s;return n[14]!==M?(i=M?{}:{currentMaxWidth:350,maxWidth:640},n[14]=M,n[15]=i):i=n[15],n[16]!==q.source?(j=!1,n[16]=q.source,n[17]=j):j=n[17],n[18]!==o||n[19]!==y||n[20]!==v||n[21]!==L||n[22]!==G||n[23]!==K||n[24]!==H?(k=(0,c.jsx)(h$,{index:o,initialValueTemplates:y,menuItemGroups:v,menuItems:L,setLayout:G,setSortOrder:K,title:H}),n[18]=o,n[19]=y,n[20]=v,n[21]=L,n[22]=G,n[23]=K,n[24]=H,n[25]=k):k=n[25],n[26]!==p||n[27]!==r||n[28]!==N||n[29]!==k||n[30]!==i||n[31]!==j?(l=(0,c.jsxs)(cg,{"data-ui":"DocumentListPane",id:r,minWidth:320,...i,selected:p,children:[j,k,N]}),n[26]=p,n[27]=r,n[28]=N,n[29]=k,n[30]=i,n[31]=j,n[32]=l):l=n[32],n[33]!==l||n[34]!==O?(m=(0,c.jsx)(f.SourceProvider,{name:O,children:l}),n[33]=l,n[34]=O,n[35]=m):m=n[35],m});it.displayName="Memo(PaneContainer)";let iu=a=>{let{liveEditSchemaType:b,version:c}=a;return b&&!c?{label:"Live",color:"danger"}:null};iu.displayName="LiveEditBadge";let iv={activePanes:[]};function iw(a){iv.activePanes=a}function ix(a,b,c,d){let e=c?.panes||[],f=iv.activePanes||[],g=b.id||(0,as.uuid)();for(let c=f.length-1;c>=0;c--){let h=f[c];if("object"==typeof h&&(h.canHandleIntent?.(a,b,{pane:h,index:c})||"documentList"===h.type&&h.schemaTypeName===b.type&&"_type == $type"===h.options.filter)){let f=function(a,{template:b,version:c,inspect:d,comment:e,task:f}){switch(a){case"create":return{template:b,version:c};case"edit":return{inspect:d,comment:e,task:f};default:return d5}}(a,b);return{panes:e.slice(0,c).concat([[{id:g,params:f,payload:d}]])}}}return{intent:a,params:b,payload:d}}let iy=(0,at.styled)(f.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,iz=(0,at.styled)(ap.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function iA(a){let b,g,h,i,j,k,l,m,n,o,p,q,r=(0,d.c)(39),{showChanges:t}=a,{documentId:u,schemaType:v,timelineError:w,timelineStore:x,value:y}=cQ(),{selectedReleaseId:z}=(0,f.usePerspective)(),[A,B]=(0,e.useState)(null),C=(0,f.useTimelineSelector)(x,iG),D=(0,f.useTimelineSelector)(x,iF),E=(0,f.useTimelineSelector)(x,iE),F=(0,f.useTimelineSelector)(x,iD),G=(0,f.useTimelineSelector)(x,iC),H="loading"===F,I=!E,{t:J}=(0,f.useTranslation)(s);r[0]!==D||r[1]!==u||r[2]!==I||r[3]!==v||r[4]!==y?(b={documentId:u,schemaType:v,FieldWrapper:iB,rootDiff:D,isComparingCurrent:I,value:y,showFromValue:!0},r[0]=D,r[1]=u,r[2]=I,r[3]=v,r[4]=y,r[5]=b):b=r[5];let K=b;if(z){let a;return r[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ap.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(ap.Card,{flex:1,padding:2,paddingTop:0,children:(0,c.jsx)(fz,{versionError:!0})})}),r[6]=a):a=r[6],a}return r[7]!==J?(g=J("changes.from.label"),r[7]=J,r[8]=g):g=r[8],r[9]!==g?(h=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:g}),r[9]=g,r[10]=h):h=r[10],r[11]!==G?(i=(0,c.jsx)(fC,{mode:"since",chunk:G,placement:"bottom-start"}),r[11]=G,r[12]=i):i=r[12],r[13]!==J?(j=J("changes.to.label"),r[13]=J,r[14]=j):j=r[14],r[15]!==j?(k=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:j}),r[15]=j,r[16]=k):k=r[16],r[17]!==C?(l=(0,c.jsx)(fC,{chunk:C,mode:"rev",placement:"bottom-end"}),r[17]=C,r[18]=l):l=r[18],r[19]!==h||r[20]!==i||r[21]!==k||r[22]!==l?(m=(0,c.jsx)(ap.Box,{padding:3,children:(0,c.jsxs)(iz,{paddingX:2,paddingBottom:2,children:[h,i,k,l]})}),r[19]=h,r[20]=i,r[21]=k,r[22]=l,r[23]=m):m=r[23],r[24]!==D||r[25]!==K||r[26]!==H||r[27]!==v||r[28]!==t||r[29]!==w?(n=t&&(0,c.jsx)(iH,{diff:D,documentContext:K,error:w,loading:H,schemaType:v}),r[24]=D,r[25]=K,r[26]=H,r[27]=v,r[28]=t,r[29]=w,r[30]=n):n=r[30],r[31]!==n?(o=(0,c.jsx)(iy,{"data-ui":"Scroller",ref:B,children:(0,c.jsx)(ap.Box,{flex:1,paddingX:3,height:"fill",children:n})}),r[31]=n,r[32]=o):o=r[32],r[33]!==A||r[34]!==o?(p=(0,c.jsx)(ap.Card,{flex:1,paddingX:2,paddingY:2,children:(0,c.jsx)(ap.BoundaryElementProvider,{element:A,children:o})}),r[33]=A,r[34]=o,r[35]=p):p=r[35],r[36]!==p||r[37]!==m?(q=(0,c.jsxs)(ap.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,p]}),r[36]=p,r[37]=m,r[38]=q):q=r[38],q}function iB(a){return(0,c.jsx)(f.ChangeFieldWrapper,{...a,hasRevertHover:!1})}function iC(a){return a.sinceTime}function iD(a){return a.selectionState}function iE(a){return a.onOlderRevision}function iF(a){return a.diff}function iG(a){return a.revTime}function iH(a){let b,e,g=(0,d.c)(9),{error:i,diff:j,documentContext:k,loading:l,schemaType:m}=a;if(i){let a;return g[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f.NoChanges,{}),g[0]=a):a=g[0],a}if(l){let a;return g[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f.LoadingBlock,{showText:!0}),g[1]=a):a=g[1],a}if(!j){let a;return g[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f.NoChanges,{}),g[2]=a):a=g[2],a}return g[3]!==j||g[4]!==m?(b=(0,c.jsx)(f.ChangeList,{diff:j,schemaType:m}),g[3]=j,g[4]=m,g[5]=b):b=g[5],g[6]!==k||g[7]!==b?(e=(0,c.jsx)(h.DocumentChangeContext.Provider,{value:k,children:b}),g[6]=k,g[7]=b,g[8]=e):e=g[8],e}function iI(a){let b,e,g,h,i,j,k,l,m=(0,d.c)(27),{event:n,isSelected:o,onSelect:p,optionsMenu:q}=a,{t:r}=(0,f.useTranslation)("studio");m[0]!==n?(b=!(0,f.isDeleteDocumentVersionEvent)(n)&&!(0,f.isDeleteDocumentGroupEvent)(n)&&!(0,f.isUnpublishDocumentEvent)(n)&&!(0,f.isScheduleDocumentVersionEvent)(n)&&!(0,f.isUnscheduleDocumentVersionEvent)(n),m[0]=n,m[1]=b):b=m[1];let s=b;m[2]!==n||m[3]!==s||m[4]!==p?(e=a=>{a.preventDefault(),a.stopPropagation(),s&&p(n)},m[2]=n,m[3]=s,m[4]=p,m[5]=e):e=m[5];let t=e;m[6]!==s||m[7]!==r?(g=s?"":r("changes.not-selectable"),m[6]=s,m[7]=r,m[8]=g):g=m[8];let u=s?"button":"div",v=s?"pointer":"default";return m[9]!==v?(h={cursor:v,width:"100%"},m[9]=v,m[10]=h):h=m[10],m[11]!==n?(i=(0,c.jsx)(f.Event,{event:n,showChangesBy:"tooltip"}),m[11]=n,m[12]=i):i=m[12],m[13]!==n.timestamp||m[14]!==t||m[15]!==o||m[16]!==u||m[17]!==h||m[18]!==i?(j=(0,c.jsx)(ap.Card,{as:u,onClick:t,padding:2,pressed:o,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":n.timestamp,style:h,children:i}),m[13]=n.timestamp,m[14]=t,m[15]=o,m[16]=u,m[17]=h,m[18]=i,m[19]=j):j=m[19],m[20]!==s||m[21]!==g||m[22]!==j?(k=(0,c.jsx)(ao.Tooltip,{content:g,disabled:s,children:j}),m[20]=s,m[21]=g,m[22]=j,m[23]=k):k=m[23],m[24]!==q||m[25]!==k?(l=(0,c.jsxs)(ap.Flex,{gap:1,children:[k,q]}),m[24]=q,m[25]=k,m[26]=l):l=m[26],l}function iJ(a){let b,e,h,i,j,k,l,m,n,o,p,q,r=(0,d.c)(44),{event:t}=a,{t:u}=(0,f.useTranslation)(s),{t:v}=(0,f.useTranslation)(),w=(0,ap.usePortal)(),{params:x,setParams:y}=dH(),z=(0,f.useSetPerspective)(),{document:A}=(0,f.useWorkspace)(),{drafts:B}=A,{enabled:C}=B;r[0]!==t.id||r[1]!==t.versionId||r[2]!==t.versionRevisionId||r[3]!==x||r[4]!==y?(b=()=>{y({...x,rev:t.versionRevisionId||"@lastPublished",since:void 0,historyEvent:t.id,historyVersion:(0,g.getVersionFromId)(t.versionId)})},r[0]=t.id,r[1]=t.versionId,r[2]=t.versionRevisionId,r[3]=x,r[4]=y,r[5]=b):b=r[5];let D=b;r[6]!==t.versionRevisionId||r[7]!==C||r[8]!==x||r[9]!==y||r[10]!==z?(e=()=>{y({...x,rev:t.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{z(C?"drafts":"published")},100)},r[6]=t.versionRevisionId,r[7]=C,r[8]=x,r[9]=y,r[10]=z,r[11]=e):e=r[11];let E=e;r[12]!==t.release?(h=a=>{let{children:b}=a;return(0,c.jsx)(f.VersionInlineBadge,{$tone:t.release?(0,f.isReleaseDocument)(t.release)?(0,f.getReleaseTone)(t.release):"default":void 0,children:b})},r[12]=t.release,r[13]=h):h=r[13];let F=h;r[14]!==t.release?(i=t.release&&!(0,f.isReleaseDocument)(t.release),r[14]=t.release,r[15]=i):i=r[15];let G=i,H=`timeline-item-menu-button-${t.versionId}`;r[16]!==u?(j=u("timeline-item.menu-button.aria-label"),r[16]=u,r[17]=j):j=r[17],r[18]!==t.release||r[19]!==G||r[20]!==u?(k=G?u("timeline-item.not-found-release.tooltip",{releaseId:t.release?._id?(0,f.getReleaseIdFromReleaseDocumentId)(t.release._id):void 0}):u("timeline-item.menu-button.tooltip"),r[18]=t.release,r[19]=G,r[20]=u,r[21]=k):k=r[21],r[22]!==k?(l={content:k},r[22]=k,r[23]=l):l=r[23],r[24]!==G||r[25]!==j||r[26]!==l?(m=(0,c.jsx)(f.ContextMenuButton,{"aria-label":j,tooltipProps:l,disabled:G}),r[24]=G,r[25]=j,r[26]=l,r[27]=m):m=r[27],r[28]!==F||r[29]!==t.release||r[30]!==t.versionRevisionId||r[31]!==E||r[32]!==D||r[33]!==u||r[34]!==v?(n=(0,c.jsx)(ap.Menu,{padding:1,children:t.release?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ay.IntentLink,{intent:f.RELEASES_INTENT,params:{id:(0,f.getReleaseIdFromReleaseDocumentId)(t.release._id)},style:{textDecoration:"none"},children:(0,c.jsx)(ap.MenuItem,{padding:3,children:(0,c.jsx)(ap.Flex,{align:"center",justify:"flex-start",children:(0,c.jsx)(ap.Text,{size:1,style:{textDecoration:"none"},children:(0,c.jsx)(f.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,c.jsx)(F,{children:b})}},i18nKey:"events.open.release",values:{releaseTitle:t.release.metadata?.title||v("release.placeholder-untitled-release")},t:u})})})})}),(0,c.jsx)(ap.MenuItem,{onClick:D,children:(0,c.jsx)(ap.Flex,{align:"center",justify:"flex-start",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,c.jsx)(F,{children:b})}},i18nKey:"events.inspect.release",values:{releaseTitle:t.release.metadata?.title||v("release.placeholder-untitled-release")},t:u})})})})]}):(0,c.jsx)(ap.MenuItem,{onClick:E,disabled:!t.versionRevisionId,children:(0,c.jsx)(ap.Flex,{align:"center",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{components:{VersionBadge:iK},i18nKey:"events.open.draft",t:u})})})})}),r[28]=F,r[29]=t.release,r[30]=t.versionRevisionId,r[31]=E,r[32]=D,r[33]=u,r[34]=v,r[35]=n):n=r[35];let I=!w.elements?.[fB]||fB;return r[36]===Symbol.for("react.memo_cache_sentinel")?(o=["bottom-end","bottom-start"],r[36]=o):o=r[36],r[37]!==I?(p={portal:I,placement:"bottom",fallbackPlacements:o},r[37]=I,r[38]=p):p=r[38],r[39]!==m||r[40]!==n||r[41]!==p||r[42]!==H?(q=(0,c.jsx)(ao.MenuButton,{id:H,button:m,menu:n,popover:p}),r[39]=m,r[40]=n,r[41]=p,r[42]=H,r[43]=q):q=r[43],q}function iK(a){let{children:b}=a;return(0,c.jsx)(f.VersionInlineBadge,{$tone:"caution",children:b})}let iL=av.motion.create(ap.Box),iM={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},iN=a=>{let b,g,h,i,j,k,l,m,n,o,p,q,r=(0,d.c)(38),{events:s,hasMoreEvents:t,selectedEventId:u,onLoadMore:v,onSelect:w,listMaxHeight:x,fetchEventChildren:y}=a,z=void 0===x?"calc(100vh - 280px)":x,[A,B]=(0,e.useState)(!1),{t:C}=(0,f.useTranslation)("studio");r[0]!==s||r[1]!==u?(b=()=>{if(u){let a=s.find(a=>a.id===u);if(a&&"parentId"in a&&a.parentId)return new Set([a.parentId])}return new Set},r[0]=s,r[1]=u,r[2]=b):b=r[2];let[D,E]=(0,e.useState)(b);r[3]===Symbol.for("react.memo_cache_sentinel")?(g=new Set,r[3]=g):g=r[3];let[F,G]=(0,e.useState)(g);r[4]!==s||r[5]!==D?(h=s.filter(a=>(0,f.isCreateDocumentVersionEvent)(a)&&a.parentId?s[s.length-1].id===a.id||D.has(a.parentId):!(0,f.isEditDocumentVersionEvent)(a)||!a.parentId||D.has(a.parentId)),r[4]=s,r[5]=D,r[6]=h):h=r[6];let H=h;r[7]!==y?(i=a=>async()=>{let b=a.id,c=!1;E(a=>{let d=new Set(a);return a.has(b)?d.delete(b):(c=!0,d.add(b)),d}),c&&(G(a=>{let c=new Set(a);return c.add(b),c}),await y(a),G(a=>{let c=new Set(a);return c.delete(b),c}))},r[7]=y,r[8]=i):i=r[8];let I=i;r[9]!==w?(j=a=>{w(a)},r[9]=w,r[10]=j):j=r[10];let J=j;r[11]!==D||r[12]!==I?(k=a=>{let b=(0,f.getDocumentVariantType)(a.documentId);return(0,f.isPublishDocumentVersionEvent)(a)&&"published"===b?(0,c.jsx)(iJ,{event:a}):(0,f.isPublishDocumentVersionEvent)(a)&&"draft"===b&&a.creationEvent||(0,f.isDeleteDocumentVersionEvent)(a)&&a.creationEvent?(0,c.jsx)(fh,{isExpanded:D.has(a.id),onExpand:I(a)}):null},r[11]=D,r[12]=I,r[13]=k):k=r[13];let K=k;r[14]!==H.length||r[15]!==F||r[16]!==J||r[17]!==t||r[18]!==K||r[19]!==u?(l=(a,b)=>{let{activeIndex:d}=b,e=(0,f.isCreateDocumentVersionEvent)(a)&&a.parentId&&F.has(a.parentId),g=d===H.length-1;return e?(0,c.jsx)(iL,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,c.jsx)(ap.Flex,{align:"center",justify:"center",style:{height:57},children:(0,c.jsx)(ap.Spinner,{})})}):(0,c.jsxs)(iL,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in a?iM:void 0,paddingLeft:((0,f.isEditDocumentVersionEvent)(a)||(0,f.isCreateDocumentVersionEvent)(a))&&a.parentId&&!g?4:1,children:[(0,c.jsx)(iI,{event:a,isSelected:a.id===u,onSelect:J,optionsMenu:K(a)}),g&&t&&(0,c.jsx)(f.LoadingBlock,{})]},a.timestamp)},r[14]=H.length,r[15]=F,r[16]=J,r[17]=t,r[18]=K,r[19]=u,r[20]=l):l=r[20];let L=l;if(r[21]===Symbol.for("react.memo_cache_sentinel")?(n=()=>B(!0),m=[],r[21]=m,r[22]=n):(m=r[21],n=r[22]),(0,e.useEffect)(n,m),r[23]!==H||r[24]!==u){let a;r[26]!==u?(a=a=>a.id===u,r[26]=u,r[27]=a):a=r[27],o=H.findIndex(a),r[23]=H,r[24]=u,r[25]=o}else o=r[25];let M=o,N=!M||A;return r[28]!==H||r[29]!==z||r[30]!==v||r[31]!==L||r[32]!==M||r[33]!==C?(p=H.length>0?(0,c.jsx)(fj,{direction:"column",$maxHeight:z,id:"timeline-list-wrapper",children:(0,c.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:C("timeline.list.aria-label"),autoFocus:"list",initialIndex:M,initialScrollAlign:"center",itemHeight:57,items:H,onEndReached:v,onEndReachedIndexOffset:20,overscan:5,renderItem:L,wrapAround:!1})}):(0,c.jsxs)(ap.Stack,{padding:3,space:3,children:[(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:C("timeline.error.no-document-history-title")}),(0,c.jsx)(ap.Text,{muted:!0,size:1,children:C("timeline.error.no-document-history-description")})]}),r[28]=H,r[29]=z,r[30]=v,r[31]=L,r[32]=M,r[33]=C,r[34]=p):p=r[34],r[35]!==N||r[36]!==p?(q=(0,c.jsx)(fk,{$visible:N,"data-ui":"timeline",children:p}),r[35]=N,r[36]=p,r[37]=q):q=r[37],q};iN.displayName="EventsTimeline";let iO=(0,at.styled)(ao.Popover)`
  overflow: hidden;
  overflow: clip;
`,iP={timestamp:{dateStyle:"medium",timeStyle:"short"}};function iQ(a){let b,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w=(0,d.c)(58),{event:x,events:y,mode:z,placement:A}=a,{setTimelineRange:B}=cQ(),[C,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(null),[G,H]=(0,e.useState)(null),I=(0,aq.useToast)(),{nextCursor:J,loading:K,error:L,findRangeForRevision:M,findRangeForSince:N,loadMoreEvents:O,expandEvent:P}=(0,f.useEvents)(),{t:Q}=(0,f.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{D(!0)},w[0]=b):b=w[0];let R=b;w[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{D(!1)},w[1]=g):g=w[1];let S=g;w[2]!==E||w[3]!==C?(h=a=>{C&&("Escape"===a.key||"Tab"===a.key)&&(S(),E?.focus())},w[2]=E,w[3]=C,w[4]=h):h=w[4],(0,ap.useGlobalKeyDown)(h),w[5]!==E||w[6]!==G?(i=()=>[E,G],w[5]=E,w[6]=G,w[7]=i):i=w[7],(0,ap.useClickOutsideEvent)(C&&S,i),w[8]!==M||w[9]!==B||w[10]!==Q||w[11]!==I?(k=a=>{try{(()=>{if((0,f.isDeleteDocumentVersionEvent)(a)||(0,f.isDeleteDocumentGroupEvent)(a)||(0,f.isUnpublishDocumentEvent)(a)||(0,f.isScheduleDocumentVersionEvent)(a)||(0,f.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=M(a?.id);B(b,c),S()})()}catch(a){I.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[8]=M,w[9]=B,w[10]=Q,w[11]=I,w[12]=k):k=w[12];let T=k;w[13]!==N||w[14]!==B||w[15]!==Q||w[16]!==I?(l=a=>{try{let[b,c]=N(a.id);B(b,c),S()}catch(a){I.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[13]=N,w[14]=B,w[15]=Q,w[16]=I,w[17]=l):l=w[17];let U=l;w[18]!==O||w[19]!==K||w[20]!==J?(m=()=>{!K&&J&&O()},w[18]=O,w[19]=K,w[20]=J,w[21]=m):m=w[21];let V=m;a:{let a;if(L){let a;w[22]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fz,{}),w[22]=a):a=w[22],n=a;break a}let b=!!J,d=x?.id,e="rev"===z?T:U;w[23]!==y||w[24]!==P||w[25]!==V||w[26]!==d||w[27]!==e||w[28]!==b?(a=(0,c.jsx)(iN,{events:y,fetchEventChildren:P,hasMoreEvents:b,selectedEventId:d,onLoadMore:V,onSelect:e}),w[23]=y,w[24]=P,w[25]=V,w[26]=d,w[27]=e,w[28]=b,w[29]=a):a=w[29],n=a}let W=n;w[30]!==x||w[31]!==Q?(o=x?Q(f.TIMELINE_ITEM_I18N_KEY_MAPPING[x.documentVariantType][x.type],{context:"timestamp",timestamp:new Date(x.timestamp),formatParams:iP}):Q("timeline.latest-revision"),w[30]=x,w[31]=Q,w[32]=o):o=w[32];let X=o;w[33]!==x||w[34]!==y||w[35]!==Q?(p=x?Q(f.TIMELINE_ITEM_I18N_KEY_MAPPING[x.documentVariantType][x.type],{context:"timestamp",timestamp:new Date(x.timestamp),formatParams:iP}):y.length>0?Q("timeline.since-version-missing"):Q("timeline.no-previous-events"),w[33]=x,w[34]=y,w[35]=Q,w[36]=p):p=w[36];let Y="rev"===z?X:p;w[37]!==G?(q={"timeline-menu":G},w[37]=G,w[38]=q):q=w[38];let Z=q,$=C&&W,_=C?"timeline-menu-close-button":"timeline-menu-open-button",aa=K||!y.length,ab=C?S:R;return w[39]===Symbol.for("react.memo_cache_sentinel")?(r={maxWidth:"100%"},w[39]=r):r=w[39],w[40]!==Y||w[41]!==K||w[42]!==Q?(s=K?Q("timeline.loading-history"):Y,w[40]=Y,w[41]=K,w[42]=Q,w[43]=s):s=w[43],w[44]!==C||w[45]!==_||w[46]!==aa||w[47]!==ab||w[48]!==s?(t=(0,c.jsx)(ap.Flex,{width:"fill",children:(0,c.jsx)(ao.Button,{"data-testid":_,disabled:aa,mode:"ghost",onClick:ab,ref:F,selected:C,width:"fill",tooltipProps:null,justify:"space-between",style:r,iconRight:j.ChevronDownIcon,text:s})}),w[44]=C,w[45]=_,w[46]=aa,w[47]=ab,w[48]=s,w[49]=t):t=w[49],w[50]!==C||w[51]!==A||w[52]!==$||w[53]!==t?(u=(0,c.jsx)(iO,{"data-testid":"timeline-menu",constrainSize:!0,content:$,"data-ui":"versionMenu",open:C,placement:A,matchReferenceWidth:!0,portal:!0,ref:H,children:t}),w[50]=C,w[51]=A,w[52]=$,w[53]=t,w[54]=u):u=w[54],w[55]!==Z||w[56]!==u?(v=(0,c.jsx)(ap.PortalProvider,{__unstable_elements:Z,children:u}),w[55]=Z,w[56]=u,w[57]=v):v=w[57],v}let iR=(0,at.styled)(f.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,iS=(0,at.styled)(ap.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,iT=(0,at.styled)(ap.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,iU={diff:null,loading:!0,error:null},iV=()=>{let a,b,e,g,i,j,k,l,m,n,o,p=(0,d.c)(31),{documentId:q,schemaType:r,editState:t,displayed:u}=cQ(),{selectedPerspective:v,selectedPerspectiveName:w,selectedReleaseId:x}=(0,f.usePerspective)(),{t:y}=(0,f.useTranslation)(s);p[0]!==u||p[1]!==t?.published?(a=(0,au.diffInput)((0,au.wrap)(t?.published??{},{author:""}),(0,au.wrap)(u??{},{author:""})),p[0]=u,p[1]=t?.published,p[2]=a):a=p[2];let z=a;return(!x||t?.version)&&("drafts"!==v||t?.draft)&&"published"!==w&&u?._rev?(p[3]!==y?(b=y("events.compare-with-published.title"),p[3]=y,p[4]=b):b=p[4],p[5]!==b?(e=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:b}),p[5]=b,p[6]=e):e=p[6],p[7]!==v?(g=(0,f.isReleaseDocument)(v)?v.metadata?.title:"draft",p[7]=v,p[8]=g):g=p[8],p[9]!==g?(i={version:g},p[9]=g,p[10]=i):i=p[10],p[11]!==y||p[12]!==i?(j=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:(0,c.jsx)(f.Translate,{i18nKey:"events.compare-with-published.description",t:y,values:i})}),p[11]=y,p[12]=i,p[13]=j):j=p[13],p[14]!==e||p[15]!==j?(k=(0,c.jsx)(ap.Card,{borderBottom:!0,paddingBottom:3,children:(0,c.jsxs)(ap.Stack,{space:3,paddingTop:1,children:[e,j]})}),p[14]=e,p[15]=j,p[16]=k):k=p[16],p[17]!==u||p[18]!==q||p[19]!==z||p[20]!==r?(l={documentId:q,schemaType:r,rootDiff:z,isComparingCurrent:!0,FieldWrapper:i$,value:u,showFromValue:!0},p[17]=u,p[18]=q,p[19]=z,p[20]=r,p[21]=l):l=p[21],p[22]!==z||p[23]!==r?(m=(0,c.jsx)(ap.Box,{paddingY:1,children:(0,c.jsx)(f.ChangeList,{diff:z,schemaType:r})}),p[22]=z,p[23]=r,p[24]=m):m=p[24],p[25]!==l||p[26]!==m?(n=(0,c.jsx)(h.DocumentChangeContext.Provider,{value:l,children:m}),p[25]=l,p[26]=m,p[27]=n):n=p[27],p[28]!==k||p[29]!==n?(o=(0,c.jsxs)(ap.Stack,{space:2,marginBottom:3,children:[k,n]}),p[28]=k,p[29]=n,p[30]=o):o=p[30],o):null};function iW(a){let b,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=(0,d.c)(83),{showChanges:z}=a,{documentId:A,schemaType:B,timelineError:C,value:D,formState:E}=cQ(),[F,G]=(0,e.useState)(null),{events:H,revision:I,sinceRevision:J,getChangesList:K}=(0,f.useEvents)(),L=!I?.revisionId;y[0]!==K?(b=K(),y[0]=K,y[1]=b):b=y[1];let M=b,{diff:N,loading:O,error:P}=(0,ax.useObservable)(M,iU),{t:Q}=(0,f.useTranslation)("studio");y[2]!==N||y[3]!==A||y[4]!==E?.readOnly||y[5]!==L||y[6]!==B||y[7]!==D?(g=()=>({documentId:A,schemaType:B,FieldWrapper:iX,rootDiff:N,isComparingCurrent:L&&!E?.readOnly,value:D,showFromValue:!0}),y[2]=N,y[3]=A,y[4]=E?.readOnly,y[5]=L,y[6]=B,y[7]=D,y[8]=g):g=y[8],y[9]!==g?(h=g(),y[9]=g,y[10]=h):h=y[10];let R=h;a:{let a,b,c;if(!H){let a;y[11]===Symbol.for("react.memo_cache_sentinel")?(a=[null,null],y[11]=a):a=y[11],i=a;break a}y[12]!==H||y[13]!==J?.revisionId?(a=H.find(a=>a.id===J?.revisionId)||null,y[12]=H,y[13]=J?.revisionId,y[14]=a):a=y[14],y[15]!==H||y[16]!==I?.revisionId?(b=H.find(a=>a.id===I?.revisionId)||H[0],y[15]=H,y[16]=I?.revisionId,y[17]=b):b=y[17],y[18]!==a||y[19]!==b?(c=[a,b],y[18]=a,y[19]=b,y[20]=c):c=y[20],i=c}let[S,T]=i;b:{let a;if(!T){let a;y[21]!==H?(a=H.slice(1),y[21]=H,y[22]=a):a=y[22],j=a;break b}if(y[23]!==H||y[24]!==T){let b;y[26]!==T?(b=a=>"parentId"in T&&"parentId"in a&&a.parentId===T.parentId||"parentId"in a&&T.id===a.parentId?{...a,parentId:void 0}:a,y[26]=T,y[27]=b):b=y[27],a=H.slice(H.indexOf(T)+1).map(b),y[23]=H,y[24]=T,y[25]=a}else a=y[25];j=a}let U=j;if(!H.length){let a,b,d,e,f;return y[28]!==Q?(a=Q("timeline.error.no-document-history-title"),y[28]=Q,y[29]=a):a=y[29],y[30]!==a?(b=(0,c.jsx)(ap.Text,{size:1,weight:"medium",children:a}),y[30]=a,y[31]=b):b=y[31],y[32]!==Q?(d=Q("timeline.error.no-document-history-description"),y[32]=Q,y[33]=d):d=y[33],y[34]!==d?(e=(0,c.jsx)(ap.Text,{muted:!0,size:1,children:d}),y[34]=d,y[35]=e):e=y[35],y[36]!==b||y[37]!==e?(f=(0,c.jsx)(ap.Box,{paddingX:2,children:(0,c.jsxs)(ap.Stack,{padding:3,space:3,children:[b,e]})}),y[36]=b,y[37]=e,y[38]=f):f=y[38],f}y[39]===Symbol.for("react.memo_cache_sentinel")?(k={position:"relative"},y[39]=k):k=y[39],y[40]!==Q?(l=Q("changes.inspector.from-label"),y[40]=Q,y[41]=l):l=y[41],y[42]!==l?(m=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:l}),y[42]=l,y[43]=m):m=y[43];let V=S||null;y[44]!==U||y[45]!==V?(n=(0,c.jsx)(iQ,{event:V,events:U,mode:"since",placement:"bottom-start"}),y[44]=U,y[45]=V,y[46]=n):n=y[46],y[47]!==Q?(o=Q("changes.inspector.to-label"),y[47]=Q,y[48]=o):o=y[48],y[49]!==o?(p=(0,c.jsx)(ap.Text,{size:1,muted:!0,children:o}),y[49]=o,y[50]=p):p=y[50];let W=T||null;return y[51]!==H||y[52]!==W?(q=(0,c.jsx)(iQ,{event:W,events:H,mode:"rev",placement:"bottom-end"}),y[51]=H,y[52]=W,y[53]=q):q=y[53],y[54]!==n||y[55]!==p||y[56]!==q||y[57]!==m?(r=(0,c.jsxs)(iS,{paddingX:2,paddingBottom:2,children:[m,n,p,q]}),y[54]=n,y[55]=p,y[56]=q,y[57]=m,y[58]=r):r=y[58],y[59]!==O||y[60]!==Q?(s=O&&(0,c.jsx)(av.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,c.jsxs)(iT,{justify:"center",align:"center",gap:2,children:[(0,c.jsx)(ap.Text,{muted:!0,size:0,children:Q("changes.loading-changes")}),(0,c.jsx)(ap.Spinner,{size:0})]})}),y[59]=O,y[60]=Q,y[61]=s):s=y[61],y[62]!==r||y[63]!==s?(t=(0,c.jsxs)(ap.Box,{padding:3,style:k,children:[r,s]}),y[62]=r,y[63]=s,y[64]=t):t=y[64],y[65]!==P||y[66]!==R||y[67]!==I?.loading||y[68]!==B||y[69]!==z||y[70]!==S||y[71]!==J?.loading||y[72]!==C||y[73]!==T?.id?(u=z&&(0,c.jsx)(iY,{documentContext:R,error:C||P,loading:I?.loading||J?.loading||!1,schemaType:B,sameRevisionSelected:S?.id===T?.id,sinceEvent:S}),y[65]=P,y[66]=R,y[67]=I?.loading,y[68]=B,y[69]=z,y[70]=S,y[71]=J?.loading,y[72]=C,y[73]=T?.id,y[74]=u):u=y[74],y[75]!==u?(v=(0,c.jsx)(iR,{"data-ui":"Scroller",ref:G,children:(0,c.jsx)(ap.Box,{flex:1,paddingX:3,height:"fill",children:u})}),y[75]=u,y[76]=v):v=y[76],y[77]!==F||y[78]!==v?(w=(0,c.jsx)(ap.Card,{flex:1,paddingX:2,paddingY:2,children:(0,c.jsx)(ap.BoundaryElementProvider,{element:F,children:v})}),y[77]=F,y[78]=v,y[79]=w):w=y[79],y[80]!==t||y[81]!==w?(x=(0,c.jsxs)(ap.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[t,w]}),y[80]=t,y[81]=w,y[82]=x):x=y[82],x}function iX(a){return a.path.length>0?(0,c.jsx)(f.ChangeFieldWrapper,{...a}):a.children}function iY(a){let b,e,g=(0,d.c)(15),{error:i,documentContext:j,loading:k,schemaType:l,sameRevisionSelected:m,sinceEvent:n}=a;if(i){let a,b,d;return g[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(iV,{}),g[0]=a):a=g[0],g[1]!==i||g[2]!==n?.type?(b=n?.type!=="historyCleared"&&(0,c.jsx)(f.ChangesError,{error:i}),g[1]=i,g[2]=n?.type,g[3]=b):b=g[3],g[4]!==b?(d=(0,c.jsxs)(c.Fragment,{children:[a,b]}),g[4]=b,g[5]=d):d=g[5],d}if(k){let a;return g[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(f.LoadingBlock,{showText:!0}),g[6]=a):a=g[6],a}if(m){let a;return g[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(iZ,{}),g[7]=a):a=g[7],a}if(!j.rootDiff){let a;return g[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(av.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,c.jsx)(f.NoChanges,{})}),g[8]=a):a=g[8],a}return g[9]!==j.rootDiff||g[10]!==l?(b=(0,c.jsx)(ap.Box,{paddingY:1,children:(0,c.jsx)(f.ChangeList,{diff:j.rootDiff,schemaType:l})}),g[9]=j.rootDiff,g[10]=l,g[11]=b):b=g[11],g[12]!==j||g[13]!==b?(e=(0,c.jsx)(h.DocumentChangeContext.Provider,{value:j,children:b}),g[12]=j,g[13]=b,g[14]=e):e=g[14],e}function iZ(){let a,b,e,g,h,i,j,k=(0,d.c)(12),{t:l}=(0,f.useTranslation)("");return k[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:1},b={opacity:0},e={delay:.2,duration:.2},k[0]=a,k[1]=b,k[2]=e):(a=k[0],b=k[1],e=k[2]),k[3]!==l?(g=l("changes.same-revision-selected-title"),k[3]=l,k[4]=g):g=k[4],k[5]!==g?(h=(0,c.jsx)(ap.Text,{size:1,weight:"medium",as:"h3",children:g}),k[5]=g,k[6]=h):h=k[6],k[7]!==l?(i=(0,c.jsx)(ap.Text,{as:"p",size:1,muted:!0,children:(0,c.jsx)(f.Translate,{i18nKey:"changes.same-revision-selected-description",t:l})}),k[7]=l,k[8]=i):i=k[8],k[9]!==h||k[10]!==i?(j=(0,c.jsx)(av.motion.div,{animate:a,initial:b,transition:e,children:(0,c.jsxs)(ap.Stack,{space:3,paddingTop:2,children:[h,i]})}),k[9]=h,k[10]=i,k[11]=j):j=k[11],j}function i$(a){return a.children}let i_=(0,at.styled)(f.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function i0(a){let b,g,h,i=(0,d.c)(21),{showList:j}=a,[k,l]=(0,e.useState)(null),[m,n]=(0,e.useState)(0),{setTimelineRange:o}=cQ();i[0]!==m?(b=a=>{!m&&a&&(n(a.clientHeight?a.clientHeight-1:0),l(a))},i[0]=m,i[1]=b):b=i[1];let p=b,{events:q,nextCursor:r,loading:s,error:t,revision:u,loadMoreEvents:v,findRangeForRevision:w,expandEvent:x}=(0,f.useEvents)(),{t:y}=(0,f.useTranslation)("studio"),z=(0,aq.useToast)();i[2]!==w||i[3]!==o||i[4]!==y||i[5]!==z?(g=a=>{try{(()=>{if((0,f.isDeleteDocumentVersionEvent)(a)||(0,f.isDeleteDocumentGroupEvent)(a)||(0,f.isUnpublishDocumentEvent)(a)||(0,f.isScheduleDocumentVersionEvent)(a)||(0,f.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=w(a.id);o(b,c)})()}catch(a){z.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},i[2]=w,i[3]=o,i[4]=y,i[5]=z,i[6]=g):g=i[6];let A=g,B=s&&!q.length;return i[7]!==t||i[8]!==q||i[9]!==x||i[10]!==p||i[11]!==B||i[12]!==m||i[13]!==v||i[14]!==s||i[15]!==r||i[16]!==u?.revisionId||i[17]!==k||i[18]!==A||i[19]!==j?(h=(0,c.jsx)(ap.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(ap.Card,{flex:1,padding:2,paddingTop:0,children:t?(0,c.jsx)(fz,{}):(0,c.jsx)(ap.BoundaryElementProvider,{element:k,children:(0,c.jsxs)(i_,{"data-ui":"Scroller",ref:p,children:[m&&j&&!B?(0,c.jsx)(iN,{events:q,fetchEventChildren:x,hasMoreEvents:!!r,selectedEventId:u?.revisionId||q[0]?.id,onLoadMore:v,onSelect:A,listMaxHeight:`${m}px`}):null,s&&(0,c.jsx)(f.LoadingBlock,{})]})})})}),i[7]=t,i[8]=q,i[9]=x,i[10]=p,i[11]=B,i[12]=m,i[13]=v,i[14]=s,i[15]=r,i[16]=u?.revisionId,i[17]=k,i[18]=A,i[19]=j,i[20]=h):h=i[20],h}let i1=(0,at.styled)(f.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function i2(a){let b,g,h,i,j=(0,d.c)(20),{showList:k}=a,{timelineError:l,setTimelineRange:m,timelineStore:n}=cQ(),{selectedReleaseId:o}=(0,f.usePerspective)(),[p,q]=(0,e.useState)(null),[r,s]=(0,e.useState)(0);j[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{a?.clientHeight&&(s(a.clientHeight-1),q(a))},j[0]=b):b=j[0];let t=b,u=(0,f.useTimelineSelector)(n,i6),v=(0,f.useTimelineSelector)(n,i5),w=(0,f.useTimelineSelector)(n,i4),x=(0,f.useTimelineSelector)(n,i3),{t:y}=(0,f.useTranslation)("studio"),z=(0,aq.useToast)();j[1]!==m||j[2]!==y||j[3]!==n||j[4]!==z?(g=a=>{try{(()=>{let[b,c]=n?.findRangeForRev(a)||[null,null];m(b,c)})()}catch(a){z.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},j[1]=m,j[2]=y,j[3]=n,j[4]=z,j[5]=g):g=j[5];let A=g;j[6]!==x||j[7]!==n?(h=()=>{x||n?.loadMore()},j[6]=x,j[7]=n,j[8]=h):h=j[8];let B=h;return j[9]!==u||j[10]!==B||j[11]!==w||j[12]!==r||j[13]!==v||j[14]!==p||j[15]!==A||j[16]!==o||j[17]!==k||j[18]!==l?(i=(0,c.jsx)(ap.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(ap.Card,{flex:1,padding:2,paddingTop:0,children:l||o?(0,c.jsx)(fz,{versionError:!!o}):(0,c.jsx)(ap.BoundaryElementProvider,{element:p,children:(0,c.jsx)(i1,{"data-ui":"Scroller",ref:t,children:r&&k?(0,c.jsx)(fy,{chunks:u,hasMoreChunks:w,lastChunk:v,onLoadMore:B,onSelect:A,listMaxHeight:`${r}px`}):null})})})}),j[9]=u,j[10]=B,j[11]=w,j[12]=r,j[13]=v,j[14]=p,j[15]=A,j[16]=o,j[17]=k,j[18]=l,j[19]=i):i=j[19],i}function i3(a){return a.isLoading}function i4(a){return a.hasMoreChunks}function i5(a){return a.realRevChunk}function i6(a){return a.chunks}let i7=(0,at.styled)(ap.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,i8=["history","review"],i9={error:j.ErrorOutlineIcon,warning:j.WarningOutlineIcon,info:j.InfoOutlineIcon},ja={error:"critical",warning:"caution",info:"primary"};function jb(a){let b,f,g,h,i=(0,d.c)(17),{marker:j,onOpen:k,schemaType:l,value:m}=a;i[0]!==j.path||i[1]!==k?(b=()=>k(j.path),i[0]=j.path,i[1]=k,i[2]=b):b=i[2];let n=b,[o,p]=(0,e.useState)(null),q=i9[j.level];return i[3]!==o?(f=o&&(0,c.jsx)(ap.Card,{padding:3,radius:2,tone:"critical",children:(0,c.jsx)(ap.Text,{size:1,children:o.error.message})}),i[3]=o,i[4]=f):f=i[4],i[5]!==q||i[6]!==o||i[7]!==n||i[8]!==j.level||i[9]!==j.message||i[10]!==j.path||i[11]!==l||i[12]!==m?(g=!o&&(0,c.jsx)(ap.Card,{__unstable_focusRing:!0,as:"button",onClick:n,padding:3,radius:2,tone:ja[j.level],children:(0,c.jsxs)(ap.Flex,{align:"flex-start",gap:3,children:[(0,c.jsx)(ap.Box,{flex:"none",children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(q,{})})}),(0,c.jsxs)(ap.Stack,{flex:1,space:2,children:[(0,c.jsx)(jc,{path:j.path,schemaType:l,value:m}),(0,c.jsx)(ap.Text,{muted:!0,size:1,children:j.message})]})]})}),i[5]=q,i[6]=o,i[7]=n,i[8]=j.level,i[9]=j.message,i[10]=j.path,i[11]=l,i[12]=m,i[13]=g):g=i[13],i[14]!==f||i[15]!==g?(h=(0,c.jsxs)(ao.ErrorBoundary,{onCatch:p,children:[f,g]}),i[14]=f,i[15]=g,i[16]=h):h=i[16],h}function jc(a){let b,e,g,h=(0,d.c)(8),{path:i,schemaType:j,value:k}=a;a:{try{let a;h[0]!==i||h[1]!==j||h[2]!==k?(a=function(a){let{path:b,schemaType:c,value:d}=a,e=[],g=c,h=d;for(let a of b){if("string"==typeof a){if(!(0,f.isRecord)(h)&&void 0!==h)throw Error(`Parent value is not an object, cannot get path segment: .${a}`);if("object"!==g.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${a}`);h=h?.[a];let b=g.fields.find(b=>b.name===a);if(!b)return e.push({name:a}),e;g=b.type,e.push(g);continue}if("number"==typeof a){if(!(0,f.isArray)(h)&&void 0!==h)throw Error(`Parent value is not an array, cannot get path segment: [${a}]`);if("array"!==g.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${a}]`);h=h?.[a];let b=g.of.find(a=>"string"==typeof h?"string"===a.jsonType:"number"==typeof h?"number"===a.jsonType:"boolean"==typeof h?"boolean"===a.jsonType:!!(0,f.isRecord)(h)&&a.name===h?._type);if(!b)throw Error(`Item type not found: [${a}]`);g=b,e.push(g);continue}if((0,f.isRecord)(a)&&a._key){if(typeof h>"u")return e;if(!(0,f.isArray)(h))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${a}]`);if("array"!==g.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${a}`);if(typeof(h=(h??[]).find(b=>(0,f.isRecord)(b)&&b._key===a._key))>"u")return e;if(!(0,f.isRecord)(h))throw Error(`Array item not found: [_key == ${a._key}]`);let b=g.of.find(a=>(0,f.isRecord)(h)&&a.name===h?._type);if(!b)throw Error(`Array item type not found: .${h?._type}`);g=b,e.push(g);continue}throw Error(`Invalid path segment: ${JSON.stringify(a)}`)}return e}({path:i,schemaType:j,value:k}),h[0]=i,h[1]=j,h[2]=k,h[3]=a):a=h[3],b=a;break a}catch(a){console.error(a)}b=null}let l=b;return l?.length?(h[4]!==l?(e=l.map(jd),h[4]=l,h[5]=e):e=h[5],h[6]!==e?(g=(0,c.jsx)(ap.Text,{size:1,children:e}),h[6]=e,h[7]=g):g=h[7],g):null}function jd(a,b){return(0,c.jsxs)(e.Fragment,{children:[b>0&&(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,c.jsx)("span",{style:{fontWeight:500},children:a.title||a.name})]},b)}function je(a){return{level:a.level,message:a.message,path:a.path}}let jf={},jg=ay.route.create("/",[ay.route.intents("/intent"),ay.route.create("/edit/:type/:editDocumentId",[ay.route.create({path:"/:params",transform:{params:{toState:function(a){try{return JSON.parse(decodeURIComponent(a))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(a){return JSON.stringify(a)}}}})]),ay.route.create({path:"/:panes",children:[ay.route.create("/:action",ay.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(a){var b;return -1!==(b=decodeURIComponent(a)).indexOf(",{")?function(a){let b=[],c=a;for(;c.length;){let[a,d,e]=c.match(jh)||[];if(!a){c=c.slice(1);continue}let f=e&&function(a){try{return JSON.parse(a)}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(e);b.push({id:d,payload:f}),c=c.slice(a.length)}return[b]}(b):b.split(";").map(a=>{let[b,...c]=a.split("|").map(a=>{let b,[c,...d]=a.split(",");return b={id:c,params:jf,payload:void 0},d.reduce((a,b)=>{if(/^[a-z0-9]+=[^=]+/i.test(b)){let c=b.slice(0,b.indexOf("=")),d=b.slice(c.length+1);a.params={...a.params,[decodeURIComponent(c)]:decodeURIComponent(d)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(b)?a.payload=function(a){try{return a?(0,ay.decodeJsonParams)(a):void 0}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(b):console.warn("Unknown pane segment: %s - skipping",b);return a},b)});return[b,...c.map(a=>({...b,...a,id:a.id||b.id,params:{...(0,az.default)(b.params,ji),...a.params},payload:a.payload||b.payload}))]}).filter(a=>a.length>0)},toPath:function(a){return(a||[]).map(a=>a.map(jk).join("|")).map(encodeURIComponent).join(";")}}}})]),jh=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,ji=["view","since","rev","inspect","comment"],jj=Boolean;function jk(a,b,c){let{payload:d,params:e={},id:f}=a,[g]=c,h=a===g,i=0!==b&&f===g.id,j=typeof d>"u"?void 0:(0,ay.encodeJsonParams)(d),k=Object.entries(e).filter(a=>{let[b,c]=a;return!!c&&(!!h||!(c===g.params?.[b]&&!ji.includes(b)))}).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`);return[i?"":f].concat([k.length>0&&k,j].filter(jj).flat()).join(",")||","}let jl=[e2,e4,eV,eX,eS,ek],jm=[iu],jn=[{name:"sanity/structure/validation",component:function(a){let b,e,g,h,i,j,k,l=(0,d.c)(23),{onClose:m}=a,{onFocus:n,onPathOpen:o,schemaType:p,validation:q,value:r,editState:s}=cQ(),{t}=(0,f.useTranslation)("validation");l[0]!==n||l[1]!==o?(b=a=>{o(a),n(a)},l[0]=n,l[1]=o,l[2]=b):b=l[2];let u=b;l[3]!==s?(e=s&&s.version&&(0,f.isGoingToUnpublish)(s.version),l[3]=s,l[4]=e):e=l[4];let v=e;return l[5]!==t?(g=t("panel.close-button-aria-label"),l[5]=t,l[6]=g):g=l[6],l[7]!==t?(h=t("panel.title"),l[7]=t,l[8]=h):h=l[8],l[9]!==m||l[10]!==g||l[11]!==h?(i=(0,c.jsx)(c6,{as:"header",closeButtonLabel:g,flex:"none",onClose:m,title:h}),l[9]=m,l[10]=g,l[11]=h,l[12]=i):i=l[12],l[13]!==u||l[14]!==v||l[15]!==p||l[16]!==t||l[17]!==q||l[18]!==r?(j=(0,c.jsx)(ap.Card,{flex:1,overflow:"auto",padding:3,children:v?(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsx)(ap.Text,{muted:!0,size:1,children:t("panel.unpublish-message")})}):(0,c.jsxs)(c.Fragment,{children:[0===q.length&&(0,c.jsx)(ap.Box,{padding:2,children:(0,c.jsx)(ap.Text,{muted:!0,size:1,children:t("panel.no-errors-message")})}),q.length>0&&(0,c.jsx)(ap.Stack,{space:2,children:q.map((a,b)=>(0,c.jsx)(jb,{marker:a,onOpen:u,schemaType:p,value:r},b))})]})}),l[13]=u,l[14]=v,l[15]=p,l[16]=t,l[17]=q,l[18]=r,l[19]=j):j=l[19],l[20]!==i||l[21]!==j?(k=(0,c.jsxs)(ap.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[i,j]}),l[20]=i,l[21]=j,l[22]=k):k=l[22],k},useMenuItem:function(a){let b,c,e,g,h,i,k=(0,d.c)(11),{documentType:l}=a,{t:m}=(0,f.useTranslation)("validation"),{selectedReleaseId:n}=(0,f.usePerspective)(),{value:o}=cQ(),{validation:p}=(0,f.useValidationStatus)(o._id,l,n);k[0]!==p?(b=p.map(je),k[0]=p,k[1]=b):b=k[1];let q=b,r=q.some(ar.isValidationError),s=q.some(ar.isValidationWarning);k[2]!==o?(c=(0,f.isGoingToUnpublish)(o),k[2]=o,k[3]=c):c=k[3];let t=c;a:{if(r){e=j.ErrorOutlineIcon;break a}if(s){e=j.WarningOutlineIcon;break a}e=j.CheckmarkCircleIcon}let u=e;b:{if(r){g="critical";break b}if(s){g="caution";break b}g="positive"}let v=g,w=0===q.length||t;return k[4]!==m?(h=m("panel.title"),k[4]=m,k[5]=h):h=k[5],k[6]!==u||k[7]!==w||k[8]!==h||k[9]!==v?(i={hidden:w,icon:u,title:h,tone:v,showAsAction:!0},k[6]=u,k[7]=w,k[8]=h,k[9]=v,k[10]=i):i=k[10],i}},{name:c$,useMenuItem:()=>{let{features:a}=cW(),{t:b}=(0,f.useTranslation)();return{hidden:!a.reviewChanges,icon:j.RestoreIcon,title:b("changes.title")}},component:function(a){let b,g,h,i,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=(0,d.c)(72),{params:J,setParams:K}=dH(),L=(0,f.useSource)(),[M,N]=(0,e.useState)(null),{t:O}=(0,f.useTranslation)(s),P=J?.inspect===c$,{selectedPerspective:Q}=(0,f.usePerspective)();I[0]!==J?(b=(H=J?.changesInspectorTab)&&i8.includes(H)?J.changesInspectorTab:i8[0],I[0]=J,I[1]=b):b=I[1];let R=b;I[2]!==J||I[3]!==K?(g=a=>K({...J,changesInspectorTab:a,since:"history"===a?void 0:J?.since}),I[2]=J,I[3]=K,I[4]=g):g=I[4];let S=g;I[5]!==Q||I[6]!==O?(h=(0,f.isReleaseDocument)(Q)?Q.metadata.title:O("drafts"===Q?"compare-versions.status.draft":"compare-versions.status.published"),I[5]=Q,I[6]=O,I[7]=h):h=I[7];let T=h,U=P?"":void 0;I[8]!==O?(i=O("changes.tab.history"),I[8]=O,I[9]=i):i=I[9],I[10]!==S?(k=()=>S("history"),I[10]=S,I[11]=k):k=I[11];let V="history"===R;I[12]!==i||I[13]!==k||I[14]!==V?(l=(0,c.jsx)(ao.Tab,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:k,selected:V}),I[12]=i,I[13]=k,I[14]=V,I[15]=l):l=I[15],I[16]!==O?(m=O("changes.tab.review-changes"),I[16]=O,I[17]=m):m=I[17],I[18]!==S?(n=()=>S("review"),I[18]=S,I[19]=n):n=I[19];let W="review"===R;I[20]!==W||I[21]!==m||I[22]!==n?(o=(0,c.jsx)(ao.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:m,onClick:n,selected:W}),I[20]=W,I[21]=m,I[22]=n,I[23]=o):o=I[23],I[24]!==o||I[25]!==l?(p=(0,c.jsxs)(ap.TabList,{space:1,flex:1,children:[l,o]}),I[24]=o,I[25]=l,I[26]=p):p=I[26],I[27]!==O?(q=O("changes.action.close-label"),I[27]=O,I[28]=q):q=I[28];let X=a.onClose;I[29]!==O?(r=O("document-inspector.close-button.tooltip"),I[29]=O,I[30]=r):r=I[30],I[31]!==r?(t={content:r},I[31]=r,I[32]=t):t=I[32],I[33]!==a.onClose||I[34]!==q||I[35]!==t?(u=(0,c.jsx)(ao.Button,{"aria-label":q,icon:j.CloseIcon,mode:"bleed",onClick:X,tooltipProps:t}),I[33]=a.onClose,I[34]=q,I[35]=t,I[36]=u):u=I[36],I[37]!==p||I[38]!==u?(v=(0,c.jsx)(ap.Card,{paddingBottom:1,children:(0,c.jsxs)(ap.Flex,{align:"center",padding:3,gap:2,children:[p,u]})}),I[37]=p,I[38]=u,I[39]=v):v=I[39],I[40]!==O?(w=(0,c.jsx)(ap.Box,{flex:1,padding:1,children:(0,c.jsx)(ap.Text,{size:1,children:(0,c.jsx)(f.Translate,{t:O,i18nKey:"changes.banner.tooltip"})})}),I[40]=O,I[41]=w):w=I[41],I[42]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)(ap.Text,{size:0,muted:!0,children:(0,c.jsx)(j.InfoOutlineIcon,{fontSize:1})}),I[42]=x):x=I[42],I[43]!==M||I[44]!==w?(y=(0,c.jsx)(ao.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:M,content:w,children:x}),I[43]=M,I[44]=w,I[45]=y):y=I[45],I[46]!==T?(z={perspective:T},I[46]=T,I[47]=z):z=I[47],I[48]!==O||I[49]!==z?(A=(0,c.jsx)(ap.Text,{size:0,muted:!0,children:(0,c.jsx)(f.Translate,{t:O,values:z,i18nKey:"changes.banner.description"})}),I[48]=O,I[49]=z,I[50]=A):A=I[50],I[51]!==y||I[52]!==A?(B=(0,c.jsx)(ap.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,c.jsxs)(ap.Flex,{gap:2,align:"flex-start",children:[y,A]})}),I[51]=y,I[52]=A,I[53]=B):B=I[53];let Y="history"!==R;I[54]!==R||I[55]!==L.beta?.eventsAPI?.documents?(C=L.beta?.eventsAPI?.documents?(0,c.jsx)(i0,{showList:"history"===R}):(0,c.jsx)(i2,{showList:"history"===R}),I[54]=R,I[55]=L.beta?.eventsAPI?.documents,I[56]=C):C=I[56],I[57]!==Y||I[58]!==C?(D=(0,c.jsx)(aq.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Y,id:"history-panel",children:C}),I[57]=Y,I[58]=C,I[59]=D):D=I[59];let Z="review"!==R;return I[60]!==R||I[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,c.jsx)(c.Fragment,{children:"review"===R?(0,c.jsx)(iW,{showChanges:"review"===R}):null}):(0,c.jsx)(iA,{showChanges:"review"===R}),I[60]=R,I[61]=L.beta?.eventsAPI?.documents,I[62]=E):E=I[62],I[63]!==Z||I[64]!==E?(F=(0,c.jsx)(aq.TabPanel,{"aria-labelledby":"review-tab",hidden:Z,id:"review-panel",height:"fill",children:E}),I[63]=Z,I[64]=E,I[65]=F):F=I[65],I[66]!==v||I[67]!==B||I[68]!==D||I[69]!==U||I[70]!==F?(G=(0,c.jsxs)(i7,{direction:"column",padding:0,height:"fill","data-ready":U,ref:N,children:[v,B,D,F]}),I[66]=v,I[67]=B,I[68]=D,I[69]=U,I[70]=F,I[71]=G):G=I[71],G},onClose:({params:a})=>({params:{...a,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:a})=>({params:{...a,since:"@lastPublished"}})}],jo=(0,f.definePlugin)(b=>{let c=b?.icon||j.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(a,b)=>"published"===b.versionType?Array.from(new Set([...a,...[...jl].sort((a,b)=>"unpublish"===a.action?-1:+("unpublish"===b.action))])):Array.from(new Set([...a,...jl])),badges:a=>Array.from(new Set([...a,...jm])),inspectors:a=>Array.from(new Set([...a,...jn]))},tools:[{name:b?.name||"structure",title:b?.title||"Structure",icon:c,component:(0,e.lazy)(()=>a.A(94330)),canHandleIntent:(a,b)=>{var c,d;return"create"===a?"type"in(c=b)&&(!("template"in c)||{template:!0}):"edit"===a&&"id"in(d=b)&&(!("mode"in d)||{mode:"structure"===d.mode})},getIntentState:ix,controlsDocumentTitle:!0,options:b,router:jg,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[t]}}});var jp=Object.freeze({__proto__:null,default:gD}),jq=Object.freeze({__proto__:null,default:it});a.s(["BackLink",()=>gH,"LOADING_PANE",()=>d6,"LoadingPane",()=>cP,"Pane",()=>cg,"PaneContent",()=>cj,"PaneHeader",()=>cB,"PaneHeaderActions",()=>hn,"PaneItem",()=>hv,"PaneLayout",()=>cJ,"StructureToolPane",()=>gQ,"_DEBUG",()=>!1,"setActivePanes",()=>iw,"structureTool",()=>jo,"useDocumentLastRev",()=>gj,"usePane",()=>ci,"usePaneLayout",()=>cc,"useStructureTool",()=>cW],16905)}];

//# sourceMappingURL=node_modules_24a4c903._.js.map