(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59823,(e,t,n)=>{var i=e.r(20250);t.exports=e.r(76168)(function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)})},36209,(e,t,n)=>{t.exports=e.r(76168)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})},26047,88942,e=>{"use strict";let t;var n=e.i(43476),i=e.i(81933),l=e.i(71645),o=e.i(77160),r=e.i(72523),s=e.i(48837),a=e.i(79684),d=e.i(47912),c=e.i(59823),u=e.i(9054),p=e.i(85658),m=e.i(9817),h=e.i(36209),g=e.i(1391),f=e.i(60191),x=e.i(97341);let b="structure",y=(0,o.defineLocaleResourceBundle)({locale:"en-US",namespace:b,resources:()=>e.A(53713)}),v=["_id","_type","_createdAt","_updatedAt","_rev"];function j(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!v.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return`${l}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(r.type,o),a=s?`{${s}}`:"";return o.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class w extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let S="structure-node-id-required",C="structure-title-required",_={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:b}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},I=[_,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:b}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function T(e,t,n){return e instanceof R?e.serialize({path:n,index:t}):e}class R{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new w("`title` is required for menu item",e.path,e.index,t).withHelpUrl(C)}if(!n&&!i)throw new w(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl("structure-action-or-intent-required");if(i&&n)throw new w("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl("structure-action-and-intent-mutually-exclusive");return{...this.spec,title:t}}clone(e){let t=new R(this._context);return t.spec={...this.spec,...e},t}}function P(e,{by:t,title:n,i18n:i},l){let o=new R(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(d.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(o=o.i18n(i)),o}function E(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(I):I).map(t=>P(e,t,j(i,t.by))):[]}function k(e,t,n){return e instanceof D?e.serialize({path:n,index:t}):e}class D{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new D(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new D(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new D(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new w("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(S);if(!this._title)throw new w("`title` is required for a menu item group",e.path,this._id).withHelpUrl(C);return{id:this._id,title:this._title,i18n:this._i18n}}}let F=/([^A-Za-z0-9-_.])/;function A(e,t,n){if("string"!=typeof e)throw new w(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(F)||[];if(i)throw new w(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new w("Structure node id cannot start with __edit__",t,n);return e}function V(e,t){if(t)return t;let n=(0,c.default)(e);return F.test(n)?(0,c.default)((0,u.default)(e)):n}class M{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:V(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new w("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(S);if(!o)throw new w("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(S);return{id:A(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>T(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>k(t,n,e.path))}}clone(e){let t=new M;return t.spec={...this.spec,...e},t}}class L{constructor(e){this.spec={id:(0,p.default)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new L;return t.spec={...this.spec,...e},t}}async function z(e,t){return await e(o.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,r.getPublishedId)(t)},{tag:"structure.resolve-type"})}class O{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||(0,h.default)(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new w("`id` is required for view item",e.path,e.index).withHelpUrl(S);if(!n)throw new w("`title` is required for view item",e.path,e.index).withHelpUrl(C);return{id:A(t,e.path,e.index),title:n,icon:i}}}function B(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class H extends O{constructor(e){const t=(e=>(0,o.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new w("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl("structure-view-component-required");return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new H;return t.spec={...this.spec,...e},t}}class $ extends O{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new $;return t.spec={...this.spec,...e},t}}let N=e=>new $(e);var G=Object.freeze({__proto__:null,ComponentViewBuilder:H,FormViewBuilder:$,GenericViewBuilder:O,component:e=>new H(e),form:N,maybeSerializeView:B});class U{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:V(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,o=e[t||e.length-1],r=this.spec.id||o&&`${o}`||"",s={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new w("`id` is required for document nodes",e,t,n).withHelpUrl(S);if(!s||!s.id)throw new w("document id (`id`) is required for document nodes",e,r,n).withHelpUrl("structure-document-id-required");if(!s||!s.type)throw new w("document type (`schemaType`) is required for document nodes",e,r,n);let a=(this.spec.views&&this.spec.views.length>0?this.spec.views:[N()]).map((t,n)=>B(t,n,e)),d=a.map(e=>e.id),c=(0,m.default)(d.filter((e,t)=>d.includes(e,t+1)));if(c.length>0)throw new w(`document node has views with duplicate IDs: ${c.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let o=i.type,r=l.slice(0,l.length-1),s=l[l.length-1];if(o||(o=await z(t,n)),!o)throw new w("Failed to resolve document, and no type provided in parameters.",r,s);return e({documentId:n,schemaType:o})})(this._context),id:A(r,e,t),type:"document",options:(l={id:(i=s).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:a}}clone(e={}){let t=new U(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}class W{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new w("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(S);if(!this.spec.templateId)throw new w("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(S);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new w("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(S);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new W(this._context);return t.spec={...this.spec,...e},t}}let q=Symbol("Document type list canHandleIntent"),K=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",o=n.options?.params||{},r=n.schemaTypeName?[n.schemaTypeName]:ee(l,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&r.includes(t.type)||i&&r.includes(t.type)};K.identity=q;let Y=["default","card","media","detail","block"];function X(){}let J=(e,t,{pane:n,index:i})=>i<=1&&K(e,t,{pane:n});class Z{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:V(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!Y.includes(i))throw new w(`\`layout\` must be one of ${Y.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>e instanceof W?e.serialize({path:n,index:t}):e);return{id:A(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||X,canHandleIntent:this.spec.canHandleIntent||J,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>T(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>k(e,t,n))}}}class Q extends Z{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new w("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(S);if(!this.spec.options||!this.spec.options.filter)throw new w("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl("structure-filter-required");return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,g.generateHelpUrl)("structure-api-version-required-for-custom-filter")),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||z(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new U(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||o.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new w(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl("structure-query-provided-for-filter");return n})(this.spec,e)}}}clone(e){let t=new Q(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(ee(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:d.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=ee(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function ee(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let et=e=>"listItem"===e.type,en=(e,t,n)=>(n.pane.items||[]).filter(es).some(e=>e.schemaType.name===t.type&&e._id===t.id)||J(e,t,n),ei=(e,t)=>{let n=(t.parent.items.filter(et).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class el extends Z{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new w("`id` is required for lists",e.path,e.index).withHelpUrl(S);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new w("`items` must be an array of items",e.path,e.index).withHelpUrl("structure-list-items-must-be-array");let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eo)return e.serialize({path:n,index:t});if(e instanceof L)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof el?"ListBuilder":(i=e,(0,o.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new w(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl("structure-invalid-list-item")}return e})(e,t,i)),r=l.filter((e,t)=>(0,f.default)(l,{id:e.id},t+1));if(r.length>0){let t=r.map(e=>e.id).slice(0,5),n=r.length>5?`${t.join(", ")}...`:t.join(", ");throw new w(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl("structure-list-item-ids-must-be-unique")}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||en,child:this.spec.child||ei,items:l}}clone(e){let t=new el(this._context);return t.spec={...this.spec,...e},t}}class eo{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:V(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new w("`id` is required for list items",e.path,e.index).withHelpUrl(S);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new w("`title` is required for list items",e.path,t).withHelpUrl(C);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new w(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl("structure-schema-type-not-found");l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof M||i instanceof Q||i instanceof U||i instanceof el?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:A(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new eo(this._context);return t.spec={...this.spec,...e},t}}class er extends eo{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new w("`schemaType` is required for document list items",e.path,e.index).withHelpUrl("structure-schema-type-required");let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new U(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new er(this._context);return t.spec={...this.spec,...e},t}}function es(e){return(0,o.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ea extends Q{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ea(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ea(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===q?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let ed=["sanity.imageAsset","sanity.fileAsset"];function ec(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!ed.includes(e))})(e).map(t=>eu(e,t))}function eu(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,x.default)(t);return new eo(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=ep(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function ep(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let a=s.title||(0,x.default)(o);return new ea(e).id(r.id||o).title(r.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(_.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:b}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:b}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:b}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||K).menuItems(r.menuItems||[...E(e,s),new R(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:b}}).title("Compact view").icon(d.StackCompactIcon).action("setLayout").params({layout:"default"}),new R(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:b}}).title("Detailed view").icon(d.StackIcon).action("setLayout").params({layout:"detail"})])}function em(e){let t,c,u,p,m,h=(0,i.c)(26),{defaultDocumentNode:g,structure:f,children:x}=e,[y,v]=(0,l.useState)(!1),j=(0,o.useSource)(),w=(0,o.useConfigContextFromSource)(j),S=(0,o.useDocumentStore)(),{perspectiveStack:C}=(0,o.usePerspective)();h[0]!==g||h[1]!==C||h[2]!==j?(t=function({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,o.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>s,resolveDocumentNode:t=>{let n=e?.(s,{...t,...i})||new U(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,r.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},s={defaults:()=>{let e;return e=ec(l),new el(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:b}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>ep(l,...e),documentTypeListItem:(...e)=>eu(l,...e),documentTypeListItems:(...e)=>ec(l,...e),document:(...e)=>new U(l,...e),documentWithInitialValueTemplate:(...e)=>(function({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)})(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new el(l,...e),listItem:(...e)=>new eo(l,...e),menuItem:(...e)=>new R(l,...e),menuItemGroup:(...e)=>new D(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>(function(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||l?.title||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,a=l&&n.get(l.schemaType),c=t.i18n||l?.i18n,u=new R(e).title(o).icon(l&&l.icon||a?.icon||d.AddIcon).intent({type:"create",params:s});return c&&(u=u.i18n(c)),u.serialize()})})(l,...e),documentList:(...e)=>new Q(l,...e),documentListItem:(...e)=>new er(l,...e),orderingMenuItem:(...e)=>P(l,...e),orderingMenuItemsForType:(...e)=>E(l,...e),editor:(...e)=>(function(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new U(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n})(l,...e),defaultInitialValueTemplateItems:(...e)=>(function(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))})(l,...e),initialValueTemplateItem:(e,t)=>new W(l,{id:e,parameters:t,templateId:e}),component:e=>(0,a.isValidElementType)(e)?new M().component(e):new M(e),divider:e=>new L(e),view:G,context:l};return s}({defaultDocumentNode:g,source:j,perspectiveStack:C}),h[0]=g,h[1]=C,h[2]=j,h[3]=t):t=h[3];let _=t;e:{let e;if(f){let e;h[4]!==_||h[5]!==w||h[6]!==S||h[7]!==C||h[8]!==f?(e=f(_,{...w,documentStore:S,perspectiveStack:C}),h[4]=_,h[5]=w,h[6]=S,h[7]=C,h[8]=f,h[9]=e):e=h[9],c=e;break e}h[10]!==_?(e=_.defaults(),h[10]=_,h[11]=e):e=h[11],c=e}let I=c,T=!y,k=!y,F=!y,A=!y;h[12]!==y||h[13]!==T||h[14]!==k||h[15]!==F||h[16]!==A?(u={backButton:y,resizablePanes:T,reviewChanges:k,splitPanes:F,splitViews:A},h[12]=y,h[13]=T,h[14]=k,h[15]=F,h[16]=A,h[17]=u):u=h[17];let V=u;h[18]!==_.context||h[19]!==V||h[20]!==y||h[21]!==I?(p={features:V,layoutCollapsed:y,setLayoutCollapsed:v,rootPaneNode:I,structureContext:_.context},h[18]=_.context,h[19]=V,h[20]=y,h[21]=I,h[22]=p):p=h[22];let z=p;return h[23]!==x||h[24]!==z?(m=(0,n.jsx)(s.StructureToolContext.Provider,{value:z,children:x}),h[23]=x,h[24]=z,h[25]=m):m=h[25],m}e.s(["SerializeError",()=>w,"StructureToolProvider",()=>em,"getExtendedProjection",()=>j,"structureLocaleNamespace",()=>b,"structureUsEnglishLocaleBundle",()=>y],88942);var eh=e.i(63486),eg=e.i(25917),ef=e.i(78491),ex=e.i(64308),eb=e.i(15321),ey=e.i(97053),ev=e.i(33483),ej=e.i(46932),ew=e.i(88653),eS=e.i(97083),eC=e.i(28696),e_=e.i(35870),eI=e.i(98892),eT=e.i(68233),eR=e.i(374),eP=e.i(49242),eE=e.i(94059),ek=e.i(92481),eD=e.i(58832),eF=e.i(27492),eA=e.i(18692),eV=e.i(74e3),eM=e.i(34352),eL=e.i(27341),ez=e.i(11308),eO=e.i(60739),eB=e.i(22249),eH=e.i(10839),e$=e.i(84973),eN=e.i(77497),eG=e.i(879),eU=e.i(8659),eW=e.i(45281),eq=e.i(93817),eK=e.i(2400),eY=e.i(39338),eX=e.i(78856),eJ=e.i(30823),eZ=e.i(7136),eQ=e.i(17312),e0=e.i(96623),e1=e.i(72441),e2=e.i(54201),e3=e.i(73904),e4=e.i(55083),e5=e.i(29437),e6=e.i(89196),e8=e.i(24981),e7=e.i(14494),e9=e.i(74010),te=e.i(72745),tt=e.i(33327),tn=e.i(82065),ti=e.i(48433),tl=e.i(47956),to=e.i(45456);let tr=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,ts=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},ta=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function td(){return(td=Object.assign.bind()).apply(null,arguments)}function tc(e){return e.matches("body *")?e:window}class tu{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(ta(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=td({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tr(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!ts(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(ta(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tc(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tc(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return ta(this.elements.find(e=>tr(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=td({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var tp=e.i(91692),tm=e.i(32892),th=e.i(24019),tg=e.i(53810),tf=e.i(20877),tx=e.i(71857),tb=e.i(33331),ty=e.i(74875),tv=e.i(1851),tj=e.i(62576),tw=e.i(40289),tS=e.i(83107),tC=e.i(4677),t_=e.i(91426),tI=e.i(8551);function tT(e,t){return"function"==typeof e?e(t):e}function tR(e,t){return n=>{t.setState(t=>({...t,[e]:tT(n,t[e])}))}}function tP(e){return e instanceof Function}function tE(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function tk(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(47167);let tD="debugHeaders";function tF(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function tA(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,d=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=tF(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${o.filter(e=>e.column===r).length}`:void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(o,t-1)};d(t.map((e,t)=>tF(n,e,{depth:r,index:t})),r-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let tV=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tE(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:tE(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),tk(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),tk(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tE(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),tk(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},tM=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};tM.autoRemove=e=>tW(e);let tL=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};tL.autoRemove=e=>tW(e);let tz=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};tz.autoRemove=e=>tW(e);let tO=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};tO.autoRemove=e=>tW(e);let tB=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});tB.autoRemove=e=>tW(e)||!(null!=e&&e.length);let tH=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});tH.autoRemove=e=>tW(e)||!(null!=e&&e.length);let t$=(e,t,n)=>e.getValue(t)===n;t$.autoRemove=e=>tW(e);let tN=(e,t,n)=>e.getValue(t)==n;tN.autoRemove=e=>tW(e);let tG=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};tG.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},tG.autoRemove=e=>tW(e)||tW(e[0])&&tW(e[1]);let tU={includesString:tM,includesStringSensitive:tL,equalsString:tz,arrIncludes:tO,arrIncludesAll:tB,arrIncludesSome:tH,equals:t$,weakEquals:tN,inNumberRange:tG};function tW(e){return null==e||""===e}function tq(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let tK={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},tY=()=>({left:[],right:[]}),tX={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},tJ=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),tZ=null;function tQ(e){return"touchstart"===e.type}function t0(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let t1=()=>({pageIndex:0,pageSize:10}),t2=()=>({top:[],bottom:[]}),t3=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>t3(e,t.id,n,i,l))};function t4(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=t5(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function t5(e,t){var n;return null!=(n=t[e.id])&&n}function t6(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(t5(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=t6(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let t8=/([0-9]+)/gm;function t7(e,t){return e===t?0:e>t?1:-1}function t9(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function ne(e,t){let n=e.split(t8).filter(Boolean),i=t.split(t8).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nt={alphanumeric:(e,t,n)=>ne(t9(e.getValue(n)).toLowerCase(),t9(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>ne(t9(e.getValue(n)),t9(t.getValue(n))),text:(e,t,n)=>t7(t9(e.getValue(n)).toLowerCase(),t9(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>t7(t9(e.getValue(n)),t9(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>t7(e.getValue(n),t.getValue(n))},nn=[{createTable:e=>{e.getHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return tA(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},tk(e.options,tD,"getHeaderGroups")),e.getCenterHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>tA(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),tk(e.options,tD,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return tA(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},tk(e.options,tD,"getLeftHeaderGroups")),e.getRightHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return tA(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},tk(e.options,tD,"getRightHeaderGroups")),e.getFooterGroups=tE(()=>[e.getHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getFooterGroups")),e.getLeftFooterGroups=tE(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getLeftFooterGroups")),e.getCenterFooterGroups=tE(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getCenterFooterGroups")),e.getRightFooterGroups=tE(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getRightFooterGroups")),e.getFlatHeaders=tE(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getFlatHeaders")),e.getLeftFlatHeaders=tE(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tE(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getCenterFlatHeaders")),e.getRightFlatHeaders=tE(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getRightFlatHeaders")),e.getCenterLeafHeaders=tE(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tE(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getLeftLeafHeaders")),e.getRightLeafHeaders=tE(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getRightLeafHeaders")),e.getLeafHeaders=tE(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},tk(e.options,tD,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tR("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tE(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),tk(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tE(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],tk(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tE(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),tk(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tR("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tE(e=>[t0(t,e)],t=>t.findIndex(t=>t.id===e.id),tk(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=t0(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=t0(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tE(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var o=l;if(!(null!=t&&t.length)||!n)return o;let r=o.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(e=>o.find(t=>t.id===e)).filter(Boolean),...r]},tk(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:tY(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tR("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},tk(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),tk(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),tk(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?tY():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:tY())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tk(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tk(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},tk(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tR("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?tU.includesString:"number"==typeof i?tU.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?tU.equals:Array.isArray(i)?tU.arrIncludes:tU.weakEquals},e.getFilterFn=()=>{var n,i;return tP(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:tU[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=tT(n,r?r.value:void 0);if(tq(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tT(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&tq(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tR("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>tU.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tP(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:tU[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tR("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nt.datetime;if("string"==typeof n&&(i=!0,n.split(t8).length>1))return nt.alphanumeric}return i?nt.text:nt.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tP(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nt[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),d=null==r?void 0:r.findIndex(t=>t.id===e.id),c=[],u=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&d!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(c=[...r,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tR("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?tK.sum:"[object Date]"===Object.prototype.toString.call(i)?tK.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tP(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:tK[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tR("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...t1(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tR("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tT(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?t1():null!=(n=e.initialState.pagination)?n:t1())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tT(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tT(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tT(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tE(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},tk(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:t2(),...e}),getDefaultOptions:e=>({onRowPinningChange:tR("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?t2():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:t2())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),tk(e.options,"debugRows","getTopRows")),e.getBottomRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),tk(e.options,"debugRows","getBottomRows")),e.getCenterRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},tk(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tR("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{t3(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return t3(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return t5(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===t6(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===t6(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>tX,getInitialState:e=>({columnSizing:{},columnSizingInfo:tJ(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tR("columnSizing",e),onColumnSizingInfoChange:tR("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:tX.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:tX.size),null!=(l=e.columnDef.maxSize)?l:tX.maxSize)},e.getStart=tE(e=>[e,t0(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),tk(t.options,"debugColumns","getStart")),e.getAfter=tE(e=>[e,t0(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),tk(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),tQ(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=tQ(o)?Math.round(o.touches[0].clientX):o.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof tZ)return tZ;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return tZ=e}()&&{passive:!1};tQ(o)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?tJ():null!=(n=e.initialState.columnSizingInfo)?n:tJ())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function ni(e,t){var n,i,o;let r;return e?"function"==typeof(i=n=e)&&(r=Object.getPrototypeOf(i)).prototype&&r.prototype.isReactComponent||"function"==typeof n||"object"==typeof(o=n)&&"symbol"==typeof o.$$typeof&&["react.memo","react.forward_ref"].includes(o.$$typeof.description)?l.createElement(e,t):e:null}let nl="diffView",no="previousDocument",nr="nextDocument";function ns(){let e,t,n,l=(0,i.c)(9),{navigate:o,state:r}=(0,eC.useRouter)();l[0]!==o||l[1]!==r?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,l={...(0,ti.default)(r._searchParams),...t?{[nl]:t}:{},...n?{[no]:[n.type,n.id].join(",")}:{},...i?{[nr]:[i.type,i.id].join(",")}:{}};o({...r,_searchParams:(0,tl.default)(l)})},l[0]=o,l[1]=r,l[2]=e):e=l[2];let s=e;l[3]!==o||l[4]!==r?(t=()=>{o({...r,_searchParams:(r._searchParams??[]).filter(na)})},l[3]=o,l[4]=r,l[5]=t):t=l[5];let a=t;return l[6]!==a||l[7]!==s?(n={navigateDiffView:s,exitDiffView:a},l[6]=a,l[7]=s,l[8]=n):n=l[8],n}function na(e){let[t]=e;return![nl,no,nr].includes(t)}let nd=["version"];function nc(e){let t,n,o,r,s,a,d,c,u=(0,i.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,eC.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);o=e.get(no),n=e.get(nr),r=e.get(nl),u[2]=m._searchParams,u[3]=n,u[4]=o,u[5]=r}else n=u[3],o=u[4],r=u[5];let h=r,g=[o,n,h].some(nu),f=o??"",x=n??"",b=h??"";u[6]!==f||u[7]!==x||u[8]!==b?(s=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,o]=e.split(",").filter(Boolean),[r,s]=t.split(",").filter(Boolean);return nd.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:o},next:{type:r,id:s}}}}}({previousDocument:f,nextDocument:x,mode:b}),u[6]=f,u[7]=x,u[8]=b,u[9]=s):s=u[9];let y=s;if(u[10]!==g||u[11]!==p||u[12]!==y.errors||u[13]!==y.result?(a=()=>{"error"===y.result&&g&&p?.(y.errors)},u[10]=g,u[11]=p,u[12]=y.errors,u[13]=y.result,u[14]=a):a=u[14],u[15]!==g||u[16]!==p||u[17]!==y?(d=[g,p,y],u[15]=g,u[16]=p,u[17]=y,u[18]=d):d=u[18],(0,l.useEffect)(a,d),"error"===y.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==y.params?(c={state:"ready",isActive:!0,...y.params},u[20]=y.params,u[21]=c):c=u[21],c}function nu(e){return null!==e}function np(e){return null!==e}function nm(e,t){return(0,r.isPublishedId)(e)?"published":(0,r.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,o.getReleaseIdFromReleaseDocumentId)(t)===(0,r.getVersionFromId)(e))}let nh=ey.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,ng=ey.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nf=e=>{let t,l,r,s,a,c,u,p,m,h,g,f,x,y,v,j=(0,i.c)(44),{documentId:w,state:S}=e,{t:C}=(0,o.useTranslation)(b);j[0]!==w?(t={documentId:w},j[0]=w,j[1]=t):t=j[1];let{data:_}=(0,o.useDocumentVersions)(t),{exitDiffView:I,navigateDiffView:T}=ns(),{documents:R}=nc(),P=(0,o.useActiveReleases)();j[2]!==_?(l=_.flatMap(ny),j[2]=_,j[3]=l):l=j[3];let E=l;if(j[4]!==P.data||j[5]!==E){let e;j[7]!==E?(e=e=>{let t=(0,o.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&E.includes(t)},j[7]=E,j[8]=e):e=j[8],r=P.data.filter(e),j[4]=P.data,j[5]=E,j[6]=r}else r=j[6];let k=r;j[9]!==R||j[10]!==T?(s=e=>{"u">typeof R?.previous&&T({previousDocument:{...R.previous,id:e}})},j[9]=R,j[10]=T,j[11]=s):s=j[11];let D=s;j[12]!==R||j[13]!==T?(a=e=>{"u">typeof R?.next&&T({nextDocument:{...R.next,id:e}})},j[12]=R,j[13]=T,j[14]=a):a=j[14];let F=a;return j[15]!==C?(c=C("compare-versions.title"),j[15]=C,j[16]=c):c=j[16],j[17]!==c?(u=(0,n.jsx)(eg.Box,{padding:4,children:(0,n.jsx)(eg.Text,{as:"h1",size:1,muted:!0,children:c})}),j[17]=c,j[18]=u):u=j[18],j[19]!==w||j[20]!==R||j[21]!==D||j[22]!==k||j[23]!==S?(p="u">typeof R?.previous&&(0,n.jsx)(nx,{releases:k,onSelectRelease:D,role:"previous",documentId:w,state:S,document:R.previous}),j[19]=w,j[20]=R,j[21]=D,j[22]=k,j[23]=S,j[24]=p):p=j[24],j[25]!==u||j[26]!==p?(m=(0,n.jsxs)(ng,{children:[u,p]}),j[25]=u,j[26]=p,j[27]=m):m=j[27],j[28]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(eg.Flex,{align:"center",paddingX:3,children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(d.TransferIcon,{})})}),j[28]=h):h=j[28],j[29]!==w||j[30]!==R||j[31]!==F||j[32]!==k||j[33]!==S?(g="u">typeof R?.next&&(0,n.jsx)(nx,{releases:k,onSelectRelease:F,role:"next",documentId:w,state:S,document:R.next}),j[29]=w,j[30]=R,j[31]=F,j[32]=k,j[33]=S,j[34]=g):g=j[34],j[35]===Symbol.for("react.memo_cache_sentinel")?(f={justifySelf:"end"},j[35]=f):f=j[35],j[36]!==I?(x=(0,n.jsx)(eg.Box,{padding:3,style:f,children:(0,n.jsx)(eg.Button,{icon:d.CloseIcon,mode:"bleed",onClick:I,padding:2})}),j[36]=I,j[37]=x):x=j[37],j[38]!==g||j[39]!==x?(y=(0,n.jsxs)(ng,{children:[g,x]}),j[38]=g,j[39]=x,j[40]=y):y=j[40],j[41]!==y||j[42]!==m?(v=(0,n.jsxs)(nh,{children:[m,h,y]}),j[41]=y,j[42]=m,j[43]=v):v=j[43],v},nx=e=>{let t,l,s,a,c,u,p,m,h,g,f=(0,i.c)(41),{releases:x,onSelectRelease:y,role:v,documentId:j,document:w}=e;f[0]!==x?(t=void 0===x?[]:x,f[0]=x,f[1]=t):t=f[1];let S=t;f[2]!==w.id?(l=(0,r.getPublishedId)(w.id),f[2]=w.id,f[3]=l):l=f[3];let{published:C,draft:_}=(0,o.useEditState)(l,w.type);f[4]!==w.id||f[5]!==S?(s=nm(w.id,S),f[4]=w.id,f[5]=S,f[6]=s):s=f[6];let I=s,{t:T}=(0,o.useTranslation)(b),{t:R}=(0,o.useTranslation)(),{document:P}=(0,o.useWorkspace)(),{drafts:E}=P,{enabled:k}=E;if(f[7]!==I||f[8]!==R||f[9]!==T?(a=function({selected:e,tCore:t,tStructure:i}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,o.isReleaseDocument)(e)){let i=e?(0,o.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,n.jsx)(o.ReleaseAvatar,{padding:1,tone:i}),iconRight:e&&(0,o.isReleaseScheduledOrScheduling)(e)?(0,n.jsx)(d.LockIcon,{}):void 0,tone:i}}let l="published"===e?"positive":"caution";return{text:i(["compare-versions.status",e].join(".")),icon:(0,n.jsx)(o.ReleaseAvatar,{padding:1,tone:l}),tone:l}}({selected:I,tCore:R,tStructure:T}),f[7]=I,f[8]=R,f[9]=T,f[10]=a):a=f[10],f[11]!==a?(c=(0,n.jsx)(eg.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...a}),f[11]=a,f[12]=c):c=f[12],f[13]!==j||f[14]!==y||f[15]!==C||f[16]!==I?(u=C&&(0,n.jsx)(nb,{type:"published",onSelect:y,isSelected:"published"===I,documentId:j}),f[13]=j,f[14]=y,f[15]=C,f[16]=I,f[17]=u):u=f[17],f[18]!==j||f[19]!==_||f[20]!==k||f[21]!==y||f[22]!==I?(p=k&&_&&(0,n.jsx)(nb,{type:"draft",onSelect:y,isSelected:"draft"===I,documentId:j}),f[18]=j,f[19]=_,f[20]=k,f[21]=y,f[22]=I,f[23]=p):p=f[23],f[24]!==j||f[25]!==y||f[26]!==S||f[27]!==I){let e;f[29]!==j||f[30]!==y||f[31]!==I?(e=e=>(0,n.jsx)(nb,{release:e,onSelect:y,isSelected:"string"!=typeof I&&I?._id===e._id,documentId:j},e._id),f[29]=j,f[30]=y,f[31]=I,f[32]=e):e=f[32],m=S.map(e),f[24]=j,f[25]=y,f[26]=S,f[27]=I,f[28]=m}else m=f[28];return f[33]!==p||f[34]!==m||f[35]!==u?(h=(0,n.jsxs)(eg.Menu,{children:[u,p,m]}),f[33]=p,f[34]=m,f[35]=u,f[36]=h):h=f[36],f[37]!==v||f[38]!==h||f[39]!==c?(g=(0,n.jsx)(eh.MenuButton,{id:v,button:c,menu:h}),f[37]=v,f[38]=h,f[39]=c,f[40]=g):g=f[40],g},nb=e=>{let t,l,s,a,c,u,p,m,h,g,f,x,y=(0,i.c)(51),{type:v,release:j,onSelect:w,isSelected:S,documentId:C}=e,{t:_}=(0,o.useTranslation)(),{t:I}=(0,o.useTranslation)(b);y[0]!==C||y[1]!==w||y[2]!==j||y[3]!==v?(t=()=>{"draft"===v?w((0,r.getDraftId)(C)):"published"===v?w((0,r.getPublishedId)(C)):"u">typeof j?._id&&w((0,r.getVersionId)(C,(0,o.getReleaseIdFromReleaseDocumentId)(j._id)))},y[0]=C,y[1]=w,y[2]=j,y[3]=v,y[4]=t):t=y[4];let T=t;if(v){let e,t,i,l,r,s,a="published"===v?"positive":"caution";y[5]!==a?(e=(0,n.jsx)(o.ReleaseAvatar,{padding:2,tone:a}),y[5]=a,y[6]=e):e=y[6],y[7]!==v?(t=["compare-versions.status",v],y[7]=v,y[8]=t):t=y[8];let d=t.join(".");return y[9]!==d||y[10]!==I?(i=I(d),y[9]=d,y[10]=I,y[11]=i):i=y[11],y[12]!==i?(l=(0,n.jsx)(eg.Box,{paddingY:2,children:(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:i})}),y[12]=i,y[13]=l):l=y[13],y[14]!==e||y[15]!==l?(r=(0,n.jsxs)(eg.Flex,{gap:1,children:[e,l]}),y[14]=e,y[15]=l,y[16]=r):r=y[16],y[17]!==S||y[18]!==T||y[19]!==r?(s=(0,n.jsx)(eg.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:S,children:r}),y[17]=S,y[18]=T,y[19]=r,y[20]=s):s=y[20],s}y[21]!==j?(l=j?(0,o.getReleaseTone)(j):"neutral",y[21]=j,y[22]=l):l=y[22];let R=l;return y[23]!==R?(s=(0,n.jsx)(o.ReleaseAvatar,{padding:2,tone:R}),y[23]=R,y[24]=s):s=y[24],y[25]!==j.metadata.title||y[26]!==_?(a=j.metadata.title||_("release.placeholder-untitled-release"),y[25]=j.metadata.title,y[26]=_,y[27]=a):a=y[27],y[28]!==a?(c=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:a}),y[28]=a,y[29]=c):c=y[29],y[30]!==j.metadata.releaseType||y[31]!==_?(u=["asap","undecided"].includes(j.metadata.releaseType)&&(0,n.jsx)(eg.Text,{muted:!0,size:1,children:_(`release.type.${j.metadata.releaseType}`)}),y[30]=j.metadata.releaseType,y[31]=_,y[32]=u):u=y[32],y[33]!==j?(p="scheduled"===j.metadata.releaseType&&(0,n.jsx)(eg.Text,{muted:!0,size:1,children:(0,o.formatRelativeLocalePublishDate)(j)}),y[33]=j,y[34]=p):p=y[34],y[35]!==c||y[36]!==u||y[37]!==p?(m=(0,n.jsxs)(eg.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[c,u,p]}),y[35]=c,y[36]=u,y[37]=p,y[38]=m):m=y[38],y[39]!==j?(h=(0,o.isReleaseScheduledOrScheduling)(j)&&(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(d.LockIcon,{})})}),y[39]=j,y[40]=h):h=y[40],y[41]!==h?(g=(0,n.jsx)(eg.Flex,{flex:"none",children:h}),y[41]=h,y[42]=g):g=y[42],y[43]!==g||y[44]!==s||y[45]!==m?(f=(0,n.jsxs)(eg.Flex,{gap:1,children:[s,m,g]}),y[43]=g,y[44]=s,y[45]=m,y[46]=f):f=y[46],y[47]!==S||y[48]!==T||y[49]!==f?(x=(0,n.jsx)(eg.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:S,children:f}),y[47]=S,y[48]=T,y[49]=f,y[50]=x):x=y[50],x};function ny(e){return(0,r.getVersionFromId)(e)??[]}let nv=ey.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nj(e){return e.document?.components?.unstable_layout}function nw(e){return e.path}function nS(e,t){return(0,tm.default)(e.path,t.path)}let nC=ey.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,n_=(0,ey.styled)(eg.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,nI=(0,ey.styled)(eg.Container)`
  width: auto;
`,nT=(0,l.forwardRef)(function(e,t){let r,a,d,c,u,p,m,h,g,f,x,b,y=(0,i.c)(36),{role:v,documentType:j,documentId:w,scrollElement:S,syncChannel:C,compareDocument:_}=e,I=(0,l.useRef)(null),[T,R]=(0,l.useState)(null),[P,E]=(0,l.useState)(null);y[0]!==_||y[1]!==w||y[2]!==j||y[3]!==v||y[4]!==S||y[5]!==C?(r=()=>(0,n.jsx)(nR,{compareDocument:_,documentId:w,documentType:j,role:v,scrollElement:S,syncChannel:C}),y[0]=_,y[1]=w,y[2]=j,y[3]=v,y[4]=S,y[5]=C,y[6]=r):r=y[6];let k=r;y[7]!==k?(a={pick:nj,defaultComponent:k},y[7]=k,y[8]=a):a=y[8];let D=(0,o.useMiddlewareComponents)(a);y[9]===Symbol.for("react.memo_cache_sentinel")?(d={isInteractive:!1,onOpenReviewChanges:tp.default,onSetFocus:tp.default,isReviewChangesOpen:!1},y[9]=d):d=y[9];let F=`${v}-document`;y[10]!==F?(c={"--grid-area":F},y[10]=F,y[11]=c):c=y[11];let A=c,V="next"===v,M="next"!==v&&"none";y[12]!==M?(u={"--scrollbar-width":M},y[12]=M,y[13]=u):u=y[13];let L=u;return y[14]!==D||y[15]!==w||y[16]!==j?(p=(0,n.jsx)(ef.DialogProvider,{position:"absolute",children:(0,n.jsx)(nI,{ref:I,padding:4,width:1,children:(0,n.jsx)(D,{documentId:w,documentType:j})})}),y[14]=D,y[15]=w,y[16]=j,y[17]=p):p=y[17],y[18]!==T||y[19]!==p?(m=(0,n.jsx)(eg.PortalProvider,{element:T,children:p}),y[18]=T,y[19]=p,y[20]=m):m=y[20],y[21]!==t||y[22]!==L||y[23]!==m?(h=(0,n.jsx)(nC,{ref:t,style:L,children:m}),y[21]=t,y[22]=L,y[23]=m,y[24]=h):h=y[24],y[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:R}),y[25]=g):g=y[25],y[26]!==h||y[27]!==A||y[28]!==V?(f=(0,n.jsxs)(n_,{ref:E,style:A,borderLeft:V,children:[h,g]}),y[26]=h,y[27]=A,y[28]=V,y[29]=f):f=y[29],y[30]!==P||y[31]!==f?(x=(0,n.jsx)(eg.BoundaryElementProvider,{element:P,children:f}),y[30]=P,y[31]=f,y[32]=x):x=y[32],y[33]!==S||y[34]!==x?(b=(0,n.jsx)(s.ReviewChangesContext.Provider,{value:d,children:(0,n.jsx)(o.ChangeIndicatorsTracker,{children:(0,n.jsx)(o.VirtualizerScrollInstanceProvider,{scrollElement:S,containerElement:I,children:x})})}),y[33]=S,y[34]=x,y[35]=b):b=y[35],b}),nR=e=>{var t,a;let d,c,u,p,m,h,g,f,x,b,y,v=(0,i.c)(52),{role:j,documentType:w,documentId:S,syncChannel:C,compareDocument:_}=e;v[0]!==_?(d={compareDocument:_},v[0]=_,v[1]=d):d=v[1];let I=function(e){let t,n,l,s=(0,i.c)(4),{compareDocument:a}=e;s[0]!==a.id?(t=(0,r.getPublishedId)(a.id),s[0]=a.id,s[1]=t):t=s[1];let d=a.type;s[2]!==a.id?(n=(0,r.getVersionFromId)(a.id),s[2]=a.id,s[3]=n):n=s[3];let c=(0,o.useEditState)(t,d,"low",n);e:{if((0,r.isVersionId)(a.id)){l=c.version??void 0;break e}if((0,r.isDraftId)(a.id)){l=c.draft??void 0;break e}if((0,r.isPublishedId)(a.id)){l=c.published??void 0;break e}l=void 0}return l}(d),{data:T}=(0,o.useActiveReleases)(),[R]=(0,l.useState)(nP);v[2]!==S||v[3]!==T?(c=nm(S,T),v[2]=S,v[3]=T,v[4]=c):c=v[4];let P=c;v[5]!==S?(u=(0,r.getPublishedId)(S),v[5]=S,v[6]=u):u=v[6],v[7]!==S?(t=S,p=(0,r.isVersionId)(t)?(0,r.getVersionFromId)(t):(0,r.isPublishedId)(t)?"published":void 0,v[7]=S,v[8]=p):p=v[8],v[9]!==S?(m=(0,r.getVersionFromId)(S),v[9]=S,v[10]=m):m=v[10],v[11]!==I||v[12]!==w||v[13]!==u||v[14]!==p||v[15]!==m?(h={documentId:u,documentType:w,selectedPerspectiveName:p,releaseId:m,comparisonValue:I,displayInlineChanges:!0},v[11]=I,v[12]=w,v[13]=u,v[14]=p,v[15]=m,v[16]=h):h=v[16];let{formState:E,onChange:k,onFocus:D,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:V,onSetCollapsedPath:M,collapsedFieldSets:L,ready:z,collapsedPaths:O,schemaType:B,value:H,onProgrammaticFocus:$,openPath:N,onPathOpen:G}=(0,o.useDocumentForm)(h),U=null===E||!z;v[17]!==j||v[18]!==C?(g={id:j,syncChannel:C},v[17]=j,v[18]=C,v[19]=g):g=v[19];let W=function(e){let t,n,l,o=(0,i.c)(11),{syncChannel:r,id:s}=e;o[0]!==s||o[1]!==r?(t=e=>r.next({...e,source:s}),o[0]=s,o[1]=r,o[2]=t):t=o[2];let a=t;if(o[3]!==s||o[4]!==r){let e;o[6]!==s?(e=e=>{let{source:t}=e;return t!==s},o[6]=s,o[7]=e):e=o[7],n=r.pipe((0,eV.distinctUntilChanged)(nS),(0,eB.filter)(e),(0,eE.map)(nw)),o[3]=s,o[4]=r,o[5]=n}else n=o[5];let d=n;return o[8]!==d||o[9]!==a?(l={path:d,push:a},o[8]=d,o[9]=a,o[10]=l):l=o[10],l}(g);v[20]!==G||v[21]!==W||v[22]!==j?(f=e=>{G(e),W.push({source:j,path:e})},v[20]=G,v[21]=W,v[22]=j,v[23]=f):f=v[23];let q=f;return v[24]!==G||v[25]!==$||v[26]!==W.path?(x=()=>{let e=W.path.subscribe(e=>{G(e),$(e)});return()=>e.unsubscribe()},v[24]=G,v[25]=$,v[26]=W.path,v[27]=x):x=v[27],v[28]!==G||v[29]!==$||v[30]!==W.path||v[31]!==j?(b=[G,$,W.path,j],v[28]=G,v[29]=$,v[30]=W.path,v[31]=j,v[32]=b):b=v[32],(0,l.useEffect)(x,b),v[33]!==L||v[34]!==O||v[35]!==I||v[36]!==E||v[37]!==U||v[38]!==F||v[39]!==k||v[40]!==D||v[41]!==q||v[42]!==A||v[43]!==V||v[44]!==M||v[45]!==N||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==H?(y=U?(0,n.jsx)(o.LoadingBlock,{showText:!0}):(0,n.jsx)(s.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,n.jsx)(o.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:k,onPathFocus:D,onPathOpen:q,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:V,onSetPathCollapsed:M,collapsedPaths:O,collapsedFieldSets:L,focusPath:E.focusPath,openPath:N,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(a=P)?"drafts":a,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:B,value:H,compareValue:I})}),v[33]=L,v[34]=O,v[35]=I,v[36]=E,v[37]=U,v[38]=F,v[39]=k,v[40]=D,v[41]=q,v[42]=A,v[43]=V,v[44]=M,v[45]=N,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=H,v[51]=y):y=v[51],y};function nP(){return(0,o.createPatchChannel)()}let nE=ey.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,nk=e=>{let t,l,o=(0,i.c)(6),{children:r,documentId:s,documentType:a}=e;o[0]!==s||o[1]!==a?(t={intent:"edit",params:{id:s,type:a}},o[0]=s,o[1]=a,o[2]=t):t=o[2];let{href:d}=(0,eC.useIntentLink)(t);return o[3]!==r||o[4]!==d?(l=(0,n.jsx)(nE,{href:d,target:"_blank",rel:"noopener noreferrer",children:r}),o[3]=r,o[4]=d,o[5]=l):l=o[5],l},nD=e=>{var t;let o,r,a,d,c,u,p,m,h,g,f,x,b=(0,i.c)(24),{documentId:y}=e,{documents:v,state:j,mode:w}=nc(),{exitDiffView:S}=ns(),C=((h=(0,i.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(m=new eU.Subject,h[0]=m):m=h[0],m),[_,I]=(0,l.useState)(null),[T,R]=(0,l.useState)(null),P=(0,l.useContext)(s.ReferenceInputOptionsContext);b[0]!==P?(o={...P,disableNew:!0,EditReferenceLinkComponent:nk},b[0]=P,b[1]=o):o=b[1];let E=o;return b[2]!==T||b[3]!==_?(r=[_,T],b[2]=T,b[3]=_,b[4]=r):r=b[4],t=r,(x=(0,i.c)(3))[0]!==t?(g=()=>{let e=t.filter(np);if(0===e.length)return;let n=new tu(e);return()=>n.destroy()},f=[t],x[0]=t,x[1]=g,x[2]=f):(g=x[1],f=x[2]),(0,l.useEffect)(g,f),b[5]!==y||b[6]!==w||b[7]!==j?(a="version"===w&&(0,n.jsx)(nf,{documentId:y,state:j}),b[5]=y,b[6]=w,b[7]=j,b[8]=a):a=b[8],b[9]!==v||b[10]!==T||b[11]!==_||b[12]!==j||b[13]!==C?(d="ready"===j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nT,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:I,scrollElement:_,syncChannel:C,compareDocument:v.previous}),(0,n.jsx)(nT,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:R,scrollElement:T,syncChannel:C,compareDocument:v.previous})]}),b[9]=v,b[10]=T,b[11]=_,b[12]=j,b[13]=C,b[14]=d):d=b[14],b[15]!==a||b[16]!==d?(c=(0,n.jsxs)(nv,{children:[a,d]}),b[15]=a,b[16]=d,b[17]=c):c=b[17],b[18]!==S||b[19]!==c?(u=(0,n.jsx)(eh.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:c}),b[18]=S,b[19]=c,b[20]=u):u=b[20],b[21]!==E||b[22]!==u?(p=(0,n.jsx)(s.ReferenceInputOptionsContext.Provider,{value:E,children:u}),b[21]=E,b[22]=u,b[23]=p):p=b[23],p},nF=e=>{let t,l,r,s=(0,i.c)(9),{children:a,documentId:d}=e,c=(0,ef.useToast)(),{t:u}=(0,o.useTranslation)(b);s[0]!==u||s[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,n.jsx)("ul",{children:e.map(e=>{let[t,i]=e;return(0,n.jsx)("li",{children:u(`compare-version.error.${t}`,{input:i})},t)})})})}},s[0]=u,s[1]=c,s[2]=t):t=s[2];let{isActive:p}=nc(t);return s[3]!==d||s[4]!==p?(l=p&&(0,n.jsx)(nD,{documentId:d}),s[3]=d,s[4]=p,s[5]=l):l=s[5],s[6]!==a||s[7]!==l?(r=(0,n.jsxs)(n.Fragment,{children:[a,l]}),s[6]=a,s[7]=l,s[8]=r):r=s[8],r};function nA(){let e=(0,l.useContext)(s.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let nV=(0,ey.styled)(eg.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function nM(e){let t,o,r=(0,i.c)(7),{disabled:s,element:a}=e,{resize:d}=nA(),[c,u]=(0,l.useState)(!1);r[0]!==a||r[1]!==d?(t=e=>{if(!a)return;u(!0),e.preventDefault();let t=e.pageX;d("start",a,0);let n=e=>{e.preventDefault(),d("move",a,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),d("end",a,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},r[0]=a,r[1]=d,r[2]=t):t=r[2];let p=t,m=s?"":void 0,h=c?"":void 0;return r[3]!==p||r[4]!==m||r[5]!==h?(o=(0,n.jsx)(nV,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),r[3]=p,r[4]=m,r[5]=h,r[6]=o):o=r[6],o}let nL=(0,ey.styled)(eg.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,nz=(0,l.forwardRef)(function(e,t){let r,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C,_,I,T,R,P,E,k,D,F,A,V,M=(0,i.c)(86);M[0]!==e?({children:r,currentMinWidth:d,currentMaxWidth:a,flex:h,id:c,minWidth:p,maxWidth:u,selected:g,...m}=e,M[0]=e,M[1]=r,M[2]=a,M[3]=d,M[4]=c,M[5]=u,M[6]=p,M[7]=m,M[8]=h,M[9]=g):(r=M[1],a=M[2],d=M[3],c=M[4],u=M[5],p=M[6],m=M[7],h=M[8],g=M[9]);let L=void 0===h?1:h,z=void 0!==g&&g,[O,B]=(0,l.useState)(null),{collapse:H,collapsed:$,expand:N,expandedElement:G,mount:U,panes:W}=nA();if(M[10]!==W||M[11]!==O){let e;M[14]!==O?(e=e=>e.element===O,M[14]=O,M[15]=e):e=M[15],x=(f=W.find(e))&&W.indexOf(f),M[10]=W,M[11]=O,M[12]=f,M[13]=x}else f=M[12],x=M[13];let q=x,K="number"==typeof q?W[q+1]:void 0,Y=q===W.length-1,X=G===O,J=!$&&(f?.collapsed||!1),Z=K?.collapsed||!1,Q=(0,l.useRef)(null),ee=f?.flex??L,et=f?.currentMinWidth??d,en=f?.currentMaxWidth??a;M[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>Q.current,M[16]=b):b=M[16],(0,l.useImperativeHandle)(t,b),M[17]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{B(e),Q.current=e},M[17]=y):y=M[17];let ei=y;M[18]!==a||M[19]!==d||M[20]!==L||M[21]!==c||M[22]!==u||M[23]!==p||M[24]!==U||M[25]!==O?(v=()=>{if(O)return U(O,{currentMinWidth:d,currentMaxWidth:a,flex:L,id:c,minWidth:p,maxWidth:u})},j=[d,a,L,c,p,u,U,O],M[18]=a,M[19]=d,M[20]=L,M[21]=c,M[22]=u,M[23]=p,M[24]=U,M[25]=O,M[26]=v,M[27]=j):(v=M[26],j=M[27]),(0,l.useLayoutEffect)(v,j),M[28]!==H||M[29]!==O?(w=()=>{O&&H(O)},M[28]=H,M[29]=O,M[30]=w):w=M[30];let el=w;M[31]!==N||M[32]!==O?(S=()=>{O&&N(O)},M[31]=N,M[32]=O,M[33]=S):S=M[33];let eo=S,er=!$&&J;M[34]!==el||M[35]!==eo||M[36]!==Y||M[37]!==q||M[38]!==O||M[39]!==er?(C={collapse:el,collapsed:er,expand:eo,index:q,isLast:Y,rootElement:O},M[34]=el,M[35]=eo,M[36]=Y,M[37]=q,M[38]=O,M[39]=er,M[40]=C):C=M[40];let es=C;e:{if($){_=void 0;break e}if(J){_=51;break e}if(0===et||Y){_=p||204;break e}_=et||p||204}let ea=_;t:{if(J){I=51;break t}if($&&Y){I=void 0;break t}if(Y){if(u){I=en??u;break t}I=void 0;break t}I=en??u}let ed=I,ec=$&&!Y;M[41]!==J||M[42]!==Y||M[43]!==$||M[44]!==Z||M[45]!==O?(T=!Y&&!$&&(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,n.jsx)(nM,{disabled:J||Z,element:O})}),M[41]=J,M[42]=Y,M[43]=$,M[44]=Z,M[45]=O,M[46]=T):T=M[46];let eu=T,ep=ed===1/0?void 0:ed;M[47]!==ee||M[48]!==ea||M[49]!==ep?(R={flex:ee,minWidth:ea,maxWidth:ep},M[47]=ee,M[48]=ea,M[49]=ep,M[50]=R):R=M[50];let em=R,eh=$?void 0:"hidden",ef=J?"":void 0,ex=z?"":void 0;return M[51]!==J||M[52]!==en||M[53]!==et||M[54]!==X||M[55]!==ee||M[56]!==ed||M[57]!==ea||M[58]!==q?(P=!1,M[51]=J,M[52]=en,M[53]=et,M[54]=X,M[55]=ee,M[56]=ed,M[57]=ea,M[58]=q,M[59]=P):P=M[59],M[60]!==r||M[61]!==ec?(E=!ec&&(0,n.jsx)(eg.Flex,{direction:"column",height:"fill",children:r}),M[60]=r,M[61]=ec,M[62]=E):E=M[62],M[63]!==O||M[64]!==E?(k=(0,n.jsx)(eg.BoundaryElementProvider,{element:O,children:E}),M[63]=O,M[64]=E,M[65]=k):k=M[65],M[66]!==ec||M[67]!==c||M[68]!==q||M[69]!==m||M[70]!==em||M[71]!==eh||M[72]!==ef||M[73]!==ex||M[74]!==P||M[75]!==k?(D=(0,n.jsxs)(nL,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ec,id:c,overflow:eh,...m,"data-pane-collapsed":ef,"data-pane-index":q,"data-pane-selected":ex,ref:ei,style:em,children:[P,k]}),M[66]=ec,M[67]=c,M[68]=q,M[69]=m,M[70]=em,M[71]=eh,M[72]=ef,M[73]=ex,M[74]=P,M[75]=k,M[76]=D):D=M[76],M[77]!==Y||M[78]!==D?(F=(0,n.jsx)(o.IsLastPaneProvider,{isLastPane:Y,children:D}),M[77]=Y,M[78]=D,M[79]=F):F=M[79],M[80]!==es||M[81]!==F?(A=(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"pane",children:(0,n.jsx)(s.PaneContext.Provider,{value:es,children:F})}),M[80]=es,M[81]=F,M[82]=A):A=M[82],M[83]!==eu||M[84]!==A?(V=(0,n.jsxs)(n.Fragment,{children:[A,eu]}),M[83]=eu,M[84]=A,M[85]=V):V=M[85],V}),nO=(0,ey.styled)(eg.Card)`
  position: relative;
  outline: none;
`;function nB(){let e=(0,l.useContext)(s.PaneContext);if(!e)throw Error("Pane: missing context value");return e}nO.displayName="PaneContent__root";let nH=(0,l.forwardRef)(function(e,t){let l,o,r,s,a,d,c=(0,i.c)(14);c[0]!==e?({as:l,children:o,overflow:r,padding:s,...a}=e,c[0]=e,c[1]=l,c[2]=o,c[3]=r,c[4]=s,c[5]=a):(l=c[1],o=c[2],r=c[3],s=c[4],a=c[5]);let{collapsed:u}=nB(),{collapsed:p}=nA(),m=p?void 0:r;return c[6]!==l||c[7]!==o||c[8]!==u||c[9]!==s||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,n.jsx)(nO,{"data-testid":"pane-content",forwardedAs:l,...a,flex:1,hidden:u,overflow:m,padding:s,ref:t,tone:"inherit",children:o}),c[6]=l,c[7]=o,c[8]=u,c[9]=s,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function n$(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let nN={constrainSize:!0,placement:"left-start",portal:!0};function nG(e){let t,l,r,s,a=(0,i.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,o.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(eg.MenuDivider,{}),a[0]=e):e=a[0],e}a[1]!==p||a[2]!==u?(t=p(u),a[1]=p,a[2]=u,a[3]=t):t=a[3];let{title:m}=t;if("group"===u.type){let e,t,i,l;if(0===u.children.length)return null;if(u.expanded){let e,t,i;return a[4]!==c?(e=c&&(0,n.jsx)(eg.MenuDivider,{}),a[4]=c,a[5]=e):e=a[5],a[6]!==d||a[7]!==u.children||a[8]!==u.disabled?(t=u.children.map((e,t)=>(0,n.jsx)(nG,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[6]=d,a[7]=u.children,a[8]=u.disabled,a[9]=t):t=a[9],a[10]!==e||a[11]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),a[10]=e,a[11]=t,a[12]=i):i=a[12],i}a[13]!==c?(e=c&&(0,n.jsx)(eg.MenuDivider,{}),a[13]=c,a[14]=e):e=a[14];let o=u.icon;return a[15]!==d||a[16]!==u.children||a[17]!==u.disabled?(t=u.children.map((e,t)=>(0,n.jsx)(nG,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[15]=d,a[16]=u.children,a[17]=u.disabled,a[18]=t):t=a[18],a[19]!==d||a[20]!==u.icon||a[21]!==t||a[22]!==m?(i=(0,n.jsx)(tt.MenuGroup,{disabled:d,icon:o,popover:nN,text:m,children:t}),a[19]=d,a[20]=u.icon,a[21]=t,a[22]=m,a[23]=i):i=a[23],a[24]!==e||a[25]!==i?(l=(0,n.jsxs)(n.Fragment,{children:[e,i]}),a[24]=e,a[25]=i,a[26]=l):l=a[26],l}return a[27]!==c?(l=c&&(0,n.jsx)(eg.MenuDivider,{}),a[27]=c,a[28]=l):l=a[28],a[29]!==d||a[30]!==u?(r=(0,n.jsx)(nU,{disabled:d,node:u}),a[29]=d,a[30]=u,a[31]=r):r=a[31],a[32]!==l||a[33]!==r?(s=(0,n.jsxs)(n.Fragment,{children:[l,r]}),a[32]=l,a[33]=r,a[34]=s):s=a[34],s}function nU(e){let t,l=(0,i.c)(5),{node:o}=e;if(o.intent){let t;return l[0]!==o.intent||l[1]!==e?(t=(0,n.jsx)(nq,{...e,intent:o.intent}),l[0]=o.intent,l[1]=e,l[2]=t):t=l[2],t}return l[3]!==e?(t=(0,n.jsx)(nW,{...e}),l[3]=e,l[4]=t):t=l[4],t}function nW(e){let t,l,r,s,a,c=(0,i.c)(19),{disabled:u,node:p}=e;c[0]!==p.disabled?(t="object"==typeof p.disabled&&(0,n.jsx)(eg.Text,{size:1,children:p.disabled.reason}),c[0]=p.disabled,c[1]=t):t=c[1];let m=t,{title:h}=(0,o.useI18nText)(p),g=u||!!p.disabled;c[2]!==p.hotkey?(l=p.hotkey?.split("+"),c[2]=p.hotkey,c[3]=l):l=c[3];let f=p.icon,x=p.iconRight||p.selected&&d.CheckmarkIcon,b=p.onAction,y=p.selected,v=p.tone;c[4]!==p.title?(r=n$(p.title),c[4]=p.title,c[5]=r):r=c[5];let j=`action-${r}`;return c[6]!==p.icon||c[7]!==p.onAction||c[8]!==p.selected||c[9]!==p.tone||c[10]!==g||c[11]!==l||c[12]!==x||c[13]!==j||c[14]!==h?(s=(0,n.jsx)(eh.MenuItem,{disabled:g,hotkeys:l,icon:f,iconRight:x,onClick:b,pressed:y,text:h,tone:v,"data-testid":j}),c[6]=p.icon,c[7]=p.onAction,c[8]=p.selected,c[9]=p.tone,c[10]=g,c[11]=l,c[12]=x,c[13]=j,c[14]=h,c[15]=s):s=c[15],c[16]!==s||c[17]!==m?(a=(0,n.jsx)(o.TooltipOfDisabled,{content:m,placement:"left",children:s}),c[16]=s,c[17]=m,c[18]=a):a=c[18],a}function nq(e){let t,l,r,s,a,c,u=(0,i.c)(23),{disabled:p,intent:m,node:h}=e;u[0]!==h.disabled?(t="object"==typeof h.disabled&&(0,n.jsx)(eg.Text,{size:1,children:h.disabled.reason}),u[0]=h.disabled,u[1]=t):t=u[1];let g=t;u[2]!==m.params||u[3]!==m.type?(l={intent:m.type,params:m.params},u[2]=m.params,u[3]=m.type,u[4]=l):l=u[4];let f=(0,eC.useIntentLink)(l);u[5]!==f||u[6]!==h?(r=e=>{f.onClick(e),h.onAction()},u[5]=f,u[6]=h,u[7]=r):r=u[7];let x=r,{title:b}=(0,o.useI18nText)(h),y=p||!!h.disabled;u[8]!==h.hotkey?(s=h.hotkey?.split("+"),u[8]=h.hotkey,u[9]=s):s=u[9];let v=h.selected?d.CheckmarkIcon:void 0;return u[10]!==x||u[11]!==f.href||u[12]!==h.icon||u[13]!==h.selected||u[14]!==h.tone||u[15]!==y||u[16]!==s||u[17]!==v||u[18]!==b?(a=(0,n.jsx)(eh.MenuItem,{as:"a",disabled:y,hotkeys:s,href:f.href,icon:h.icon,iconRight:v,onClick:x,pressed:h.selected,text:b,tone:h.tone}),u[10]=x,u[11]=f.href,u[12]=h.icon,u[13]=h.selected,u[14]=h.tone,u[15]=y,u[16]=s,u[17]=v,u[18]=b,u[19]=a):a=u[19],u[20]!==a||u[21]!==g?(c=(0,n.jsx)(o.TooltipOfDisabled,{content:g,placement:"left",children:a}),u[20]=a,u[21]=g,u[22]=c):c=u[22],c}let nK={constrainSize:!0,placement:"bottom",portal:!0};function nY(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&nY(e.children,t))}function nX(e){let t,r,s,a,d,c=(0,i.c)(13),{nodes:u,actionsNodes:p}=e,m=(0,l.useId)(),h=nY(u,"critical"),g=nY(u,"caution"),f=h?"critical":g?"caution":void 0;return c[0]!==f?(t=(0,n.jsx)(o.ContextMenuButton,{tone:f,"data-testid":"pane-context-menu-button"}),c[0]=f,c[1]=t):t=c[1],c[2]!==p?(r=p&&(0,n.jsxs)(n.Fragment,{children:[p,(0,n.jsx)(eg.MenuDivider,{})]}),c[2]=p,c[3]=r):r=c[3],c[4]!==u?(s=u.map((e,t)=>{let i=u[t-1]?.type==="group";return(0,n.jsx)(nG,{isAfterGroup:i,node:e},e.key)}),c[4]=u,c[5]=s):s=c[5],c[6]!==r||c[7]!==s?(a=(0,n.jsxs)(eg.Menu,{children:[r,s]}),c[6]=r,c[7]=s,c[8]=a):a=c[8],c[9]!==m||c[10]!==t||c[11]!==a?(d=(0,n.jsx)(eh.MenuButton,{button:t,id:m,menu:a,popover:nK}),c[9]=m,c[10]=t,c[11]=a,c[12]=d):d=c[12],d}let nJ=(0,ey.styled)(eg.Layer)`
  position: sticky;
  bottom: 0;
`,nZ=(0,ey.styled)(eg.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,nQ=(0,l.forwardRef)(function(e,t){let l,r,s=(0,i.c)(7),{children:a,padding:d}=e,{collapsed:c}=nB();return s[0]!==a||s[1]!==d?(l=(0,n.jsx)(nZ,{tone:"inherit",children:(0,n.jsx)(eg.Box,{padding:d,children:a})}),s[0]=a,s[1]=d,s[2]=l):l=s[2],s[3]!==c||s[4]!==t||s[5]!==l?(r=(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(nJ,{"data-testid":"pane-footer",hidden:c,ref:t,children:l})}),s[3]=c,s[4]=t,s[5]=l,s[6]=r):r=s[6],r}),n0=(0,ey.styled)(eg.Layer)(({$border:e})=>ey.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),n1=(0,ey.styled)(eg.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,n2=(0,ey.styled)(eg.Card)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return ey.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),n3=(0,ey.styled)(ef.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,n4=(0,ey.styled)(eg.Text)`
  cursor: default;
  outline: none;
`,n5=(0,l.forwardRef)(function(e,t){let l,r,s,a,d,c,u,p,m,h,g,f,x,b=(0,i.c)(48),{actions:y,backButton:v,border:j,contentAfter:w,loading:S,subActions:C,tabs:_,tabIndex:I,title:T,appendTitle:R}=e,{collapse:P,collapsed:E,expand:k,rootElement:D}=nB(),F=(0,ef.useElementRect)(D||null),A=E?F?.height||window.innerHeight:void 0;b[0]!==A?(l={width:A},b[0]=A,b[1]=l):l=b[1];let V=l;b[2]!==P||b[3]!==E?(r=()=>{E||P()},b[2]=P,b[3]=E,b[4]=r):r=b[4];let M=r;b[5]!==E||b[6]!==k?(s=()=>{E&&k()},b[5]=E,b[6]=k,b[7]=s):s=b[7];let L=s,z=!!(!E&&(_||C)),O=E?"":void 0,B=E?"":void 0;b[8]!==v?(a=v&&(0,n.jsx)(eg.Box,{flex:"none",children:v}),b[8]=v,b[9]=a):a=b[9];let H=v?1:2;b[10]!==S?(d=S&&(0,n.jsx)(eg.Box,{children:(0,n.jsx)(n3,{animated:!0,radius:1,size:1})}),b[10]=S,b[11]=d):d=b[11],b[12]!==R||b[13]!==S||b[14]!==T?(c=!S&&(0,n.jsxs)(eg.Flex,{align:"center",gap:1,children:[(0,n.jsx)(n4,{size:1,textOverflow:"ellipsis",weight:"semibold",children:T}),R]}),b[12]=R,b[13]=S,b[14]=T,b[15]=c):c=b[15],b[16]!==M||b[17]!==H||b[18]!==d||b[19]!==c||b[20]!==I?(u=(0,n.jsxs)(n2,{__unstable_focusRing:!0,flex:1,onClick:M,paddingLeft:H,padding:2,tabIndex:I,children:[d,c]}),b[16]=M,b[17]=H,b[18]=d,b[19]=c,b[20]=I,b[21]=u):u=b[21],b[22]!==y||b[23]!==E?(p=y&&(0,n.jsx)(eg.Box,{hidden:E,children:(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneHeader",children:y})}),b[22]=y,b[23]=E,b[24]=p):p=b[24],b[25]!==u||b[26]!==p||b[27]!==a?(m=(0,n.jsxs)(eg.Flex,{align:"flex-start",gap:3,children:[a,u,p]}),b[25]=u,b[26]=p,b[27]=a,b[28]=m):m=b[28],b[29]!==E||b[30]!==z||b[31]!==C||b[32]!==_?(h=z&&(0,n.jsxs)(eg.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,n.jsx)(eg.Box,{flex:1,marginRight:3*!!C,children:_}),C]}),b[29]=E,b[30]=z,b[31]=C,b[32]=_,b[33]=h):h=b[33],b[34]!==L||b[35]!==V||b[36]!==m||b[37]!==h?(g=(0,n.jsxs)(n1,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:V,children:[m,h]}),b[34]=L,b[35]=V,b[36]=m,b[37]=h,b[38]=g):g=b[38];let $=!E&&w;return b[39]!==g||b[40]!==$||b[41]!==B?(f=(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,n.jsxs)(eg.Card,{"data-collapsed":B,tone:"inherit",children:[g,$]})}),b[39]=g,b[40]=$,b[41]=B,b[42]=f):f=b[42],b[43]!==j||b[44]!==t||b[45]!==f||b[46]!==O?(x=(0,n.jsx)(eg.LayerProvider,{zOffset:100,children:(0,n.jsx)(n0,{$border:j,"data-collapsed":O,"data-testid":"pane-header",ref:t,children:f})}),b[43]=j,b[44]=t,b[45]=f,b[46]=O,b[47]=x):x=b[47],x});function n6(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function n8(e){let t=(0,i.c)(4),{node:l}=e;if("item"===l.type){let e;return t[0]!==l?(e=(0,n.jsx)(n7,{node:l}),t[0]=l,t[1]=e):e=t[1],e}if("group"===l.type){let e;return t[2]!==l?(e=(0,n.jsx)(ie,{node:l}),t[2]=l,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',l),null}function n7(e){let t,l,r,s,a,d=(0,i.c)(23),{node:c}=e,{title:u}=(0,o.useI18nText)(c),{t:p}=(0,o.useTranslation)();if(c.intent){let t;return d[0]!==c.intent||d[1]!==e?(t=(0,n.jsx)(n9,{...e,intent:c.intent}),d[0]=c.intent,d[1]=e,d[2]=t):t=d[2],t}d[3]!==c?(t=n6(c),d[3]=c,d[4]=t):t=d[4];let{disabledReason:m,ariaLabel:h,isDisabled:g}=t;d[5]!==h||d[6]!==p||d[7]!==u?(l=h||u||p("status-button.aria-label"),d[5]=h,d[6]=p,d[7]=u,d[8]=l):l=d[8],d[9]!==g||d[10]!==c.hotkey?(r=!g&&c.hotkey?c.hotkey.split("+"):void 0,d[9]=g,d[10]=c.hotkey,d[11]=r):r=d[11];let f=g?m:u;return d[12]!==r||d[13]!==f?(s={hotkeys:r,content:f},d[12]=r,d[13]=f,d[14]=s):s=d[14],d[15]!==g||d[16]!==c.icon||d[17]!==c.onAction||d[18]!==c.selected||d[19]!==c.tone||d[20]!==l||d[21]!==s?(a=(0,n.jsx)(o.StatusButton,{disabled:g,icon:c.icon,onClick:c.onAction,selected:c.selected,tone:c.tone,"aria-label":l,tooltipProps:s}),d[15]=g,d[16]=c.icon,d[17]=c.onAction,d[18]=c.selected,d[19]=c.tone,d[20]=l,d[21]=s,d[22]=a):a=d[22],a}function n9(e){let t,l,r,s,a,d,c,u=(0,i.c)(27),{intent:p,node:m}=e;u[0]!==p.params||u[1]!==p.type?(t={intent:p.type,params:p.params},u[0]=p.params,u[1]=p.type,u[2]=t):t=u[2];let h=(0,eC.useIntentLink)(t),{t:g}=(0,o.useTranslation)();u[3]!==h||u[4]!==m?(l=e=>{h.onClick(e),m.onAction()},u[3]=h,u[4]=m,u[5]=l):l=u[5];let f=l;u[6]!==m?(r=n6(m),u[6]=m,u[7]=r):r=u[7];let{disabledReason:x,ariaLabel:b,isDisabled:y}=r;u[8]!==b||u[9]!==m.title||u[10]!==g?(s=b||m.title||g("status-button.aria-label"),u[8]=b,u[9]=m.title,u[10]=g,u[11]=s):s=u[11],u[12]!==y||u[13]!==m.hotkey?(a=!y&&m.hotkey?m.hotkey.split("+"):void 0,u[12]=y,u[13]=m.hotkey,u[14]=a):a=u[14];let v=y?x:m.title;return u[15]!==a||u[16]!==v?(d={hotkeys:a,content:v,placement:"bottom",portal:!0},u[15]=a,u[16]=v,u[17]=d):d=u[17],u[18]!==f||u[19]!==h.href||u[20]!==y||u[21]!==m.icon||u[22]!==m.selected||u[23]!==m.tone||u[24]!==s||u[25]!==d?(c=(0,n.jsx)(o.StatusButton,{forwardedAs:"a",disabled:y,href:h.href,icon:m.icon,onClick:f,selected:m.selected,tone:m.tone,"aria-label":s,tooltipProps:d}),u[18]=f,u[19]=h.href,u[20]=y,u[21]=m.icon,u[22]=m.selected,u[23]=m.tone,u[24]=s,u[25]=d,u[26]=c):c=u[26],c}function ie(e){let t,r,s,a,c,u=(0,i.c)(16),{node:p}=e,{title:m}=(0,o.useI18nText)(p),h=!!p.disabled,g=p.icon??d.UnknownIcon;u[0]!==p.title?(t={content:p.title,portal:!0},u[0]=p.title,u[1]=t):t=u[1],u[2]!==h||u[3]!==g||u[4]!==t||u[5]!==m?(r=(0,n.jsx)(eh.Button,{disabled:h,icon:g,label:m,mode:"bleed",tooltipProps:t}),u[2]=h,u[3]=g,u[4]=t,u[5]=m,u[6]=r):r=u[6];let f=(0,l.useId)();return u[7]!==p.children||u[8]!==p.disabled?(s=p.children.map((e,t)=>(0,n.jsx)(nG,{disabled:!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),u[7]=p.children,u[8]=p.disabled,u[9]=s):s=u[9],u[10]!==s?(a=(0,n.jsx)(eg.Menu,{children:s}),u[10]=s,u[11]=a):a=u[11],u[12]!==r||u[13]!==f||u[14]!==a?(c=(0,n.jsx)(eh.MenuButton,{button:r,id:f,menu:a}),u[12]=r,u[13]=f,u[14]=a,u[15]=c):c=u[15],c}let it=(0,ey.styled)(eg.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,ii=[];function il(e){let t,o,r,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(41);w[0]!==e?({children:t,minWidth:o,onCollapse:r,onExpand:a,...d}=e,w[0]=e,w[1]=t,w[2]=o,w[3]=r,w[4]=a,w[5]=d):(t=w[1],o=w[2],r=w[3],a=w[4],d=w[5]);let[S]=(0,l.useState)(io),[C,_]=(0,l.useState)(null),I=(0,ef.useElementRect)(C)?.width||0,T=void 0!==I&&o?I<o:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(c={expandedElement:null,panes:[],resizing:!1},w[6]=c):c=w[6];let[R,P]=(0,l.useState)(c);w[7]!==S||w[8]!==C?(u=()=>S.setRootElement(C),p=[S,C],w[7]=S,w[8]=C,w[9]=u,w[10]=p):(u=w[9],p=w[10]),(0,l.useEffect)(u,p),w[11]!==S||w[12]!==I?(m=()=>S.setRootWidth(I),h=[S,I],w[11]=S,w[12]=I,w[13]=m,w[14]=h):(m=w[13],h=w[14]),(0,l.useEffect)(m,h),w[15]!==S?(g=()=>S.subscribe(P),f=[S],w[15]=S,w[16]=g,w[17]=f):(g=w[16],f=w[17]),(0,l.useEffect)(g,f),w[18]!==T||w[19]!==r||w[20]!==a?(x=()=>{void 0!==T&&(T&&r&&r(),!T&&a&&a())},b=[T,r,a],w[18]=T,w[19]=r,w[20]=a,w[21]=x,w[22]=b):(x=w[21],b=w[22]),(0,l.useEffect)(x,b),w[23]!==T||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==R.expandedElement||w[29]!==R.panes||w[30]!==R.resizing?(y={collapse:S.collapse,collapsed:T,expand:S.expand,expandedElement:R.expandedElement,mount:S.mount,panes:R.panes,resize:S.resize,resizing:R.resizing},w[23]=T,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=R.expandedElement,w[29]=R.panes,w[30]=R.resizing,w[31]=y):y=w[31];let E=y,k=T?"":void 0,D=R.resizing?"":void 0,F=I?"":void 0;return w[32]!==t||w[33]!==d||w[34]!==k||w[35]!==D||w[36]!==F?(v=(0,n.jsx)(it,{"data-ui":"PaneLayout",...d,"data-collapsed":k,"data-resizing":D,"data-mounted":F,ref:_,children:t}),w[32]=t,w[33]=d,w[34]=k,w[35]=D,w[36]=F,w[37]=v):v=w[37],w[38]!==E||w[39]!==v?(j=(0,n.jsx)(s.PaneLayoutContext.Provider,{value:E,children:v}),w[38]=E,w[39]=v,w[40]=j):j=w[40],j}function io(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||ii,l=n.get(t)||ii,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[r+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,r,c,m,h,g,f,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,r=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),g=l.right.width-n,g>(f=r-l.left.width)&&(g=f),x=Math.min(Math.max(o,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:S,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,u=l.length,p=l[0],m=r-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===p,s=i.has(e),c=l>m,u=!r&&(s||c),h=d.get(e);o.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=o.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function ir(e){let t,l,o,r=(0,i.c)(12),{children:s,currentMinWidth:a,flex:d,minWidth:c,paneKey:u,title:p,tone:m}=e,h=void 0===p?"Error":p,g=void 0===m?"critical":m;return r[0]!==h?(t=(0,n.jsx)(n5,{title:h}),r[0]=h,r[1]=t):t=r[1],r[2]!==s?(l=(0,n.jsx)(nH,{overflow:"auto",children:(0,n.jsx)(eg.Box,{paddingX:4,paddingY:5,children:s})}),r[2]=s,r[3]=l):l=r[3],r[4]!==a||r[5]!==d||r[6]!==c||r[7]!==u||r[8]!==t||r[9]!==l||r[10]!==g?(o=(0,n.jsxs)(nz,{currentMinWidth:a,flex:d,id:u,minWidth:c,tone:g,children:[t,l]}),r[4]=a,r[5]=d,r[6]=c,r[7]=u,r[8]=t,r[9]=l,r[10]=g,r[11]=o):o=r[11],o}function is(e){let t,o,r,s=(0,i.c)(6),{children:a,ms:d}=e,c=void 0===d?0:d,[u,p]=(0,l.useState)(c<=0);if(s[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},o=[c],s[0]=c,s[1]=t,s[2]=o):(t=s[1],o=s[2]),(0,l.useEffect)(t,o),!u||!a){let e;return s[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),s[3]=e):e=s[3],e}return s[4]!==a?(r="function"==typeof a?a():a,s[4]=a,s[5]=r):r=s[5],r}function ia(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(o.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" âž ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,eW.of)(null);return(0,eq.merge)(...t.map(e=>n.pipe((0,eR.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eP.delay)(e.ms))))}let id=(0,ey.styled)(eg.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,ic=(0,l.memo)(e=>{let t,r,s,a,d,c,u,p,m,h,g=(0,i.c)(28),{delay:f,flex:x,message:y,minWidth:v,paneKey:j,path:w,selected:S,title:C,tone:_}=e,I=void 0===f?300:f,T=void 0===y?ia:y,{t:R}=(0,o.useTranslation)(b);e:{if("function"==typeof T){let e;g[0]!==T||g[1]!==w?(e=T(w?w.split(";"):[]),g[0]=T,g[1]=w,g[2]=e):e=g[2],t=e;break e}t=T}let P=t;g[3]!==P||g[4]!==R?(r=()=>"string"==typeof P?P:R("panes.resolving.default-message"),g[3]=P,g[4]=R,g[5]=r):r=g[5];let[E,k]=(0,l.useState)(r);g[6]!==P||g[7]!==R?(s=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{k("messageKey"in e?R(e.messageKey):e.message)});return()=>e.unsubscribe()},a=[P,R],g[6]=P,g[7]=R,g[8]=s,g[9]=a):(s=g[8],a=g[9]),(0,l.useEffect)(s,a);let[D,F]=(0,l.useState)(null),[A,V]=(0,l.useState)(!1);g[10]!==D?(d=()=>{if(D)return(0,ef._raf2)(()=>V(!0))},c=[D],g[10]=D,g[11]=d,g[12]=c):(d=g[11],c=g[12]),(0,l.useEffect)(d,c);let M=A?"":void 0,L=C||E;g[13]!==L?(u=(0,n.jsx)(o.LoadingBlock,{showText:!0,title:L}),g[13]=L,g[14]=u):u=g[14],g[15]!==u||g[16]!==M?(p=(0,n.jsx)(id,{align:"center","data-mounted":M,direction:"column",height:"fill",justify:"center",ref:F,children:u}),g[15]=u,g[16]=M,g[17]=p):p=g[17];let z=p;return g[18]!==z||g[19]!==I?(m=(0,n.jsx)(nH,{children:z}),g[18]=z,g[19]=I,g[20]=m):m=g[20],g[21]!==x||g[22]!==v||g[23]!==j||g[24]!==S||g[25]!==m||g[26]!==_?(h=(0,n.jsx)(nz,{flex:x,id:j,minWidth:v,selected:S,tone:_,children:m}),g[21]=x,g[22]=v,g[23]=j,g[24]=S,g[25]=m,g[26]=_,g[27]=h):h=g[27],h});function iu(){let e=(0,l.useContext)(s.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function ip(e){let t,l,r=(0,i.c)(8),{children:s,documentId:a,documentType:d}=e;return r[0]!==s||r[1]!==a||r[2]!==d?(t=(0,n.jsx)(im,{documentId:a,documentType:d,children:s}),r[0]=s,r[1]=a,r[2]=d,r[3]=t):t=r[3],r[4]!==a||r[5]!==d||r[6]!==t?(l=(0,n.jsx)(o.CommentsEnabledProvider,{documentId:a,documentType:d,children:t}),r[4]=a,r[5]=d,r[6]=t,r[7]=l):l=r[7],l}function im(e){let t,r,s,a,d,c,u=(0,i.c)(26),{children:p,documentId:m,documentType:h}=e,{enabled:g}=(0,o.useCommentsEnabled)(),{connectionState:f,onPathOpen:x,inspector:b,openInspector:y}=iu(),{selectedReleaseId:v}=(0,o.usePerspective)(),{params:j,setParams:w}=ln(),{resolveIntentLink:S}=(0,eC.useRouter)(),C=j?.comment,_=(0,l.useRef)(j);u[0]!==j?(t=()=>{_.current=j},r=[j],u[0]=j,u[1]=t,u[2]=r):(t=u[1],r=u[2]),(0,l.useLayoutEffect)(t,r),u[3]!==m||u[4]!==h||u[5]!==S?(s=e=>{let t=S("edit",{id:m,type:h,inspect:o.COMMENTS_INSPECTOR_NAME,comment:e});return`${window.location.origin}${t}`},u[3]=m,u[4]=h,u[5]=S,u[6]=s):s=u[6];let I=s;u[7]!==w?(a=()=>{w({..._.current,comment:void 0})},u[7]=w,u[8]=a):a=u[8];let T=a;u[9]!==b?.name||u[10]!==y?(d=()=>{b?.name!==o.COMMENTS_INSPECTOR_NAME&&y(o.COMMENTS_INSPECTOR_NAME)},u[9]=b?.name,u[10]=y,u[11]=d):d=u[11];let R=d;if(!g){let e;return u[12]!==p?(e=(0,n.jsx)(n.Fragment,{children:p}),u[12]=p,u[13]=e):e=u[13],e}let P=b?.name===o.COMMENTS_INSPECTOR_NAME,E="connecting"===f;return u[14]!==p||u[15]!==m||u[16]!==h||u[17]!==I||u[18]!==T||u[19]!==R||u[20]!==x||u[21]!==C||u[22]!==v||u[23]!==P||u[24]!==E?(c=(0,n.jsx)(o.CommentsProvider,{documentId:m,documentType:h,getCommentLink:I,isCommentsOpen:P,isConnecting:E,onClearSelectedComment:T,onCommentsOpen:R,onPathOpen:x,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:v,children:p}),u[14]=p,u[15]=m,u[16]=h,u[17]=I,u[18]=T,u[19]=R,u[20]=x,u[21]=C,u[22]=v,u[23]=P,u[24]=E,u[25]=c):c=u[25],c}function ih(e){let t,r,s,a,d,c=(0,i.c)(14),{children:u}=e,{actions:p,editState:m,isInitialValueLoading:h,revisionId:g}=iu(),f=(0,l.useRef)(null);c[0]!==m||c[1]!==h||c[2]!==g?(t=m?{...m,revision:g||void 0,initialValueResolved:!h}:null,c[0]=m,c[1]=h,c[2]=g,c[3]=t):t=c[3];let x=t;if(!x)return null;c[4]===Symbol.for("react.memo_cache_sentinel")?(r=()=>f.current?.(),c[4]=r):r=c[4],c[5]!==x?(s={...x,onComplete:r},c[5]=x,c[6]=s):s=c[6];let b=p||o.EMPTY_ARRAY;return c[7]!==x||c[8]!==u?(a=e=>{let{states:t}=e;return(0,n.jsx)(ix,{states:t,actionProps:x,children:u})},c[7]=x,c[8]=u,c[9]=a):a=c[9],c[10]!==s||c[11]!==b||c[12]!==a?(d=(0,n.jsx)(o.GetHookCollectionState,{args:s,hooks:b,resetRef:f,children:a}),c[10]=s,c[11]=b,c[12]=a,c[13]=d):d=c[13],d}ic.displayName="Memo(LoadingPane)";let ig=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function ix(e){let t,l,r,a=(0,i.c)(9),{states:d,children:c,actionProps:u}=e,{t:p}=(0,o.useTranslation)(b);a[0]!==u?(t=(0,o.getDocumentIdForCanvasLink)(u),a[0]=u,a[1]=t):t=a[1];let{isLinked:m}=(0,o.useCanvasCompanionDoc)(t);return a[2]!==m||a[3]!==d||a[4]!==p?(l=m?d.map(e=>e.action&&ig.includes(e.action)?e:{...e,disabled:!0,title:p("action.disabled-by-canvas.tooltip")}):d,a[2]=m,a[3]=d,a[4]=p,a[5]=l):l=a[5],a[6]!==c||a[7]!==l?(r=(0,n.jsx)(s.DocumentActionsStateContext.Provider,{value:l,children:c}),a[6]=c,a[7]=l,a[8]=r):r=a[8],r}function ib(){let e=(0,l.useContext)(s.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let iy={},iv="inspect:",ij=[{id:"inspectors"},{id:"links"}],iw="sanity/structure/history";function iS(e){let t,r,s,a,d,c,u,p,m,h=(0,i.c)(22),{documentId:g,documentType:f,inspectors:x,onMenuItems:b}=e,y=x.length;h[0]!==y?(t=()=>Array.from(Array(y)),h[0]=y,h[1]=t):t=h[1];let[v,j]=(0,l.useState)(t);h[2]!==y||h[3]!==v?(r=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},s=[y,v],h[2]=y,h[3]=v,h[4]=r,h[5]=s):(r=h[4],s=h[5]),(0,l.useEffect)(r,s),h[6]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},h[6]=a):a=h[6];let w=a;if(h[7]!==v||h[8]!==b?(d=()=>{b(v.filter(Boolean))},c=[v,b],h[7]=v,h[8]=b,h[9]=d,h[10]=c):(d=h[9],c=h[10]),(0,l.useEffect)(d,c),h[11]!==g||h[12]!==f||h[13]!==x){let e;h[15]!==g||h[16]!==f?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:r,useMenuItem:s}){return(0,l.memo)(function(){let a,d,c,u=(0,i.c)(4);u[0]===Symbol.for("react.memo_cache_sentinel")?(a={documentId:e,documentType:t},u[0]=a):a=u[0];let p=s(a),m=(0,o.useUnique)(p);return u[1]!==m?(d=()=>{r(n,m)},c=[m],u[1]=m,u[2]=d,u[3]=c):(d=u[2],c=u[3]),(0,l.useEffect)(d,c),null})}({documentId:g,documentType:f,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[i_,""],h[15]=g,h[16]=f,h[17]=e):e=h[17],u=x.map(e),h[11]=g,h[12]=f,h[13]=x,h[14]=u}else u=h[14];let S=u;return h[18]!==S?(p=S.map(iC),h[18]=S,h[19]=p):p=h[19],h[20]!==p?(m=(0,n.jsx)(n.Fragment,{children:p}),h[20]=p,h[21]=m):m=h[21],m}function iC(e){let[t,i]=e;return i&&(0,n.jsx)(t,{},i)}function i_(){return null}function iI(){let e,t,n,l,r=(0,i.c)(22),{connectionState:s,schemaType:a,editState:d,isDeleted:c,lastRevisionDocument:u}=iu(),{selectedPerspectiveName:p}=(0,o.usePerspective)(),{t:m}=(0,o.useTranslation)(b);e:{if(c){e=u;break e}if(p&&(0,o.isPublishedPerspective)(p)){e=d?.published;break e}e=d?.version||d?.draft||d?.published}let h=e,g=!!h;t:{if(c&&u&&a)try{let e;r[0]!==u||r[1]!==a?(e=(0,o.prepareForPreview)(u,a),r[0]=u,r[1]=a,r[2]=e):e=r[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let f=t,x=g&&!c;r[3]!==h||r[4]!==a||r[5]!==x?(n={enabled:x,schemaType:a,value:h},r[3]=h,r[4]=a,r[5]=x,r[6]=n):n=r[6];let{error:y,value:v}=(0,o.unstable_useValuePreview)(n);if("connecting"===s&&!g){let e;return r[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},r[7]=e):e=r[7],e}if(c&&f){let e;return r[8]!==f.title?(e={error:void 0,title:f.title},r[8]=f.title,r[9]=e):e=r[9],e}if(!v&&!c){let e,t,n=a?.title||a?.name;return r[10]!==m||r[11]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),r[10]=m,r[11]=n,r[12]=e):e=r[12],r[13]!==e?(t={error:void 0,title:e},r[13]=e,r[14]=t):t=r[14],t}if(y){let e,t;return r[15]!==y.message||r[16]!==m?(e=m("panes.document-list-pane.error.text",{error:y.message}),r[15]=y.message,r[16]=m,r[17]=e):e=r[17],r[18]!==e?(t={error:e,title:void 0},r[18]=e,r[19]=t):t=r[19],t}let j=v?.title;return r[20]!==j?(l={error:void 0,title:j},r[20]=j,r[21]=l):l=r[21],l}iS.displayName="DocumentInspectorMenuItemsResolver";let iT=["patch","commit"],iR=(0,l.memo)(function(){let e,t,r,s,a,d=(0,i.c)(13),{push:c}=(0,ef.useToast)(),{documentId:u,documentType:p,value:m}=iu(),h=iI(),g=h.error,f=(0,o.useDocumentOperationEvent)(u,p),x=(0,l.useRef)(f),y=ln(),{t:v}=(0,o.useTranslation)(b),{handleOpenDialog:j}=(0,o.useDocumentLimitsUpsellContext)();e:{if(!h.title&&!g&&!iT.includes(f?.op)&&"string"==typeof m.title&&f?.type==="success"){e=m.title;break e}e=h.title}let w=e;d[0]!==v||d[1]!==w?(t=w||v("panes.document-operation-results.operation-undefined-title"),d[0]=v,d[1]=w,d[2]=t):t=d[2];let S=t;d[3]!==S?(r=S.length>25?`${S.slice(0,25)}...`:S,d[3]=S,d[4]=r):r=d[4];let C=r;return d[5]!==C||d[6]!==f||d[7]!==j||d[8]!==y||d[9]!==c||d[10]!==v?(s=()=>{let e;if(f&&f!==x.current){if("error"===f.type){if((0,o.isDocumentLimitError)(f.error))return void j("document_action");c({closable:!0,duration:3e4,status:"error",title:v("panes.document-operation-results.operation-error",{context:f.op}),description:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:v("panes.document-operation-results.error.summary.title")}),f.error.message]})})}return"success"!==f.type||iT.includes(f.op)||c({closable:!0,status:"success",title:(0,n.jsx)(o.Translate,{context:f.op,i18nKey:"panes.document-operation-results.operation-success",t:v,values:{op:f.op,title:C},components:{Strong:"strong"}})}),"success"===f.type&&"delete"===f.op&&(e=setTimeout(()=>y.closeCurrentAndAfter(),0)),x.current=f,()=>clearTimeout(e)}},a=[f,y,c,v,C,j],d[5]=C,d[6]=f,d[7]=j,d[8]=y,d[9]=c,d[10]=v,d[11]=s,d[12]=a):(s=d[11],a=d[12]),(0,l.useEffect)(s,a),null}),iP=(0,ey.styled)(eg.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function iE(e){let t,l,r,s,a,c,u,p,m,h,g,f,x=(0,i.c)(25);x[0]!==e?({as:r,children:t,closeButtonLabel:l,onClose:s,title:c,...a}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=r,x[4]=s,x[5]=a,x[6]=c):(t=x[1],l=x[2],r=x[3],s=x[4],a=x[5],c=x[6]);let{t:y}=(0,o.useTranslation)(b);return x[7]!==c?(u=(0,n.jsx)(eg.Box,{flex:1,padding:3,children:(0,n.jsx)(eg.Text,{as:"h1",size:1,weight:"medium",children:c})}),x[7]=c,x[8]=u):u=x[8],x[9]!==y?(p=y("document-inspector.close-button.tooltip"),x[9]=y,x[10]=p):p=x[10],x[11]!==p?(m={content:p},x[11]=p,x[12]=m):m=x[12],x[13]!==l||x[14]!==s||x[15]!==m?(h=(0,n.jsx)(eg.Box,{flex:"none",padding:1,children:(0,n.jsx)(eh.Button,{"aria-label":l,icon:d.CloseIcon,mode:"bleed",onClick:s,tooltipProps:m})}),x[13]=l,x[14]=s,x[15]=m,x[16]=h):h=x[16],x[17]!==u||x[18]!==h?(g=(0,n.jsxs)(eg.Flex,{padding:2,children:[u,h]}),x[17]=u,x[18]=h,x[19]=g):g=x[19],x[20]!==t||x[21]!==r||x[22]!==a||x[23]!==g?(f=(0,n.jsxs)(iP,{...a,as:r,children:[g,t]}),x[20]=t,x[21]=r,x[22]=a,x[23]=g,x[24]=f):f=x[24],f}function ik(e){let t,l,r,s=(0,i.c)(14),{documentId:a,documentType:d,flex:c}=e,{collapsed:u}=nB(),{closeInspector:p,inspector:m}=iu(),{features:h}=ib();s[0]!==p||s[1]!==m?(t=()=>{m&&p(m.name)},s[0]=p,s[1]=m,s[2]=t):t=s[2];let g=t;if(u||!m)return null;let f=m.component;s[3]!==f||s[4]!==a||s[5]!==d||s[6]!==g?(l=(0,n.jsx)(f,{onClose:g,documentId:a,documentType:d}),s[3]=f,s[4]=a,s[5]=d,s[6]=g,s[7]=l):l=s[7];let x=l;if(h.resizablePanes){let e;return s[8]!==x||s[9]!==c?(e=(0,n.jsx)(o.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:x}),s[8]=x,s[9]=c,s[10]=e):e=s[10],e}return s[11]!==x||s[12]!==c?(r=(0,n.jsx)(eg.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:x}),s[11]=x,s[12]=c,s[13]=r):r=s[13],r}function iD(e,t,n){let l,r,s,a,d=(0,i.c)(16),c=(0,o.useKeyValueStore)();d[0]!==t||d[1]!==e?(l=["studio.structure-tool",e,t].filter(Boolean),d[0]=t,d[1]=e,d[2]=l):l=d[2];let u=l.join(".");if(d[3]!==n||d[4]!==c||d[5]!==u){let e;d[7]!==n?(e=e=>null===e?n:e,d[7]=n,d[8]=e):e=d[8],r=c.getKey(u).pipe((0,eE.map)(e)),d[3]=n,d[4]=c,d[5]=u,d[6]=r}else r=d[6];let p=(0,eS.useObservable)(r,n);d[9]!==c||d[10]!==u||d[11]!==p?(s=async e=>{e!==p&&await c.setKey(u,e)},d[9]=c,d[10]=u,d[11]=p,d[12]=s):s=d[12];let m=s;return d[13]!==m||d[14]!==p?(a=[p,m],d[13]=m,d[14]=p,d[15]=a):a=d[15],a}let iF={id:"parsed",title:"document-inspector.view-mode.parsed"},iA={id:"raw",title:"document-inspector.view-mode.raw-json"},iV=[iF,iA],iM=new tf.default({maxSize:1e3});function iL(e){let{path:t}=e,n=iM.get(t);void 0!==n&&iM.set(t,!n)}function iz(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function iO(e){iz(e.target)}function iB(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),iz(e.currentTarget))}let iH=ey.styled.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return ey.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,eg.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,eg.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - ${(0,eg.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,eg.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,eg.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function i$(e){let t,l,r,s=(0,i.c)(8),{onChange:a,query:c}=e;s[0]!==a?(t=e=>a(e.target.value),s[0]=a,s[1]=t):t=s[1];let u=t,{t:p}=(0,o.useTranslation)(b);s[2]!==p?(l=p("document-inspector.search.placeholder"),s[2]=p,s[3]=l):l=s[3];let m=c||"";return s[4]!==u||s[5]!==l||s[6]!==m?(r=(0,n.jsx)(eg.TextInput,{icon:d.SearchIcon,onChange:u,placeholder:l,radius:2,value:m}),s[4]=u,s[5]=l,s[6]=m,s[7]=r):r=s[7],r}function iN(e){let t,l,r,s,a,d,c,u,p,m,h,g,f,x,y,v,j=(0,i.c)(49),{value:w}=e,{onInspectClose:S,paneKey:C}=iu(),_=`${C}_inspect_`,[I,T]=iD("inspect-view-mode",null,"parsed");j[0]!==I?(t=iV.find(e=>e.id===I),j[0]=I,j[1]=t):t=j[1];let R=t;j[2]!==T?(l=async()=>{await T(iF.id)},j[2]=T,j[3]=l):l=j[3];let P=l;j[4]!==T?(r=async()=>{await T(iA.id)},j[4]=T,j[5]=r):r=j[5];let E=r,{t:k}=(0,o.useTranslation)(b),D=`${_}dialog`;j[6]!==k||j[7]!==w?(s=(0,o.isRecord)(w)&&(0,o.isString)(w._id)&&(0,o.isString)(w._type)?(0,n.jsx)(o.Translate,{t:k,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,n.jsx)("em",{children:(0,n.jsx)(sp,{document:w})})}}):(0,n.jsx)("em",{children:k("document-inspector.dialog.title-no-value")}),j[6]=k,j[7]=w,j[8]=s):s=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(a={position:"sticky",bottom:0,zIndex:3},j[9]=a):a=j[9];let F=`${_}tabpanel`,A=`${_}tab-${iF.id}`;j[10]!==k?(d=k(iF.title),j[10]=k,j[11]=d):d=j[11];let V=R===iF;j[12]!==P||j[13]!==F||j[14]!==A||j[15]!==d||j[16]!==V?(c=(0,n.jsx)(eh.Tab,{"aria-controls":F,id:A,label:d,onClick:P,selected:V}),j[12]=P,j[13]=F,j[14]=A,j[15]=d,j[16]=V,j[17]=c):c=j[17];let M=`${_}tabpanel`,L=`${_}tab-${iA.id}`;j[18]!==k?(u=k(iA.title),j[18]=k,j[19]=u):u=j[19];let z=R===iA;j[20]!==E||j[21]!==M||j[22]!==L||j[23]!==u||j[24]!==z?(p=(0,n.jsx)(eh.Tab,{"aria-controls":M,id:L,label:u,onClick:E,selected:z}),j[20]=E,j[21]=M,j[22]=L,j[23]=u,j[24]=z,j[25]=p):p=j[25],j[26]!==c||j[27]!==p?(m=(0,n.jsx)(eg.Card,{padding:3,paddingTop:0,shadow:1,style:a,children:(0,n.jsxs)(eg.TabList,{space:1,children:[c,p]})}),j[26]=c,j[27]=p,j[28]=m):m=j[28];let O=`${_}tab-${I}`,B=`${_}tabpanel`;return j[29]===Symbol.for("react.memo_cache_sentinel")?(h={outline:"none"},j[29]=h):h=j[29],j[30]!==w||j[31]!==R?(g=R===iF&&(0,n.jsx)(iH,{children:(0,n.jsx)(tg.JsonInspector,{data:w,isExpanded:function e(t,n){let i=iM.get(t);return void 0===i?(iM.set(t,Array.isArray(n)||(0,o.isRecord)(n)),e(t,n)):i},onClick:iL,search:i$,filterOptions:{ignoreCase:!0}})}),j[30]=w,j[31]=R,j[32]=g):g=j[32],j[33]!==w||j[34]!==R?(f=R===iA&&(0,n.jsx)(eg.Code,{language:"json",tabIndex:0,onKeyDown:iB,onDoubleClick:iO,size:1,children:JSON.stringify(w,null,2)}),j[33]=w,j[34]=R,j[35]=f):f=j[35],j[36]!==O||j[37]!==B||j[38]!==g||j[39]!==f?(x=(0,n.jsxs)(ef.TabPanel,{"aria-labelledby":O,flex:1,id:B,overflow:"auto",padding:4,style:h,children:[g,f]}),j[36]=O,j[37]=B,j[38]=g,j[39]=f,j[40]=x):x=j[40],j[41]!==m||j[42]!==x?(y=(0,n.jsxs)(eg.Flex,{direction:"column",height:"fill",children:[m,x]}),j[41]=m,j[42]=x,j[43]=y):y=j[43],j[44]!==S||j[45]!==y||j[46]!==D||j[47]!==s?(v=(0,n.jsx)(eh.Dialog,{bodyHeight:"fill",id:D,header:s,onClose:S,onClickOutside:S,padding:!1,width:2,children:y}),j[44]=S,j[45]=y,j[46]=D,j[47]=s,j[48]=v):v=j[48],v}function iG(e){let t,l,o,r,s,a,d,c,u,p,m,h=(0,i.c)(22);h[0]!==e?({action:l,content:o,icon:t,tone:s,paddingY:a,...r}=e,h[0]=e,h[1]=t,h[2]=l,h[3]=o,h[4]=r,h[5]=s,h[6]=a):(t=h[1],l=h[2],o=h[3],r=h[4],s=h[5],a=h[6]);let g=void 0===s?"transparent":s,f=void 0===a?2:a;return h[7]!==t?(d=t&&(0,n.jsx)(eg.Text,{size:0,children:(0,n.jsx)(t,{})}),h[7]=t,h[8]=d):d=h[8],h[9]!==o?(c=(0,n.jsx)(eg.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:o}),h[9]=o,h[10]=c):c=h[10],h[11]!==l?(u=l&&(0,n.jsx)(eh.Button,{...l,mode:l.mode||"ghost",tone:l.tone||"default"}),h[11]=l,h[12]=u):u=h[12],h[13]!==d||h[14]!==c||h[15]!==u?(p=(0,n.jsxs)(eg.Flex,{align:"center",gap:3,paddingX:2,children:[d,c,u]}),h[13]=d,h[14]=c,h[15]=u,h[16]=p):p=h[16],h[17]!==f||h[18]!==r||h[19]!==p||h[20]!==g?(m=(0,n.jsx)(eg.Box,{padding:1,children:(0,n.jsx)(eg.Card,{radius:3,paddingX:2,paddingY:f,tone:g,...r,children:p})}),h[17]=f,h[18]=r,h[19]=p,h[20]=g,h[21]=m):m=h[21],m}function iU(){let e=(0,i.c)(3),{isDeleted:t,isDeleting:l,ready:r}=iu(),{selectedPerspective:s}=(0,o.usePerspective)();if(!r)return null;if(!(0,o.isPublishedPerspective)(s)&&!(0,o.isDraftPerspective)(s)&&"archived"===s.state){let t;return e[0]!==s?(t=(0,n.jsx)(iq,{release:s}),e[0]=s,e[1]=t):t=e[1],t}if(t&&!l){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(iW,{}),e[2]=t):t=e[2],t}}function iW(){let e,t,l,r,s,a,c=(0,i.c)(17),{documentId:u,documentType:p}=iu(),{restore:m}=(0,o.useDocumentOperation)(u,p),{navigateIntent:h}=(0,eC.useRouter)();c[0]!==u||c[1]!==p||c[2]!==h||c[3]!==m?(e=()=>{m.execute("lastRevision"),h("edit",{id:u,type:p})},c[0]=u,c[1]=p,c[2]=h,c[3]=m,c[4]=e):e=c[4];let g=e,{t:f}=(0,o.useTranslation)(b);return c[5]!==f?(t=f("banners.deleted-document-banner.restore-button.text"),c[5]=f,c[6]=t):t=c[6],c[7]!==g||c[8]!==t?(l={onClick:g,text:t},c[7]=g,c[8]=t,c[9]=l):l=c[9],c[10]!==f?(r=f("banners.deleted-document-banner.text"),c[10]=f,c[11]=r):r=c[11],c[12]!==r?(s=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:r}),c[12]=r,c[13]=s):s=c[13],c[14]!==l||c[15]!==s?(a=(0,n.jsx)(iG,{action:l,content:s,"data-testid":"deleted-document-banner",icon:d.ReadOnlyIcon}),c[14]=l,c[15]=s,c[16]=a):a=c[16],a}let iq=e=>{let t,l,r,s=(0,i.c)(8),{release:a}=e,{t:c}=(0,o.useTranslation)();return s[0]!==a.metadata?.title||s[1]!==c?(t=a.metadata?.title||c("release.placeholder-untitled-release"),s[0]=a.metadata?.title,s[1]=c,s[2]=t):t=s[2],s[3]!==t?(l={title:t},s[3]=t,s[4]=l):l=s[4],s[5]!==c||s[6]!==l?(r=(0,n.jsx)(iG,{tone:"caution",content:(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:(0,n.jsx)(o.Translate,{t:c,i18nKey:"banners.deleted-release-banner.text",values:l})}),"data-testid":"deleted-release-banner",icon:d.DocumentRemoveIcon}),s[5]=c,s[6]=l,s[7]=r):r=s[7],r};function iK(){let e,t,l=(0,i.c)(5),{schemaType:r}=iu(),{t:s}=(0,o.useTranslation)(b);return(0,ex.isDeprecatedSchemaType)(r)?(l[0]!==s?(e=(0,n.jsx)(o.Translate,{t:s,i18nKey:"banners.deprecated-document-type-banner.text"}),l[0]=s,l[1]=e):e=l[1],l[2]!==r.deprecated.reason||l[3]!==e?(t=(0,n.jsx)(iG,{content:(0,n.jsxs)(eg.Text,{size:1,weight:"medium",children:[e," ",r.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:d.ErrorOutlineIcon}),l[2]=r.deprecated.reason,l[3]=e,l[4]=t):t=l[4],t):null}let iY=(0,to.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),iX=(0,to.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),iJ=(0,ey.styled)(eg.Box)`
  box-sizing: border-box;
`;function iZ(e){let t,r,s,a,d,c,u,p,m,h,g,f,x,y,v,j=(0,i.c)(56),{onClose:w,onRequestSubmitted:S}=e,{t:C}=(0,o.useTranslation)(b),_=(0,tn.useTelemetry)(),I=`request-permissions-${(0,l.useId)()}`,T=(0,o.useProjectId)();j[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},j[0]=t):t=j[0];let R=(0,o.useClient)(t),P=(0,ef.useToast)(),E=(0,o.useZIndex)(),[k,D]=(0,l.useState)(!1),[F,A]=(0,l.useState)(""),[V,M]=(0,l.useState)(),[L,z]=(0,l.useState)(!1),[O,B]=(0,l.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;j[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eW.of)(t),j[1]=e):e=j[1],r=e;break e}if(j[2]!==R.observable||j[3]!==T){let n,i;j[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(i0).find(iQ)?"editor":t,j[5]=n):n=j[5],j[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,eW.of)(t),j[6]=i):i=j[6],e=R.observable.request({url:`/projects/${T}/roles`}).pipe((0,eE.map)(n),(0,eD.startWith)(t),(0,ek.catchError)(i)),j[2]=R.observable,j[3]=T,j[4]=e}else e=j[4];r=e}let H=(0,eS.useObservable)(r);j[7]!==R||j[8]!==F||j[9]!==S||j[10]!==T||j[11]!==H||j[12]!==_||j[13]!==P?(s=()=>{D(!0),R.request({url:`/access/project/${T}/requests`,method:"post",body:{note:F,requestUrl:window?.location.href,requestedRole:H,type:"role"}}).then(e=>{e&&(S&&S(),_.log(iX),P.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(z(!0),M(n)),409===t?(B(!0),M(n)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{D(!1)})},j[7]=R,j[8]=F,j[9]=S,j[10]=T,j[11]=H,j[12]=_,j[13]=P,j[14]=s):s=j[14];let $=s,N=E.fullscreen;j[15]!==C?(a=C("request-permission-dialog.header.text"),j[15]=C,j[16]=a):a=j[16],j[17]!==C?(d=C("confirm-dialog.cancel-button.fallback-text"),j[17]=C,j[18]=d):d=j[18],j[19]!==w||j[20]!==d?(c={onClick:w,text:d},j[19]=w,j[20]=d,j[21]=c):c=j[21];let G=L||O;return j[22]!==C?(u=C("request-permission-dialog.confirm-button.text"),j[22]=C,j[23]=u):u=j[23],j[24]!==k||j[25]!==$||j[26]!==G||j[27]!==u?(p={onClick:$,loading:k,disabled:G,text:u,tone:"primary",type:"submit"},j[24]=k,j[25]=$,j[26]=G,j[27]=u,j[28]=p):p=j[28],j[29]!==p||j[30]!==c?(m={cancelButton:c,confirmButton:p},j[29]=p,j[30]=c,j[31]=m):m=j[31],j[32]!==C?(h=C("request-permission-dialog.description.text"),j[32]=C,j[33]=h):h=j[33],j[34]!==h?(g=(0,n.jsx)(eg.Text,{children:h}),j[34]=h,j[35]=g):g=j[35],j[36]!==O||j[37]!==L||j[38]!==k||j[39]!==V||j[40]!==F||j[41]!==$||j[42]!==C?(f=L||O?(0,n.jsx)(eg.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,n.jsxs)(eg.Text,{size:1,children:[L&&(0,n.jsx)(n.Fragment,{children:V??C("request-permission-dialog.warning.limit-reached.text")}),O&&(0,n.jsx)(n.Fragment,{children:V??C("request-permission-dialog.warning.denied.text")})]})}):(0,n.jsxs)(eg.Stack,{space:3,paddingBottom:0,children:[(0,n.jsx)(eg.TextInput,{placeholder:C("request-permission-dialog.note-input.placeholder.text"),disabled:k,onKeyDown:e=>{"Enter"===e.key&&$()},maxLength:150,value:F,onChange:e=>{A(e.currentTarget.value)}}),(0,n.jsx)(eg.Text,{align:"right",muted:!0,size:1,children:`${F.length}/150`})]}),j[36]=O,j[37]=L,j[38]=k,j[39]=V,j[40]=F,j[41]=$,j[42]=C,j[43]=f):f=j[43],j[44]!==g||j[45]!==f?(x=(0,n.jsx)(iJ,{children:(0,n.jsxs)(eg.Stack,{space:4,children:[g,f]})}),j[44]=g,j[45]=f,j[46]=x):x=j[46],j[47]!==I||j[48]!==w||j[49]!==m||j[50]!==x||j[51]!==a?(y=(0,n.jsx)(eh.Dialog,{width:1,id:I,header:a,footer:m,onClose:w,onClickOutside:w,children:x}),j[47]=I,j[48]=w,j[49]=m,j[50]=x,j[51]=a,j[52]=y):y=j[52],j[53]!==y||j[54]!==E.fullscreen?(v=(0,n.jsx)(ef.DialogProvider,{position:"fixed",zOffset:N,children:y}),j[53]=y,j[54]=E.fullscreen,j[55]=v):v=j[55],v}function iQ(e){return"editor"===e.name}function i0(e){return e?.appliesToUsers}(0,ey.styled)(eg.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let i1={loading:!0,error:!1,status:void 0},i2={loading:!1,error:!1,status:"none"},i3={loading:!1,error:!1,status:"declined"},i4={loading:!1,error:!1,status:"pending"},i5={loading:!1,error:!1,status:"expired"};function i6(e){let t,r,s,a,c,u,p,m,h=(0,i.c)(29),{requiredPermission:g}=e,f=(0,o.useCurrentUser)(),{data:x,loading:y,error:v}=(()=>{let e,t,n,l=(0,i.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},l[0]=e):e=l[0];let r=(0,o.useClient)(e),s=(0,o.useProjectId)();e:{var a,d;let e;if(!r||!s){let e;l[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eW.of)(i2),l[1]=e):e=l[1],t=e;break e}l[2]!==r||l[3]!==s?(a=r,d=s,e=a.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eE.map)(e=>{if(!e||0===e.length)return i2;let t=e.filter(e=>e.resourceId===d&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tx.isAfter)((0,tb.addWeeks)(new Date(n.createdAt),2),new Date)?i3:t.find(e=>"pending"===e.status&&(0,tx.isAfter)((0,tb.addWeeks)(new Date(e.createdAt),2),new Date))?i4:t.find(e=>"pending"===e.status&&(0,ty.isBefore)((0,tb.addWeeks)(new Date(e.createdAt),2),new Date))?i5:i2}),(0,ek.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,eW.of)({loading:!1,error:!0,status:void 0}))),(0,eD.startWith)(i1)),l[2]=r,l[3]=s,l[4]=e):e=l[4],t=e}let c=t,{loading:u,error:p,status:m}=(0,eS.useObservable)(c,i1);return l[5]!==p||l[6]!==u||l[7]!==m?(n={data:m,loading:u,error:p},l[5]=p,l[6]=u,l[7]=m,l[8]=n):n=l[8],n})(),[j,w]=(0,l.useState)(!1),S="pending"===x||"declined"===x||j,C=f?.roles||[],_=1===C.length&&"viewer"===C[0].name,[I,T]=(0,l.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},h[0]=t):t=h[0];let R=(0,o.useListFormat)(t),{t:P}=(0,o.useTranslation)(b),E=(0,tn.useTelemetry)(),k=C.map(i7),D=R.formatToParts(k).map(i8);return h[1]!==D?(r={Roles:()=>(0,n.jsx)(n.Fragment,{children:D})},h[1]=D,h[2]=r):r=h[2],h[3]!==k||h[4]!==D.length?(s={count:D.length,roles:k},h[3]=k,h[4]=D.length,h[5]=s):s=h[5],h[6]!==g||h[7]!==P||h[8]!==r||h[9]!==s?(a=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:(0,n.jsx)(o.Translate,{t:P,i18nKey:"banners.permission-check-banner.missing-permission",components:r,values:s,context:g})}),h[6]=g,h[7]=P,h[8]=r,h[9]=s,h[10]=a):a=h[10],h[11]!==_||h[12]!==S||h[13]!==v||h[14]!==y||h[15]!==x||h[16]!==T||h[17]!==P||h[18]!==E?(c=_&&x&&!v&&!y?{onClick:S?void 0:()=>{T(!0),E.log(iY)},text:P(S?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:S?"default":"primary",disabled:S,mode:S?"bleed":void 0}:void 0,h[11]=_,h[12]=S,h[13]=v,h[14]=y,h[15]=x,h[16]=T,h[17]=P,h[18]=E,h[19]=c):c=h[19],h[20]!==a||h[21]!==c?(u=(0,n.jsx)(iG,{content:a,action:c,"data-testid":"permission-check-banner",icon:d.ReadOnlyIcon}),h[20]=a,h[21]=c,h[22]=u):u=h[22],h[23]!==T||h[24]!==I?(p=I&&(0,n.jsx)(iZ,{onClose:()=>T(!1),onRequestSubmitted:()=>{w(!0),T(!1)}}),h[23]=T,h[24]=I,h[25]=p):p=h[25],h[26]!==u||h[27]!==p?(m=(0,n.jsxs)(n.Fragment,{children:[u,p]}),h[26]=u,h[27]=p,h[28]=m):m=h[28],m}function i8(e){return"element"===e.type?(0,n.jsx)("code",{children:e.value},e.value):e.value}function i7(e){return e.title}let i9=(0,l.memo)(()=>{let e,t,l,s,a,c,u,p,m=(0,i.c)(30),h=(0,o.useDocumentPreviewStore)(),{selectedReleaseId:g}=(0,o.usePerspective)(),{params:f,groupIndex:x,routerPanesState:y,replaceCurrent:v,BackLink:j}=ln(),w=y[x]?.[0].id,S=y[x-1]?.[0],C=S?.id,_=!!S?.params?.rev;m[0]!==f?(e=f?.parentRefPath&&(0,e7.fromString)(f.parentRefPath)||null,m[0]=f,m[1]=e):e=m[1];let I=e,{t:T}=(0,o.useTranslation)(b);e:{let e,n=I?.[0];if(!C||!n||!I){let e;m[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eW.of)({loading:!1}),m[2]=e):e=m[2],t=e;break e}if(m[3]!==h||m[4]!==C||m[5]!==I||m[6]!==n||m[7]!==g){let t,i=(0,r.getPublishedId)(C),l=(0,e7.fromString)(n),o=l.findIndex(le);m[9]!==I?(t=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,e7.get)(i?.snapshot||t.snapshot||n.snapshot,I)?._ref}}},m[9]=I,m[10]=t):t=m[10],e=(0,eK.concat)((0,eW.of)({loading:!0}),h.unstable_observePathsDocumentPair(i,-1===o?l:l.slice(0,o),{version:g}).pipe((0,eF.debounceTime)(750),(0,eE.map)(t))),m[3]=h,m[4]=C,m[5]=I,m[6]=n,m[7]=g,m[8]=e}else e=m[8];t=e}let R=t;m[11]===Symbol.for("react.memo_cache_sentinel")?(l={loading:!0},m[11]=l):l=m[11];let P=(0,eS.useObservable)(R,l);m[12]!==f||m[13]!==P.loading||m[14]!==P.result||m[15]!==v?(s=()=>{P.loading||P.result?.refValue&&v({id:P.result.refValue,params:f})},m[12]=f,m[13]=P.loading,m[14]=P.result,m[15]=v,m[16]=s):s=m[16];let E=s;return C&&I&&!_&&!P.loading&&(P.result?.availability.draft.available||P.result?.availability.published.available)&&P.result?.refValue!==w?(m[17]!==j||m[18]!==E||m[19]!==P.result?.refValue||m[20]!==T?(a=P.result?.refValue?{onClick:E,icon:d.SyncIcon,text:T("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:j,icon:d.CloseIcon,text:T("banners.reference-changed-banner.reason-removed.close-button.text")},m[17]=j,m[18]=E,m[19]=P.result?.refValue,m[20]=T,m[21]=a):a=m[21],m[22]!==P.result?.refValue||m[23]!==T?(c=T(P.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),m[22]=P.result?.refValue,m[23]=T,m[24]=c):c=m[24],m[25]!==c?(u=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:c}),m[25]=c,m[26]=u):u=m[26],m[27]!==a||m[28]!==u?(p=(0,n.jsx)(iG,{action:a,"data-testid":"reference-changed-banner",content:u,icon:d.WarningOutlineIcon,tone:"caution"}),m[27]=a,m[28]=u,m[29]=p):p=m[29],p):null});function le(e){return"object"==typeof e&&"_key"in e}function lt(){let e,t=(0,i.c)(2),{t:l}=(0,o.useTranslation)(b);return t[0]!==l?(e=(0,n.jsx)(iG,{tone:"caution",icon:d.WarningOutlineIcon,content:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:l,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),t[0]=l,t[1]=e):e=t[1],e}function ln(){return(0,l.useContext)(s.PaneRouterContext)}function li(){let e,t,l,r,s,a,d,c,u,p,m=(0,i.c)(28),{t:h}=(0,o.useTranslation)(b),{t:g}=(0,o.useTranslation)(),{data:f}=(0,o.useArchivedReleases)(),{params:x,setParams:y}=ln();m[0]!==x||m[1]!==y?(e=()=>{y({...x,rev:x?.historyEvent||void 0,since:void 0,historyVersion:void 0})},m[0]=x,m[1]=y,m[2]=e):e=m[2];let v=e;if(m[3]!==f||m[4]!==x?.historyVersion){let e;m[6]!==x?.historyVersion?(e=e=>(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===x?.historyVersion,m[6]=x?.historyVersion,m[7]=e):e=m[7],t=f.find(e),m[3]=f,m[4]=x?.historyVersion,m[5]=t}else t=m[5];let j=t;e:{if(j?.state==="published"){l="banners.published-release.description";break e}if(j&&(0,o.isCardinalityOneRelease)(j)){l="banners.archived-scheduled-draft.description";break e}l="banners.archived-release.description"}let w=l;m[8]!==j?.metadata.title||m[9]!==g?(r=j?.metadata.title||g("release.placeholder-untitled-release"),m[8]=j?.metadata.title,m[9]=g,m[10]=r):r=m[10];let S=r;return m[11]!==S?(s={title:S},m[11]=S,m[12]=s):s=m[12],m[13]!==j?(a=(0,o.getVersionInlineBadge)(j),m[13]=j,m[14]=a):a=m[14],m[15]!==a?(d={VersionBadge:a},m[15]=a,m[16]=d):d=m[16],m[17]!==w||m[18]!==h||m[19]!==s||m[20]!==d?(c=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:h,i18nKey:w,values:s,components:d})}),m[17]=w,m[18]=h,m[19]=s,m[20]=d,m[21]=c):c=m[21],m[22]!==v||m[23]!==x?.archivedRelease?(u=x?.archivedRelease?void 0:{text:"Go back to published version",onClick:v},m[22]=v,m[23]=x?.archivedRelease,m[24]=u):u=m[24],m[25]!==c||m[26]!==u?(p=(0,n.jsx)(iG,{tone:"caution",content:c,action:u}),m[25]=c,m[26]=u,m[27]=p):p=m[27],p}i9.displayName="Memo(ReferenceChangedBanner)";let ll=ey.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,lo=e=>{let t,r,s,a,c,u,p,m,h,g,f,x,y=(0,i.c)(22),{onClose:v}=e,{t:j}=(0,o.useTranslation)(b),w=(0,l.useRef)(null);return y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],y[0]=t):t=y[0],(0,eg.useClickOutsideEvent)(v,t),y[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(ll,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),y[1]=r):r=y[1],y[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(eg.Text,{size:1,weight:"semibold",children:"Canvas"}),y[2]=s):s=y[2],y[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsxs)(eg.Flex,{paddingY:1,gap:2,children:[s,(0,n.jsx)(eg.Text,{size:1,muted:!0,children:(0,n.jsx)(d.ComposeSparklesIcon,{})})]}),y[3]=a):a=y[3],y[4]!==j?(c=j("canvas.banner.popover-heading"),y[4]=j,y[5]=c):c=y[5],y[6]!==c?(u=(0,n.jsx)(eg.Box,{paddingTop:3,children:(0,n.jsx)(eg.Heading,{size:1,children:c})}),y[6]=c,y[7]=u):u=y[7],y[8]!==j?(p=j("canvas.banner.popover-description"),y[8]=j,y[9]=p):p=y[9],y[10]!==p?(m=(0,n.jsx)(eg.Box,{paddingTop:4,children:(0,n.jsx)(eg.Text,{size:1,children:p})}),y[10]=p,y[11]=m):m=y[11],y[12]!==u||y[13]!==m?(h=(0,n.jsxs)(eg.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[a,u,m]}),y[12]=u,y[13]=m,y[14]=h):h=y[14],y[15]!==j?(g=j("canvas.banner.popover-button-text"),y[15]=j,y[16]=g):g=y[16],y[17]!==g?(f=(0,n.jsx)(eg.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,n.jsx)(eh.Button,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:d.LaunchIcon})}),y[17]=g,y[18]=f):f=y[18],y[19]!==f||y[20]!==h?(x=(0,n.jsx)(eg.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,n.jsxs)(eg.Container,{width:0,children:[r,h,f]})}),y[19]=f,y[20]=h,y[21]=x):x=y[21],x},lr=e=>{let t,r,s,a,c,u,p,m,h=(0,i.c)(17),{documentId:g}=e,{t:f}=(0,o.useTranslation)(b),[x,y]=(0,l.useState)(!1),v=(0,o.getDocumentVariantType)(g);e:{let e;if("published"===v){let e;h[0]!==f?(e=f("canvas.banner.linked-text.published"),h[0]=f,h[1]=e):e=h[1],t=e;break e}if("draft"===v){let e;h[2]!==f?(e=f("canvas.banner.linked-text.draft"),h[2]=f,h[3]=e):e=h[3],t=e;break e}h[4]!==f?(e=f("canvas.banner.linked-text.version"),h[4]=f,h[5]=e):e=h[5],t=e}let j=t;h[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>y(la),h[6]=r):r=h[6];let w=r;h[7]===Symbol.for("react.memo_cache_sentinel")?(s=()=>y(!1),h[7]=s):s=h[7];let S=s;return h[8]!==j?(a=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:j}),h[8]=j,h[9]=a):a=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(lo,{onClose:S}),u=(0,n.jsx)(eh.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:d.InfoOutlineIcon,onClick:w}),h[10]=c,h[11]=u):(c=h[10],u=h[11]),h[12]!==x?(p=(0,n.jsx)(eh.Popover,{open:x,size:0,tone:"default",portal:!0,placement:"bottom-start",content:c,children:u}),h[12]=x,h[13]=p):p=h[13],h[14]!==a||h[15]!==p?(m=(0,n.jsxs)(eg.Flex,{align:"center",gap:2,children:[a,p]}),h[14]=a,h[15]=p,h[16]=m):m=h[16],m};function ls(){let e,t,l,r,s=(0,i.c)(10),{documentId:a,displayed:d}=iu(),{t:c}=(0,o.useTranslation)(b),u=d?._id||a,{companionDoc:p}=(0,o.useCanvasCompanionDoc)(u),m=(0,o.useNavigateToCanvasDoc)(p?.canvasDocumentId,"banner");return p?(s[0]!==u?(e=(0,n.jsx)(lr,{documentId:u}),s[0]=u,s[1]=e):e=s[1],s[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),s[2]=c,s[3]=t):t=s[3],s[4]!==m||s[5]!==t?(l={mode:"ghost",text:t,onClick:m},s[4]=m,s[5]=t,s[6]=l):l=s[6],s[7]!==e||s[8]!==l?(r=(0,n.jsx)(iG,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:l}),s[7]=e,s[8]=l,s[9]=r):r=s[9],r):null}function la(e){return!e}let ld=e=>{let t,l,r,s,a,c,u,p,m,h=(0,i.c)(27),{schemaType:g,selectedPerspective:f,reason:x}=e,{t:y}=(0,o.useTranslation)(b),{document:v}=(0,o.useWorkspace)(),{drafts:j}=v,{enabled:w}=j;h[0]!==w||h[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,o.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:w,schemaType:g}).result}},h[0]=w,h[1]=g,h[2]=t):t=h[2];let S=t;return h[3]!==x||h[4]!==y?(l="PUBLISHED_NOT_WRITEABLE"===x&&y("banners.choose-new-document-destination.cannot-create-published-document"),h[3]=x,h[4]=y,h[5]=l):l=h[5],h[6]!==x||h[7]!==y?(r="DRAFTS_NOT_WRITEABLE"===x&&y("banners.choose-new-document-destination.cannot-create-draft-document"),h[6]=x,h[7]=y,h[8]=r):r=h[8],h[9]!==x||h[10]!==f||h[11]!==y?(s="RELEASE_NOT_ACTIVE"===x&&(0,o.isReleaseDocument)(f)&&(0,n.jsx)(o.Translate,{t:y,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:f.metadata.title},components:{VersionBadge:(0,o.getVersionInlineBadge)(f)}}),h[9]=x,h[10]=f,h[11]=y,h[12]=s):s=h[12],h[13]!==y?(a=y("banners.choose-new-document-destination.choose-destination"),h[13]=y,h[14]=a):a=h[14],h[15]!==a?(c=(0,n.jsxs)(n.Fragment,{children:[" ",a]}),h[15]=a,h[16]=c):c=h[16],h[17]!==l||h[18]!==r||h[19]!==s||h[20]!==c?(u=(0,n.jsxs)(eg.Text,{size:1,children:[l,r,s,c]}),h[17]=l,h[18]=r,h[19]=s,h[20]=c,h[21]=u):u=h[21],h[22]!==S?(p=(0,n.jsx)(o.ReleasesNav,{menuItemProps:S}),h[22]=S,h[23]=p):p=h[23],h[24]!==p||h[25]!==u?(m=(0,n.jsx)(iG,{tone:"caution",icon:d.WarningOutlineIcon,content:(0,n.jsxs)(eg.Flex,{align:"center",gap:2,children:[u,p]})}),h[24]=p,h[25]=u,h[26]=m):m=h[26],m};function lc(){let e,t,l=(0,i.c)(5),{value:r}=iu(),{documentLinkedBannerContent:s}=(0,o.useSanityCreateConfig)().components??{};l[0]!==r?(e=(0,o.getSanityCreateLinkMetadata)(r),l[0]=r,l[1]=e):e=l[1];let a=e;return s&&a?(l[2]!==s||l[3]!==a?(t=(0,n.jsx)(iG,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,n.jsx)(s,{metadata:a})}),l[2]=s,l[3]=a,l[4]=t):t=l[4],t):null}function lu(e){let t,r,s,a,d,c,u,p,m,h,g,f,x=(0,i.c)(39),{documentId:y,currentRelease:v,isScheduledRelease:j}=e,w=v??o.LATEST;x[0]!==w?(t=(0,o.getReleaseTone)(w),x[0]=w,x[1]=t):t=x[1];let S=t,{t:C}=(0,o.useTranslation)(b),{t:_}=(0,o.useTranslation)(),{createVersion:I}=(0,o.useVersionOperations)(),[T,R]=(0,l.useState)(),P=(0,ef.useToast)();x[2]!==I||x[3]!==v._id||x[4]!==y||x[5]!==C||x[6]!==P?(r=async()=>{if(v._id){R({status:"creating",lastUpdate:new Date});try{await I((0,o.getReleaseIdFromReleaseDocumentId)(v._id),y),R({status:"created",lastUpdate:new Date})}catch(e){P.push({status:"error",closable:!0,title:C("banners.release.error.title"),description:C("banners.release.error.description",{message:e.message})}),R(void 0)}}},x[2]=I,x[3]=v._id,x[4]=y,x[5]=C,x[6]=P,x[7]=r):r=x[7];let E=r,k=function(e){let t,n,o,r=(0,i.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,r[0]=t):t=r[0];let[s,a]=(0,l.useState)(t);return 200!==r[1]?(n=()=>{let e=setInterval(()=>{a(new Date)},200);return()=>clearInterval(e)},o=[200],r[1]=200,r[2]=n,r[3]=o):(n=r[2],o=r[3]),(0,l.useEffect)(n,o),s}(200),D=T?.status==="created"&&k.getTime()-T.lastUpdate.getTime()>1e3;return x[8]!==C?(s=C("banners.release.waiting.title"),x[8]=C,x[9]=s):s=x[9],x[10]!==C?(a=C("banners.release.waiting.description"),x[10]=C,x[11]=a):a=x[11],x[12]!==D||x[13]!==s||x[14]!==a?(d={status:"info",id:"add-document-to-release",enabled:D,closable:!0,title:s,description:a},x[12]=D,x[13]=s,x[14]=a,x[15]=d):d=x[15],(0,o.useConditionalToast)(d),x[16]!==v.metadata?.title||x[17]!==_?(c=v?.metadata?.title||_("release.placeholder-untitled-release"),x[16]=v.metadata?.title,x[17]=_,x[18]=c):c=x[18],x[19]!==c?(u={title:c},x[19]=c,x[20]=u):u=x[20],x[21]!==v?(p=(0,o.getVersionInlineBadge)(v),x[21]=v,x[22]=p):p=x[22],x[23]!==p?(m={VersionBadge:p},x[23]=p,x[24]=m):m=x[24],x[25]!==C||x[26]!==m||x[27]!==u?(h=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{i18nKey:"banners.release.not-in-release",t:C,values:u,components:m})}),x[25]=C,x[26]=m,x[27]=u,x[28]=h):h=x[28],x[29]!==E||x[30]!==j||x[31]!==C||x[32]!==S||x[33]!==T?(g=j?void 0:{text:C("banners.release.action.add-to-release"),tone:S,disabled:!!T,onClick:E,mode:"default"},x[29]=E,x[30]=j,x[31]=C,x[32]=S,x[33]=T,x[34]=g):g=x[34],x[35]!==h||x[36]!==g||x[37]!==S?(f=(0,n.jsx)(iG,{tone:S,content:h,action:g}),x[35]=h,x[36]=g,x[37]=S,x[38]=f):f=x[38],f}let lp=(0,to.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lm=e=>{let t,s,a,c,u,p,m,h,g,f,x,y,v,j,w,S=(0,i.c)(47),{displayed:C,documentId:_,schemaType:I,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,o.useTranslation)(b),[E,k]=(0,l.useState)(!1),[D,F]=(0,l.useState)(!1),A=(0,tn.useTelemetry)(),{publish:V,discardChanges:M}=(0,o.useDocumentOperation)(_,C?._type||"");S[0]!==V||S[1]!==A?(t=()=>{V.execute(),k(!0),A.log(lp,{liveEditResolveType:"publish"})},S[0]=V,S[1]=A,S[2]=t):t=S[2];let L=t;S[3]!==M||S[4]!==A?(s=()=>{M.execute(),F(!0),A.log(lp,{liveEditResolveType:"discard"})},S[3]=M,S[4]=A,S[5]=s):s=S[5];let z=s;S[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{k(!1),F(!1)},S[6]=a):a=S[6],(0,l.useEffect)(a);let O=ns();S[7]!==O||S[8]!==C?._id||S[9]!==I.name?(c=()=>{typeof C?._id>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:I.name,id:(0,r.getPublishedId)(C?._id)},nextDocument:{type:I.name,id:(0,r.getDraftId)(C?._id)}})},S[7]=O,S[8]=C?._id,S[9]=I.name,S[10]=c):c=S[10];let B=c;return S[11]!==I.title?(u={schemaType:I.title},S[11]=I.title,S[12]=u):u=S[12],S[13]!==T||S[14]!==P||S[15]!==u?(p=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:(0,n.jsx)(o.Translate,{t:P,i18nKey:T,values:u})}),S[13]=T,S[14]=P,S[15]=u,S[16]=p):p=S[16],S[17]!==P?(m=P("banners.obsolete-draft.actions.compare-draft.text"),S[17]=P,S[18]=m):m=S[18],S[19]!==B||S[20]!==m?(h=(0,n.jsx)(eh.Button,{text:m,mode:"ghost",onClick:B}),S[19]=B,S[20]=m,S[21]=h):h=S[21],S[22]!==P?(g=P("banners.obsolete-draft.actions.publish-draft.text"),S[22]=P,S[23]=g):g=S[23],S[24]!==R||S[25]!==P?(f=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},S[24]=R,S[25]=P,S[26]=f):f=S[26],S[27]!==L||S[28]!==E||S[29]!==f||S[30]!==g?(x=(0,n.jsx)(eh.Button,{onClick:L,text:g,tooltipProps:f,loading:E,tone:"positive"}),S[27]=L,S[28]=E,S[29]=f,S[30]=g,S[31]=x):x=S[31],S[32]!==P?(y=P("banners.obsolete-draft.actions.discard-draft.text"),S[32]=P,S[33]=y):y=S[33],S[34]!==R||S[35]!==P?(v=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},S[34]=R,S[35]=P,S[36]=v):v=S[36],S[37]!==z||S[38]!==D||S[39]!==y||S[40]!==v?(j=(0,n.jsx)(eh.Button,{onClick:z,text:y,tooltipProps:v,loading:D,tone:"caution"}),S[37]=z,S[38]=D,S[39]=y,S[40]=v,S[41]=j):j=S[41],S[42]!==x||S[43]!==j||S[44]!==p||S[45]!==h?(w=(0,n.jsx)(iG,{content:(0,n.jsxs)(eg.Flex,{align:"center",justify:"space-between",gap:2,children:[p,h,x,j]}),"data-testid":"live-edit-type-banner",icon:d.ErrorOutlineIcon}),S[42]=x,S[43]=j,S[44]=p,S[45]=h,S[46]=w):w=S[46],w};function lh(e){let t,l,s=(0,i.c)(4),{documentId:a,isPinnedDraftOrPublished:d}=e;s[0]!==a?(t={documentId:a},s[0]=a,s[1]=t):t=s[1];let c=(0,o.useOnlyHasVersions)(t);return(0,r.isVersionId)(a)&&c&&d?(s[2]!==a?(l=(0,n.jsx)(lg,{documentId:a}),s[2]=a,s[3]=l):l=s[3],l):null}function lg(e){let t,l,s,a,d,c,u,p,m,h=(0,i.c)(35),{documentId:g}=e,{data:f}=(0,o.useActiveReleases)(),x=(0,o.useSetPerspective)();h[0]!==g?(t=(0,r.getVersionFromId)(g)??"",h[0]=g,h[1]=t):t=h[1];let y=t;if(h[2]!==f||h[3]!==y){let e;h[5]!==y?(e=e=>e._id.includes(y),h[5]=y,h[6]=e):e=h[6],l=f.find(e),h[2]=f,h[3]=y,h[4]=l}else l=h[4];let v=l,{t:j}=(0,o.useTranslation)();h[7]!==g?(s={documentId:g},h[7]=g,h[8]=s):s=h[8];let{data:w}=(0,o.useDocumentVersions)(s);if(h[9]!==f||h[10]!==w||h[11]!==j){let e,t;h[13]!==w?(e=e=>w.find(t=>{let n=(0,r.getVersionFromId)(t)??"";return(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,o.isCardinalityOneRelease)(e),h[13]=w,h[14]=e):e=h[14],h[15]!==j?(t=e=>e.metadata.title||j("release.placeholder-untitled-release"),h[15]=j,h[16]=t):t=h[16],a=f.filter(e).map(t),h[9]=f,h[10]=w,h[11]=j,h[12]=a}else a=h[12];let S=a;h[17]!==v?(d=v&&(0,o.getReleaseTone)(v),h[17]=v,h[18]=d):d=h[18];let C=d,{t:_}=(0,o.useTranslation)(b);h[19]!==y||h[20]!==x?(c=async()=>{x(y)},h[19]=y,h[20]=x,h[21]=c):c=h[21];let I=c;return 0===S.length?null:(h[22]!==S[0]||h[23]!==S.length||h[24]!==_?(u=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(eg.Flex,{direction:"row",gap:1,wrap:"wrap",children:S.length>1?(0,n.jsx)(o.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,n.jsxs)(o.VersionInlineBadge,{children:[" ",S[0]]})},values:{count:S.length-1}}):(0,n.jsx)(o.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,n.jsxs)(o.VersionInlineBadge,{children:[" ",S[0]]})}})})}),h[22]=S[0],h[23]=S.length,h[24]=_,h[25]=u):u=h[25],h[26]!==S.length||h[27]!==I||h[28]!==_||h[29]!==C?(p=S.length>0?{text:_("banners.release.action.open-to-edit"),tone:C,onClick:I,mode:"default"}:void 0,h[26]=S.length,h[27]=I,h[28]=_,h[29]=C,h[30]=p):p=h[30],h[31]!==u||h[32]!==p||h[33]!==C?(m=(0,n.jsx)(iG,{tone:C,"data-testid":"open-release-to-edit-banner",content:u,action:p}),h[31]=u,h[32]=p,h[33]=C,h[34]=m):m=h[34],m)}function lf(){let e,t,l=(0,i.c)(4),{revisionNotFound:r}=iu(),{t:s}=(0,o.useTranslation)(b);return r?(l[0]!==s?(e=s("banners.revision-not-found.description"),l[0]=s,l[1]=e):e=l[1],l[2]!==e?(t=(0,n.jsx)(iG,{tone:"caution","data-test-id":"revision-not-found-banner",icon:d.WarningOutlineIcon,content:(0,n.jsx)(eg.Text,{size:1,children:e})}),l[2]=e,l[3]=t):t=l[3],t):null}function lx(e){let t,l,r,s,a,c=(0,i.c)(12),{currentRelease:u}=e,p=u??o.LATEST;c[0]!==p?(t=(0,o.getReleaseTone)(p),c[0]=p,c[1]=t):t=c[1];let m=t,{t:h}=(0,o.useTranslation)();return c[2]!==u?(l=(0,o.formatRelativeLocalePublishDate)(u),c[2]=u,c[3]=l):l=c[3],c[4]!==l?(r={date:l},c[4]=l,c[5]=r):r=c[5],c[6]!==r||c[7]!==h?(s=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:h,i18nKey:"release.banner.scheduled-for-publishing-on",values:r})}),c[6]=r,c[7]=h,c[8]=s):s=c[8],c[9]!==s||c[10]!==m?(a=(0,n.jsx)(iG,{tone:m,icon:d.LockIcon,content:s}),c[9]=s,c[10]=m,c[11]=a):a=c[11],a}function lb(){let e=(0,i.c)(18),{value:t,editState:l}=iu(),{selectedPerspective:r}=(0,o.usePerspective)(),s=(0,o.isGoingToUnpublish)(t)||l?.version&&(0,o.isGoingToUnpublish)(l?.version),{t:a}=(0,o.useTranslation)(b),{t:c}=(0,o.useTranslation)();if((0,o.isReleaseDocument)(r)&&s){let t,i,l,s,u,p,m;e[0]!==r.metadata?.title||e[1]!==c?(t=r.metadata?.title||c("release.placeholder-untitled-release"),e[0]=r.metadata?.title,e[1]=c,e[2]=t):t=e[2];let h=t;return e[3]!==h?(i={title:h},e[3]=h,e[4]=i):i=e[4],e[5]!==r?(l=(0,o.getVersionInlineBadge)(r),e[5]=r,e[6]=l):l=e[6],e[7]!==l?(s={VersionBadge:l},e[7]=l,e[8]=s):s=e[8],e[9]!==a||e[10]!==i||e[11]!==s?(u=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:a,i18nKey:"banners.unpublished-release-banner.text",values:i,components:s})}),e[9]=a,e[10]=i,e[11]=s,e[12]=u):u=e[12],e[13]!==a?(p=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:a,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=a,e[14]=p):p=e[14],e[15]!==u||e[16]!==p?(m=(0,n.jsx)(iG,{tone:"critical",content:(0,n.jsxs)(eg.Stack,{space:2,children:[u,p]}),icon:d.UnpublishIcon}),e[15]=u,e[16]=p,e[17]=m):m=e[17],m}return null}let ly=(0,ey.styled)(eg.Stack)`
  ${({theme:e})=>ey.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,lv=e=>{let t,l,r,s,a=(0,i.c)(14),{documentId:c,schemaType:u,title:p}=e,m=c===u.name,h=u.description,{t:g}=(0,o.useTranslation)(b);if(!1===u.__experimental_formPreviewTitle)return null;a[0]!==h||a[1]!==m||a[2]!==u.name||a[3]!==u.title?(t=!m&&(0,n.jsxs)(eg.Inline,{space:1,children:[(0,n.jsx)(eg.Text,{muted:!0,size:1,children:u.title??u.name}),h&&(0,n.jsx)(eh.Tooltip,{content:h,placement:"right",children:(0,n.jsx)(d.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),a[0]=h,a[1]=m,a[2]=u.name,a[3]=u.title,a[4]=t):t=a[4];let f=!p;return a[5]!==g||a[6]!==p?(l=p??g("document-view.form-view.form-title-fallback"),a[5]=g,a[6]=p,a[7]=l):l=a[7],a[8]!==f||a[9]!==l?(r=(0,n.jsx)(eg.Heading,{as:"h2","data-heading":!0,muted:f,"data-testid":"document-panel-document-title",children:l}),a[8]=f,a[9]=l,a[10]=r):r=a[10],a[11]!==t||a[12]!==r?(s=(0,n.jsxs)(ly,{marginBottom:6,space:4,children:[t,r]}),a[11]=t,a[12]=r,a[13]=s):s=a[13],s},lj=e=>e.preventDefault(),lw=(0,l.forwardRef)(function(e,t){let r,s,a,d,c,u,p,m,h,g,f,x,y,v,j,w=(0,i.c)(77),{hidden:S,margins:C}=e,{collapsedFieldSets:_,collapsedPaths:I,displayed:T,editState:R,documentId:P,documentType:E,fieldActions:k,onChange:D,validation:F,ready:A,formState:V,onFocus:M,connectionState:L,onBlur:z,onSetCollapsedPath:O,onPathOpen:B,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:$,openPath:N,compareValue:G,hasUpstreamVersion:U}=iu(),{selectedReleaseId:W,selectedPerspective:q}=(0,o.usePerspective)(),K=(0,o.useDocumentStore)(),Y=(0,o.useDocumentPresence)(P),{title:X}=iI(),[J]=(0,l.useState)(lS),Z=R?.transactionSyncLock?.enabled,{t:Q}=(0,o.useTranslation)(b);w[0]!==Q?(r=Q("document-view.form-view.sync-lock-toast.title"),w[0]=Q,w[1]=r):r=w[1],w[2]!==Q?(s=Q("document-view.form-view.sync-lock-toast.description"),w[2]=Q,w[3]=s):s=w[3],w[4]!==Z||w[5]!==r||w[6]!==s?(a={id:"sync-lock",status:"warning",enabled:Z,title:r,description:s,closable:!0},w[4]=Z,w[5]=r,w[6]=s,w[7]=a):a=w[7],(0,o.useConditionalToast)(a),w[8]!==P||w[9]!==K.pair||w[10]!==E||w[11]!==J||w[12]!==W?(d=()=>{let e=K.pair.documentEvents(P,E,W).pipe((0,eA.tap)(e=>{var t,n;let i,l,r;"mutation"===e.type&&J.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,o.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&J.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),r=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,o.fromMutationPatches)("remote",l).concat((0,o.fromMutationPatches)("local",r))}))})).subscribe();return()=>{e.unsubscribe()}},w[8]=P,w[9]=K.pair,w[10]=E,w[11]=J,w[12]=W,w[13]=d):d=w[13],w[14]!==P||w[15]!==K||w[16]!==E||w[17]!==J||w[18]!==W?(c=[P,K,E,J,W],w[14]=P,w[15]=K,w[16]=E,w[17]=J,w[18]=W,w[19]=c):c=w[19],(0,l.useEffect)(d,c);let ee=!!T?._rev;w[20]!==J||w[21]!==T?(u=()=>{J.publish({type:"mutation",patches:[],snapshot:T})},w[20]=J,w[21]=T,w[22]=u):u=w[22];let et=(0,tj.useEffectEvent)(u);w[23]!==et||w[24]!==ee?(p=()=>{ee&&et()},w[23]=et,w[24]=ee,w[25]=p):p=w[25],w[26]!==ee?(m=[ee],w[26]=ee,w[27]=m):m=w[27],(0,l.useEffect)(p,m);let[en,ei]=(0,l.useState)(null),[el,eo]=(0,l.useState)(!1);w[28]!==el||w[29]!==en||w[30]!==V?.focusPath.length||w[31]!==A?(h=()=>{!el&&A&&!V?.focusPath.length&&en&&(eo(!0),(0,ef.focusFirstDescendant)(en))},w[28]=el,w[29]=en,w[30]=V?.focusPath.length,w[31]=A,w[32]=h):h=w[32];let er=V?.focusPath.length;w[33]!==el||w[34]!==en||w[35]!==A||w[36]!==er?(g=[el,en,er,A],w[33]=el,w[34]=en,w[35]=A,w[36]=er,w[37]=g):g=w[37],(0,l.useEffect)(h,g),w[38]!==t?(f=e=>{ei(e),"function"==typeof t?t(e):t&&(t.current=e)},w[38]=t,w[39]=f):f=w[39];let es=f,ea="reconnecting"===L||V?.readOnly||!R?.ready,ed=ea?"true":void 0;return w[40]!==_||w[41]!==I||w[42]!==G||w[43]!==L||w[44]!==P||w[45]!==R?.draft||w[46]!==R?.published||w[47]!==k||w[48]!==V||w[49]!==U||w[50]!==S||w[51]!==ea||w[52]!==z||w[53]!==D||w[54]!==M||w[55]!==B||w[56]!==$||w[57]!==H||w[58]!==O||w[59]!==N||w[60]!==J||w[61]!==Y||w[62]!==q||w[63]!==Q||w[64]!==X||w[65]!==F?(x="connecting"!==L||R?.draft||R?.published?null===V||S?(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsx)(eg.Text,{children:Q("document-view.form-view.form-hidden")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(lv,{documentId:P,schemaType:V.schemaType,title:X}),(0,n.jsx)(o.FormBuilder,{__internal_fieldActions:k,__internal_patchChannel:J,changed:V.changed,collapsedFieldSets:_,collapsedPaths:I,compareValue:G??void 0,focused:V.focused,focusPath:V.focusPath,groups:V.groups,id:"root",members:V.members,onChange:D,onFieldGroupSelect:$,onPathBlur:z,onPathFocus:M,onPathOpen:B,onSetFieldSetCollapsed:H,onSetPathCollapsed:O,openPath:N,perspective:q,hasUpstreamVersion:U,presence:Y,readOnly:ea,schemaType:V.schemaType,validation:F,value:V.value})]}):(0,n.jsx)(is,{ms:300,children:(0,n.jsxs)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,n.jsx)(eg.Spinner,{muted:!0}),(0,n.jsx)(eg.Box,{marginTop:3,children:(0,n.jsx)(eg.Text,{align:"center",muted:!0,size:1,children:Q("document-view.form-view.loading")})})]})}),w[40]=_,w[41]=I,w[42]=G,w[43]=L,w[44]=P,w[45]=R?.draft,w[46]=R?.published,w[47]=k,w[48]=V,w[49]=U,w[50]=S,w[51]=ea,w[52]=z,w[53]=D,w[54]=M,w[55]=B,w[56]=$,w[57]=H,w[58]=O,w[59]=N,w[60]=J,w[61]=Y,w[62]=q,w[63]=Q,w[64]=X,w[65]=F,w[66]=x):x=w[66],w[67]!==es||w[68]!==ed||w[69]!==x?(y=(0,n.jsx)(eg.Box,{as:"form",onSubmit:lj,ref:es,"data-testid":"form-view","data-read-only":ed,children:x}),w[67]=es,w[68]=ed,w[69]=x,w[70]=y):y=w[70],w[71]!==C||w[72]!==y?(v=(0,n.jsx)(o.PresenceOverlay,{margins:C,children:y}),w[71]=C,w[72]=y,w[73]=v):v=w[73],w[74]!==S||w[75]!==v?(j=(0,n.jsx)(eg.Container,{hidden:S,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:v}),w[74]=S,w[75]=v,w[76]=j):j=w[76],j});function lS(){return(0,o.createPatchChannel)()}function lC(){let e,t,l=(0,i.c)(11),{activeViewId:o,paneKey:r,views:s}=iu(),a=`${r}tabpanel`;if(l[0]!==o||l[1]!==r||l[2]!==a||l[3]!==s){let t;l[5]!==o||l[6]!==r||l[7]!==a?(t=(e,t)=>(0,n.jsx)(l_,{icon:e.icon,id:`${r}tab-${e.id}`,isActive:o===e.id,label:e.title,tabPanelId:a,viewId:0===t?null:e.id??null},e.id),l[5]=o,l[6]=r,l[7]=a,l[8]=t):t=l[8],e=s.map(t),l[0]=o,l[1]=r,l[2]=a,l[3]=s,l[4]=e}else e=l[4];return l[9]!==e?(t=(0,n.jsx)(eg.TabList,{space:1,children:e}),l[9]=e,l[10]=t):t=l[10],t}function l_(e){let t,l,o,r,s,a,d,c,u,p=(0,i.c)(20);p[0]!==e?({icon:t,id:l,isActive:o,label:r,tabPanelId:a,viewId:d,...s}=e,p[0]=e,p[1]=t,p[2]=l,p[3]=o,p[4]=r,p[5]=s,p[6]=a,p[7]=d):(t=p[1],l=p[2],o=p[3],r=p[4],s=p[5],a=p[6],d=p[7]);let{ready:m,editState:h}=iu(),{setView:g}=ln();p[8]!==g||p[9]!==d?(c=()=>g(d),p[8]=g,p[9]=d,p[10]=c):c=p[10];let f=c,x=!m&&!h?.draft&&!h?.published;return p[11]!==f||p[12]!==t||p[13]!==l||p[14]!==o||p[15]!==r||p[16]!==s||p[17]!==x||p[18]!==a?(u=(0,n.jsx)(eh.Tab,{...s,"aria-controls":a,disabled:x,icon:t,id:l,label:r,onClick:f,selected:o}),p[11]=f,p[12]=t,p[13]=l,p[14]=o,p[15]=r,p[16]=s,p[17]=x,p[18]=a,p[19]=u):u=p[19],u}function lI(){let e,t=(0,i.c)(1),n=(0,l.useContext)(s.ResolvedPanesContext);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:lT},t[0]=e):e=t[0],n??e}function lT(){}let lR=Object.freeze({}),lP=Symbol("LOADING_PANE"),lE="documentPanelPortalElement",lk=(0,to.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),lD=(0,to.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),lF=(0,to.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function lA(e){let t,l,r,s,a,d,c,u,p=(0,i.c)(27),{paneData:m,index:h}=e,{pane:g}=m,f=(0,eC.useRouter)(),{t:x}=(0,o.useTranslation)(b),y=(0,eC.useRouterState)(),v=(0,tn.useTelemetry)();p[0]!==y?.panes?(t=y?.panes||[],p[0]=y?.panes,p[1]=t):t=p[1];let j=t,{perspectiveStack:w}=(0,o.usePerspective)(),S=g!==lP&&"title"in g?g.title:null,C=g!==lP&&"document"===g.type?g.options.id:null,_=g!==lP&&"document"===g.type?g.options.type:null,I=C??"",T=_??"";p[2]!==w||p[3]!==I||p[4]!==T?(l={documentId:I,documentType:T,perspectiveStack:w},p[2]=w,p[3]=I,p[4]=T,p[5]=l):l=p[5];let{value:R,isLoading:P}=(0,o.useDocumentPreviewValues)(l);e:{if(C&&!P){let e;p[6]!==R?.title||p[7]!==x?(e=R?.title||x("panes.document-header-title.untitled.text"),p[6]=R?.title,p[7]=x,p[8]=e):e=p[8],r=e;break e}r=S}let E=r;p[9]!==m.groupIndex||p[10]!==f||p[11]!==j||p[12]!==v?(s=()=>{v.log(lF),f.navigate({panes:j.slice(0,m.groupIndex)})},p[9]=m.groupIndex,p[10]=f,p[11]=j,p[12]=v,p[13]=s):s=p[13];let k=s;if(!E&&!P)return null;p[14]!==E||p[15]!==x?(a=E||x("panes.document-header-title.untitled.text"),p[14]=E,p[15]=x,p[16]=a):a=p[16],p[17]!==E||p[18]!==x?(d=E||x("panes.document-header-title.untitled.text"),p[17]=E,p[18]=x,p[19]=d):d=p[19],p[20]!==d?(c={content:d},p[20]=d,p[21]=c):c=p[21];let D=+(0!==h);return p[22]!==k||p[23]!==D||p[24]!==a||p[25]!==c?(u=(0,n.jsx)(eh.Button,{mode:"bleed",text:a,tooltipProps:c,onClick:k,paddingLeft:D}),p[22]=k,p[23]=D,p[24]=a,p[25]=c,p[26]=u):u=p[26],u}function lV(e){let t,o,r=(0,i.c)(7),{paneDataItems:s,currentPaneIndex:a}=e;if(r[0]!==a||r[1]!==s){let e;r[3]!==a?(e=(e,t)=>{if(t>a)return null;let i=e.pane!==lP&&"document"===e.pane.type;return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(lA,{paneData:e,index:t}),t<a&&(i?(0,n.jsx)(eg.Box,{padding:1,children:(0,n.jsx)(d.ArrowRightIcon,{})}):(0,n.jsx)(eg.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},r[3]=a,r[4]=e):e=r[4],t=s.map(e),r[0]=a,r[1]=s,r[2]=t}else t=r[2];return r[5]!==t?(o=(0,n.jsx)(eg.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),r[5]=t,r[6]=o):o=r[6],o}function lM(){let e,t,l,r=(0,i.c)(23),{connectionState:s,schemaType:a,title:d,value:c,index:u}=iu(),{paneDataItems:p}=lI(),{title:m,error:h}=iI(),{t:g}=(0,o.useTranslation)(b);r[0]!==p?(e=p.some(lL),r[0]=p,r[1]=e):e=r[1];let f=e;if("connecting"===s&&!c){let e;return r[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),r[2]=e):e=r[2],e}if(d){let e;return r[3]!==d?(e=(0,n.jsx)(n.Fragment,{children:d}),r[3]=d,r[4]=e):e=r[4],e}if(!c){let e,t,i=a?.title||a?.name;return r[5]!==g||r[6]!==i?(e=g("panes.document-header-title.new.text",{schemaType:i}),r[5]=g,r[6]=i,r[7]=e):e=r[7],r[8]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),r[8]=e,r[9]=t):t=r[9],t}if(h){let e,t;return r[10]!==h||r[11]!==g?(e=g("panes.document-header-title.error.text",{error:h}),r[10]=h,r[11]=g,r[12]=e):e=r[12],r[13]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),r[13]=e,r[14]=t):t=r[14],t}return r[15]!==m||r[16]!==f||r[17]!==u||r[18]!==p||r[19]!==g?(t=f?(0,n.jsx)(lV,{paneDataItems:p,currentPaneIndex:u}):m||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:g("panes.document-header-title.untitled.text")}),r[15]=m,r[16]=f,r[17]=u,r[18]=p,r[19]=g,r[20]=t):t=r[20],r[21]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),r[21]=t,r[22]=l):l=r[22],l}function lL(e){return e.maximized}let lz=e=>{let t,l,r,s,a,c,u=(0,i.c)(16);u[0]!==e?({documentExists:t,...l}=e,u[0]=e,u[1]=t,u[2]=l):(t=u[1],l=u[2]);let{isFavorited:p,isReady:m,favorite:h,unfavorite:g}=(0,o.useManageFavorite)(l),{t:f}=(0,o.useTranslation)(b),x=p?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";u[3]!==f||u[4]!==x?(r=f(x),u[3]=f,u[4]=x,u[5]=r):r=u[5];let y=r,v=p?g:h,j=!m||!t;return u[6]!==y?(s={content:(0,n.jsx)(eg.Text,{size:1,children:y}),placement:"right"},u[6]=y,u[7]=s):s=u[7],u[8]!==p?(a=(0,n.jsx)(eg.Text,{size:1,children:p?(0,n.jsx)(d.StarFilledIcon,{}):(0,n.jsx)(d.StarIcon,{})}),u[8]=p,u[9]=a):a=u[9],u[10]!==y||u[11]!==v||u[12]!==j||u[13]!==s||u[14]!==a?(c=(0,n.jsx)(eh.Button,{mode:"bleed",onClick:v,disabled:j,"aria-label":y,"aria-live":"assertive",tooltipProps:s,children:a}),u[10]=y,u[11]=v,u[12]=j,u[13]=s,u[14]=a,u[15]=c):c=u[15],c},lO=(0,l.memo)(function(){let e,t,l,r,s,a,c=(0,i.c)(24),{editState:u,connectionState:p,views:m,documentId:h,displayed:g}=iu(),{features:f}=ib(),{index:x,BackLink:y}=ln(),{activeWorkspace:v}=(0,o.useActiveWorkspace)(),j=m.length>1,{collapsed:w,isLast:S}=nB(),C=S&&!w?-1:0,_=f.backButton&&x>0,{t:I}=(0,o.useTranslation)(b);c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(lM,{}),c[0]=e):e=c[0];let T=e;c[1]!==j?(t=j&&(0,n.jsx)(lC,{}),c[1]=j,c[2]=t):t=c[2];let R=t;c[3]!==y||c[4]!==_||c[5]!==I?(l=_&&(0,n.jsx)(eh.Button,{as:y,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:I("pane-header.back-button.text")}}),c[3]=y,c[4]=_,c[5]=I,c[6]=l):l=c[6];let P=l,E=g?._id??h,k=g?._type??"";c[7]!==v.dataset||c[8]!==v.projectId?(r=[v.projectId,v.dataset],c[7]=v.dataset,c[8]=v.projectId,c[9]=r):r=c[9];let D=r.join("."),F=(u?.ready&&(u.version??u.draft??u.published)!==null)??!1;c[10]!==v.dataset||c[11]!==v.name||c[12]!==v.projectId||c[13]!==E||c[14]!==k||c[15]!==D||c[16]!==F?(s=(0,n.jsx)(o.CapabilityGate,{capability:"comlink",condition:"available",children:(0,n.jsx)(lz,{resourceType:"studio",documentId:E,documentType:k,resourceId:D,schemaName:v.name,projectId:v.projectId,dataset:v.dataset,documentExists:F})}),c[10]=v.dataset,c[11]=v.name,c[12]=v.projectId,c[13]=E,c[14]=k,c[15]=D,c[16]=F,c[17]=s):s=c[17];let A=s,V="connecting"===p&&!u?.draft&&!u?.published;return c[18]!==P||c[19]!==A||c[20]!==V||c[21]!==C||c[22]!==R?(a=(0,n.jsx)(n5,{loading:V,title:T,tabs:R,tabIndex:C,backButton:P,appendTitle:A}),c[18]=P,c[19]=A,c[20]=V,c[21]=C,c[22]=R,c[23]=a):a=c[23],a}),lB=(0,ey.styled)(eg.Box)({position:"relative"}),lH=(0,ey.styled)(o.ScrollContainer)(({$disabled:e})=>e?{height:"100%"}:ey.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),l$=function(e){let t,s,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(109),{footerHeight:S,headerHeight:C,isInspectOpen:_,rootElement:I,setDocumentPanelPortalElement:T,footer:R}=e,{activeViewId:P,displayed:E,documentId:k,editState:D,inspector:F,value:A,views:V,ready:M,schemaType:L,permissions:z,isPermissionsLoading:O}=iu();if(w[0]!==A){let e=(0,o.getSanityCreateLinkMetadata)(A);t=(0,o.isSanityCreateLinked)(e),w[0]=A,w[1]=t}else t=w[1];let B=t,{params:H}=ln(),{collapsed:$}=nA(),{collapsed:N}=nB(),G=(0,eg.usePortal)(),{features:U}=ib(),[W,q]=(0,l.useState)(null),[K,Y]=(0,l.useState)(null),X=(0,l.useRef)(null),J=(0,o.useWorkspace)(),Z=A._createdAt?"update":"create";w[2]!==P||w[3]!==V?(s=V.find(e=>e.id===P)||V[0]||{type:"form"},w[2]=P,w[3]=V,w[4]=s):s=w[4];let Q=s,ee=U.splitPanes&&W||G.element;e:{let e;if($){let e,t=C||0,n=S?S+2:2;w[5]!==t||w[6]!==n?(e=[t,0,n,0],w[5]=t,w[6]=n,w[7]=e):e=w[7],a=e;break e}w[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],w[8]=e):e=w[8],a=e}let et=a,en="form"!==Q.type;w[9]!==Q.component||w[10]!==Q.options||w[11]!==Q.type||w[12]!==E||w[13]!==k||w[14]!==D?.draft||w[15]!==D?.published||w[16]!==L||w[17]!==A?(d=()=>{if("component"===Q.type&&Q.component){let e=Q.component;return(0,n.jsx)(e,{document:{draft:D?.draft||null,displayed:E||A,historical:E,published:D?.published||null},documentId:k,options:Q.options,schemaType:L})}return!1},w[9]=Q.component,w[10]=Q.options,w[11]=Q.type,w[12]=E,w[13]=k,w[14]=D?.draft,w[15]=D?.published,w[16]=L,w[17]=A,w[18]=d):d=w[18],w[19]!==d?(c=d(),w[19]=d,w[20]=c):c=w[20];let ei=c;w[21]!==K?(u=()=>{K?.scrollTo&&K.scrollTo(0,0)},w[21]=K,w[22]=u):u=w[22],w[23]!==k||w[24]!==K?(p=[k,K],w[23]=k,w[24]=K,w[25]=p):p=w[25],(0,l.useEffect)(u,p),w[26]!==ee||w[27]!==T?(m=()=>{ee&&T(ee)},h=[ee,T],w[26]=ee,w[27]=T,w[28]=m,w[29]=h):(m=w[28],h=w[29]),(0,l.useEffect)(m,h),w[30]!==E||w[31]!==_||w[32]!==A?(g=_?(0,n.jsx)(iN,{value:E||A}):null,w[30]=E,w[31]=_,w[32]=A,w[33]=g):g=w[33];let el=g,eo=!!(!N&&F),{selectedPerspective:er,selectedReleaseId:es}=(0,o.usePerspective)(),ea=H?.historyVersion;w[34]!==E||w[35]!==k||w[36]!==ea?(f={historyVersion:ea,displayed:E,documentId:k},w[34]=E,w[35]=k,w[36]=ea,w[37]=f):f=w[37];let ed=(0,o.useFilteredReleases)(f);t:{let e,t,i,l,s,a,d,c,u,p,m,h,g,f;if(H?.historyVersion){let e;w[38]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(li,{}),w[38]=e):e=w[38],x=e;break t}w[39]!==er?(e=(0,o.isReleaseDocument)(er)&&(0,o.isReleaseScheduledOrScheduling)(er),w[39]=er,w[40]=e):e=w[40];let b=e,y=!!(b&&E?._id&&(0,r.getVersionFromId)(E?._id)===es);if(w[41]!==D||w[42]!==L||w[43]!==er||w[44]!==J.document.drafts.enabled?(i=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,o.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,o.isPerspectiveWriteable)({selectedPerspective:er,isDraftModelEnabled:J.document.drafts.enabled,schemaType:L}),editState:D}),w[41]=D,w[42]=L,w[43]=er,w[44]=J.document.drafts.enabled,w[45]=t,w[46]=i):(t=w[45],i=w[46]),i){let e;w[47]!==t.reason||w[48]!==t.result||w[49]!==L||w[50]!==er?(e=!t.result&&(0,n.jsx)(ld,{schemaType:L,selectedPerspective:er,reason:t.reason}),w[47]=t.reason,w[48]=t.result,w[49]=L,w[50]=er,w[51]=e):e=w[51],x=e;break t}if(y){let e;w[52]!==er?(e=(0,n.jsx)(lx,{currentRelease:er}),w[52]=er,w[53]=e):e=w[53],x=e;break t}let v=ed.currentReleases.some(o.isCardinalityOneRelease),j=E?._id&&(0,r.isDraftId)(E._id);if("drafts"===er&&v&&j){let e;w[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(lt,{}),w[54]=e):e=w[54],x=e;break t}w[55]!==er?(l=(0,o.isSystemBundle)(er),w[55]=er,w[56]=l):l=w[56];let S=l,C=D?.version&&(0,o.isGoingToUnpublish)(D?.version);if(E?._id&&(0,r.getVersionFromId)(E._id)!==es&&M&&!S&&!1===(0,o.isNewDocument)(D)&&!C){let e;w[57]!==b||w[58]!==er||w[59]!==A._id?(e=(0,n.jsx)(lu,{documentId:A._id,currentRelease:er,isScheduledRelease:b}),w[57]=b,w[58]=er,w[59]=A._id,w[60]=e):e=w[60],x=e;break t}let _=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return!1===i?{result:!1}:l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:D,workspace:J,schemaType:L});if("form"===Q.type&&!es&&_.result){if("DRAFT_MODEL_INACTIVE"===_.reason){let e;w[61]!==E||w[62]!==k||w[63]!==L?(e=(0,n.jsx)(lm,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[61]=E,w[62]=k,w[63]=L,w[64]=e):e=w[64],x=e;break t}if("LIVE_EDIT_ACTIVE"===_.reason){let e;w[65]!==E||w[66]!==k||w[67]!==L?(e=(0,n.jsx)(lm,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[65]=E,w[66]=k,w[67]=L,w[68]=e):e=w[68],x=e;break t}}if("form"!==Q.type||O){x=null;break t}w[69]!==B?(s=B&&(0,n.jsx)(lc,{}),w[69]=B,w[70]=s):s=w[70],w[71]!==z?.granted||w[72]!==Z?(a=!z?.granted&&(0,n.jsx)(i6,{requiredPermission:Z}),w[71]=z?.granted,w[72]=Z,w[73]=a):a=w[73],w[74]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(lf,{}),c=(0,n.jsx)(i9,{}),u=(0,n.jsx)(iK,{}),p=(0,n.jsx)(ls,{}),m=(0,n.jsx)(iU,{}),h=(0,n.jsx)(lb,{}),w[74]=d,w[75]=c,w[76]=u,w[77]=p,w[78]=m,w[79]=h):(d=w[74],c=w[75],u=w[76],p=w[77],m=w[78],h=w[79]);let I=E?._id??k;w[80]!==S||w[81]!==I?(g=(0,n.jsx)(lh,{documentId:I,isPinnedDraftOrPublished:S}),w[80]=S,w[81]=I,w[82]=g):g=w[82],w[83]!==s||w[84]!==a||w[85]!==g?(f=(0,n.jsxs)(n.Fragment,{children:[s,a,d,c,u,p,m,h,g]}),w[83]=s,w[84]=a,w[85]=g,w[86]=f):f=w[86],x=f}let ec=x;w[87]!==K?(b={documentScrollElement:K},w[87]=K,w[88]=b):b=w[88];let eu=b,ep=U.resizablePanes||!eo;return w[89]!==ei||w[90]!==ec||w[91]!==K||w[92]!==R||w[93]!==en||w[94]!==el||w[95]!==$||w[96]!==et||w[97]!==ee||w[98]!==eu||w[99]!==ep?(y=ep&&(0,n.jsxs)(eg.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,n.jsxs)(o.LegacyLayerProvider,{zOffset:"paneHeader",children:[ec,(0,n.jsx)(lO,{})]}),(0,n.jsx)(lB,{flex:2,children:(0,n.jsx)(eg.PortalProvider,{element:ee,__unstable_elements:eu,children:(0,n.jsx)(eg.BoundaryElementProvider,{element:K,children:(0,n.jsxs)(o.VirtualizerScrollInstanceProvider,{scrollElement:K,containerElement:X,children:[(0,n.jsxs)(lH,{$disabled:$||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,n.jsx)(lw,{hidden:en,margins:et,ref:X}),ei]}),el,(0,n.jsx)("div",{"data-testid":"document-panel-portal",ref:q})]})})})}),R]}),w[89]=ei,w[90]=ec,w[91]=K,w[92]=R,w[93]=en,w[94]=el,w[95]=$,w[96]=et,w[97]=ee,w[98]=eu,w[99]=ep,w[100]=y):y=w[100],w[101]!==k||w[102]!==I||w[103]!==L||w[104]!==eo?(v=eo&&(0,n.jsx)(eg.BoundaryElementProvider,{element:I,children:(0,n.jsx)(ik,{documentId:k,documentType:L.name,flex:1})}),w[101]=k,w[102]=I,w[103]=L,w[104]=eo,w[105]=v):v=w[105],w[106]!==y||w[107]!==v?(j=(0,n.jsx)(nH,{children:(0,n.jsxs)(eg.Flex,{height:"fill",children:[y,v]})}),w[106]=y,w[107]=v,w[108]=j):j=w[108],j};l$.displayName="DocumentPanel";let lN=e=>{let t,n,r,s,a,c,u,p=(0,i.c)(26),{id:m,type:h,revision:g,release:f}=e,{restore:x}=(0,o.useDocumentOperation)(m,h,f),{revisionNotFound:y}=iu(),v=(0,o.useDocumentOperationEvent)(m,h),{navigateIntent:j}=(0,eC.useRouter)(),w=(0,l.useRef)(v),[S,C]=(0,l.useState)(!1),{t:_}=(0,o.useTranslation)(b);p[0]!==x||p[1]!==g?(t=()=>{x.execute(g),C(!1)},p[0]=x,p[1]=g,p[2]=t):t=p[2];let I=t;p[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{C(!1)},p[3]=n):n=p[3];let T=n;p[4]!==v||p[5]!==m||p[6]!==j||p[7]!==h?(r=()=>{v&&v!==w.current&&("success"===v.type&&"restore"===v.op&&j("edit",{id:m,type:h}),w.current=v)},s=[v,m,j,h],p[4]=v,p[5]=m,p[6]=j,p[7]=h,p[8]=r,p[9]=s):(r=p[8],s=p[9]),(0,l.useEffect)(r,s),p[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{C(!0)},p[10]=a):a=p[10];let R=a;e:{if(S){let e,t;p[11]!==_?(e=_("action.restore.confirm.message"),p[11]=_,p[12]=e):e=p[12],p[13]!==I||p[14]!==e?(t={type:"confirm",tone:"critical",onCancel:T,onConfirm:I,message:e},p[13]=I,p[14]=e,p[15]=t):t=p[15],c=t;break e}c=null}let P=c,E="@initial"===g,k=void 0===g;t:{let e,t,n;if(k||y){u=null;break t}p[16]!==_?(e=_("action.restore.label"),p[16]=_,p[17]=e):e=p[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";p[18]!==_||p[19]!==i?(t=_(i),p[18]=_,p[19]=i,p[20]=t):t=p[20],p[21]!==P||p[22]!==E||p[23]!==t||p[24]!==e?(n={label:e,tone:"caution",onHandle:R,title:t,icon:d.RevertIcon,dialog:P,disabled:E},p[21]=P,p[22]=E,p[23]=t,p[24]=e,p[25]=n):n=p[25],u=n}return u};function lG(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}lN.action="restore",lN.displayName="HistoryRestoreAction";let lU=(0,te.default)(lG);function lW(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&r.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let lq=["left","bottom"],lK={small:0,medium:1,large:2,full:"auto"};function lY(e){let t,l,r,s=(0,i.c)(16),{dialog:a,referenceElement:d}=e,{t:c}=(0,o.useTranslation)(b),{cancelButtonIcon:u,cancelButtonText:p,confirmButtonIcon:m,confirmButtonText:h,message:g,onCancel:f,onConfirm:x,tone:y}=a;return s[0]!==p||s[1]!==c?(t=p||c("confirm-dialog.cancel-button.fallback-text"),s[0]=p,s[1]=c,s[2]=t):t=s[2],s[3]!==h||s[4]!==c?(l=h||c("confirm-dialog.confirm-button.fallback-text"),s[3]=h,s[4]=c,s[5]=l):l=s[5],s[6]!==u||s[7]!==m||s[8]!==g||s[9]!==f||s[10]!==x||s[11]!==d||s[12]!==t||s[13]!==l||s[14]!==y?(r=(0,n.jsx)(tt.ConfirmPopover,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:m,confirmButtonText:l,message:g,onCancel:f,onConfirm:x,open:!0,referenceElement:d,tone:y,placement:"top",fallbackPlacements:lq}),s[6]=u,s[7]=m,s[8]=g,s[9]=f,s[10]=x,s[11]=d,s[12]=t,s[13]=l,s[14]=y,s[15]=r):r=s[15],r}function lX(e){let t,r,s,a=(0,i.c)(12),{dialog:d}=e,c=(0,l.useId)();a[0]!==d.footer?(t=d.footer&&(0,n.jsx)(eg.Box,{paddingX:4,paddingY:3,children:d.footer}),a[0]=d.footer,a[1]=t):t=a[1];let u=t,p=!1===d.showCloseButton,m=void 0===d.width?1:lK[d.width];return a[2]!==d.content?(r=(0,n.jsx)(eg.Box,{padding:4,children:d.content}),a[2]=d.content,a[3]=r):r=a[3],a[4]!==d.header||a[5]!==d.onClose||a[6]!==c||a[7]!==u||a[8]!==p||a[9]!==m||a[10]!==r?(s=(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,n.jsx)(ef.Dialog,{animate:!0,__unstable_hideCloseButton:p,footer:u,header:d.header,id:c,onClose:d.onClose,onClickOutside:d.onClose,width:m,children:r})}),a[4]=d.header,a[5]=d.onClose,a[6]=c,a[7]=u,a[8]=p,a[9]=m,a[10]=r,a[11]=s):s=a[11],s}function lJ(e){let t,l,o=(0,i.c)(5),{dialog:r,referenceElement:s}=e;return o[0]!==r?(t=(0,n.jsx)(lZ,{dialog:r}),o[0]=r,o[1]=t):t=o[1],o[2]!==s||o[3]!==t?(l=(0,n.jsx)(eg.Popover,{content:t,fallbackPlacements:lq,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s}),o[2]=s,o[3]=t,o[4]=l):l=o[4],l}function lZ(e){let t,o,r,s=(0,i.c)(6),{dialog:a}=e,{content:d,onClose:c}=a,{isTopLayer:u}=(0,eg.useLayer)(),p=(0,l.useRef)(null);return s[0]!==u||s[1]!==c?(t=e=>{"Escape"===e.key&&u&&c()},s[0]=u,s[1]=c,s[2]=t):t=s[2],(0,eg.useGlobalKeyDown)(t),s[3]===Symbol.for("react.memo_cache_sentinel")?(o=()=>[p.current],s[3]=o):o=s[3],(0,eg.useClickOutsideEvent)(u&&c,o),s[4]!==d?(r=(0,n.jsx)("div",{ref:p,children:d}),s[4]=d,s[5]=r):r=s[5],r}function lQ(e){let t,l=(0,i.c)(3),{children:o}=e,{element:r,elements:s}=(0,eg.usePortal)(),a=s?.[lE]||r;return l[0]!==o||l[1]!==a?(t=(0,n.jsx)(eg.PortalProvider,{element:a,children:o}),l[0]=o,l[1]=a,l[2]=t):t=l[2],t}function l0(e){let t,o,r=(0,i.c)(17),{dialog:s,referenceElement:a}=e,d=void 0===a?null:a,c=(0,l.useId)();if("confirm"===s.type){let e;return r[0]!==s||r[1]!==d?(e=(0,n.jsx)(lY,{dialog:s,referenceElement:d}),r[0]=s,r[1]=d,r[2]=e):e=r[2],e}if("popover"===s.type){let e;return r[3]!==s||r[4]!==d?(e=(0,n.jsx)(lJ,{dialog:s,referenceElement:d}),r[3]=s,r[4]=d,r[5]=e):e=r[5],e}if("dialog"===s.type||!s.type){let e;return r[6]!==s?(e=(0,n.jsx)(lQ,{children:(0,n.jsx)(lX,{dialog:s})}),r[6]=s,r[7]=e):e=r[7],e}if("custom"===s.type){let e,t=s?.component;return r[8]!==t?(e=(0,n.jsx)(lQ,{children:t}),r[8]=t,r[9]=e):e=r[9],e}return console.warn(`Unsupported modal type ${s.type}`),r[10]!==s.content||r[11]!==s.type?(t=s.content||(0,n.jsxs)(eg.Text,{size:1,children:["Unexpected modal type (",(0,n.jsx)("code",{children:s.type}),")"]}),r[10]=s.content,r[11]=s.type,r[12]=t):t=r[12],r[13]!==c||r[14]!==t||r[15]!==s.onClose?(o=(0,n.jsx)(eh.Dialog,{id:c,onClose:s.onClose,onClickOutside:s.onClose,width:1,children:t}),r[13]=c,r[14]=t,r[15]=s.onClose,r[16]=o):o=r[16],o}let l1=(0,l.memo)(function(e){let t,r,s,a,d=(0,i.c)(9),{actionStates:c,children:u,referenceElement:p}=e,[m,h]=(0,l.useState)(-1),g=c[m];d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},d[0]=t):t=d[0];let f=t;d[1]!==u?(r=u({handleAction:f}),d[1]=u,d[2]=r):r=d[2];let x=r;return d[3]!==g||d[4]!==p?(s=g&&g.dialog&&(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(l0,{dialog:g.dialog,referenceElement:p})}),d[3]=g,d[4]=p,d[5]=s):s=d[5],d[6]!==x||d[7]!==s?(a=(0,n.jsxs)(n.Fragment,{children:[s,x]}),d[6]=x,d[7]=s,d[8]=a):a=d[8],a});function l2(e){let t,r,s,a=(0,i.c)(10),{actionStates:d,disabled:c}=e,u=(0,l.useId)(),[p,m]=(0,l.useState)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},a[0]=t):t=a[0];let h=t,{t:g}=(0,o.useTranslation)(b);a[1]!==d||a[2]!==c||a[3]!==u||a[4]!==g?(r=e=>{let{handleAction:t}=e;return(0,n.jsx)(eh.MenuButton,{id:`${u}-action-menu`,button:(0,n.jsx)(o.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:c,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,n.jsx)(eg.Menu,{padding:1,children:d.map((e,i)=>(0,n.jsx)(l3,{actionState:e,disabled:c,index:i,onAction:t},i))}),popover:h,ref:m})},a[1]=d,a[2]=c,a[3]=u,a[4]=g,a[5]=r):r=a[5];let f=r;return a[6]!==d||a[7]!==p||a[8]!==f?(s=(0,n.jsx)(l1,{actionStates:d,referenceElement:p,children:f}),a[6]=d,a[7]=p,a[8]=f,a[9]=s):s=a[9],s}function l3(e){let t,l,o,r,s,a=(0,i.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(l=d.shortcut?String(d.shortcut).split("+").map(l4):void 0,a[4]=d.shortcut,a[5]=l):l=a[5];let g=l;a[6]!==d.label?(o=d.label.replace(" ",""),a[6]=d.label,a[7]=o):o=a[7];let f=`action-${o}`,x=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(r=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=r):r=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==h||a[15]!==g||a[16]!==f||a[17]!==x||a[18]!==r?(s=(0,n.jsx)(eh.MenuItem,{"data-testid":f,disabled:x,hotkeys:g,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...r}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=h,a[15]=g,a[16]=f,a[17]=x,a[18]=r,a[19]=s):s=a[19],s}function l4(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let l5=e=>{let t=(0,i.c)(16),{release:l}=e,{t:r}=(0,o.useTranslation)();if("archived"===l.state){let e,i;return t[0]!==r?(e=r("release.chip.tooltip.archived"),t[0]=r,t[1]=e):e=t[1],t[2]!==e?(i=(0,n.jsx)(eg.Text,{size:1,children:e}),t[2]=e,t[3]=i):i=t[3],i}if("asap"===l.metadata.releaseType){let e,i;return t[4]!==r?(e=r("release.type.asap"),t[4]=r,t[5]=e):e=t[5],t[6]!==e?(i=(0,n.jsx)(eg.Text,{size:1,children:e}),t[6]=e,t[7]=i):i=t[7],i}if("scheduled"===l.metadata.releaseType){let e,i="active"===l.state;return t[8]!==i||t[9]!==l||t[10]!==r?(e=l.metadata.intendedPublishAt&&(0,n.jsx)(eg.Text,{size:1,children:i?(0,n.jsx)(o.Translate,{t:r,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,o.formatRelativeLocalePublishDate)(l)}}):(0,n.jsx)(o.Translate,{t:r,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,o.formatRelativeLocalePublishDate)(l)}})}),t[8]=i,t[9]=l,t[10]=r,t[11]=e):e=t[11],e}if("undecided"===l.metadata.releaseType){let e,i;return t[12]!==r?(e=r("release.type.undecided"),t[12]=r,t[13]=e):e=t[13],t[14]!==e?(i=(0,n.jsx)(eg.Text,{size:1,children:e}),t[14]=e,t[15]=i):i=t[15],i}return null},l6={dateStyle:"medium",timeStyle:"short"},l8=(0,l.memo)(function(){let e,t,l,s,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w,S=(0,i.c)(97),{selectedReleaseId:C,selectedPerspectiveName:_}=(0,o.usePerspective)(),{t:I}=(0,o.useTranslation)(),T=(0,o.useSetPerspective)(),{params:R,setParams:P}=ln(),E=(0,o.useDateTimeFormat)(l6),{loading:k}=(0,o.useActiveReleases)(),D=(0,o.useSchema)(),{editState:F,displayed:A,documentType:V,documentId:M}=iu(),L=A&&!A._createdAt,z=(0,o.useGetDefaultPerspective)(),O=R?.historyVersion;S[0]!==A||S[1]!==M||S[2]!==O?(e={historyVersion:O,displayed:A,documentId:M},S[0]=A,S[1]=M,S[2]=O,S[3]=e):e=S[3];let B=(0,o.useFilteredReleases)(e);S[4]!==M?(t={documentId:M},S[4]=M,S[5]=t):t=S[5];let H=(0,o.useOnlyHasVersions)(t),$=(0,o.useWorkspace)(),{onSetScheduledDraftPerspective:N}=(0,o.useSingleDocRelease)();S[6]!==N||S[7]!==R?.scheduledDraft||S[8]!==T?(l=()=>{R?.scheduledDraft?N(""):T("drafts")},S[6]=N,S[7]=R?.scheduledDraft,S[8]=T,S[9]=l):l=S[9];let G=l;S[10]!==z||S[11]!==N||S[12]!==R||S[13]!==P||S[14]!==T?(s=e=>()=>{if((0,o.isReleaseDocument)(e)&&(0,o.isCardinalityOneRelease)(e))return void N((0,o.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&R?.historyVersion&&P({...R,rev:R?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,o.isReleaseDocument)(e)?(0,o.getReleaseIdFromReleaseDocumentId)(e._id):e===z?"":e;R?.scheduledDraft?P({...R,scheduledDraft:void 0},{perspective:t}):T(t)},S[10]=z,S[11]=N,S[12]=R,S[13]=P,S[14]=T,S[15]=s):s=S[15];let U=s;if(S[16]!==V||S[17]!==D){let e=D.get(V);a=!!e&&!0===e.liveEdit,S[16]=V,S[17]=D,S[18]=a}else a=S[18];let W=a;e:{if(W&&!C){d=!1;break e}d=!F?.published}let q=d;S[19]!==A?._id||S[20]!==F?.version||S[21]!==R?(c=e=>{if(!R?.historyVersion){let t=F?.version&&(0,o.isGoingToUnpublish)(F?.version)&&(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===(0,r.getVersionFromId)(F?.version?._id);return{selected:!!((0,o.getReleaseIdFromReleaseDocumentId)(e._id)===(0,r.getVersionFromId)(A?._id||"")||t)}}let t=(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===R.historyVersion;return{selected:t,disabled:t}},S[19]=A?._id,S[20]=F?.version,S[21]=R,S[22]=c):c=S[22];let K=c;S[23]!==A?._id||S[24]!==F?.draft?._id||S[25]!==W||S[26]!==_||S[27]!==C?(u=()=>!!(W&&!F?.draft?._id&&!C||(0,r.isPublishedId)(A?._id||"")&&(0,o.isPublishedPerspective)(_||"")),S[23]=A?._id,S[24]=F?.draft?._id,S[25]=W,S[26]=_,S[27]=C,S[28]=u):u=S[28];let Y=u();t:{let e=A?._id||"";if(Y||R?.historyVersion||_||(0,r.isVersionId)(e)){p=!1;break t}if((0,r.isDraftId)(e)){p=!0;break t}if((0,r.isPublishedId)(e)&&F?.published&&(0,o.isPublishedPerspective)(_||"")){p=!1;break t}p=!0}let X=p;S[29]!==F?.draft||S[30]!==L||S[31]!==W||S[32]!==H||S[33]!==C?(m=()=>!!H||!!L&&!!C||(!!F?.draft||!!W)&&!!(L&&C||W),S[29]=F?.draft,S[30]=L,S[31]=W,S[32]=H,S[33]=C,S[34]=m):m=S[34];let J=m(),Z=$.document.drafts?.enabled;S[35]!==E||S[36]!==F?.published||S[37]!==I?(h=(0,n.jsx)(eg.Text,{size:1,children:F?.published&&F?.published?._updatedAt?(0,n.jsx)(o.Translate,{t:I,i18nKey:"release.chip.tooltip.published-date",values:{date:E.format(new Date(F?.published._updatedAt))}}):(0,n.jsx)(n.Fragment,{children:I("release.chip.tooltip.not-published")})}),S[35]=E,S[36]=F?.published,S[37]=I,S[38]=h):h=S[38],S[39]!==U?(g=U("published"),S[39]=U,S[40]=g):g=S[40],S[41]!==I?(f=I("release.chip.published"),S[41]=I,S[42]=f):f=S[42];let Q=F?.published?._id||F?.id||"",ee=F?.published?._id||F?.id||"",et=!F?.published;return S[43]!==V||S[44]!==B.notCurrentReleases||S[45]!==k||S[46]!==Q||S[47]!==ee||S[48]!==et?(x={documentId:Q,menuReleaseId:ee,releases:B.notCurrentReleases,releasesLoading:k,documentType:V,fromRelease:"published",isVersion:!1,disabled:et},S[43]=V,S[44]=B.notCurrentReleases,S[45]=k,S[46]=Q,S[47]=ee,S[48]=et,S[49]=x):x=S[49],S[50]!==G||S[51]!==Y||S[52]!==q||S[53]!==h||S[54]!==g||S[55]!==f||S[56]!==x?(b=(0,n.jsx)(o.VersionChip,{tooltipContent:h,disabled:q,onClick:g,selected:Y,text:f,tone:"positive",onCopyToDraftsNavigate:G,contextValues:x}),S[50]=G,S[51]=Y,S[52]=q,S[53]=h,S[54]=g,S[55]=f,S[56]=x,S[57]=b):b=S[57],S[58]!==E||S[59]!==V||S[60]!==F?.draft||S[61]!==F?.id||S[62]!==F?.published?._id||S[63]!==B.notCurrentReleases||S[64]!==G||S[65]!==U||S[66]!==J||S[67]!==Z||S[68]!==X||S[69]!==W||S[70]!==k||S[71]!==I?(y=Z&&(0,n.jsx)(o.VersionChip,{tooltipContent:(0,n.jsx)(eg.Text,{size:1,children:F?.draft?(0,n.jsx)(n.Fragment,{children:F?.draft._updatedAt?(0,n.jsx)(o.Translate,{t:I,i18nKey:"release.chip.tooltip.edited-date",values:{date:E.format(new Date(F?.draft._updatedAt))}}):(0,n.jsx)(o.Translate,{t:I,i18nKey:"release.chip.tooltip.created-date",values:{date:E.format(new Date(F?.draft._createdAt))}})}):(0,n.jsx)(n.Fragment,{children:I(W?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:X,disabled:J,text:I("release.chip.draft"),tone:F?.draft?"caution":"neutral",onClick:U("drafts"),onCopyToDraftsNavigate:G,contextValues:{documentId:F?.draft?._id||F?.published?._id||F?.id||"",menuReleaseId:F?.draft?._id||F?.published?._id||F?.id||"",releases:B.notCurrentReleases,releasesLoading:k,documentType:V,fromRelease:"draft",isVersion:!1}}),S[58]=E,S[59]=V,S[60]=F?.draft,S[61]=F?.id,S[62]=F?.published?._id,S[63]=B.notCurrentReleases,S[64]=G,S[65]=U,S[66]=J,S[67]=Z,S[68]=X,S[69]=W,S[70]=k,S[71]=I,S[72]=y):y=S[72],S[73]!==A?._id||S[74]!==V||S[75]!==B.inCreation||S[76]!==B.notCurrentReleases||S[77]!==G||S[78]!==k||S[79]!==I?(v=B.inCreation&&(0,n.jsx)(o.VersionChip,{tooltipContent:(0,n.jsx)(l5,{release:B.inCreation}),selected:!0,onClick:l7,locked:!1,tone:(0,o.getReleaseTone)(B.inCreation),text:B.inCreation.metadata.title||I("release.placeholder-untitled-release"),onCopyToDraftsNavigate:G,contextValues:{disabled:!0,documentId:A?._id||"",menuReleaseId:B.inCreation._id,releases:B.notCurrentReleases,releasesLoading:k,documentType:V,fromRelease:(0,o.getReleaseIdFromReleaseDocumentId)(B.inCreation._id),releaseState:B.inCreation.state,isVersion:!0,release:B.inCreation}}),S[73]=A?._id,S[74]=V,S[75]=B.inCreation,S[76]=B.notCurrentReleases,S[77]=G,S[78]=k,S[79]=I,S[80]=v):v=S[80],S[81]!==A||S[82]!==V||S[83]!==F?.version||S[84]!==B.currentReleases||S[85]!==B.notCurrentReleases||S[86]!==K||S[87]!==G||S[88]!==U||S[89]!==k||S[90]!==I?(j=A&&B.currentReleases?.map(e=>(0,n.jsx)(o.VersionChip,{tooltipContent:(0,n.jsx)(l5,{release:e}),...K(e),onClick:U(e),text:e.metadata.title||I("release.placeholder-untitled-release"),tone:(0,o.getReleaseTone)(e),locked:(0,o.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:G,contextValues:{documentId:A?._id||"",menuReleaseId:e._id,releases:B.notCurrentReleases,releasesLoading:k,documentType:V,fromRelease:(0,o.getReleaseIdFromReleaseDocumentId)(e._id),releaseState:e.state,isVersion:!0,isGoingToUnpublish:!!F?.version&&(0,o.isGoingToUnpublish)(F?.version),release:e}},e._id)),S[81]=A,S[82]=V,S[83]=F?.version,S[84]=B.currentReleases,S[85]=B.notCurrentReleases,S[86]=K,S[87]=G,S[88]=U,S[89]=k,S[90]=I,S[91]=j):j=S[91],S[92]!==b||S[93]!==y||S[94]!==v||S[95]!==j?(w=(0,n.jsxs)(n.Fragment,{children:[b,y,v,j]}),S[92]=b,S[93]=y,S[94]=v,S[95]=j,S[96]=w):w=S[96],w});function l7(){}let l9=(0,ey.styled)(eg.Card)(e=>{let t=(0,tw.getTheme_v2)(e.theme);return ey.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&ey.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tw.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),oe=(0,l.memo)((0,l.forwardRef)(function(e,t){let r,s,a,c,u,p,m,h=(0,i.c)(41),{menuItems:g}=e,{editState:f,onMenuAction:x,onPaneClose:y,onPaneSplit:v,onSetMaximizedPane:j,menuItemGroups:w,schemaType:S,connectionState:C,views:_,unstable_languageFilter:I,documentId:T}=iu(),{features:R}=ib(),{index:P,BackLink:E,hasGroupSiblings:k}=ln(),{maximizedPane:D}=lI(),{actions:F}=(0,o.useFieldActions)(),[A,V]=(0,l.useState)(null),M=(0,l.useRef)(null),L=function(e){let t,n,o=(0,i.c)(3),[r,s]=(0,l.useState)(!1);return o[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void s(!1);let{scrollLeft:l}=t;s(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&s(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,l.useEffect)(t,n),r}(M),z=(0,tn.useTelemetry)();h[0]!==F||h[1]!==w||h[2]!==g||h[3]!==x?(r=lW({actionHandler:x,fieldActions:F,menuItems:g,menuItemGroups:w}),h[0]=F,h[1]=w,h[2]=g,h[3]=x,h[4]=r):r=h[4];let O=r;h[5]!==O?(s=O.filter(lG),h[5]=O,h[6]=s):s=h[6];let B=s;h[7]!==O?(a=O.filter(lU),h[7]=O,h[8]=a):a=h[8];let H=a,{collapsed:$,isLast:N}=nB(),G=N&&!$?-1:0,U=R.splitViews&&v&&_.length>1,W=U&&k,q=R.backButton&&P>0,K=!W&&!q&&!!E,{t:Y}=(0,o.useTranslation)(b),X=D?.pane&&"object"==typeof D.pane&&"document"===D.pane.type&&D.pane.options.id===T;h[9]!==X||h[10]!==j||h[11]!==z?(c=()=>{j?.(),X?z.log(lD):z.log(lk)},h[9]=X,h[10]=j,h[11]=z,h[12]=c):c=h[12];let J=c;h[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(lM,{}),h[13]=u):u=h[13];let Z=u;h[14]!==E||h[15]!==q||h[16]!==Y?(p=q&&(0,n.jsx)(eh.Button,{as:E,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Y("pane-header.back-button.text")}}),h[14]=E,h[15]=q,h[16]=Y,h[17]=p):p=h[17];let Q=p;return h[18]!==E||h[19]!==Q||h[20]!==$||h[21]!==C||h[22]!==H||h[23]!==f||h[24]!==J||h[25]!==X||h[26]!==B||h[27]!==y||h[28]!==v||h[29]!==j||h[30]!==t||h[31]!==A||h[32]!==S||h[33]!==L||h[34]!==K||h[35]!==U||h[36]!==W||h[37]!==Y||h[38]!==G||h[39]!==I?(m=(0,n.jsx)(eh.TooltipDelayGroupProvider,{children:$?(0,n.jsx)(n5,{border:!0,ref:t,loading:"connecting"===C&&!f?.draft&&!f?.published,title:Z,tabIndex:G,backButton:Q}):(0,n.jsx)(eg.Card,{hidden:$,style:{lineHeight:0},borderBottom:!0,children:(0,n.jsxs)(eg.Flex,{gap:3,paddingY:3,children:[(0,n.jsx)(l9,{$showGradient:L,children:(0,n.jsx)(eg.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:M,children:(0,n.jsx)(l8,{})})}),(0,n.jsx)(eg.Box,{flex:"none",paddingRight:3,children:(0,n.jsxs)(eg.Flex,{align:"center",gap:1,children:[I.length>0&&(0,n.jsx)(n.Fragment,{children:I.map((e,t)=>(0,n.jsx)(e,{schemaType:S},`language-filter-${t}`))}),B.map(oi),f&&(0,n.jsx)(s2,{group:"paneActions",children:e=>{let{states:t}=e;return(0,n.jsx)(ot,{contextMenuNodes:H,setReferenceElement:V,referenceElement:A,states:t})}}),U&&(0,n.jsx)(eh.Button,{"aria-label":Y("buttons.split-pane-button.aria-label"),icon:d.SplitVerticalIcon,mode:"bleed",onClick:v,tooltipProps:{content:Y("buttons.split-pane-button.tooltip")}},"split-pane-button"),W&&(0,n.jsx)(eh.Button,{icon:d.CloseIcon,mode:"bleed",onClick:y,tooltipProps:{content:Y("buttons.split-pane-close-button.title")}},"close-view-button"),j&&(0,n.jsx)(eh.Button,{"aria-label":Y(X?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:X?d.CollapseIcon:d.ExpandIcon,mode:"bleed",onClick:J,tooltipProps:{content:Y(X?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":X?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,n.jsx)(eh.Button,{icon:d.CloseIcon,mode:"bleed",tooltipProps:{content:Y("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),h[18]=E,h[19]=Q,h[20]=$,h[21]=C,h[22]=H,h[23]=f,h[24]=J,h[25]=X,h[26]=B,h[27]=y,h[28]=v,h[29]=j,h[30]=t,h[31]=A,h[32]=S,h[33]=L,h[34]=K,h[35]=U,h[36]=W,h[37]=Y,h[38]=G,h[39]=I,h[40]=m):m=h[40],m})),ot=(0,l.memo)(function(e){let t,o,r=(0,i.c)(7),{setReferenceElement:s,referenceElement:a,contextMenuNodes:d}=e,c=(0,l.useDeferredValue)(e.states);return r[0]!==c?(t=c.filter(ol),r[0]=c,r[1]=t):t=r[1],r[2]!==d||r[3]!==a||r[4]!==s||r[5]!==t?(o=(0,n.jsx)(on,{setReferenceElement:s,referenceElement:a,contextMenuNodes:d,states:t}),r[2]=d,r[3]=a,r[4]=s,r[5]=t,r[6]=o):o=r[6],o}),on=(0,l.memo)(function(e){let t,l,o=(0,i.c)(8),{states:r,setReferenceElement:s,contextMenuNodes:a,referenceElement:d}=e;o[0]!==a||o[1]!==s||o[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,n.jsx)("div",{ref:s,children:(0,n.jsx)(nX,{nodes:a,actionsNodes:r.length>0?r.map((e,i)=>(0,n.jsx)(l3,{actionState:e,disabled:!!e.disabled,index:i,onAction:t},e.label)):void 0},"context-menu")})},o[0]=a,o[1]=s,o[2]=r,o[3]=t):t=o[3];let c=t;return o[4]!==d||o[5]!==c||o[6]!==r?(l=(0,n.jsx)(l1,{actionStates:r,referenceElement:d,children:c}),o[4]=d,o[5]=c,o[6]=r,o[7]=l):l=o[7],l});function oi(e){return(0,n.jsx)(n8,{node:e},e.key)}function ol(e){return!e.action||e.action!==lN.action}function oo(e){let t,l,o=(0,i.c)(3),{size:r}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},o[0]=t):t=o[0],o[1]!==r?(l=(0,n.jsx)(eh.Button,{"aria-hidden":!0,disabled:!0,size:r,style:t,text:"-"}),o[1]=r,o[2]=l):l=o[2],l}let or={primary:"primary",success:"positive",warning:"caution",danger:"critical"},os=(0,l.memo)(function(e){let t,l,o=(0,i.c)(4),{states:r}=e;return 0===r.length?null:(o[0]!==r?(t=r.map(ou),o[0]=r,o[1]=t):t=o[1],o[2]!==t?(l=(0,n.jsx)(eg.Inline,{space:1,children:t}),o[2]=t,o[3]=l):l=o[3],l)}),oa=(0,l.memo)(function(e){let t,o=(0,i.c)(2),r=(0,l.useDeferredValue)(e.states);return o[0]!==r?(t=(0,n.jsx)(os,{states:r}),o[0]=r,o[1]=t):t=o[1],t});function od(){let e,t=(0,i.c)(3),{badges:l,editState:o}=iu();return o&&l?(t[0]!==l||t[1]!==o?(e=(0,n.jsx)(s3,{badges:l,badgeProps:o,children:oc}),t[0]=l,t[1]=o,t[2]=e):e=t[2],e):null}function oc(e){let{states:t}=e;return(0,n.jsx)(oa,{states:t})}function ou(e,t){return(0,n.jsx)(eh.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,n.jsx)(eg.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?or[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let op={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},om=e=>{let t,r,s,a,c,u=(0,i.c)(32),{id:p,type:m,draft:h,release:g,published:f}=e;iu();let{delete:x}=(0,o.useDocumentOperation)(p,m,g),[y,v]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),{t:S}=(0,o.useTranslation)(b);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{w(!1)},u[0]=t):t=u[0];let C=t;u[1]!==x?(r=e=>{w(!1),v(!0),x.execute(e),v(!1)},u[1]=x,u[2]=r):r=u[2];let _=r;u[3]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{w(!0)},u[3]=s):s=u[3];let I=s;u[4]!==p||u[5]!==g||u[6]!==m?(a={id:p,type:m,version:g,permission:"delete"},u[4]=p,u[5]=g,u[6]=m,u[7]=a):a=u[7];let[T,R]=(0,o.useDocumentPairPermissions)(a),P=(0,o.useCurrentUser)();e:{let e,t,i,l;if(!f){c=null;break e}if(!R&&!T?.granted){let e,t,i;u[8]!==S?(e=S("action.delete.label"),u[8]=S,u[9]=e):e=u[9],u[10]!==P?(t=(0,n.jsx)(o.InsufficientPermissionsMessage,{context:"delete-document",currentUser:P}),u[10]=P,u[11]=t):t=u[11],u[12]!==e||u[13]!==t?(i={tone:"critical",icon:d.TrashIcon,disabled:!0,label:e,title:t},u[12]=e,u[13]=t,u[14]=i):i=u[14],c=i;break e}let r=y||!!x.disabled||R;u[15]!==x.disabled||u[16]!==S?(e=x.disabled&&S(op[x.disabled])||"",u[15]=x.disabled,u[16]=S,u[17]=e):e=u[17],u[18]!==y||u[19]!==S?(t=S(y?"action.delete.running.label":"action.delete.label"),u[18]=y,u[19]=S,u[20]=t):t=u[20],u[21]!==h?._id||u[22]!==_||u[23]!==p||u[24]!==j||u[25]!==m?(i=j&&{type:"custom",component:(0,n.jsx)(sL,{action:"delete",id:h?._id||p,type:m,onCancel:C,onConfirm:_})},u[21]=h?._id,u[22]=_,u[23]=p,u[24]=j,u[25]=m,u[26]=i):i=u[26],u[27]!==r||u[28]!==e||u[29]!==t||u[30]!==i?(l={tone:"critical",icon:d.TrashIcon,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:I,dialog:i},u[27]=r,u[28]=e,u[29]=t,u[30]=i,u[31]=l):l=u[31],c=l}return c};function oh(e){let t,r,s,a,d,c,u=(0,i.c)(18),{publishedExists:p,onCancel:m,onConfirm:h}=e,{t:g}=(0,o.useTranslation)(b),f=`deletion-confirmation-${(0,l.useId)()}`;return u[0]!==g?(t=g("action.discard-changes.confirm-dialog.header.text"),u[0]=g,u[1]=t):t=u[1],u[2]!==g?(r=g("action.discard-changes.label"),u[2]=g,u[3]=r):r=u[3],u[4]!==h||u[5]!==r?(s={confirmButton:{text:r,onClick:h}},u[4]=h,u[5]=r,u[6]=s):s=u[6],u[7]!==p||u[8]!==g?(a=g(p?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),u[7]=p,u[8]=g,u[9]=a):a=u[9],u[10]!==a?(d=(0,n.jsx)(eg.Text,{size:1,children:a}),u[10]=a,u[11]=d):d=u[11],u[12]!==f||u[13]!==m||u[14]!==t||u[15]!==s||u[16]!==d?(c=(0,n.jsx)(eh.Dialog,{width:1,id:f,header:t,footer:s,onClose:m,onClickOutside:m,children:d}),u[12]=f,u[13]=m,u[14]=t,u[15]=s,u[16]=d,u[17]=c):c=u[17],c}om.action="delete",om.displayName="DeleteAction";let og={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},of=e=>{let t,s,a,c,u,p=(0,i.c)(29),{id:m,type:h,published:g,liveEdit:f,release:x}=e,{discardChanges:y}=(0,o.useDocumentOperation)(m,h,x),[v,j]=(0,l.useState)(!1);p[0]!==m||p[1]!==x||p[2]!==h?(t={id:m,type:h,version:x,permission:"discardDraft"},p[0]=m,p[1]=x,p[2]=h,p[3]=t):t=p[3];let[w,S]=(0,o.useDocumentPairPermissions)(t),C=(0,o.useCurrentUser)(),{displayed:_}=iu(),{t:I}=(0,o.useTranslation)(b),T=_?._id&&(0,r.isPublishedId)(_?._id);p[4]!==y?(s=()=>{y.execute(),j(!1)},p[4]=y,p[5]=s):s=p[5];let R=s;p[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{j(!1)},p[6]=a):a=p[6];let P=a;p[7]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{j(!0)},p[7]=c):c=p[7];let E=c;e:{let e,t,i,l;if(f||T){u=null;break e}if(!S&&!w?.granted){let e,t,i;p[8]!==I?(e=I("action.discard-changes.label"),p[8]=I,p[9]=e):e=p[9],p[10]!==C?(t=(0,n.jsx)(o.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:C}),p[10]=C,p[11]=t):t=p[11],p[12]!==e||p[13]!==t?(i={tone:"critical",icon:d.ResetIcon,disabled:!0,label:e,title:t},p[12]=e,p[13]=t,p[14]=i):i=p[14],u=i;break e}let r=!!y.disabled||S,s=y.disabled&&og[y.disabled]||"";p[15]!==I||p[16]!==s?(e=I(s),p[15]=I,p[16]=s,p[17]=e):e=p[17],p[18]!==I?(t=I("action.discard-changes.label"),p[18]=I,p[19]=t):t=p[19],p[20]!==R||p[21]!==v||p[22]!==g?(i=v&&{type:"custom",component:(0,n.jsx)(oh,{onCancel:P,onConfirm:R,publishedExists:!!g})},p[20]=R,p[21]=v,p[22]=g,p[23]=i):i=p[23],p[24]!==i||p[25]!==r||p[26]!==e||p[27]!==t?(l={tone:"critical",icon:d.ResetIcon,disabled:r,title:e,label:t,onHandle:E,dialog:i},p[24]=i,p[25]=r,p[26]=e,p[27]=t,p[28]=l):l=p[28],u=l}return u};of.action="discardChanges",of.displayName="DiscardChangesAction";let ox={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},ob=e=>{let t,r,s,a=(0,i.c)(29),{id:c,type:u,release:p,mapDocument:m}=e,h=(0,o.useDocumentStore)(),{duplicate:g}=(0,o.useDocumentOperation)(c,u,p),{navigateIntent:f}=(0,eC.useRouter)(),[x,y]=(0,l.useState)(!1);a[0]!==c||a[1]!==p||a[2]!==u?(t={id:c,type:u,version:p,permission:"duplicate"},a[0]=c,a[1]=p,a[2]=u,a[3]=t):t=a[3];let[v,j]=(0,o.useDocumentPairPermissions)(t),{t:w}=(0,o.useTranslation)(b),S=(0,o.useCurrentUser)();a[4]!==h.pair||a[5]!==g||a[6]!==c||a[7]!==m||a[8]!==f||a[9]!==u?(r=async()=>{let e=(0,eb.uuid)();y(!0);let t=(0,eY.firstValueFrom)(h.pair.operationEvents(c,u).pipe((0,eB.filter)(oy)));g.execute(e,{mapDocument:m}),await t,f("edit",{id:e,type:u}),y(!1)},a[4]=h.pair,a[5]=g,a[6]=c,a[7]=m,a[8]=f,a[9]=u,a[10]=r):r=a[10];let C=r;e:{let e,t,i;if(!j&&!v?.granted){let e,t,i;a[11]!==w?(e=w("action.duplicate.label"),a[11]=w,a[12]=e):e=a[12],a[13]!==S?(t=(0,n.jsx)(o.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:S}),a[13]=S,a[14]=t):t=a[14],a[15]!==e||a[16]!==t?(i={icon:d.CopyIcon,disabled:!0,label:e,title:t},a[15]=e,a[16]=t,a[17]=i):i=a[17],s=i;break e}let l=x||!!g.disabled||j;a[18]!==x||a[19]!==w?(e=w(x?"action.duplicate.running.label":"action.duplicate.label"),a[18]=x,a[19]=w,a[20]=e):e=a[20],a[21]!==g.disabled||a[22]!==w?(t=g.disabled?w(ox[g.disabled]):"",a[21]=g.disabled,a[22]=w,a[23]=t):t=a[23],a[24]!==C||a[25]!==l||a[26]!==e||a[27]!==t?(i={icon:d.CopyIcon,disabled:l,label:e,title:t,onHandle:C},a[24]=C,a[25]=l,a[26]=e,a[27]=t,a[28]=i):i=a[28],s=i}return s};function oy(e){return"duplicate"===e.op&&"success"===e.type}ob.action="duplicate",ob.displayName="DuplicateAction";let ov=(0,to.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),oj={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},ow={status:"published"};function oS(e,t,i){return"ALREADY_PUBLISHED"===e&&t?(0,n.jsx)(oC,{publishedAt:t}):i(oj[e])}function oC(e){let t,l,r,s=(0,i.c)(6),{publishedAt:a}=e,{t:d}=(0,o.useTranslation)(b);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},s[0]=t):t=s[0];let c=(0,o.useRelativeTime)(a,t);return s[1]!==d||s[2]!==c?(l=d("action.publish.already-published.tooltip",{timeSincePublished:c}),s[1]=d,s[2]=c,s[3]=l):l=s[3],s[4]!==l?(r=(0,n.jsx)("span",{children:l}),s[4]=l,s[5]=r):r=s[5],r}let o_=e=>{let t,s,a,c,u,p,m,h,g,f,x,y=(0,i.c)(79),{id:v,type:j,liveEdit:w,draft:S,published:C,release:_}=e,[I,T]=(0,l.useState)(null),{publish:R}=(0,o.useDocumentOperation)(v,j),{changesOpen:P,documentId:E,documentType:k,value:D}=iu(),F=(0,o.useValidationStatus)(D._id,j),A=(0,o.useSyncState)(v,j),V=(0,o.useEditState)(E,k),{t:M}=(0,o.useTranslation)(b);y[0]!==V?.draft||y[1]!==V?.published?(t=V?.draft||V?.published||{},y[0]=V?.draft,y[1]=V?.published,y[2]=t):t=y[2];let L=t._rev;y[3]!==F.validation?(s=F.validation.some(ex.isValidationErrorMarker),y[3]=F.validation,y[4]=s):s=y[4];let z=s,[O,B]=(0,l.useState)(!1),H=A.isSyncing,$=F.isValidating;y[5]!==v||y[6]!==j?(a={id:v,type:j,permission:"publish"},y[5]=v,y[6]=j,y[7]=a):a=y[7];let[N,G]=(0,o.useDocumentPairPermissions)(a),U=(0,o.useCurrentUser)();y[8]!==z||y[9]!==R.disabled||y[10]!==C||y[11]!==M?(c=R.disabled?oS(R.disabled,(C||{})._updatedAt,M)||"":z?M("action.publish.validation-issues.tooltip"):"",y[8]=z,y[9]=R.disabled,y[10]=C,y[11]=M,y[12]=c):c=y[12];let W=c,q=C?._rev;y[13]!==q||y[14]!==R?(u=()=>{R.execute(),T({status:"publishing",publishRevision:q})},y[13]=q,y[14]=R,y[15]=u):u=y[15];let K=u;y[16]!==K||y[17]!==z||y[18]!==H||y[19]!==O||y[20]!==L||y[21]!==F.isValidating||y[22]!==F.revision?(p=()=>{let e=!1===F.isValidating&&F.revision!==L;O&&!H&&e&&(z||K(),B(!1))},y[16]=K,y[17]=z,y[18]=H,y[19]=O,y[20]=L,y[21]=F.isValidating,y[22]=F.revision,y[23]=p):p=y[23],y[24]!==K||y[25]!==z||y[26]!==H||y[27]!==$||y[28]!==O||y[29]!==L||y[30]!==F.isValidating||y[31]!==F.revision?(m=[H,K,z,O,F.revision,L,$,F.isValidating],y[24]=K,y[25]=z,y[26]=H,y[27]=$,y[28]=O,y[29]=L,y[30]=F.isValidating,y[31]=F.revision,y[32]=m):m=y[32],(0,l.useEffect)(p,m),y[33]!==q||y[34]!==I?(h=()=>{let e=I?.status==="publishing"&&q!==I.publishRevision,t=e?ow:null,n=setTimeout(()=>{T(t)},e?200:4e3);return()=>clearTimeout(n)},y[33]=q,y[34]=I,y[35]=h):h=y[35],y[36]!==P||y[37]!==q||y[38]!==I?(g=[P,I,q],y[36]=P,y[37]=q,y[38]=I,y[39]=g):g=y[39],(0,l.useEffect)(h,g);let Y=(0,tn.useTelemetry)();y[40]!==K||y[41]!==S?._createdAt||y[42]!==C||y[43]!==L||y[44]!==A.isSyncing||y[45]!==Y||y[46]!==F.isValidating||y[47]!==F.revision?(f=()=>{Y.log(ov,{publishedImmediately:!S?._createdAt,previouslyPublished:!!C}),A.isSyncing||F.isValidating||F.revision!==L?B(!0):K()},y[40]=K,y[41]=S?._createdAt,y[42]=C,y[43]=L,y[44]=A.isSyncing,y[45]=Y,y[46]=F.isValidating,y[47]=F.revision,y[48]=f):f=y[48];let X=f;e:{let e,t,i;if(_||w){x=null;break e}if((0,r.isPublishedId)(D._id)&&null!==S){let e,t,n;y[49]!==M?(e=M("action.publish.label"),y[49]=M,y[50]=e):e=y[50];let i=C?._updatedAt;y[51]!==M||y[52]!==i?(t=oS("ALREADY_PUBLISHED",i,M),y[51]=M,y[52]=i,y[53]=t):t=y[53],y[54]!==e||y[55]!==t?(n={tone:"default",icon:d.PublishIcon,label:e,title:t,disabled:!0},y[54]=e,y[55]=t,y[56]=n):n=y[56],x=n;break e}if(!G&&!N?.granted){let e,t,i;y[57]!==M?(e=M("action.publish.label"),y[57]=M,y[58]=e):e=y[58],y[59]!==U?(t=(0,n.jsx)(o.InsufficientPermissionsMessage,{context:"publish-document",currentUser:U}),y[59]=U,y[60]=t):t=y[60],y[61]!==e||y[62]!==t?(i={tone:"default",icon:d.PublishIcon,label:e,title:t,disabled:!0},y[61]=e,y[62]=t,y[63]=i):i=y[63],x=i;break e}let l=!!(O||V?.transactionSyncLock?.enabled||I?.status==="publishing"||I?.status==="published"||z||R.disabled),s=l||G;y[64]!==O||y[65]!==I?.status||y[66]!==M?(e=M(I?.status==="published"?"action.publish.published.label":O||I?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),y[64]=O,y[65]=I?.status,y[66]=M,y[67]=e):e=y[67],y[68]!==O||y[69]!==I?.status||y[70]!==M||y[71]!==W?(t=O?M("action.publish.waiting"):I?.status==="published"||I?.status==="publishing"?null:W,y[68]=O,y[69]=I?.status,y[70]=M,y[71]=W,y[72]=t):t=y[72];let a=l||O?null:"Ctrl+Alt+P";y[73]!==X||y[74]!==s||y[75]!==e||y[76]!==t||y[77]!==a?(i={disabled:s,tone:"default",label:e,icon:d.PublishIcon,title:t,shortcut:a,onHandle:X},y[73]=X,y[74]=s,y[75]=e,y[76]=t,y[77]=a,y[78]=i):i=y[78],x=i}return x};o_.action="publish",o_.displayName="PublishAction";let oI={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},oT=e=>{let t,r,s,a,c,u,p=(0,i.c)(22),{id:m,type:h,draft:g,liveEdit:f,release:x}=e,{unpublish:y}=(0,o.useDocumentOperation)(m,h),[v,j]=(0,l.useState)(!1);p[0]!==m||p[1]!==h?(t={id:m,type:h,permission:"unpublish"},p[0]=m,p[1]=h,p[2]=t):t=p[2];let[w,S]=(0,o.useDocumentPairPermissions)(t),C=(0,o.useCurrentUser)(),{t:_}=(0,o.useTranslation)(b),{selectedPerspective:I}=(0,o.usePerspective)(),T="drafts"===I;p[3]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{j(!1)},p[3]=r):r=p[3];let R=r;p[4]!==y?(s=()=>{j(!1),y.execute()},p[4]=y,p[5]=s):s=p[5];let P=s;e:{if(v){let e,t=g?._id||m;p[6]!==P||p[7]!==t||p[8]!==h?(e={type:"dialog",onClose:R,content:(0,n.jsx)(sL,{id:t,type:h,action:"unpublish",onCancel:R,onConfirm:P})},p[6]=P,p[7]=t,p[8]=h,p[9]=e):e=p[9],a=e;break e}a=null}let E=a;return p[10]!==C||p[11]!==E||p[12]!==T||p[13]!==S||p[14]!==f||p[15]!==w?.granted||p[16]!==x||p[17]!==_||p[18]!==y.disabled?(c=()=>x||T||f?null:S||w?.granted?{tone:"critical",icon:d.UnpublishIcon,disabled:!!y.disabled||S,label:_("action.unpublish.label"),title:y.disabled?_(oI[y.disabled]):"",onHandle:()=>j(!0),dialog:E}:{tone:"critical",icon:d.UnpublishIcon,label:"Unpublish",title:(0,n.jsx)(o.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:C}),disabled:!0},p[10]=C,p[11]=E,p[12]=T,p[13]=S,p[14]=f,p[15]=w?.granted,p[16]=x,p[17]=_,p[18]=y.disabled,p[19]=c):c=p[19],p[20]!==c?(u=c(),p[20]=c,p[21]=u):u=p[21],u};oT.action="unpublish",oT.displayName="UnpublishAction";let oR=(0,l.memo)(function(e){let t,r,s,a,d,c,u,p,m,h=(0,i.c)(37),{disabled:g,states:f}=e,{__internal_tasks:x}=(0,o.useSource)(),{editState:b}=iu(),{params:y}=ln(),v=!!y?.rev,{selectedReleaseId:j}=(0,o.usePerspective)();h[0]!==f?([t,...r]=f,h[0]=f,h[1]=t,h[2]=r):(t=h[1],r=h[2]);let[w,S]=(0,l.useState)(null);e:{let e,i,l,o;if(!t||!t.title&&!t.shortcut){s=null;break e}h[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},h[3]=e):e=h[3],h[4]!==t.title?(i=t.title&&(0,n.jsx)(eg.Text,{size:1,children:t.title}),h[4]=t.title,h[5]=i):i=h[5],h[6]!==t.shortcut?(l=t.shortcut&&(0,n.jsx)(eh.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(oV)}),h[6]=t.shortcut,h[7]=l):l=h[7],h[8]!==i||h[9]!==l?(o=(0,n.jsxs)(eg.Flex,{style:e,align:"center",gap:3,children:[i,l]}),h[8]=i,h[9]=l,h[10]=o):o=h[10],s=o}let C=s;h[11]!==b?.liveEdit||h[12]!==t||h[13]!==j||h[14]!==v?(a=v?!!t:j?t&&!(0,o.isSanityDefinedAction)(t):t&&!b?.liveEdit,h[11]=b?.liveEdit,h[12]=t,h[13]=j,h[14]=v,h[15]=a):a=h[15];let _=a;h[16]!==t||h[17]!==r||h[18]!==_?(d=_?r:[t,...r].filter(Boolean),h[16]=t,h[17]=r,h[18]=_,h[19]=d):d=h[19];let I=d,T=x&&x.footerAction;return h[20]!==g||h[21]!==t||h[22]!==_||h[23]!==C?(c=_&&(0,n.jsx)(eg.LayerProvider,{zOffset:200,children:(0,n.jsx)(eh.Tooltip,{disabled:!C,content:C,placement:"top",children:(0,n.jsx)(eg.Stack,{children:(0,n.jsx)(eh.Button,{"data-testid":`action-${n$(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),h[20]=g,h[21]=t,h[22]=_,h[23]=C,h[24]=c):c=h[24],h[25]!==g||h[26]!==I?(u=I.length>0&&(0,n.jsx)(l2,{actionStates:I,disabled:g}),h[25]=g,h[26]=I,h[27]=u):u=h[27],h[28]!==w||h[29]!==t||h[30]!==_?(p=_&&t&&t.dialog&&(0,n.jsx)(l0,{dialog:t.dialog,referenceElement:w}),h[28]=w,h[29]=t,h[30]=_,h[31]=p):p=h[31],h[32]!==T||h[33]!==c||h[34]!==u||h[35]!==p?(m=(0,n.jsxs)(eg.Flex,{align:"center",gap:1,children:[T,c,u,p]}),h[32]=T,h[33]=c,h[34]=u,h[35]=p,h[36]=m):m=h[36],m}),oP=(0,l.memo)(function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(s2,{group:"default",children:oM}),t[0]=e):e=t[0],e});function oE(e){let t,l,o=(0,i.c)(6),{connectionState:r,documentId:s}=iu();o[0]!==e.states?(t=e.states.filter(ok),o[0]=e.states,o[1]=t):t=o[1];let a=t;if(0===a.length)return null;let d="connected"!==r;return o[2]!==s||o[3]!==a||o[4]!==d?(l=(0,n.jsx)(oR,{disabled:d,states:a},s),o[2]=s,o[3]=a,o[4]=d,o[5]=l):l=o[5],l}function ok(e){return!e.action||e.action!==lN.action}let oD=(0,l.memo)(function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(s2,{group:"default",children:oL}),t[0]=e):e=t[0],e});function oF(e){let t,l,o,r=(0,i.c)(8),{states:s}=e,{connectionState:a,editState:d,revisionId:c}=iu();r[0]!==d?.draft||r[1]!==d?.published?(t=d?.draft||d?.published||{},r[0]=d?.draft,r[1]=d?.published,r[2]=t):t=r[2];let u=t._rev===c,p="connected"!==a||!!u;return r[3]!==s?(l=s.filter(oA).slice(-1),r[3]=s,r[4]=l):l=r[4],r[5]!==p||r[6]!==l?(o=(0,n.jsx)(oR,{disabled:p,states:l}),r[5]=p,r[6]=l,r[7]=o):o=r[7],o}function oA(e){return!!e.action&&e.action===lN.action}function oV(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function oM(e){let{states:t}=e;return(0,n.jsx)(oE,{states:t})}function oL(e){let{states:t}=e;return(0,n.jsx)(oF,{states:t})}let oz={create:d.AddIcon,delete:d.TrashIcon,discardDraft:d.CloseIcon,initial:d.AddIcon,editDraft:d.EditIcon,editLive:d.EditIcon,publish:d.PublishIcon,unpublish:d.UnpublishIcon},oO=(0,ey.styled)(d.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function oB(e){let t,l,r,s,a,d=(0,i.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,o.useTranslation)(b);d[0]!==c||d[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(o2);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},d[0]=c,d[1]=u,d[2]=t):t=d[2];let m=t;return d[3]!==c?(l=(0,n.jsx)(oO,{"data-expanded":c}),d[3]=c,d[4]=l):l=d[4],d[5]!==c||d[6]!==p?(r=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),d[5]=c,d[6]=p,d[7]=r):r=d[7],d[8]!==r?(s={content:r},d[8]=r,d[9]=s):s=d[9],d[10]!==m||d[11]!==l||d[12]!==s?(a=(0,n.jsx)(eh.Button,{mode:"bleed",icon:l,tooltipProps:s,onClick:m}),d[10]=m,d[11]=l,d[12]=s,d[13]=a):a=d[13],a}let oH=(0,ey.styled)(eg.Stack)`
  max-width: 200px;
`,o$=(0,ey.styled)(eg.Flex)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,oN=(0,ey.styled)(eg.Box)(({$visible:e})=>ey.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&ey.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),oG={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function oU(e){let t,l,r=(0,i.c)(9),{maxLength:s,userIds:a,size:d,withTooltip:c}=e,u=void 0===c||c;if(r[0]!==a||r[1]!==u){let e;r[3]!==u?(e=e=>(0,n.jsx)(o.UserAvatar,{user:e,withTooltip:u},e),r[3]=u,r[4]=e):e=r[4],t=a.map(e),r[0]=a,r[1]=u,r[2]=t}else t=r[2];return r[5]!==s||r[6]!==d||r[7]!==t?(l=(0,n.jsx)(eg.AvatarStack,{maxLength:s,size:d,children:t}),r[5]=s,r[6]=d,r[7]=t,r[8]=l):l=r[8],l}let oW=(0,ey.styled)(eg.Flex)(e=>{let t=(0,tw.getTheme_v2)(e.theme),n=e.$color;return ey.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),oq={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},oK={minimal:!0,useTemporalPhrase:!0},oY=(0,ey.styled)(ef.Skeleton)(e=>{let t=(0,tw.getTheme_v2)(e.theme);return ey.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),oX=e=>{let t,l,r,s=(0,i.c)(10),{userId:a}=e,[d,c]=(0,o.useUser)(a);return s[0]!==c||s[1]!==d?(t=(0,n.jsx)(eg.Box,{children:c||!d?(0,n.jsx)(o.AvatarSkeleton,{animated:!0}):(0,n.jsx)(o.UserAvatar,{user:d})}),s[0]=c,s[1]=d,s[2]=t):t=s[2],s[3]!==c||s[4]!==d?(l=(0,n.jsx)(eg.Box,{children:c||!d?.displayName?(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(oY,{animated:!0})}):(0,n.jsx)(eg.Text,{muted:!0,size:1,children:d.displayName})}),s[3]=c,s[4]=d,s[5]=l):l=s[5],s[6]!==t||s[7]!==l||s[8]!==a?(r=(0,n.jsxs)(eg.Flex,{align:"center",gap:2,padding:1,children:[t,l]},a),s[6]=t,s[7]=l,s[8]=a,s[9]=r):r=s[9],r},oJ=e=>{let t,l,r,s,a=(0,i.c)(9),{collaborators:d}=e,{t:c}=(0,o.useTranslation)("studio");return a[0]!==c?(t=c("timeline.changes.title"),a[0]=c,a[1]=t):t=a[1],a[2]!==t?(l=(0,n.jsx)(eg.Box,{padding:1,paddingBottom:2,children:(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:t})}),a[2]=t,a[3]=l):l=a[3],a[4]!==d?(r=d.map(oQ),a[4]=d,a[5]=r):r=a[5],a[6]!==l||a[7]!==r?(s=(0,n.jsxs)(eg.Stack,{paddingBottom:1,children:[l,r]}),a[6]=l,a[7]=r,a[8]=s):s=a[8],s};function oZ(e){let t,l,r,s,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C,_=(0,i.c)(55),{chunk:I,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:k}=(0,o.useTranslation)("studio"),{type:D,endTimestamp:F}=I;_[0]!==D?(t=oz[D],_[0]=D,_[1]=t):t=_[1];let A=t;_[2]!==I.authors?(l=Array.from(I.authors),_[2]=I.authors,_[3]=l):l=_[3];let V=l;_[4]!==P?(r=P?Array.from(P):[],_[4]=P,_[5]=r):r=_[5];let M=r,L="delete"!==D;_[6]===Symbol.for("react.memo_cache_sentinel")?(s={dateStyle:"medium",timeStyle:"short"},_[6]=s):s=_[6];let z=(0,o.useDateTimeFormat)(s);_[7]!==F?(a=new Date(F),_[7]=F,_[8]=a):a=_[8];let O=(0,o.useRelativeTime)(a||"",oK);if(_[9]!==z||_[10]!==F){let e=new Date(F);d=z.format(e),_[9]=z,_[10]=F,_[11]=d}else d=_[11];let B=d;_[12]!==I||_[13]!==L||_[14]!==R?(c=e=>{e.preventDefault(),e.stopPropagation(),L&&R(I)},_[12]=I,_[13]=L,_[14]=R,_[15]=c):c=_[15];let H=c;_[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},_[16]=u):u=_[16],_[17]!==V?(p=(0,n.jsx)(oU,{maxLength:3,userIds:V,size:2}),_[17]=V,_[18]=p):p=_[18];let $=oq[D];return _[19]!==A?(m=A&&(0,n.jsx)(A,{}),_[19]=A,_[20]=m):m=_[20],_[21]!==m?(h=(0,n.jsx)(eg.Text,{size:0,children:m}),_[21]=m,_[22]=h):h=_[22],_[23]!==$||_[24]!==h?(g=(0,n.jsx)(oW,{align:"center",justify:"center",$color:$,children:h}),_[23]=$,_[24]=h,_[25]=g):g=_[25],_[26]!==g||_[27]!==p?(f=(0,n.jsxs)("div",{style:u,children:[p,g]}),_[26]=g,_[27]=p,_[28]=f):f=_[28],_[29]!==k||_[30]!==D?(x=k(oG[D])||(0,n.jsx)("code",{children:D}),_[29]=k,_[30]=D,_[31]=x):x=_[31],_[32]!==x?(b=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:x}),_[32]=x,_[33]=b):b=_[33],_[34]!==B||_[35]!==F||_[36]!==O?(y=(0,n.jsx)(eg.Text,{as:"time",size:1,muted:!0,dateTime:F,title:B,children:O}),_[34]=B,_[35]=F,_[36]=O,_[37]=y):y=_[37],_[38]!==b||_[39]!==y?(v=(0,n.jsxs)(eg.Stack,{space:2,children:[b,y]}),_[38]=b,_[39]=y,_[40]=v):v=_[40],_[41]!==M?(j=M.length>0&&(0,n.jsx)(eg.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,n.jsx)(eh.Tooltip,{placement:"top",content:(0,n.jsx)(oJ,{collaborators:M}),portal:!0,children:(0,n.jsx)(eg.Box,{paddingLeft:2,paddingY:2,children:(0,n.jsx)(oU,{maxLength:3,userIds:M,size:0,withTooltip:!1})})})}),_[41]=M,_[42]=j):j=_[42],_[43]!==f||_[44]!==v||_[45]!==j?(w=(0,n.jsxs)(eg.Flex,{align:"center",gap:3,children:[f,v,j]}),_[43]=f,_[44]=v,_[45]=j,_[46]=w):w=_[46],_[47]!==I.id||_[48]!==H||_[49]!==T||_[50]!==w?(S=(0,n.jsx)(eg.Card,{as:"button",onClick:H,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:w}),_[47]=I.id,_[48]=H,_[49]=T,_[50]=w,_[51]=S):S=_[51],_[52]!==E||_[53]!==S?(C=(0,n.jsxs)(eg.Flex,{align:"center",gap:1,children:[S,E]}),_[52]=E,_[53]=S,_[54]=C):C=_[54],C}function oQ(e){return(0,n.jsx)(oX,{userId:e},e)}let o0=e=>"publish"!==e.type,o1=e=>"publish"===e.type,o2="timeline-list-wrapper",o3=e=>{let t,r,s,a,d,c,u,p,m,h,g,f,x,b,y,v,j=(0,i.c)(51),{chunks:w,hasMoreChunks:S,lastChunk:C,onLoadMore:_,onSelect:I,listMaxHeight:T}=e,R=void 0===T?"calc(100vh - 280px)":T,[P,E]=(0,l.useState)(!1),{t:k}=(0,o.useTranslation)("studio"),D=C?.id;j[0]!==w?(t=function(e){let t=[];for(let n of e){if(o1(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(o0(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(o1(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}o0(n)&&t.push(n)}return t}(w),j[0]=w,j[1]=t):t=j[1];let F=t;j[2]!==F||j[3]!==D?(r=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&o0(e)&&e.parentId)return new Set([e.parentId])}return new Set},j[2]=F,j[3]=D,j[4]=r):r=j[4];let[A,V]=(0,l.useState)(r);if(j[5]!==F||j[6]!==D?(s=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&o0(e)&&e.parentId){let t=e.parentId;V(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},a=[F,D],j[5]=F,j[6]=D,j[7]=s,j[8]=a):(s=j[7],a=j[8]),(0,l.useEffect)(s,a),j[9]!==F||j[10]!==A){let e;j[12]!==A?(e=e=>!!o1(e)||!e.parentId||A.has(e.parentId),j[12]=A,j[13]=e):e=j[13],d=F.filter(e),j[9]=F,j[10]=A,j[11]=d}else d=j[11];let M=d;j[14]!==M.length||j[15]!==S||j[16]!==_?(c=()=>{M.length<16&&S&&_()},j[14]=M.length,j[15]=S,j[16]=_,j[17]=c):c=j[17],j[18]!==M||j[19]!==S||j[20]!==_?(u=[M,S,_],j[18]=M,j[19]=S,j[20]=_,j[21]=u):u=j[21],(0,l.useEffect)(c,u),j[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>()=>V(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),j[22]=p):p=j[22];let L=p;j[23]!==M||j[24]!==D?(m=D?M.findIndex(e=>e.id===D):-1,j[23]=M,j[24]=D,j[25]=m):m=j[25];let z=m;j[26]!==w||j[27]!==I?(h=e=>{let t=w.find(t=>t.id===e.id);t?I(t):(console.error("TimelineItem: chunk not found"),I(e))},j[26]=w,j[27]=I,j[28]=h):h=j[28];let O=h;j[29]!==A||j[30]!==M.length||j[31]!==O||j[32]!==S||j[33]!==D?(g=(e,t)=>{let{activeIndex:i}=t;return(0,n.jsxs)(eg.Box,{paddingBottom:1,paddingTop:+(0===i),paddingRight:1,paddingLeft:o0(e)&&e.parentId?4:1,children:[(0,n.jsx)(oZ,{chunk:e,isSelected:D===e.id,onSelect:O,collaborators:o1(e)?e.collaborators:void 0,optionsMenu:o1(e)&&e.children.length>0?(0,n.jsx)(oB,{isExpanded:A.has(e.id),onExpand:L(e.id)}):null}),i===M.length-1&&S&&(0,n.jsx)(o.LoadingBlock,{})]})},j[29]=A,j[30]=M.length,j[31]=O,j[32]=S,j[33]=D,j[34]=g):g=j[34];let B=g;j[35]===Symbol.for("react.memo_cache_sentinel")?(f=()=>E(!0),x=[],j[35]=f,j[36]=x):(f=j[35],x=j[36]),(0,l.useEffect)(f,x);let H=!z||P;return j[37]!==M.length||j[38]!==k?(b=0===M.length&&(0,n.jsxs)(oH,{padding:3,space:3,children:[(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:k("timeline.error.no-document-history-title")}),(0,n.jsx)(eg.Text,{muted:!0,size:1,children:k("timeline.error.no-document-history-description")})]}),j[37]=M.length,j[38]=k,j[39]=b):b=j[39],j[40]!==M||j[41]!==R||j[42]!==_||j[43]!==B||j[44]!==z||j[45]!==k?(y=M.length>0&&(0,n.jsx)(o$,{direction:"column",$maxHeight:R,id:o2,children:(0,n.jsx)(o.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:k("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:M,onEndReached:_,onEndReachedIndexOffset:20,overscan:5,renderItem:B,wrapAround:!1})}),j[40]=M,j[41]=R,j[42]=_,j[43]=B,j[44]=z,j[45]=k,j[46]=y):y=j[46],j[47]!==H||j[48]!==b||j[49]!==y?(v=(0,n.jsxs)(oN,{$visible:H,"data-ui":"timeline",children:[b,y]}),j[47]=H,j[48]=b,j[49]=y,j[50]=v):v=j[50],v};function o4(e){let t,l,r,s,a,c,u=(0,i.c)(14),{versionError:p}=e,{t:m}=(0,o.useTranslation)("studio");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(o.TextWithTone,{tone:"critical",children:(0,n.jsx)(d.ErrorOutlineIcon,{})}),u[0]=t):t=u[0],u[1]!==m||u[2]!==p?(l=m(p?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),u[1]=m,u[2]=p,u[3]=l):l=u[3],u[4]!==l?(r=(0,n.jsx)(o.TextWithTone,{size:1,tone:"critical",weight:"medium",children:l}),u[4]=l,u[5]=r):r=u[5],u[6]!==m||u[7]!==p?(s=m(p?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),u[6]=m,u[7]=p,u[8]=s):s=u[8],u[9]!==s?(a=(0,n.jsx)(o.TextWithTone,{size:1,tone:"critical",children:s}),u[9]=s,u[10]=a):a=u[10],u[11]!==r||u[12]!==a?(c=(0,n.jsxs)(eg.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,n.jsxs)(eg.Stack,{space:4,children:[r,a]})]}),u[11]=r,u[12]=a,u[13]=c):c=u[13],c}let o5=(0,ey.styled)(eh.Popover)`
  overflow: hidden;
  overflow: clip;
`,o6="timeline-menu";function o8(e){let t,r,s,a,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(62),{chunk:S,mode:C,placement:_}=e,{setTimelineRange:I,timelineError:T,ready:R,timelineStore:P}=iu(),[E,k]=(0,l.useState)(!1),[D,F]=(0,l.useState)(null),[A,V]=(0,l.useState)(null),M=(0,ef.useToast)(),L=(0,o.useTimelineSelector)(P,rn),z=(0,o.useTimelineSelector)(P,rt),O=(0,o.useTimelineSelector)(P,re),B=(0,o.useTimelineSelector)(P,o9),H=(0,o.useTimelineSelector)(P,o7),{t:$}=(0,o.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{k(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!1)},w[1]=r):r=w[1];let G=r;w[2]!==D||w[3]!==E?(s=e=>{E&&("Escape"===e.key||"Tab"===e.key)&&(G(),D?.focus())},w[2]=D,w[3]=E,w[4]=s):s=w[4],(0,eg.useGlobalKeyDown)(s),w[5]!==D||w[6]!==A?(a=()=>[D,A],w[5]=D,w[6]=A,w[7]=a):a=w[7],(0,eg.useClickOutsideEvent)(E&&G,a),w[8]!==I||w[9]!==$||w[10]!==P||w[11]!==M?(c=e=>{try{(()=>{let[t,n]=P?.findRangeForRev(e)||[null,null];I(t,n)})()}catch(e){M.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=I,w[9]=$,w[10]=P,w[11]=M,w[12]=c):c=w[12];let U=c;w[13]!==I||w[14]!==$||w[15]!==P||w[16]!==M?(u=e=>{try{(()=>{let[t,n]=P?.findRangeForSince(e)||[null,null];I(t,n)})()}catch(e){M.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=I,w[14]=$,w[15]=P,w[16]=M,w[17]=u):u=w[17];let W=u;w[18]!==z||w[19]!==P?(p=()=>{z||P?.loadMore()},w[18]=z,w[19]=P,w[20]=p):p=w[20];let q=p;e:{let e,t;if(T){let e;w[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o4,{}),w[21]=e):e=w[21],m=e;break e}if("rev"===C){let e;w[22]!==L||w[23]!==q||w[24]!==O||w[25]!==B||w[26]!==U?(e=(0,n.jsx)(o3,{chunks:L,hasMoreChunks:O,lastChunk:B,onLoadMore:q,onSelect:U}),w[22]=L,w[23]=q,w[24]=O,w[25]=B,w[26]=U,w[27]=e):e=w[27],m=e;break e}w[28]!==L||w[29]!==B?(e=B?L.filter(e=>e.index<B.index):L,w[28]=L,w[29]=B,w[30]=e):e=w[30];let i=e;w[31]!==i||w[32]!==q||w[33]!==O||w[34]!==W||w[35]!==H?(t=(0,n.jsx)(o3,{chunks:i,hasMoreChunks:O,lastChunk:H,onLoadMore:q,onSelect:W}),w[31]=i,w[32]=q,w[33]=O,w[34]=W,w[35]=H,w[36]=t):t=w[36],m=t}let K=m;if(w[37]!==S||w[38]!==$){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};h=S?$(oG[S.type],{context:"timestamp",timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.latest-revision"),g=S?$("timeline.since",{timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.since-version-missing"),w[37]=S,w[38]=$,w[39]=h,w[40]=g}else h=w[39],g=w[40];let Y="rev"===C?h:g;w[41]!==A?(f={[o6]:A},w[41]=A,w[42]=f):f=w[42];let X=f,J=E&&K,Z=E?"timeline-menu-close-button":"timeline-menu-open-button",Q=!R,ee=E?G:N;return w[43]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[43]=x):x=w[43],w[44]!==Y||w[45]!==R||w[46]!==$?(b=R?Y:$("timeline.loading-history"),w[44]=Y,w[45]=R,w[46]=$,w[47]=b):b=w[47],w[48]!==E||w[49]!==Z||w[50]!==Q||w[51]!==ee||w[52]!==b?(y=(0,n.jsx)(eg.Flex,{width:"fill",children:(0,n.jsx)(eh.Button,{"data-testid":Z,disabled:Q,mode:"ghost",onClick:ee,ref:F,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:d.ChevronDownIcon,text:b})}),w[48]=E,w[49]=Z,w[50]=Q,w[51]=ee,w[52]=b,w[53]=y):y=w[53],w[54]!==E||w[55]!==_||w[56]!==J||w[57]!==y?(v=(0,n.jsx)(o5,{"data-testid":"timeline-menu",constrainSize:!0,content:J,"data-ui":"versionMenu",open:E,placement:_,matchReferenceWidth:!0,portal:!0,ref:V,children:y}),w[54]=E,w[55]=_,w[56]=J,w[57]=y,w[58]=v):v=w[58],w[59]!==X||w[60]!==v?(j=(0,n.jsx)(eg.PortalProvider,{__unstable_elements:X,children:v}),w[59]=X,w[60]=v,w[61]=j):j=w[61],j}function o7(e){return e.sinceTime}function o9(e){return e.realRevChunk}function re(e){return e.hasMoreChunks}function rt(e){return e.isLoading}function rn(e){return e.chunks}let ri=(0,ey.styled)(ej.motion.path)`
  transform-origin: center;
`,rl=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(ej.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),l[0]=e,l[1]=t):t=l[1],t},ro=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(ri,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),l[0]=e,l[1]=t):t=l[1],t},rr=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(ej.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),l[0]=e,l[1]=t):t=l[1],t},rs=ey.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,ra=ey.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${rs} 1s ease-in-out infinite;
  }
`,rd={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},rc={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},ru={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rp={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function rm(e){let t,l,o,r,s,a=(0,i.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,n.jsx)(ro,{variants:ru,initial:d,animate:d}),l=(0,n.jsx)(rl,{variants:rc,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=l):(t=a[1],l=a[2]),a[3]!==c||a[4]!==t||a[5]!==l?(o=(0,n.jsxs)(ra,{"data-rotate":c,children:[t,l]}),a[3]=c,a[4]=t,a[5]=l,a[6]=o):o=a[6],a[7]!==d?(r=(0,n.jsx)(rr,{variants:rp,initial:d,animate:d}),a[7]=d,a[8]=r):r=a[8],a[9]!==d||a[10]!==o||a[11]!==r?(s=(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,n.jsxs)(ej.motion.g,{variants:rd,initial:d,animate:d,children:[o,r]})}),a[9]=d,a[10]=o,a[11]=r,a[12]=s):s=a[12],s}let rh={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rg=e=>{let t,l,r,s,a,d=(0,i.c)(13),{status:c}=e,{t:u}=(0,o.useTranslation)(b);if("saved"!==c&&"syncing"!==c)return null;let p=rh[c];return d[0]!==c?(t=(0,n.jsx)(rm,{status:c}),d[0]=c,d[1]=t):t=d[1],d[2]!==p.tone||d[3]!==t?(l=(0,n.jsx)(o.TextWithTone,{size:1,tone:p.tone,children:t}),d[2]=p.tone,d[3]=t,d[4]=l):l=d[4],d[5]!==p.i18nKey||d[6]!==u?(r=u(p.i18nKey),d[5]=p.i18nKey,d[6]=u,d[7]=r):r=d[7],d[8]!==r?(s=(0,n.jsx)(eg.Text,{muted:!0,size:1,children:r}),d[8]=r,d[9]=s):s=d[9],d[10]!==l||d[11]!==s?(a=(0,n.jsxs)(eg.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[l,s]}),d[10]=l,d[11]=s,d[12]=a):a=d[12],a},rf={minimal:!0,useTemporalPhrase:!0},rx=ej.motion.create(eg.Button),rb=ej.motion.create(eg.Box);function ry(e){return"timeline.operation.published"===e?"document-status.last-published":e}let rv=()=>{let e,t,l=(0,i.c)(2);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(o.AvatarSkeleton,{$size:0,animated:!0})}),l[0]=e):e=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)(eg.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,n.jsx)(ef.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),l[1]=t):t=l[1],t},rj=e=>{let t,l,r,s,a,d,c,u,p=(0,i.c)(17),{author:m,translationKey:h,timestamp:g}=e,{onHistoryOpen:f,inspector:x,onHistoryClose:b}=iu(),{t:y}=(0,o.useTranslation)(),v=(0,o.useRelativeTime)(void 0===g?"":g,rf);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},l={opacity:0},r={opacity:0},p[0]=t,p[1]=l,p[2]=r):(t=p[0],l=p[1],r=p[2]);let j=x?.name===iw?b:f;return p[3]!==m?(s=m&&(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(o.UserAvatar,{user:m,size:0})}),p[3]=m,p[4]=s):s=p[4],p[5]!==y||p[6]!==h?(a=y(h),p[5]=y,p[6]=h,p[7]=a):a=p[7],p[8]!==v||p[9]!==a?(d=(0,n.jsxs)(eg.Text,{muted:!0,size:1,children:[a," ",v]}),p[8]=v,p[9]=a,p[10]=d):d=p[10],p[11]!==s||p[12]!==d?(c=(0,n.jsxs)(eg.Flex,{align:"center",flex:"none",gap:3,children:[s,d]}),p[11]=s,p[12]=d,p[13]=c):c=p[13],p[14]!==j||p[15]!==c?(u=(0,n.jsx)(rx,{"data-testid":"pane-footer-document-status",animate:t,initial:l,exit:r,mode:"bleed",onClick:j,padding:2,muted:!0,children:c}),p[14]=j,p[15]=c,p[16]=u):u=p[16],u},rw=()=>{let e,t,l=(0,i.c)(6),{editState:r}=iu(),{selectedPerspective:s}=(0,o.usePerspective)();l[0]!==r||l[1]!==s?(e=(0,o.isPublishedPerspective)(s)&&r?.published?._updatedAt?{translationKey:o.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:r.published._updatedAt}:r?.version?._updatedAt?{translationKey:r.version._updatedAt===r.version._createdAt?o.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:o.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:r.version._updatedAt}:r?.draft?._updatedAt?{translationKey:r.draft._updatedAt===r.draft._createdAt?o.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:o.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:r.draft._updatedAt}:null,l[0]=r,l[1]=s,l[2]=e):e=l[2];let a=e;return a?(l[3]!==a.timestamp||l[4]!==a.translationKey?(t=(0,n.jsx)(rj,{author:"",translationKey:a.translationKey,timestamp:a.timestamp}),l[3]=a.timestamp,l[4]=a.translationKey,l[5]=t):t=l[5],t):null},rS=()=>{let e,t,l=(0,i.c)(8),{events:r,loading:s}=(0,o.useEvents)(),a=r?.[0];if(!a&&s){let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rv,{}),l[0]=e):e=l[0],e}if(!a){let e;return l[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rw,{}),l[1]=e):e=l[1],e}let d=a.author,c=o.TIMELINE_ITEM_I18N_KEY_MAPPING[a.documentVariantType][a.type];return l[2]!==c?(e=ry(c),l[2]=c,l[3]=e):e=l[3],l[4]!==a.author||l[5]!==a.timestamp||l[6]!==e?(t=(0,n.jsx)(rj,{author:d,translationKey:e,timestamp:a.timestamp}),l[4]=a.author,l[5]=a.timestamp,l[6]=e,l[7]=t):t=l[7],t},rC=()=>{let e,t,l,r=(0,i.c)(10),{timelineStore:s}=iu(),a=(0,o.useTimelineSelector)(s,rI),d=(0,o.useTimelineSelector)(s,rT),c=a?.[0];if(!c&&d){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rv,{}),r[0]=e):e=r[0],e}if(!c){let e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rw,{}),r[1]=e):e=r[1],e}r[2]!==c.authors?(e=Array.from(c.authors),r[2]=c.authors,r[3]=e):e=r[3];let u=e[0],p=oG[c.type];return r[4]!==p?(t=ry(p),r[4]=p,r[5]=t):t=r[5],r[6]!==u||r[7]!==c.endTimestamp||r[8]!==t?(l=(0,n.jsx)(rj,{author:u,translationKey:t,timestamp:c.endTimestamp}),r[6]=u,r[7]=c.endTimestamp,r[8]=t,r[9]=l):l=r[9],l};function r_(){let e,t,r,s,a,d,c,u=(0,i.c)(18),{documentId:p,documentType:m,editState:h,value:g}=iu(),[f,x]=(0,l.useState)(null),b=(0,o.useSource)().beta?.eventsAPI?.documents,y=(0,o.useSyncState)(p,m,h?.release),v=g?._updatedAt;return u[0]!==f||u[1]!==y.isSyncing?(e=()=>{if("syncing"===f&&!y.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},u[0]=f,u[1]=y.isSyncing,u[2]=e):e=u[2],u[3]!==v||u[4]!==f||u[5]!==y.isSyncing?(t=[f,v,y.isSyncing],u[3]=v,u[4]=f,u[5]=y.isSyncing,u[6]=t):t=u[6],(0,l.useEffect)(e,t),u[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{x(null)},u[7]=r):r=u[7],u[8]!==p?(s=[p],u[8]=p,u[9]=s):s=u[9],(0,l.useLayoutEffect)(r,s),u[10]!==y.isSyncing?(a=()=>{y.isSyncing&&x("syncing")},u[10]=y.isSyncing,u[11]=a):a=u[11],u[12]!==v||u[13]!==y.isSyncing?(d=[y.isSyncing,v],u[12]=v,u[13]=y.isSyncing,u[14]=d):d=u[14],(0,l.useLayoutEffect)(a,d),u[15]!==b||u[16]!==f?(c=(0,n.jsx)(ew.AnimatePresence,{children:f?(0,n.jsx)(rb,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,n.jsx)(rg,{status:f||void 0})}):(0,n.jsx)(n.Fragment,{children:b?(0,n.jsx)(rS,{}):(0,n.jsx)(rC,{})})}),u[15]=b,u[16]=f,u[17]=c):c=u[17],c}function rI(e){return e.chunks}function rT(e){return e.isLoading}let rR=(0,ey.styled)(eg.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function rP(){let e,t,r,a,c=(0,i.c)(9),{displayed:u,revisionNotFound:p}=iu(),m=(0,l.useContext)(s.EventsContext),h=m?.revision,g=m?.events.find(e=>e.id===h?.revisionId),{t:f}=(0,o.useTranslation)(),x=g?.timestamp||u?._updatedAt||u?._createdAt,b=x?(0,n.jsx)(o.Translate,{t:f,i18nKey:"document-status.revision-from",values:{date:(0,tv.format)(new Date(x),"MMM d, yyyy '@' pp")}}):null;c[0]!==b?(e={name:"revision",text:b,tone:"caution"},c[0]=b,c[1]=e):e=c[1];let y=e;return c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(eg.Box,{flex:"none",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(d.RestoreIcon,{})})}),c[2]=t):t=c[2],c[3]!==y||c[4]!==p||c[5]!==f?(r=p?(0,n.jsx)(o.Translate,{t:f,i18nKey:"document-status.revision-not-found"}):y.text,c[3]=y,c[4]=p,c[5]=f,c[6]=r):r=c[6],c[7]!==r?(a=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(eg.Flex,{flex:1,gap:3,padding:2,children:[t,(0,n.jsx)(eg.Box,{flex:1,children:(0,n.jsx)(rR,{size:1,textOverflow:"ellipsis",children:r})})]})}),c[7]=r,c[8]=a):a=c[8],a}let rE=ej.motion.create(eg.Card);function rk(e){let t,r,s,a,d,c,u,p,m=(0,i.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:f,onChange:x,revisionNotFound:b}=iu(),{params:y}=ln(),v=void 0===y?iy:y,{selectedPerspective:j}=(0,o.usePerspective)(),{title:w}=iI(),S=(0,o.useSanityCreateConfig)().components?.documentLinkedActions,C=!!v.rev,[_,I]=(0,l.useState)(null),[T,R]=(0,l.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},m[0]=t):t=m[0];let P=t;m[1]!==T?(r={element:T,onResize:P},m[1]=T,m[2]=r):r=m[2],function(e){let t,n,r=(0,i.c)(4),{element:s,onResize:a}=e;r[0]!==s||r[1]!==a?(t=()=>(s&&o.resizeObserver.observe(s,a),()=>{s&&o.resizeObserver.unobserve(s)}),n=[s,a],r[0]=s,r[1]=a,r[2]=t,r[3]=n):(t=r[2],n=r[3]),(0,l.useLayoutEffect)(t,n)}(r);e:{let e=!!(f?.ready&&"boolean"==typeof _);if(j){if((0,o.isPublishedPerspective)(j)){s=e&&!!f?.published;break e}if((0,o.isReleaseDocument)(j)){s=e&&!!f?.version;break e}}s=e}let E=s;if(g&&(0,o.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==x||m[6]!==w?(e=(0,n.jsx)(S,{metadata:g,panelPortalElementId:lE,onDocumentChange:x,documentTitle:w}),m[3]=S,m[4]=g,m[5]=x,m[6]=w,m[7]=e):e=m[7],a=e}else if(C){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(oD,{}),m[8]=e):e=m[8],a=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(oP,{}),m[9]=e):e=m[9],a=e}if(C&&b)return null;let k=C?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:.2},m[10]=d):d=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},m[11]=c):c=m[11];let D=C?"caution":void 0;return m[12]!==a||m[13]!==h||m[14]!==_||m[15]!==E||m[16]!==C?(u=E&&(0,n.jsxs)(eg.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,n.jsxs)(eg.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,n.jsxs)(eg.Flex,{align:"center",children:[C?(0,n.jsx)(rP,{}):(0,n.jsx)(r_,{}),(0,n.jsx)(oo,{})]}),(0,n.jsx)(od,{})]}),(0,n.jsxs)(eg.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,n.jsx)(oo,{}),a]})]}),m[12]=a,m[13]=h,m[14]=_,m[15]=E,m[16]=C,m[17]=u):u=m[17],m[18]!==k||m[19]!==D||m[20]!==u?(p=(0,n.jsx)(rE,{initial:d,animate:c,tone:D,radius:3,ref:R,sizing:"border",padding:2,children:u},k),m[18]=k,m[19]=D,m[20]=u,m[21]=p):p=m[21],p}let rD=(0,l.memo)(function(e){let t,l,r,s,a,d,c,u,p,m,h,g,f,x=(0,i.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:l,as:m,children:r,id:s,onActionStart:a,onKeyDown:d,rootRef:u,states:p,...c}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=r,x[4]=s,x[5]=a,x[6]=d,x[7]=c,x[8]=u,x[9]=p,x[10]=m):(t=x[1],l=x[2],r=x[3],s=x[4],a=x[5],d=x[6],c=x[7],u=x[8],p=x[9],m=x[10]);let b=void 0===m?"div":m,y=p[l];x[11]!==a||x[12]!==d||x[13]!==p?(h=e=>{let t=p.filter(t=>t.shortcut&&(0,th.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),a(p.indexOf(n));return}d&&d(e)},x[11]=a,x[12]=d,x[13]=p,x[14]=h):h=x[14];let v=h;return x[15]!==t||x[16]!==y?(g=y&&y.dialog&&(0,n.jsx)(o.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(l0,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=g):g=x[17],x[18]!==b||x[19]!==r||x[20]!==v||x[21]!==s||x[22]!==c||x[23]!==u||x[24]!==g?(f=(0,n.jsxs)(b,{id:s,onKeyDown:v,tabIndex:-1,...c,ref:u,children:[r,g]}),x[18]=b,x[19]=r,x[20]=v,x[21]=s,x[22]=c,x[23]=u,x[24]=g,x[25]=f):f=x[25],f}),rF=(0,l.memo)(e=>{let t,o,r,s,a,d,c=(0,i.c)(12);c[0]!==e?({actionsBoxElement:t,as:s,children:o,...r}=e,c[0]=e,c[1]=t,c[2]=o,c[3]=r,c[4]=s):(t=c[1],o=c[2],r=c[3],s=c[4]);let u=void 0===s?"div":s,[p,m]=(0,l.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{m(e)},c[5]=a):a=c[5];let h=a;return c[6]!==t||c[7]!==p||c[8]!==u||c[9]!==o||c[10]!==r?(d=(0,n.jsx)(s2,{children:e=>{let{states:i}=e;return(0,n.jsx)(rD,{...r,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:i,children:o})}}),c[6]=t,c[7]=p,c[8]=u,c[9]=o,c[10]=r,c[11]=d):d=c[11],d});rF.displayName="Memo(DocumentActionShortcuts)";let rA=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(d.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function rV(e){let t,l,r,s,a,d,c,u=(0,i.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:g,minWidth:f}=e,{t:x}=(0,o.useTranslation)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==x||u[3]!==t?(l=(0,n.jsx)(o.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=x,u[3]=t,u[4]=l):l=u[4],u[5]!==p||u[6]!==x?(r=p&&(0,n.jsx)(eg.Text,{as:"p",children:(0,n.jsx)(o.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=x,u[7]=r):r=u[7],u[8]!==p||u[9]!==x?(s=!p&&(0,n.jsx)(eg.Text,{as:"p",children:x("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=x,u[10]=s):s=u[10],u[11]!==m?(a=o.isDev&&m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eg.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,n.jsx)(eg.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,n.jsx)(eg.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=a):a=u[12],u[13]!==r||u[14]!==s||u[15]!==a?(d=(0,n.jsxs)(eg.Stack,{space:4,children:[r,s,a]}),u[13]=r,u[14]=s,u[15]=a,u[16]=d):d=u[16],u[17]!==h||u[18]!==f||u[19]!==g||u[20]!==l||u[21]!==d?(c=(0,n.jsx)(ir,{currentMinWidth:h,flex:2.5,minWidth:f,paneKey:g,title:l,tone:"caution",children:d}),u[17]=h,u[18]=f,u[19]=g,u[20]=l,u[21]=d,u[22]=c):c=u[22],c}let rM=["fixed","fixed","absolute"];function rL(e){let t,l,r,s,a,d,c=(0,i.c)(16),{documentPanelPortalElement:u,setFooterElement:p,setActionsBoxElement:m}=e,h=(0,o.useZIndex)(),{value:g}=iu();c[0]!==u?(t={[lE]:u},c[0]=u,c[1]=t):t=c[1];let f=t;c[2]!==g?(l=(0,o.getSanityCreateLinkMetadata)(g),c[2]=g,c[3]=l):l=c[3];let x=l;return c[4]!==x||c[5]!==m?(r=(0,n.jsx)(eh.TooltipDelayGroupProvider,{children:(0,n.jsx)(rk,{actionsBoxRef:m,createLinkMetadata:x})}),c[4]=x,c[5]=m,c[6]=r):r=c[6],c[7]!==p||c[8]!==r?(s=(0,n.jsx)(nQ,{ref:p,padding:1,children:r}),c[7]=p,c[8]=r,c[9]=s):s=c[9],c[10]!==s||c[11]!==h.portal?(a=(0,n.jsx)(ef.DialogProvider,{position:rM,zOffset:h.portal,children:s}),c[10]=s,c[11]=h.portal,c[12]=a):a=c[12],c[13]!==f||c[14]!==a?(d=(0,n.jsx)(eg.PortalProvider,{__unstable_elements:f,children:a}),c[13]=f,c[14]=a,c[15]=d):d=c[15],d}let rz=[],rO=["fixed","fixed","absolute"],rB=(0,ey.styled)(o.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function rH(){var e;let t,r,s,a,c,u,p,m,h,g,f,x,y,v,j,w,S,C,_,I,T,R,P=(0,i.c)(82),{changesOpen:E,displayed:k,documentId:D,documentType:F,editState:A,fieldActions:V,focusPath:M,inspectOpen:L,inspector:z,inspectors:O,onFocus:B,onHistoryOpen:H,onMenuAction:$,onPathOpen:N,paneKey:G,schemaType:U,value:W,previewUrl:q}=iu(),{stickyParams:K}=(0,eC.useRouter)(),{params:Y}=ln(),{features:X}=ib(),{t:J}=(0,o.useTranslation)(b),{collapsed:Z}=nA(),Q=(0,o.useZIndex)(),[ee,et]=(0,l.useState)(null),[en,ei]=(0,l.useState)(null),[el,eo]=(0,l.useState)(null),[er,es]=(0,l.useState)(null),[ea,ed]=(0,l.useState)(null);P[0]!==M||P[1]!==ee||P[2]!==W?(t={element:ee,focusPath:M,value:W},P[0]=M,P[1]=ee,P[2]=W,P[3]=t):t=P[3],(0,o.useGlobalCopyPasteElementHandler)(t),P[4]===Symbol.for("react.memo_cache_sentinel")?(r=[],P[4]=r):r=P[4];let[ec,eu]=(0,l.useState)(r);P[5]===Symbol.for("react.memo_cache_sentinel")?(s=[],P[5]=s):s=P[5];let[ep,em]=(0,l.useState)(s),eh=(0,ef.useElementRect)(en),ex=(0,ef.useElementRect)(el),eb=eh?.height,ey=ex?.height,ev=600+320*!!z,ej=320+320*!!z;P[6]!==z?.name||P[7]!==O?(a=O?.find(e=>e.name===z?.name),P[6]=z?.name,P[7]=O,P[8]=a):a=P[8];let ew=a;P[9]!==k||P[10]!==D||P[11]!==A?(c={displayed:k,documentId:D,editState:A},P[9]=k,P[10]=D,P[11]=A,P[12]=c):c=P[12];let eS=(0,o.useDocumentIdStack)(c),e_=!!W,eI="true"===K.displayInlineChanges;P[13]!==ew||P[14]!==eS||P[15]!==X||P[16]!==e_||P[17]!==ec||P[18]!==O||P[19]!==q||P[20]!==J||P[21]!==eI?(T=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let o=i[l];return!o||o.hidden?null:{action:`${iv}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,disabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e={currentInspector:ew,features:X,hasValue:e_,inspectorMenuItems:ec,inspectors:O,previewUrl:q,documentIdStack:eS,t:J,displayInlineChanges:eI}),R=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:d.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:d.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?d.CheckmarkIcon:rA}}(e)].filter(Boolean),u=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:d.LinkIcon},...T,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:d.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...R],P[13]=ew,P[14]=eS,P[15]=X,P[16]=e_,P[17]=ec,P[18]=O,P[19]=q,P[20]=J,P[21]=eI,P[22]=u):u=P[22];let eT=u;P[23]!==eT||P[24]!==$?(p=e=>{for(let t of eT)if(t.shortcut&&(0,th.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),$(t);return}},P[23]=eT,P[24]=$,P[25]=p):p=P[25];let eR=p;P[26]!==B||P[27]!==N?(m=e=>{N(e),B(e)},P[26]=B,P[27]=N,P[28]=m):m=P[28];let eP=m;if(!U){let e;return P[29]!==ev||P[30]!==F||P[31]!==ej||P[32]!==G||P[33]!==W?(e=(0,n.jsx)(rV,{currentMinWidth:ev,documentType:F,minWidth:ej,paneKey:G,value:W}),P[29]=ev,P[30]=F,P[31]=ej,P[32]=G,P[33]=W,P[34]=e):e=P[34],e}P[35]!==D||P[36]!==F||P[37]!==O?(h=O.length>0&&(0,n.jsx)(iS,{documentId:D,documentType:F,inspectors:O,onMenuItems:eu}),P[35]=D,P[36]=F,P[37]=O,P[38]=h):h=P[38],P[39]!==D||P[40]!==F||P[41]!==V||P[42]!==U?(g=V.length>0&&U&&(0,n.jsx)(o.FieldActionsResolver,{actions:V,documentId:D,documentType:F,onActions:em,path:rz,schemaType:U}),P[39]=D,P[40]=F,P[41]=V,P[42]=U,P[43]=g):g=P[43],P[44]!==eT?(f=(0,n.jsx)(oe,{ref:eo,menuItems:eT}),P[44]=eT,P[45]=f):f=P[45];let eE=Z?void 0:"fill",ek=E&&Y?.changesInspectorTab==="review",eD=eb||null,eF=ey||null;return P[46]!==ea?(x=(0,n.jsx)(rL,{documentPanelPortalElement:ea,setFooterElement:ei,setActionsBoxElement:es}),P[46]=ea,P[47]=x):x=P[47],P[48]!==L||P[49]!==ee||P[50]!==eD||P[51]!==eF||P[52]!==x?(y=(0,n.jsx)(l$,{footerHeight:eD,headerHeight:eF,isInspectOpen:L,rootElement:ee,setDocumentPanelPortalElement:ed,footer:x}),P[48]=L,P[49]=ee,P[50]=eD,P[51]=eF,P[52]=x,P[53]=y):y=P[53],P[54]!==eP||P[55]!==H||P[56]!==ek||P[57]!==y?(v=(0,n.jsx)(rB,{"data-testid":"change-connector-root",isReviewChangesOpen:ek,onOpenReviewChanges:H,onSetFocus:eP,children:y}),P[54]=eP,P[55]=H,P[56]=ek,P[57]=y,P[58]=v):v=P[58],P[59]!==eE||P[60]!==v?(j=(0,n.jsx)(eg.Flex,{direction:"column",flex:1,height:eE,children:v}),P[59]=eE,P[60]=v,P[61]=j):j=P[61],P[62]!==j||P[63]!==Q.paneDialog?(w=(0,n.jsx)(ef.DialogProvider,{position:rO,zOffset:Q.paneDialog,children:j}),P[62]=j,P[63]=Q.paneDialog,P[64]=w):w=P[64],P[65]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)(iR,{}),P[65]=S):S=P[65],P[66]!==er||P[67]!==ev||P[68]!==eR||P[69]!==ej||P[70]!==G||P[71]!==f||P[72]!==w?(C=(0,n.jsxs)(rF,{actionsBoxElement:er,as:nz,currentMinWidth:ev,"data-testid":"document-pane",flex:2.5,id:G,minWidth:ej,onKeyUp:eR,rootRef:et,children:[f,w,S]}),P[66]=er,P[67]=ev,P[68]=eR,P[69]=ej,P[70]=G,P[71]=f,P[72]=w,P[73]=C):C=P[73],P[74]!==ep||P[75]!==C?(_=(0,n.jsx)(ih,{children:(0,n.jsx)(o.FieldActionsProvider,{actions:ep,path:rz,children:C})}),P[74]=ep,P[75]=C,P[76]=_):_=P[76],P[77]!==g||P[78]!==_||P[79]!==h||P[80]!==W?(I=(0,n.jsxs)(o.GetFormValueProvider,{value:W,children:[h,g,_]}),P[77]=g,P[78]=_,P[79]=h,P[80]=W,P[81]=I):I=P[81],I}let r$=(e,t)=>{let n,r,s,a,d=(0,i.c)(11),c=(0,o.useHistoryStore)(),[u,p]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1);d[0]!==e||d[1]!==t?(n={documentId:e,documentType:t},d[0]=e,d[1]=t,d[2]=n):n=d[2];let g=(0,o.useTimelineStore)(n),f=(0,o.useTimelineSelector)(g,rN);return d[3]!==e||d[4]!==c||d[5]!==f?(r=()=>{f&&e?(h(!0),c.getDocumentAtRevision(e,f).then(e=>{p(e||null),h(!1)}).catch(()=>{p(null),h(!1)})):(p(null),h(!1))},s=[e,f,c],d[3]=e,d[4]=c,d[5]=f,d[6]=r,d[7]=s):(r=d[6],s=d[7]),(0,l.useEffect)(r,s),d[8]!==u||d[9]!==m?(a={lastRevisionDocument:u,loading:m},d[8]=u,d[9]=m,d[10]=a):a=d[10],a};function rN(e){return e.lastNonDeletedRevId}let rG=(0,to.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),rU=(0,to.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),rW=(0,to.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function rq(e){return e.name===iw}function rK(e){let t=(0,o.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function rY(e){let t,a,d,c,u,p,m,h,g,f,x,y,v,j,w,S,C,_,I,T,R,P,E,k,D,F,A,V,M,L,z,O,B,H,$,N,G=(0,i.c)(205),{children:U,index:W,pane:q,paneKey:K,onFocusPath:Y,onSetMaximizedPane:X,maximized:J,forcedVersion:Z,historyStore:Q}=e,ee=void 0!==J&&J,{store:et,error:en,ready:ei,revisionDocument:el,onOlderRevision:eo,sinceDocument:er,isPristine:es,revisionId:ea,lastNonDeletedRevId:ed}=Q,ec=(0,o.useSchema)(),{setDocumentMeta:eu}=(0,o.useCopyPaste)(),{document:ep}=(0,o.useSource)(),{actions:em,badges:eh,unstable_fieldActions:eg,unstable_languageFilter:ex,drafts:eb}=ep,{enabled:ey}=eb,ev=(0,tn.useTelemetry)(),ej=(0,eC.useRouter)(),ew=ln(),e_=ew.setParams,{push:eI}=(0,ef.useToast)(),{options:eT,menuItemGroups:eR,title:eP,views:eE}=q,eD=void 0===eR?ij:eR,eA=void 0===eP?null:eP;G[0]!==eE?(t=void 0===eE?[]:eE,G[0]=eE,G[1]=t):t=G[1];let eL=t,ez=(0,o.useUnique)(eT),eO=ez.id;G[2]!==eO?(a=(0,r.getPublishedId)(eO),G[2]=eO,G[3]=a):a=G[3];let eB=a,eH=eT.type,e$=(0,o.useUnique)(ew.params)||iy,{buildStudioUrl:eN}=(0,o.useStudioUrl)(),eG=(0,o.usePerspective)(),{document:eU,beta:eq}=(0,o.useWorkspace)(),{drafts:eK}=eU,{enabled:eY}=eK,eZ=eq?.form?.enhancedObjectDialog?.enabled;e:{let e;if(Z){d=Z;break e}G[4]!==eG.selectedPerspectiveName||G[5]!==eG.selectedReleaseId?(e={selectedPerspectiveName:eG.selectedPerspectiveName,selectedReleaseId:eG.selectedReleaseId},G[4]=eG.selectedPerspectiveName,G[5]=eG.selectedReleaseId,G[6]=e):e=G[6],d=e}let{selectedReleaseId:eQ,selectedPerspectiveName:e0}=d,e1=ns();G[7]!==eB||G[8]!==eH||G[9]!==ez||G[10]!==e$?(c={paneOptions:ez,documentId:eB,documentType:eH,params:e$},G[7]=eB,G[8]=eH,G[9]=ez,G[10]=e$,G[11]=c):c=G[11];let e2=(e=>{var t;let n,l,r,s,a,d,c,u,p=(0,i.c)(13),{paneOptions:m,documentType:h,documentId:g,params:f}=e,x=(0,o.useTemplates)(),b=ln(),y=(0,o.useUnique)(b.payload);p[0]!==h||p[1]!==m.template||p[2]!==m.templateParameters||p[3]!==y||p[4]!==f.template||p[5]!==x?(r=(t={documentType:h,templateName:m.template,templateParams:m.templateParameters,panePayload:y,urlTemplate:f.template}).panePayload||{},s=t.templateName,t.urlTemplate&&s&&s!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${s}". Using "${s}".`),a=s||t.urlTemplate,d=x.filter(e=>e.schemaType===t.documentType),c={...t.templateParams,..."object"==typeof r&&r||{}},u=a,a||1!==d.length||(u=d[0].id),n={templateName:u,templateParams:c},p[0]=h,p[1]=m.template,p[2]=m.templateParameters,p[3]=y,p[4]=f.template,p[5]=x,p[6]=n):n=p[6];let{templateName:v,templateParams:j}=n;p[7]!==g||p[8]!==h||p[9]!==f.version||p[10]!==v||p[11]!==j?(l={documentId:g,documentType:h,templateName:v,templateParams:j,version:f.version},p[7]=g,p[8]=h,p[9]=f.version,p[10]=v,p[11]=j,p[12]=l):l=p[12];let w=(0,o.useInitialValue)(l);return(0,o.useUnique)(w)})(c),e3=e2.loading;G[12]!==eB||G[13]!==eH||G[14]!==e$||G[15]!==e_?(u={documentId:eB,documentType:eH,params:e$,setParams:e_},G[12]=eB,G[13]=eH,G[14]=e$,G[15]=e_,G[16]=u):u=G[16];let{changesOpen:e4,currentInspector:e5,inspectors:e6,closeInspector:e8,openInspector:e9,handleHistoryClose:te,handleHistoryOpen:tt,handleInspectorAction:ti,inspectOpen:tl,handleLegacyInspectClose:to}=function(e){let t,n,r,s,a,d,c,u,p,m,h,g,f,x,b=(0,i.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:S}=ib(),C=(0,o.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==C?(t=C({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=C,b[3]=t):t=b[3];let _=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[I,T]=(0,l.useState)(n),R=(0,l.useRef)(j.inspect);b[6]!==j.inspect?(r=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},s=[j.inspect],b[6]=j.inspect,b[7]=r,b[8]=s):(r=b[7],s=b[8]),(0,l.useEffect)(r,s),b[9]!==I||b[10]!==_?(a=_?.find(e=>e.name===I),b[9]=I,b[10]=_,b[11]=a):a=b[11];let P=a;b[12]!==_?(d=_.find(rq),b[12]=_,b[13]=d):d=b[13];let E=d,k=P?.name===iw;b[14]!==P||b[15]!==_||b[16]!==j||b[17]!==w?(c=e=>{let t=e&&_.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=_,b[16]=j,b[17]=w,b[18]=c):c=b[18];let D=c;b[19]!==P||b[20]!==_||b[21]!==j||b[22]!==w?(u=(e,t)=>{let n=_.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=_,b[21]=j,b[22]=w,b[23]=u):u=b[23];let F=u;b[24]!==D||b[25]!==E?(p=()=>{E&&D(E.name)},b[24]=D,b[25]=E,b[26]=p):p=b[26];let A=p;b[27]!==S.reviewChanges||b[28]!==E||b[29]!==F?(m=()=>{S.reviewChanges&&E&&F(E.name,{changesInspectorTab:"review"})},b[27]=S.reviewChanges,b[28]=E,b[29]=F,b[30]=m):m=b[30];let V=m,M="on"===j.inspect;b[31]!==M||b[32]!==j||b[33]!==w?(h=e=>{w((void 0===e?!M:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=M,b[32]=j,b[33]=w,b[34]=h):h=b[34];let L=h;b[35]!==L?(g=()=>L(!1),b[35]=L,b[36]=g):g=b[36];let z=g;b[37]!==D||b[38]!==I||b[39]!==_||b[40]!==F||b[41]!==L?(f=e=>{if("inspect"===e.action)return L(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iv.length),n=_.find(e=>e.name===t);return!!n&&(n.name===I?D(n.name):F(n.name),!0)},b[37]=D,b[38]=I,b[39]=_,b[40]=F,b[41]=L,b[42]=f):f=b[42];let O=f;return b[43]!==k||b[44]!==D||b[45]!==P||b[46]!==A||b[47]!==V||b[48]!==O||b[49]!==z||b[50]!==M||b[51]!==_||b[52]!==F?(x={changesOpen:k,currentInspector:P,inspectors:_,closeInspector:D,openInspector:F,handleHistoryClose:A,handleHistoryOpen:V,handleInspectorAction:O,handleLegacyInspectClose:z,inspectOpen:M},b[43]=k,b[44]=D,b[45]=P,b[46]=A,b[47]=V,b[48]=O,b[49]=z,b[50]=M,b[51]=_,b[52]=F,b[53]=x):x=b[53],x}(u),[tr,ts]=(0,l.useState)(!1),{lastRevisionDocument:ta}=r$(eB,eH);G[17]!==es||G[18]!==ei?(p=e=>!!ei&&!e?.draft&&!e?.published&&!e?.version&&!es,G[17]=es,G[18]=ei,G[19]=p):p=G[19];let td=p;G[20]!==e4||G[21]!==er?(m=e=>{let t=(0,o.selectUpstreamVersion)(e);return e4?er||t:t||null},G[20]=e4,G[21]=er,G[22]=m):m=G[22];let tc=m;G[23]!==eH||G[24]!==ec?(h=ec.get(eH),G[23]=eH,G[24]=ec,G[25]=h):h=G[25];let tu=h;G[26]!==td||G[27]!==tr||G[28]!==eY||G[29]!==e$.rev||G[30]!==eG.selectedPerspective||G[31]!==tu?(g=e=>{let t=td(e);return!!e$.rev||tr||t||!(0,o.isPerspectiveWriteable)({selectedPerspective:eG.selectedPerspective,isDraftModelEnabled:eY,schemaType:tu}).result},G[26]=td,G[27]=tr,G[28]=eY,G[29]=e$.rev,G[30]=eG.selectedPerspective,G[31]=tu,G[32]=g):g=G[32];let tp=g;G[33]!==ed||G[34]!==ta||G[35]!==eo||G[36]!==el?(f=e=>eo?el||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ed&&ta?ta:e,G[33]=ed,G[34]=ta,G[35]=eo,G[36]=el,G[37]=f):f=G[37];let tm=f;G[38]!==e$.path?(x=e$.path?(0,e7.fromString)(e$.path):o.EMPTY_ARRAY,G[38]=e$.path,G[39]=x):x=G[39];let th="true"===ej.stickyParams.displayInlineChanges;G[40]!==e4||G[41]!==eB||G[42]!==eH||G[43]!==tc||G[44]!==tm||G[45]!==tp||G[46]!==e2||G[47]!==Y||G[48]!==e0||G[49]!==eQ||G[50]!==x||G[51]!==th?(y={changesOpen:e4,documentType:eH,documentId:eB,initialValue:e2,comparisonValue:tc,releaseId:eQ,selectedPerspectiveName:e0,initialFocusPath:x,readOnly:tp,onFocusPath:Y,getFormDocumentValue:tm,displayInlineChanges:th},G[40]=e4,G[41]=eB,G[42]=eH,G[43]=tc,G[44]=tm,G[45]=tp,G[46]=e2,G[47]=Y,G[48]=e0,G[49]=eQ,G[50]=x,G[51]=th,G[52]=y):y=G[52];let{editState:tg,upstreamEditState:tf,hasUpstreamVersion:tx,connectionState:tb,focusPath:ty,onChange:tv,validation:tj,ready:tw,value:tS,formState:tC,permissions:t_,onPathOpen:tI,isPermissionsLoading:tT,formStateRef:tR,onProgrammaticFocus:tP,collapsedFieldSets:tE,collapsedPaths:tk,onBlur:tD,onFocus:tF,onSetActiveFieldGroup:tA,onSetCollapsedPath:tV,onSetCollapsedFieldSet:tM,openPath:tL}=(0,o.useDocumentForm)(y),{data:tz}=(0,o.useActiveReleases)();G[53]!==tz?(v=void 0===tz?[]:tz,G[53]=tz,G[54]=v):v=G[54];let tO=v;G[55]!==ey||G[56]!==e$||G[57]!==tO||G[58]!==e0||G[59]!==eQ||G[60]!==tS?(j=function(e,t,n,i,l,s){let a;switch(!0){case!!e?.rev:a="revision";break;case t&&(0,r.isVersionId)(n._id):{let e=s.find(e=>(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===t);a=e&&(0,o.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:a="published";break;case l:a="draft";break;default:a="published"}return a}(e$,eQ,tS,e0,ey,tO),G[55]=ey,G[56]=e$,G[57]=tO,G[58]=e0,G[59]=eQ,G[60]=tS,G[61]=j):j=G[61];let tB=j;G[62]!==tB||G[63]!==eB||G[64]!==eH||G[65]!==eQ?(w={schemaType:eH,documentId:eB,versionType:tB,releaseId:eQ},G[62]=tB,G[63]=eB,G[64]=eH,G[65]=eQ,G[66]=w):w=G[66];let tH=w;G[67]!==em||G[68]!==tH?(S=em(tH),G[67]=em,G[68]=tH,G[69]=S):S=G[69];let t$=S;G[70]!==eZ||G[71]!==tI||G[72]!==e$||G[73]!==e_?(C=e=>{if(tI(e),eZ){let t=(0,o.pathToString)(e);e$.path!==t&&e_({...e$,path:t})}},G[70]=eZ,G[71]=tI,G[72]=e$,G[73]=e_,G[74]=C):C=G[74];let tN=C;G[75]!==eh||G[76]!==eB||G[77]!==eH?(_=eh({schemaType:eH,documentId:eB}),G[75]=eh,G[76]=eB,G[77]=eH,G[78]=_):_=G[78];let tG=_;G[79]!==eB||G[80]!==eH||G[81]!==ex?(I=ex({schemaType:eH,documentId:eB}),G[79]=eB,G[80]=eH,G[81]=ex,G[82]=I):I=G[82];let tU=I,tW=(0,o.useUnique)(eL),tq=e$.view||tW[0]&&tW[0].id||null,tK=function(e){let t,n,r,s,a=(0,i.c)(6),{resolveProductionUrl:d}=(0,o.useSource)().document;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=new eX.BehaviorSubject(void 0),a[0]=t):t=a[0];let c=t;return a[1]!==e?(n=()=>{c.next(e)},r=[c,e],a[1]=e,a[2]=n,a[3]=r):(n=a[2],r=a[3]),(0,l.useEffect)(n,r),a[4]!==d?(s=c.asObservable().pipe((0,eV.distinctUntilChanged)(),(0,eF.debounceTime)(500),(0,eM.switchMap)(e=>(0,o.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,eJ.from)(d({document:e})):(0,eW.of)(void 0)),(0,eV.distinctUntilChanged)(),(0,ek.catchError)(rK)),a[4]=d,a[5]=s):s=a[5],(0,eS.useObservable)(s)}(tS),{t:tY}=(0,o.useTranslation)(b);G[83]!==eB||G[84]!==eH||G[85]!==eg||G[86]!==tu?(T=tu?eg({documentId:eB,documentType:eH,schemaType:tu}):[],G[83]=eB,G[84]=eH,G[85]=eg,G[86]=tu,G[87]=T):T=G[87];let tX=T,tJ=tw&&(!e$.rev||ei||!!en);G[88]!==tm||G[89]!==tS?(R=tm(tS),G[88]=tm,G[89]=tS,G[90]=R):R=G[90];let tZ=R;G[91]!==tZ||G[92]!==eB||G[93]!==tg?(P={strict:!0,displayed:tZ,documentId:eB,editState:tg},G[91]=tZ,G[92]=eB,G[93]=tg,G[94]=P):P=G[94];let{previousId:tQ}=(0,o.useDocumentIdStack)(P);G[95]!==e$||G[96]!==e_?(E=(e,t)=>{e_({...e$,since:e,rev:t||void 0})},G[95]=e$,G[96]=e_,G[97]=E):E=G[97];let t0=E;G[98]!==ew?(k=()=>ew.closeCurrent(),G[98]=ew,G[99]=k):k=G[99];let t1=k;G[100]!==ew?(D=()=>ew.duplicateCurrent(),G[100]=ew,G[101]=D):D=G[101];let t2=D;G[102]!==ej||G[103]!==ev?(F=()=>{let e="true"!==ej.stickyParams.displayInlineChanges;ev.log(e?rU:rW),ej.navigate({stickyParams:{displayInlineChanges:String(e)}})},G[102]=ej,G[103]=ev,G[104]=F):F=G[104];let t3=F;G[105]!==eN||G[106]!==e1||G[107]!==eB||G[108]!==eH||G[109]!==tt||G[110]!==ti||G[111]!==tK||G[112]!==tQ||G[113]!==eI||G[114]!==tY||G[115]!==ev||G[116]!==t3||G[117]!==tS._id?(A=async e=>{if("production-preview"===e.action&&tK)return window.open(tK),!0;if("copy-document-url"===e.action&&navigator){ev.log(rG);let e=eN({coreUi:e=>`${e}/intent/edit/id=${eB};type=${eH}`});return await navigator.clipboard.writeText(e),eI({id:"copy-document-url",status:"info",title:tY("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(tt(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iv))&&ti(e),"compareVersions"===e.action&&"u">typeof tQ?(e1.navigateDiffView({mode:"version",previousDocument:{type:eH,id:tQ},nextDocument:{type:eH,id:tS._id}}),!0):"toggleInlineChanges"===e.action&&(t3(),!0))},G[105]=eN,G[106]=e1,G[107]=eB,G[108]=eH,G[109]=tt,G[110]=ti,G[111]=tK,G[112]=tQ,G[113]=eI,G[114]=tY,G[115]=ev,G[116]=t3,G[117]=tS._id,G[118]=A):A=G[118];let t4=A;G[119]!==eB||G[120]!==eH||G[121]!==tv||G[122]!==tu||G[123]!==eu?(V=()=>{eu({documentId:eB,documentType:eH,schemaType:tu,onChange:tv})},M=[eB,eH,tu,tv,eu],G[119]=eB,G[120]=eH,G[121]=tv,G[122]=tu,G[123]=eu,G[124]=V,G[125]=M):(V=G[124],M=G[125]),(0,l.useEffect)(V,M),G[126]!==tc||G[127]!==tf?(L=tc(tf),G[126]=tc,G[127]=tf,G[128]=L):L=G[128];let t5=L,t6=td(tg),t8=eo&&!el;t:{if(tg.version&&(0,o.isGoingToUnpublish)(tg.version)){z=tg.published;break t}z=tZ}let t7=z,t9=e5||null;G[129]!==eD?(O=eD||[],G[129]=eD,G[130]=O):O=G[130],G[131]!==t$||G[132]!==tq||G[133]!==tG||G[134]!==e4||G[135]!==e8||G[136]!==tE||G[137]!==tk||G[138]!==t5||G[139]!==tb||G[140]!==t7||G[141]!==eB||G[142]!==eO||G[143]!==eH||G[144]!==tg||G[145]!==tX||G[146]!==ty||G[147]!==tC||G[148]!==te||G[149]!==tt||G[150]!==to||G[151]!==t4||G[152]!==t1||G[153]!==t2||G[154]!==tN||G[155]!==tx||G[156]!==W||G[157]!==tl||G[158]!==e6||G[159]!==t6||G[160]!==tr||G[161]!==e3||G[162]!==tT||G[163]!==tU||G[164]!==ed||G[165]!==ta||G[166]!==ee||G[167]!==tD||G[168]!==tv||G[169]!==tF||G[170]!==tA||G[171]!==tM||G[172]!==tV||G[173]!==X||G[174]!==e9||G[175]!==tL||G[176]!==K||G[177]!==t_||G[178]!==tK||G[179]!==tJ||G[180]!==ea||G[181]!==t8||G[182]!==tu||G[183]!==eQ||G[184]!==t0||G[185]!==t9||G[186]!==O||G[187]!==en||G[188]!==et||G[189]!==eA||G[190]!==tj||G[191]!==tS||G[192]!==tW?(B={actions:t$,activeViewId:tq,badges:tG,changesOpen:e4,closeInspector:e8,collapsedFieldSets:tE,collapsedPaths:tk,compareValue:t5,connectionState:tb,displayed:t7,documentId:eB,documentIdRaw:eO,documentType:eH,editState:tg,fieldActions:tX,focusPath:ty,inspector:t9,inspectors:e6,onBlur:tD,onChange:tv,onFocus:tF,onPathOpen:tN,onHistoryClose:te,onHistoryOpen:tt,onInspectClose:to,onMenuAction:t4,onPaneClose:t1,onPaneSplit:t2,onSetActiveFieldGroup:tA,onSetCollapsedPath:tV,onSetCollapsedFieldSet:tM,onSetMaximizedPane:X,maximized:ee,openInspector:e9,openPath:tL,index:W,inspectOpen:tl,validation:tj,menuItemGroups:O,paneKey:K,previewUrl:tK,ready:tJ,schemaType:tu,hasUpstreamVersion:tx,isPermissionsLoading:tT,isInitialValueLoading:e3,permissions:t_,setTimelineRange:t0,setIsDeleting:ts,isDeleting:tr,isDeleted:t6,timelineError:en,timelineStore:et,title:eA,value:tS,selectedReleaseId:eQ,views:tW,formState:tC,unstable_languageFilter:tU,revisionId:ea,revisionNotFound:t8,lastNonDeletedRevId:ed,lastRevisionDocument:ta},G[131]=t$,G[132]=tq,G[133]=tG,G[134]=e4,G[135]=e8,G[136]=tE,G[137]=tk,G[138]=t5,G[139]=tb,G[140]=t7,G[141]=eB,G[142]=eO,G[143]=eH,G[144]=tg,G[145]=tX,G[146]=ty,G[147]=tC,G[148]=te,G[149]=tt,G[150]=to,G[151]=t4,G[152]=t1,G[153]=t2,G[154]=tN,G[155]=tx,G[156]=W,G[157]=tl,G[158]=e6,G[159]=t6,G[160]=tr,G[161]=e3,G[162]=tT,G[163]=tU,G[164]=ed,G[165]=ta,G[166]=ee,G[167]=tD,G[168]=tv,G[169]=tF,G[170]=tA,G[171]=tM,G[172]=tV,G[173]=X,G[174]=e9,G[175]=tL,G[176]=K,G[177]=t_,G[178]=tK,G[179]=tJ,G[180]=ea,G[181]=t8,G[182]=tu,G[183]=eQ,G[184]=t0,G[185]=t9,G[186]=O,G[187]=en,G[188]=et,G[189]=eA,G[190]=tj,G[191]=tS,G[192]=tW,G[193]=B):B=G[193];let ne=B,nt=(0,l.useRef)(void 0);return G[194]!==eZ||G[195]!==tR||G[196]!==tP||G[197]!==ew||G[198]!==e$||G[199]!==tJ?(H=()=>{if(tJ&&e$.path){let{path:e,...t}=e$;e!==nt.current&&tP((0,e7.resolveKeyedPath)(tR.current?.value,(0,e7.fromString)(e))),eZ||ew.setParams(t)}nt.current=e$.path},$=[tR,tP,ew,e$,tJ,eZ],G[194]=eZ,G[195]=tR,G[196]=tP,G[197]=ew,G[198]=e$,G[199]=tJ,G[200]=H,G[201]=$):(H=G[200],$=G[201]),(0,l.useEffect)(H,$),G[202]!==U||G[203]!==ne?(N=(0,n.jsx)(s.DocumentPaneContext.Provider,{value:ne,children:U}),G[202]=U,G[203]=ne,G[204]=N):N=G[204],N}let rX=e=>{let t,l,s,a,d,c,u,p=(0,i.c)(37),{params:m}=ln(),h=void 0===m?iy:m,g=st(e.pane.options,h),f=(0,o.useSchema)(),x=g.type,b=!!f.get(g.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,o.usePerspective)(),{data:w}=(0,o.useArchivedReleases)();p[0]!==g.id?(t=(0,r.getPublishedId)(g.id),p[0]=g.id,p[1]=t):t=p[1];let S=(0,o.useEditState)(t,x,"default",v),C=b&&"drafts"===j&&!S?.draft,{rev:_,since:I}=h,T=h.historyVersion;e:{if(C){let e;p[2]!==g.id?(e=(0,r.getPublishedId)(g.id),p[2]=g.id,p[3]=e):e=p[3],l=e;break e}if(T&&w.some(e=>(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;p[4]!==T||p[5]!==g.id?(e=(0,r.getVersionId)(g.id,T),p[4]=T,p[5]=g.id,p[6]=e):e=p[6],l=e;break e}if(typeof y>"u"){let e;p[7]!==g.id?(e=(0,r.getDraftId)(g.id),p[7]=g.id,p[8]=e):e=p[8],l=e;break e}if("published"===y){let e;p[9]!==g.id?(e=(0,r.getPublishedId)(g.id),p[9]=g.id,p[10]=e):e=p[10],l=e;break e}if(v){let e;p[11]!==g.id||p[12]!==y?(e=(0,r.getVersionId)(g.id,y),p[11]=g.id,p[12]=y,p[13]=e):e=p[13],l=e;break e}l=g.id}let R=l;p[14]!==R||p[15]!==g.type||p[16]!==_||p[17]!==I?(s={documentId:R,documentType:g.type,rev:_,since:I},p[14]=R,p[15]=g.type,p[16]=_,p[17]=I,p[18]=s):s=p[18];let P=(0,o.useEventsStore)(s),E=P.error,k=P.revision?.revisionId||null,D=!!(_&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,V=!P.loading,M=0===P.events.length;p[19]!==P.events?(a=P.events.find(rJ)?.id||null,p[19]=P.events,p[20]=a):a=p[20],p[21]!==P.error||p[22]!==M||p[23]!==a||p[24]!==k||p[25]!==D||p[26]!==F||p[27]!==A||p[28]!==V?(d={error:E,revisionId:k,onOlderRevision:D,revisionDocument:F,sinceDocument:A,ready:V,isPristine:M,lastNonDeletedRevId:a},p[21]=P.error,p[22]=M,p[23]=a,p[24]=k,p[25]=D,p[26]=F,p[27]=A,p[28]=V,p[29]=d):d=p[29];let L=d;return p[30]!==L||p[31]!==T||p[32]!==e?(c=T?(0,n.jsx)(o.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:o.EMPTY_ARRAY,children:(0,n.jsx)(rY,{...e,historyStore:L})}):(0,n.jsx)(rY,{...e,historyStore:L}),p[30]=L,p[31]=T,p[32]=e,p[33]=c):c=p[33],p[34]!==c||p[35]!==P?(u=(0,n.jsx)(o.EventsProvider,{value:P,children:c}),p[34]=c,p[35]=P,p[36]=u):u=p[36],u};function rJ(e){return!(0,o.isDeleteDocumentGroupEvent)(e)&&!(0,o.isDeleteDocumentVersionEvent)(e)}let rZ=e=>{let t,s,a,d,c=(0,i.c)(20),{pane:u}=e,p=ln(),m=st(u.options,p.params),h=p.params||iy,[g,f]=(0,l.useState)(null);c[0]!==m.id?(t=(0,r.getPublishedId)(m.id),c[0]=m.id,c[1]=t):t=c[1],c[2]!==m.type||c[3]!==h.rev||c[4]!==h.since||c[5]!==t?(s={documentId:t,documentType:m.type,onError:f,rev:h.rev,since:h.since},c[2]=m.type,c[3]=h.rev,c[4]=h.since,c[5]=t,c[6]=s):s=c[6];let x=(0,o.useTimelineStore)(s),b=(0,o.useTimelineSelector)(x,rQ),y=(0,o.useTimelineSelector)(x,r0),v=(0,o.useTimelineSelector)(x,r1),j=(0,o.useTimelineSelector)(x,r2),w=(0,o.useTimelineSelector)(x,r3),S=(0,o.useTimelineSelector)(x,r4),C=(0,o.useTimelineSelector)(x,r5),_=y?.id||null,I=!!S;c[7]!==C||c[8]!==b||c[9]!==x||c[10]!==_||c[11]!==j||c[12]!==v||c[13]!==I||c[14]!==g||c[15]!==w?(a={store:x,error:g,revisionId:_,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:I,lastNonDeletedRevId:C},c[7]=C,c[8]=b,c[9]=x,c[10]=_,c[11]=j,c[12]=v,c[13]=I,c[14]=g,c[15]=w,c[16]=a):a=c[16];let T=a;return c[17]!==T||c[18]!==e?(d=(0,n.jsx)(rY,{...e,historyStore:T}),c[17]=T,c[18]=e,c[19]=d):d=c[19],d};function rQ(e){return e.onOlderRevision}function r0(e){return e.revTime}function r1(e){return e.sinceAttributes}function r2(e){return e.timelineDisplayed}function r3(e){return e.timelineReady}function r4(e){return e.isPristine}function r5(e){return e.lastNonDeletedRevId}function r6(e){let t=(0,i.c)(4),{children:l}=e,r=ln(),{excludedPerspectives:s}=(0,o.usePerspective)(),{scheduledDraft:a}=r.params;if(a){let e;return t[0]!==l||t[1]!==s||t[2]!==a?(e=(0,n.jsx)(o.PerspectiveProvider,{selectedPerspectiveName:a,excludedPerspectives:s,children:l}),t[0]=l,t[1]=s,t[2]=a,t[3]=e):e=t[3],e}return l}let r8=(0,l.memo)(e=>{let t,l,r,s=(0,i.c)(9),a=(0,o.useSource)(),{setParams:d,params:c}=ln();s[0]!==c||s[1]!==d?(t=e=>{d({...c,scheduledDraft:e},{perspective:""})},s[0]=c,s[1]=d,s[2]=t):t=s[2];let u=t;return s[3]!==e||s[4]!==a.beta?.eventsAPI?.documents?(l=a.beta?.eventsAPI?.documents?(0,n.jsx)(rX,{...e}):(0,n.jsx)(rZ,{...e}),s[3]=e,s[4]=a.beta?.eventsAPI?.documents,s[5]=l):l=s[5],s[6]!==u||s[7]!==l?(r=(0,n.jsx)(r6,{children:(0,n.jsx)(o.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:u,children:l})}),s[6]=u,s[7]=l,s[8]=r):r=s[8],r});r8.displayName="Memo(DocumentPaneProviderWrapper)";let r7=(0,l.memo)(function(e){let t,l,r=(0,i.c)(5),{name:s}=(0,o.useSource)(),a=e.pane.source||s;return r[0]!==e?(t=(0,n.jsx)(o.CopyPasteProvider,{children:(0,n.jsx)(r9,{...e})}),r[0]=e,r[1]=t):t=r[1],r[2]!==a||r[3]!==t?(l=(0,n.jsx)(o.SourceProvider,{name:a,children:t}),r[2]=a,r[3]=t,r[4]=l):l=r[4],l});function r9(e){var t,r,s;let a,d,c,u,p,m,h,g,f,x,y,v,j=(0,i.c)(57),{pane:w,paneKey:S}=e,{resolveNewDocumentOptions:C}=(0,o.useSource)().document,{selectedPerspectiveName:_}=(0,o.usePerspective)(),I=ln(),T=st(w.options,I.params),{documentType:R,isLoaded:P}=(0,o.useDocumentType)(T.id,T.type);!function(){let e,t,n,r,s,a=(0,i.c)(10),{params:d,setParams:c}=ln(),u=void 0===d?iy:d,{selectedPerspectiveName:p}=(0,o.usePerspective)(),m=(0,l.useRef)(!1);a[0]!==u||a[1]!==c?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>u[e])&&c({...u,rev:"true"===u.preserveRev?u.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},a[0]=u,a[1]=c,a[2]=e):e=a[2];let h=(0,tj.useEffectEvent)(e);a[3]!==p||a[4]!==h?(t=()=>{m.current&&h(p)},a[3]=p,a[4]=h,a[5]=t):t=a[5],a[6]!==p?(n=[p],a[6]=p,a[7]=n):n=a[7],(0,l.useEffect)(t,n),a[8]===Symbol.for("react.memo_cache_sentinel")?(r=()=>(m.current=!0,()=>{m.current=!1}),s=[],a[8]=r,a[9]=s):(r=a[8],s=a[9]),(0,l.useEffect)(r,s)}();let E=((v=(0,i.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(y={pick:nj,defaultComponent:rH},v[0]=y):y=v[0],(0,o.useMiddlewareComponents)(y));j[0]!==T.id||j[1]!==T.type||j[2]!==C?(a=C({type:"document",documentId:T.id,schemaType:T.type}),j[0]=T.id,j[1]=T.type,j[2]=C,j[3]=a):a=j[3];let k=a;j[4]!==k?(d={templateItems:k},j[4]=k,j[5]=d):d=j[5];let[D,F]=(0,o.useTemplatePermissions)(d),A=P&&!F;j[6]!==R||j[7]!==A||j[8]!==T||j[9]!==e?(c=A&&R&&T.type!==R?(t=e,r=T,s=R,{...t,pane:{...t.pane,options:{...r,type:s}}}):e,j[6]=R,j[7]=A,j[8]=T,j[9]=e,j[10]=c):c=j[10];let V=c,{ReferenceChildLink:M,handleEditReference:L,groupIndex:z,routerPanesState:O}=I;j[11]!==z||j[12]!==O?(u=O[z+1]?.[0].params||{},j[11]=z,j[12]=O,j[13]=u):u=j[13];let B=u,H=O.length,{parentRefPath:$}=B;j[14]!==z||j[15]!==$||j[16]!==H?(p=$?{path:(0,e7.fromString)($),state:z>=H-1?"none":z>=H-2?"selected":"pressed"}:{path:[],state:"none"},j[14]=z,j[15]=$,j[16]=H,j[17]=p):p=j[17];let N=p,{t:G}=(0,o.useTranslation)(b);if("*"===T.type&&!A){let e,t;return j[18]!==G?(e=G("panes.document-pane.document-not-found.loading"),j[18]=G,j[19]=e):e=j[19],j[20]!==S||j[21]!==e?(t=(0,n.jsx)(ic,{flex:2.5,minWidth:320,paneKey:S,title:e}),j[20]=S,j[21]=e,j[22]=t):t=j[22],t}if(!R){let e,t,i,l,r;return j[23]!==G?(e=G("panes.document-pane.document-not-found.title"),j[23]=G,j[24]=e):e=j[24],j[25]!==T.id?(t={id:T.id},j[25]=T.id,j[26]=t):t=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(i={Code:se},j[27]=i):i=j[27],j[28]!==G||j[29]!==t?(l=(0,n.jsx)(eg.Stack,{space:4,children:(0,n.jsx)(eg.Text,{as:"p",children:(0,n.jsx)(o.Translate,{t:G,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:i})})}),j[28]=G,j[29]=t,j[30]=l):l=j[30],j[31]!==S||j[32]!==e||j[33]!==l?(r=(0,n.jsx)(ir,{flex:2.5,minWidth:320,paneKey:S,title:e,children:l}),j[31]=S,j[32]=e,j[33]=l,j[34]=r):r=j[34],r}let U=`${R}-${T.id}-${_||""}`;return j[35]!==E||j[36]!==T.id||j[37]!==T.type?(m=(0,n.jsx)(E,{documentId:T.id,documentType:T.type}),j[35]=E,j[36]=T.id,j[37]=T.type,j[38]=m):m=j[38],j[39]!==T.id||j[40]!==T.type||j[41]!==m?(h=(0,n.jsx)(ip,{documentId:T.id,documentType:T.type,children:m}),j[39]=T.id,j[40]=T.type,j[41]=m,j[42]=h):h=j[42],j[43]!==T.id||j[44]!==T.type||j[45]!==h?(g=(0,n.jsx)(nF,{documentId:T.id,documentType:T.type,children:h}),j[43]=T.id,j[44]=T.type,j[45]=h,j[46]=g):g=j[46],j[47]!==M||j[48]!==N||j[49]!==L||j[50]!==g||j[51]!==D?(f=(0,n.jsx)(o.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:M,onEditReference:L,initialValueTemplateItems:D,activePath:N,children:g}),j[47]=M,j[48]=N,j[49]=L,j[50]=g,j[51]=D,j[52]=f):f=j[52],j[53]!==V||j[54]!==U||j[55]!==f?(x=(0,n.jsx)(r8,{...V,children:f},U),j[53]=V,j[54]=U,j[55]=f,j[56]=x):x=j[56],x}function se(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function st(e,t){let n,l,r=(0,i.c)(8);r[0]!==t?(n=void 0===t?{}:t,r[0]=t,r[1]=n):n=r[1];let s=n,a=(0,o.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){l=e;break e}let i=e.template||s.template;r[2]!==i||r[3]!==a?(t=i?a.find(e=>e.id===i):void 0,r[2]=i,r[3]=a,r[4]=t):t=r[4];let o=t?.schemaType;if(!o){l=e;break e}r[5]!==o||r[6]!==e?(n={...e,type:o},r[5]=o,r[6]=e,r[7]=n):n=r[7],l=n}return l}let sn=(0,l.forwardRef)(function(e,t){let o,r,a,d=(0,i.c)(9),{routerPanesState:c,groupIndex:u}=(0,l.useContext)(s.PaneRouterContext);d[0]!==u||d[1]!==c?(o=c.slice(0,u),d[0]=u,d[1]=c,d[2]=o):o=d[2];let p=o;d[3]!==p?(r={panes:p},d[3]=p,d[4]=r):r=d[4];let m=r;return d[5]!==e||d[6]!==t||d[7]!==m?(a=(0,n.jsx)(eC.StateLink,{...e,ref:t,state:m}),d[5]=e,d[6]=t,d[7]=m,d[8]=a):a=d[8],a}),si=(0,l.forwardRef)(function(e,t){let o,r,a,d,c,u,p=(0,i.c)(19);p[0]!==e?({childId:o,childPayload:a,childParameters:r,...d}=e,p[0]=e,p[1]=o,p[2]=r,p[3]=a,p[4]=d):(o=p[1],r=p[2],a=p[3],d=p[4]);let{routerPanesState:m,groupIndex:h}=(0,l.useContext)(s.PaneRouterContext);if(p[5]!==o||p[6]!==r||p[7]!==a||p[8]!==h||p[9]!==m){let e;p[11]!==o||p[12]!==r||p[13]!==a?(e=[{id:o,params:r,payload:a}],p[11]=o,p[12]=r,p[13]=a,p[14]=e):e=p[14],c={panes:[...m.slice(0,h+1),e]},p[5]=o,p[6]=r,p[7]=a,p[8]=h,p[9]=m,p[10]=c}else c=p[10];return p[15]!==t||p[16]!==d||p[17]!==c?(u=(0,n.jsx)(eC.StateLink,{...d,ref:t,state:c}),p[15]=t,p[16]=d,p[17]=c,p[18]=u):u=p[18],u}),sl=(0,l.forwardRef)(function(e,t){let r,a,d,c,u,p,m,h=(0,i.c)(20),{routerPanesState:g,groupIndex:f,siblingIndex:x}=(0,l.useContext)(s.PaneRouterContext);h[0]!==e?({params:r,payload:a,...d}=e,h[0]=e,h[1]=r,h[2]=a,h[3]=d):(r=h[1],a=h[2],d=h[3]);let b=(0,o.useUnique)(r),y=(0,o.useUnique)(a),v=g[f],j=v[x],w=b??j.params,S=y??j.payload;h[4]!==j||h[5]!==w||h[6]!==S?(c={...j,params:w,payload:S},h[4]=j,h[5]=w,h[6]=S,h[7]=c):c=h[7];let C=c;h[8]!==v||h[9]!==C||h[10]!==x?(u=[...v.slice(0,x),C,...v.slice(x+1)],h[8]=v,h[9]=C,h[10]=x,h[11]=u):u=h[11];let _=u;h[12]!==g||h[13]!==f||h[14]!==_?(p={panes:[...g.slice(0,f),_,...g.slice(f+1)]},h[12]=g,h[13]=f,h[14]=_,h[15]=p):p=h[15];let I=p;return h[16]!==I||h[17]!==t||h[18]!==d?(m=(0,n.jsx)(eC.StateLink,{ref:t,...d,state:I}),h[16]=I,h[17]=t,h[18]=d,h[19]=m):m=h[19],m}),so=(0,l.forwardRef)(function(e,t){let l,o,s,a,d,c,u,p,m,h,g,f=(0,i.c)(24);f[0]!==e?({documentId:o,documentType:s,parentRefPath:a,children:l,template:c,...d}=e,f[0]=e,f[1]=l,f[2]=o,f[3]=s,f[4]=a,f[5]=d,f[6]=c):(l=f[1],o=f[2],s=f[3],a=f[4],d=f[5],c=f[6]),f[7]!==o?(u=(0,r.getPublishedId)(o),f[7]=o,f[8]=u):u=f[8];let x=c?.params;return f[9]!==a?(p=(0,e7.toString)(a),f[9]=a,f[10]=p):p=f[10],f[11]!==c?(m=c&&{template:c?.id},f[11]=c,f[12]=m):m=f[12],f[13]!==s||f[14]!==p||f[15]!==m?(h={type:s,parentRefPath:p,...m},f[13]=s,f[14]=p,f[15]=m,f[16]=h):h=f[16],f[17]!==l||f[18]!==t||f[19]!==d||f[20]!==u||f[21]!==x||f[22]!==h?(g=(0,n.jsx)(si,{...d,ref:t,childId:u,childPayload:x,childParameters:h,children:l}),f[17]=l,f[18]=t,f[19]=d,f[20]=u,f[21]=x,f[22]=h,f[23]=g):g=f[23],g}),sr=[];function ss(e){let t,l,o,r,a,d,c,u,p,m,h,g,f,x=(0,i.c)(60),{children:b,flatIndex:y,index:v,params:j,payload:w,siblingIndex:S}=e,{navigate:C,navigateIntent:_,resolvePathFromState:I}=(0,eC.useRouter)(),T=(0,eC.useRouterState)(),{panes:R,expand:P}=nA(),E=T?.panes||sr,k=R?.[R.length-2],D=v-1;x[0]!==D||x[1]!==E||x[2]!==T||x[3]!==S?(t=e=>{let t=E[D]||[],n=t[S],i=e(t,n),l=[...E.slice(0,D),i,...E.slice(D+1)];return{...T,panes:l}},x[0]=D,x[1]=E,x[2]=T,x[3]=S,x[4]=t):t=x[4];let F=t;x[5]!==F||x[6]!==C?(l=(e,t)=>{let n=F(e);return setTimeout(()=>C(n,t?{stickyParams:t}:void 0),0),n},x[5]=F,x[6]=C,x[7]=l):l=x[7];let A=l;x[8]!==F||x[9]!==I||x[10]!==S?(o=e=>I(F((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)])),x[8]=F,x[9]=I,x[10]=S,x[11]=o):o=x[11];let V=o;x[12]!==A||x[13]!==S?(r=e=>{A((t,n)=>[...t.slice(0,S),{...n,payload:e},...t.slice(S+1)])},x[12]=A,x[13]=S,x[14]=r):r=x[14];let M=r;x[15]!==A||x[16]!==S?(a=(e,t)=>{A((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)],t)},x[15]=A,x[16]=S,x[17]=a):a=x[17];let L=a;x[18]!==D||x[19]!==C||x[20]!==E?(d=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;C({panes:[...E.slice(0,D+1),[{id:t,params:{template:l.id,parentRefPath:(0,e7.toString)(n),type:i,version:o},payload:l.params}]]})},x[18]=D,x[19]=C,x[20]=E,x[21]=d):d=x[21];let z=d,O=!!E[D]&&E[D].length>1,B=E[D]?E[D].length:0,H=y?sn:void 0;x[22]!==A?(u=e=>{let t=void 0===e?{}:e;A(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},c=()=>{A(sa)},x[22]=A,x[23]=c,x[24]=u):(c=x[23],u=x[24]),x[25]!==P||x[26]!==D||x[27]!==k||x[28]!==C||x[29]!==E?(p=e=>{(void 0===e||e)&&k&&P(k.element),C({panes:E.slice(0,D)})},x[25]=P,x[26]=D,x[27]=k,x[28]=C,x[29]=E,x[30]=p):p=x[30],x[31]!==A||x[32]!==S?(m=e=>{A((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,S),i,...t.slice(S)]})},x[31]=A,x[32]=S,x[33]=m):m=x[33],x[34]!==j||x[35]!==L?(h=e=>{let t=(0,e_.default)(j,"view");return L(e?{...t,view:e}:t)},x[34]=j,x[35]=L,x[36]=h):h=x[36],x[37]!==V||x[38]!==y||x[39]!==D||x[40]!==z||x[41]!==_||x[42]!==j||x[43]!==w||x[44]!==E||x[45]!==L||x[46]!==M||x[47]!==S||x[48]!==c||x[49]!==p||x[50]!==m||x[51]!==h||x[52]!==O||x[53]!==B||x[54]!==H||x[55]!==u?(g={index:y,groupIndex:D,siblingIndex:S,payload:w,params:j,hasGroupSiblings:O,groupLength:B,routerPanesState:E,ChildLink:si,BackLink:H,ReferenceChildLink:so,handleEditReference:z,ParameterizedLink:sl,replaceCurrent:u,closeCurrent:c,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:L,setPayload:M,createPathWithParams:V,navigateIntent:_},x[37]=V,x[38]=y,x[39]=D,x[40]=z,x[41]=_,x[42]=j,x[43]=w,x[44]=E,x[45]=L,x[46]=M,x[47]=S,x[48]=c,x[49]=p,x[50]=m,x[51]=h,x[52]=O,x[53]=B,x[54]=H,x[55]=u,x[56]=g):g=x[56];let $=g;return x[57]!==b||x[58]!==$?(f=(0,n.jsx)(s.PaneRouterContext.Provider,{value:$,children:b}),x[57]=b,x[58]=$,x[59]=f):f=x[59],f}function sa(e,t){return e.length>1?e.filter(e=>e!==t):e}function sd(e){let t,l,r,s,a,d=(0,i.c)(14),{isSelected:c,pane:u,paneKey:p}=e;d[0]!==u?(t=(0,o.isRecord)(u)&&u.type||null,d[0]=u,d[1]=t):t=d[1];let m=t,{t:h}=(0,o.useTranslation)(b);return d[2]!==h?(l=h("panes.unknown-pane-type.title"),d[2]=h,d[3]=l):l=d[3],d[4]!==l?(r=(0,n.jsx)(n5,{title:l}),d[4]=l,d[5]=r):r=d[5],d[6]!==h||d[7]!==m?(s=(0,n.jsx)(nH,{children:(0,n.jsx)(eg.Box,{padding:4,children:"string"==typeof m?(0,n.jsx)(eg.Text,{as:"p",muted:!0,children:(0,n.jsx)(o.Translate,{t:h,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,n.jsx)(eg.Text,{as:"p",muted:!0,children:(0,n.jsx)(o.Translate,{t:h,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),d[6]=h,d[7]=m,d[8]=s):s=d[8],d[9]!==c||d[10]!==p||d[11]!==r||d[12]!==s?(a=(0,n.jsxs)(nz,{id:p,selected:c,children:[r,s]}),d[9]=c,d[10]=p,d[11]=r,d[12]=s,d[13]=a):a=d[13],a}let sc={component:(0,l.lazy)(()=>e.A(37894)),document:(0,l.lazy)(()=>Promise.resolve().then(function(){return dq})),documentList:(0,l.lazy)(()=>Promise.resolve().then(function(){return dK})),list:(0,l.lazy)(()=>e.A(28515))},su=(0,l.memo)(function(e){let t,o,r,s,a=(0,i.c)(25),{active:d,childItemId:c,groupIndex:u,index:p,itemId:m,pane:h,paneKey:g,params:f,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,S=sc[h.type]||sd;a[0]!==g||a[1]!==b||a[2]!==y?(t=(0,n.jsx)(ic,{paneKey:g,path:b,selected:y}),a[0]=g,a[1]=b,a[2]=y,a[3]=t):t=a[3];let C=c||"";return a[4]!==S||a[5]!==d||a[6]!==p||a[7]!==m||a[8]!==j||a[9]!==w||a[10]!==h||a[11]!==g||a[12]!==y||a[13]!==C?(o=(0,n.jsx)(S,{childItemId:C,index:p,itemId:m,isActive:d,isSelected:y,paneKey:g,pane:h,maximized:j,onSetMaximizedPane:w}),a[4]=S,a[5]=d,a[6]=p,a[7]=m,a[8]=j,a[9]=w,a[10]=h,a[11]=g,a[12]=y,a[13]=C,a[14]=o):o=a[14],a[15]!==t||a[16]!==o?(r=(0,n.jsx)(l.Suspense,{fallback:t,children:o}),a[15]=t,a[16]=o,a[17]=r):r=a[17],a[18]!==u||a[19]!==p||a[20]!==f||a[21]!==x||a[22]!==v||a[23]!==r?(s=(0,n.jsx)(ss,{flatIndex:p,index:u,params:f,payload:x,siblingIndex:v,children:r}),a[18]=u,a[19]=p,a[20]=f,a[21]=x,a[22]=v,a[23]=r,a[24]=s):s=a[24],s},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...o})=>{if(!(0,eI.default)(e,i)||!(0,eI.default)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(o)]))if(n[e]!==o[e])return!1;return!0});function sp(e){let t,l,r=(0,i.c)(10),{document:s}=e,a=(0,o.useSchema)().get(s._type),{t:d}=(0,o.useTranslation)(b),{title:c}=iI();if(!a){let e,t;return r[0]!==s._type||r[1]!==d?(e=d("doc-title.unknown-schema-type.text",{schemaType:s._type}),r[0]=s._type,r[1]=d,r[2]=e):e=r[2],r[3]!==e?(t=(0,n.jsx)("code",{children:e}),r[3]=e,r[4]=t):t=r[4],t}return r[5]!==d||r[6]!==c?(t=c||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:d("doc-title.fallback.text")}),r[5]=d,r[6]=c,r[7]=t):t=r[7],r[8]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),r[8]=t,r[9]=l):l=r[9],l}let sm=(0,ey.styled)(eg.Box)`
  margin-left: auto;
`,sh=ey.styled.details`
  flex: none;

  &[open] ${sm} {
    transform: rotate(180deg);
  }
`,sg=ey.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,sf=ey.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,eg.rem)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,eg.rem)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,eg.rem)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,sx=(0,ey.styled)(eg.Flex)`
  min-height: 33px;
`,sb=e=>{let t,l,r,s,a,c,u=(0,i.c)(13),{t:p}=(0,o.useTranslation)(b),m=e.totalCount-e.references.length;return m?(u[0]!==m||u[1]!==p?(t=p("confirm-delete-dialog.other-reference-count.title",{count:m}),u[0]=m,u[1]=p,u[2]=t):t=u[2],u[3]!==t?(l=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:t}),u[3]=t,u[4]=l):l=u[4],u[5]!==p?(r=p("confirm-delete-dialog.other-reference-count.tooltip"),u[5]=p,u[6]=r):r=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:(0,n.jsx)(d.InfoOutlineIcon,{})}),u[7]=s):s=u[7],u[8]!==r?(a=(0,n.jsx)(eh.Tooltip,{portal:!0,placement:"top",content:r,children:s}),u[8]=r,u[9]=a):a=u[9],u[10]!==l||u[11]!==a?(c=(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsxs)(eg.Inline,{space:2,children:[l,a]})}),u[10]=l,u[11]=a,u[12]=c):c=u[12],c):null};function sy(e){let t,l,r,s,a,d,c=(0,i.c)(27),{icon:u,layout:p,presence:m,schemaType:h,value:g}=e,f=(0,o.useDocumentVersionInfo)(g._id),{perspectiveStack:x}=(0,o.usePerspective)();c[0]!==x||c[1]!==e.documentPreviewStore||c[2]!==h||c[3]!==g._id?(t=(0,o.getPreviewStateObservable)(e.documentPreviewStore,h,g._id,x),c[0]=x,c[1]=e.documentPreviewStore,c[2]=h,c[3]=g._id,c[4]=t):t=c[4];let b=t;c[5]===Symbol.for("react.memo_cache_sentinel")?(l={snapshot:null,isLoading:!0,original:null},c[5]=l):l=c[5];let{snapshot:y,original:v,isLoading:j}=(0,eS.useObservable)(b,l);c[6]!==j||c[7]!==m||c[8]!==f.draft||c[9]!==f.published||c[10]!==f.versions?(r=j?null:(0,n.jsx)(eh.TooltipDelayGroupProvider,{children:(0,n.jsxs)(eg.Flex,{align:"center",gap:3,children:[m&&m.length>0&&(0,n.jsx)(o.DocumentPreviewPresence,{presence:m}),(0,n.jsx)(o.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:f.versions})]})}),c[6]=j,c[7]=m,c[8]=f.draft,c[9]=f.published,c[10]=f.versions,c[11]=r):r=c[11];let w=r;c[12]!==f.draft||c[13]!==f.published||c[14]!==f.versions?(s=(0,n.jsx)(o.DocumentStatus,{draft:f.draft,published:f.published,versions:f.versions}),c[12]=f.draft,c[13]=f.published,c[14]=f.versions,c[15]=s):s=c[15];let S=s;return c[16]!==v||c[17]!==y||c[18]!==g?(a=(0,o.getPreviewValueWithFallback)({snapshot:y,original:v,fallback:g}),c[16]=v,c[17]=y,c[18]=g,c[19]=a):a=c[19],c[20]!==u||c[21]!==j||c[22]!==p||c[23]!==w||c[24]!==a||c[25]!==S?(d=(0,n.jsx)(o.SanityDefaultPreview,{...a,isPlaceholder:j,icon:u,layout:p,status:w,tooltip:S}),c[20]=u,c[21]=j,c[22]=p,c[23]=w,c[24]=a,c[25]=S,c[26]=d):d=c[26],d}let sv=[];function sj(e){let t,l,s,a,d=(0,i.c)(16),{onClick:c,type:u,value:p}=e,m=p?._id;d[0]!==m?(t=(0,r.getPublishedId)(m),d[0]=m,d[1]=t):t=d[1];let h=(0,o.useDocumentPresence)(t),g=(0,o.useDocumentPreviewStore)(),{ReferenceChildLink:f}=ln();d[2]!==f||d[3]!==u?.name||d[4]!==p?._id?(l=function(e){return(0,n.jsx)(f,{documentId:p?._id,documentType:u?.name,parentRefPath:sv,...e})},d[2]=f,d[3]=u?.name,d[4]=p?._id,d[5]=l):l=d[5];let x=l,b=u?.icon,y=h?.length>0?h:sv;return d[6]!==g||d[7]!==b||d[8]!==y||d[9]!==u||d[10]!==p?(s=(0,n.jsx)(sy,{documentPreviewStore:g,icon:b,layout:"default",presence:y,schemaType:u,value:p}),d[6]=g,d[7]=b,d[8]=y,d[9]=u,d[10]=p,d[11]=s):s=d[11],d[12]!==c||d[13]!==x||d[14]!==s?(a=(0,n.jsx)(o.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:c,radius:2,children:s}),d[12]=c,d[13]=x,d[14]=s,d[15]=a):a=d[15],a}let sw=(0,ey.styled)(eg.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,sS=e=>{let t,l,s,a,d,c,u,p,m,h,g,f,x,b,y=(0,i.c)(44),{versionId:v,schemaType:j}=e,{t:w}=(0,o.useTranslation)(),S=(0,o.useDocumentPreviewStore)();y[0]!==v?(t=(0,o.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let C=t,{data:_}=(0,o.useActiveReleases)();if(y[2]!==S||y[3]!==C||y[4]!==j||y[5]!==v){let e=["version"===C?(0,r.getVersionFromId)(v):"published"===C?"published":"drafts"];l=(0,o.getPreviewStateObservable)(S,j,(0,r.getPublishedId)(v),e),y[2]=S,y[3]=C,y[4]=j,y[5]=v,y[6]=l}else l=y[6];let I=l;y[7]===Symbol.for("react.memo_cache_sentinel")?(s={snapshot:null,isLoading:!0,original:null},y[7]=s):s=y[7];let{snapshot:T,original:R,isLoading:P}=(0,eS.useObservable)(I,s);e:{let e;if("version"!==C){a=void 0;break e}if(y[8]!==_||y[9]!==v){let t;y[11]!==v?(t=e=>(0,o.getReleaseIdFromReleaseDocumentId)(e._id)===(0,r.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=_.find(t),y[8]=_,y[9]=v,y[10]=e}else e=y[10];a=e}let E=a;y[13]!==C||y[14]!==E?.metadata?.title||y[15]!==w||y[16]!==v?(d=()=>"version"===C?E?.metadata?.title||(0,r.getVersionFromId)(v):w("published"===C?"release.chip.published":"release.chip.draft"),y[13]=C,y[14]=E?.metadata?.title,y[15]=w,y[16]=v,y[17]=d):d=y[17];let k=d;y[18]!==C||y[19]!==E?(c=E?(0,o.getReleaseTone)(E):"published"===C?"positive":"caution",y[18]=C,y[19]=E,y[20]=c):c=y[20];let D=c;y[21]!==R||y[22]!==j.name||y[23]!==T||y[24]!==v?(u=(0,o.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[21]=R,y[22]=j.name,y[23]=T,y[24]=v,y[25]=u):u=y[25];let F=j.icon;return y[26]===Symbol.for("react.memo_cache_sentinel")?(p={backgroundColor:"transparent"},y[26]=p):p=y[26],y[27]!==D?(m=(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.ReleaseAvatarIcon,{tone:D})}),y[27]=D,y[28]=m):m=y[28],y[29]!==k?(h=k(),y[29]=k,y[30]=h):h=y[30],y[31]!==h?(g=(0,n.jsx)(sw,{size:1,weight:"medium",textOverflow:"ellipsis",children:h}),y[31]=h,y[32]=g):g=y[32],y[33]!==m||y[34]!==g?(f=(0,n.jsxs)(eg.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[m,g]}),y[33]=m,y[34]=g,y[35]=f):f=y[35],y[36]!==f||y[37]!==D?(x=(0,n.jsx)(eg.Card,{border:!0,radius:"full",children:(0,n.jsx)(eg.Card,{radius:"full",tone:D,style:p,children:f})}),y[36]=f,y[37]=D,y[38]=x):x=y[38],y[39]!==P||y[40]!==j.icon||y[41]!==x||y[42]!==u?(b=(0,n.jsx)(o.SanityDefaultPreview,{...u,isPlaceholder:P,icon:F,layout:"default",status:x}),y[39]=P,y[40]=j.icon,y[41]=x,y[42]=u,y[43]=b):b=y[43],b},sC=e=>{let t,l,r,s=(0,i.c)(8),{documentType:a,documentVersions:d}=e,c=(0,o.useSchema)();s[0]!==a||s[1]!==c?(t=c.get(a),s[0]=a,s[1]=c,s[2]=t):t=s[2];let u=t;if(!u)throw Error(`Schema type ${a} not found`);return s[3]!==d||s[4]!==u?(l=d?.map(e=>(0,n.jsx)(sS,{versionId:e,schemaType:u},e)),s[3]=d,s[4]=u,s[5]=l):l=s[5],s[6]!==l?(r=(0,n.jsx)(eg.Card,{border:!0,padding:1,radius:2,children:(0,n.jsx)(eg.Stack,{children:l})}),s[6]=l,s[7]=r):r=s[7],r};function s_(e){let t,l,r,s,a,c,u,p,m,h,g,f,x,y,v,j,w,S,C,_=(0,i.c)(66),{crossDatasetReferences:I,internalReferences:T,documentTitle:R,totalCount:P,action:E,datasetNames:k,hasUnknownDatasetNames:D,documentId:F,documentType:A,onReferenceLinkClick:V,documentVersions:M}=e,L=(0,o.useSchema)(),z=(0,ef.useToast)(),{t:O}=(0,o.useTranslation)(b);_[0]!==V||_[1]!==L||_[2]!==O?(t=e=>{let t=L.get(e._type);return t?(0,n.jsx)(sj,{type:t,value:e,onClick:V}):(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsx)(o.SanityDefaultPreview,{icon:d.UnknownIcon,title:O("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:O("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},_[0]=V,_[1]=L,_[2]=O,_[3]=t):t=_[3];let B=t;_[4]!==E||_[5]!==R||_[6]!==A||_[7]!==M||_[8]!==O?(l=()=>(0,n.jsxs)(eg.Stack,{space:4,children:[(0,n.jsx)(eg.Text,{as:"p",size:1,children:(0,n.jsx)(o.Translate,{t:O,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,n.jsx)("strong",{children:R})}})}),"delete"===E&&(0,n.jsx)(sC,{documentType:A,documentVersions:M})]}),_[4]=E,_[5]=R,_[6]=A,_[7]=M,_[8]=O,_[9]=l):l=_[9];let H=l;if(T?.totalCount===0&&I?.totalCount===0){let e;return _[10]!==H?(e=H(),_[10]=H,_[11]=e):e=_[11],e}_[12]!==D?(r=D?["unavailable"]:[],_[12]=D,_[13]=r):r=_[13],_[14]!==k||_[15]!==r?(s=[...k,...r],_[14]=k,_[15]=r,_[16]=s):s=_[16];let $=s,N=$.length,G=$.join(", "),U=D&&$.length?"unavailable":"";_[17]!==$.length||_[18]!==O||_[19]!==G||_[20]!==U?(a=O("confirm-delete-dialog.cdr-summary.subtitle",{count:N,datasets:G,context:U}),_[17]=$.length,_[18]=O,_[19]=G,_[20]=U,_[21]=a):a=_[21];let W=a;return _[22]!==H?(c=H(),_[22]=H,_[23]=c):c=_[23],_[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(eg.Card,{borderTop:!0,padding:1}),_[24]=u):u=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(eg.Text,{"aria-hidden":"true",size:1,children:(0,n.jsx)(d.WarningOutlineIcon,{})}),_[25]=p):p=_[25],_[26]!==R?(m={DocumentTitle:()=>R},_[26]=R,_[27]=m):m=_[27],_[28]!==P?(h={count:P},_[28]=P,_[29]=h):h=_[29],_[30]!==O||_[31]!==m||_[32]!==h?(g=(0,n.jsxs)("div",{children:[u,(0,n.jsx)(eg.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,n.jsxs)(eg.Flex,{children:[p,(0,n.jsx)(eg.Box,{flex:1,marginLeft:3,children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:m,t:O,values:h})})})]})})]}),_[30]=O,_[31]=m,_[32]=h,_[33]=g):g=_[33],_[34]!==R?(f={DocumentTitle:()=>R},_[34]=R,_[35]=f):f=_[35],_[36]!==E||_[37]!==O||_[38]!==f?(x=(0,n.jsx)(eg.Box,{flex:"none",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:O,context:E,components:f})})}),_[36]=E,_[37]=O,_[38]=f,_[39]=x):x=_[39],_[40]!==T||_[41]!==B?(y=T.totalCount>0&&(0,n.jsxs)(eg.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[T?.references.map(e=>(0,n.jsx)(eg.Box,{as:"li",children:B(e)},e._id)),T.totalCount>T.references.length&&(0,n.jsx)(eg.Box,{as:"li",padding:3,children:(0,n.jsx)(sb,{...T})})]}),_[40]=T,_[41]=B,_[42]=y):y=_[42],_[43]!==I||_[44]!==W||_[45]!==F||_[46]!==T.totalCount||_[47]!==$.length||_[48]!==O||_[49]!==z?(v=I.totalCount>0&&(0,n.jsxs)(sh,{"data-testid":"cross-dataset-references",style:{borderTop:T.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,n.jsx)(sg,{children:(0,n.jsx)(eg.Card,{as:"a",marginTop:2*(T.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,n.jsxs)(eg.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(d.DocumentsIcon,{})}),(0,n.jsxs)(eg.Stack,{space:2,children:[(0,n.jsx)(eg.Text,{textOverflow:"ellipsis",size:1,children:O("confirm-delete-dialog.cdr-summary.title",{count:$.length,documentCount:O("confirm-delete-dialog.cdr-summary.document-count",{count:I.totalCount})})}),(0,n.jsx)(eg.Text,{title:W,textOverflow:"ellipsis",size:1,muted:!0,children:W})]}),(0,n.jsx)(sm,{children:(0,n.jsx)(eg.Text,{muted:!0,size:1,children:(0,n.jsx)(d.ChevronDownIcon,{})})})]})})}),(0,n.jsxs)(eg.Box,{overflow:"auto",paddingTop:2,children:[(0,n.jsxs)(sf,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(eg.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:O("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(eg.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(eg.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,n.jsx)("tbody",{children:I.references.filter(sI).map((e,t)=>{let{projectId:i,datasetName:l,documentId:o}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(eg.Text,{size:1,children:i})}),(0,n.jsx)("td",{children:(0,n.jsx)(eg.Text,{size:1,children:l||"unavailable"})}),(0,n.jsx)("td",{children:(0,n.jsxs)(sx,{align:"center",gap:2,justify:"flex-end",children:[(0,n.jsx)(eg.Text,{textOverflow:"ellipsis",size:1,children:o||"unavailable"}),o&&(0,n.jsx)(eh.Button,{mode:"bleed",icon:d.CopyIcon,tooltipProps:{content:O("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(o).catch(()=>{z.push({status:"error",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${F}-${t}`)})})]}),(0,n.jsx)(sb,{...I})]})]}),_[43]=I,_[44]=W,_[45]=F,_[46]=T.totalCount,_[47]=$.length,_[48]=O,_[49]=z,_[50]=v):v=_[50],_[51]!==y||_[52]!==v?(j=(0,n.jsx)(eg.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,n.jsxs)(eg.Flex,{direction:"column",children:[y,v]})}),_[51]=y,_[52]=v,_[53]=j):j=_[53],_[54]!==R?(w={DocumentTitle:()=>R},_[54]=R,_[55]=w):w=_[55],_[56]!==E||_[57]!==O||_[58]!==w?(S=(0,n.jsx)(eg.Box,{flex:"none",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:O,context:E,components:w})})}),_[56]=E,_[57]=O,_[58]=w,_[59]=S):S=_[59],_[60]!==g||_[61]!==x||_[62]!==j||_[63]!==S||_[64]!==c?(C=(0,n.jsxs)(eg.Flex,{direction:"column",gap:4,children:[c,g,x,j,S]}),_[60]=g,_[61]=x,_[62]=j,_[63]=S,_[64]=c,_[65]=C):C=_[65],C}function sI(e){return"projectId"in e}let sT=()=>(t||(t=(0,eZ.fromEvent)(document,"visibilitychange").pipe((0,eD.startWith)(null),(0,eE.map)(()=>"visible"===document.visibilityState),(0,eV.distinctUntilChanged)(),(0,eM.switchMap)(e=>e?(0,eQ.timer)(0,5e3):e0.EMPTY),(0,eL.shareReplay)({refCount:!0,bufferSize:1}))),t),sR=(0,o.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),sP=(0,o.createHookFromObservableFactory)(([e,t])=>sT().pipe((0,eM.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return sT().pipe((0,eM.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,r.getDraftId)(e),i=(0,r.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eE.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eM.switchMap)(e=>{if(!e)return(0,eW.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,ek.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,eW.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function sE(e){return"string"!=typeof e.datasetName}function sk(e){return!!e&&""!==e}function sD(e){return e?.datasetName||""}function sF(e){return e.projectId}let sA=(0,ey.styled)(eg.Box)`
  box-sizing: border-box;
`,sV=(0,ey.styled)(eg.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function sM(e){let t,s,a,d,c,u,p,m,h,g,f,x,y=(0,i.c)(51),{id:v,type:j,action:w,onCancel:S,onConfirm:C}=e,_=void 0===w?"delete":w,{t:I}=(0,o.useTranslation)(b),T=`deletion-confirmation-${(0,l.useId)()}`,{internalReferences:R,crossDatasetReferences:P,isLoading:E,totalCount:k,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A}=function(e){let t,n,l,s,a,d,c,u,p=(0,i.c)(24),m=(0,o.useClient)(o.DEFAULT_STUDIO_CLIENT_OPTIONS),h=(0,o.useDocumentStore)();p[0]!==e?(t=(0,r.getPublishedId)(e),p[0]=e,p[1]=t):t=p[1];let g=t;p[2]!==h||p[3]!==g?(n=[g,h],p[2]=h,p[3]=g,p[4]=n):n=p[4];let[f,x]=sR(n);p[5]!==g||p[6]!==m?(l=[g,m],p[5]=g,p[6]=m,p[7]=l):l=p[7];let[b,y]=sP(l);p[8]!==b?.references?(s=()=>Array.from(new Set(b?.references.map(sF).filter(Boolean))).sort(),p[8]=b?.references,p[9]=s):s=p[9],p[10]!==s?(a=s(),p[10]=s,p[11]=a):a=p[11];let v=a;p[12]!==b?.references?(d=Array.from(new Set(b?.references.map(sD).filter(sk))).sort(),p[12]=b?.references,p[13]=d):d=p[13];let j=d;p[14]!==b?.references?(c=()=>!!b?.references.some(sE),p[14]=b?.references,p[15]=c):c=p[15];let w=c(),S=(f?.totalCount||0)+(b?.totalCount||0),C=x||y;return p[16]!==b||p[17]!==j||p[18]!==w||p[19]!==f||p[20]!==v||p[21]!==S||p[22]!==C?(u={totalCount:S,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:f,crossDatasetReferences:b,isLoading:C},p[16]=b,p[17]=j,p[18]=w,p[19]=f,p[20]=v,p[21]=S,p[22]=C,p[23]=u):u=p[23],u}(v);y[0]!==v||y[1]!==j?(t={_id:v,_type:j},y[0]=v,y[1]=j,y[2]=t):t=y[2];let V=t;y[3]!==V?(s=(0,n.jsx)(sp,{document:V}),y[3]=V,y[4]=s):s=y[4];let M=s,L=!E;y[5]!==v?(a=(0,r.getPublishedId)(v),y[5]=v,y[6]=a):a=y[6],y[7]!==a?(d={documentId:a},y[7]=a,y[8]=d):d=y[8];let{data:z,loading:O}=(0,o.useDocumentVersions)(d);y[9]!==z||y[10]!==C?(c=()=>{C(z)},y[9]=z,y[10]=C,y[11]=c):c=y[11];let B=c;return y[12]!==_||y[13]!==I?(u=I("confirm-delete-dialog.header.text",{context:_}),y[12]=_,y[13]=I,y[14]=u):u=y[14],y[15]!==I?(p=I("confirm-delete-dialog.cancel-button.text"),y[15]=I,y[16]=p):p=y[16],y[17]!==S||y[18]!==p?(m={onClick:S,text:p},y[17]=S,y[18]=p,y[19]=m):m=y[19],y[20]!==_||y[21]!==B||y[22]!==L||y[23]!==I||y[24]!==k?(h=L?{text:I(k>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:B}:void 0,y[20]=_,y[21]=B,y[22]=L,y[23]=I,y[24]=k,y[25]=h):h=y[25],y[26]!==m||y[27]!==h?(g={cancelButton:m,confirmButton:h},y[26]=m,y[27]=h,y[28]=g):g=y[28],y[29]!==_||y[30]!==P||y[31]!==F||y[32]!==M||y[33]!==z||y[34]!==A||y[35]!==v||y[36]!==R||y[37]!==E||y[38]!==S||y[39]!==D||y[40]!==I||y[41]!==k||y[42]!==j||y[43]!==O?(f=(0,n.jsx)(sA,{children:P&&R&&!E&&!O?(0,n.jsx)(s_,{crossDatasetReferences:P,internalReferences:R,documentTitle:M,isLoading:E,totalCount:k,action:_,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A,onReferenceLinkClick:S,documentId:v,documentType:j,documentVersions:z}):(0,n.jsx)(sV,{"data-testid":"loading-container",children:(0,n.jsx)(o.LoadingBlock,{showText:!0,title:I("confirm-delete-dialog.loading.text")})})}),y[29]=_,y[30]=P,y[31]=F,y[32]=M,y[33]=z,y[34]=A,y[35]=v,y[36]=R,y[37]=E,y[38]=S,y[39]=D,y[40]=I,y[41]=k,y[42]=j,y[43]=O,y[44]=f):f=y[44],y[45]!==T||y[46]!==S||y[47]!==g||y[48]!==f||y[49]!==u?(x=(0,n.jsx)(eh.Dialog,{width:1,id:T,header:u,footer:g,onClose:S,onClickOutside:S,children:f}),y[45]=T,y[46]=S,y[47]=g,y[48]=f,y[49]=u,y[50]=x):x=y[50],x}function sL(e){let t,r,s=(0,i.c)(6),{t:a}=(0,o.useTranslation)(b),d=(0,l.useId)(),[c,u]=(0,l.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),s[0]=t):t=s[0];let p=t;return s[1]!==c||s[2]!==d||s[3]!==e||s[4]!==a?(r=c?(0,n.jsx)(eh.Dialog,{id:`dialog-error-${d}`,"data-testid":"confirm-delete-error-dialog",header:a("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:a("confirm-delete-dialog.error.retry-button.text"),onClick:p,tone:"default"}},onClose:e.onCancel,children:(0,n.jsx)(eg.Box,{padding:4,children:(0,n.jsx)(eg.Text,{size:1,children:a("confirm-delete-dialog.error.message.text")})})}):(0,n.jsx)(eh.ErrorBoundary,{onCatch:u,children:(0,n.jsx)(sM,{...e})}),s[1]=c,s[2]=d,s[3]=e,s[4]=a,s[5]=r):r=s[5],r}let sz=(0,l.forwardRef)(function(e,t){let o,r,s,a,d=(0,i.c)(10);d[0]!==e?({intent:o,...r}=e,d[0]=e,d[1]=o,d[2]=r):(o=d[1],r=d[2]),d[3]!==o?(s=(0,l.forwardRef)(function(e,t){return(0,n.jsx)(eC.IntentLink,{...e,intent:o.type,params:o.params,ref:t,searchParams:o.searchParams})}),d[3]=o,d[4]=s):s=d[4];let c=s;return d[5]!==c||d[6]!==e.disabled||d[7]!==t||d[8]!==r?(a=e.disabled?(0,n.jsx)(eh.Button,{...r,as:"a",role:"link","aria-disabled":"true"}):(0,n.jsx)(eh.Button,{...r,as:c,"data-as":"a",ref:t}),d[5]=c,d[6]=e.disabled,d[7]=t,d[8]=r,d[9]=a):a=d[9],a});function sO(e){let t,l,r,s=(0,i.c)(12),{reveal:a,context:d,loading:c,children:u}=e,p=(0,o.useCurrentUser)(),{t:m}=(0,o.useTranslation)(b);if(!a){let e;return s[0]!==u?(e=(0,n.jsx)(n.Fragment,{children:u}),s[0]=u,s[1]=e):e=s[1],e}return s[2]!==d||s[3]!==p||s[4]!==c||s[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,n.jsx)(o.InsufficientPermissionsMessage,{context:d,currentUser:p}),s[2]=d,s[3]=p,s[4]=c,s[5]=m,s[6]=t):t=s[6],s[7]!==u?(l=(0,n.jsx)("div",{children:u}),s[7]=u,s[8]=l):l=s[8],s[9]!==t||s[10]!==l?(r=(0,n.jsx)(eh.Tooltip,{content:t,portal:!0,children:l}),s[9]=t,s[10]=l,s[11]=r):r=s[11],r}let sB={constrainSize:!0,placement:"bottom",portal:!0},sH=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function s$(e){let t,r,s,a,c,u,p,m,h=(0,i.c)(60),{templateItems:g}=e,f=(0,o.useTemplates)(),{selectedReleaseId:x}=(0,o.usePerspective)(),{t:y}=(0,o.useTranslation)(b);h[0]!==g||h[1]!==f?(t=[...g,...f],h[0]=g,h[1]=f,h[2]=t):t=h[2];let v=(0,o.useGetI18nText)(t);h[3]!==g?(r={templateItems:g},h[3]=g,h[4]=r):r=h[4];let[j,w]=(0,o.useTemplatePermissions)(r),S=!w&&j?.length!==0&&j?.every(sG);e:{let e;if(!j){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e={},h[5]=e):e=h[5],s=e;break e}h[6]!==j?(e=j.reduce(sN,{}),h[6]=j,h[7]=e):e=h[7],s=e}let C=s;if(0===g.length)return null;if(S){let e,t,i;return h[8]!==y?(e=y("pane-header.disabled-created-button.aria-label"),h[8]=y,h[9]=e):e=h[9],h[10]!==e?(t=(0,n.jsx)(eh.Button,{"aria-label":e,icon:d.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),h[10]=e,h[11]=t):t=h[11],h[12]!==w||h[13]!==t?(i=(0,n.jsx)(sO,{context:"create-document-type",reveal:!0,loading:w,children:t}),h[12]=w,h[13]=t,h[14]=i):i=h[14],i}if(1===g.length){let e,t,i,l,o,r,s=g[0],a=!C[s.id]?.granted;h[15]!==s||h[16]!==x||h[17]!==f?(e=sH(f,s,x),h[15]=s,h[16]=x,h[17]=f,h[18]=e):e=h[18];let c=e;if(!c)return null;h[19]!==s||h[20]!==v?(t=v(s),h[19]=s,h[20]=v,h[21]=t):t=h[21];let u=t.title,p=s.icon||d.AddIcon;return h[22]!==y?(i=y("pane-header.create-new-button.tooltip"),h[22]=y,h[23]=i):i=h[23],h[24]!==i?(l={content:i},h[24]=i,h[25]=l):l=h[25],h[26]!==a||h[27]!==c||h[28]!==t.title||h[29]!==p||h[30]!==l?(o=(0,n.jsx)(sz,{"aria-label":u,icon:p,intent:c,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:l}),h[26]=a,h[27]=c,h[28]=t.title,h[29]=p,h[30]=l,h[31]=o):o=h[31],h[32]!==a||h[33]!==w||h[34]!==o?(r=(0,n.jsx)(sO,{reveal:a,loading:w,context:"create-document-type",children:o}),h[32]=a,h[33]=w,h[34]=o,h[35]=r):r=h[35],r}if(h[36]!==y?(a=y("pane-header.create-new-button.tooltip"),h[36]=y,h[37]=a):a=h[37],h[38]!==a?(c=(0,n.jsx)(eh.Button,{icon:d.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:a}}),h[38]=a,h[39]=c):c=h[39],h[40]!==v||h[41]!==w||h[42]!==C||h[43]!==x||h[44]!==y||h[45]!==g||h[46]!==f){let e;h[48]!==v||h[49]!==w||h[50]!==C||h[51]!==x||h[52]!==y||h[53]!==f?(e=(e,t)=>{let i=!C[e.id]?.granted,o=sH(f,e,x),r=f.find(t=>t.id===e.templateId);if(!r||!o)return null;let s=(0,l.forwardRef)((e,t)=>i?(0,n.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,n.jsx)(eC.IntentLink,{...e,intent:o.type,params:o.params,searchParams:o.searchParams,ref:t}));s.displayName="Link";let{title:a}=v({...e,title:e.title||v(r).title});return(0,n.jsx)(sO,{context:"create-document-type",reveal:i,loading:w,children:(0,n.jsx)(eh.MenuItem,{as:s,"data-as":i?"button":"a",text:a,"aria-label":i?y("pane-header.disabled-created-button.aria-label"):a,disabled:i,"data-testid":`action-intent-button-${t}`})},e.id)},h[48]=v,h[49]=w,h[50]=C,h[51]=x,h[52]=y,h[53]=f,h[54]=e):e=h[54],u=g.map(e),h[40]=v,h[41]=w,h[42]=C,h[43]=x,h[44]=y,h[45]=g,h[46]=f,h[47]=u}else u=h[47];return h[55]!==u?(p=(0,n.jsx)(eg.Menu,{children:u}),h[55]=u,h[56]=p):p=h[56],h[57]!==c||h[58]!==p?(m=(0,n.jsx)(eh.MenuButton,{button:c,id:"create-menu",menu:p,popover:sB}),h[57]=c,h[58]=p,h[59]=m):m=h[59],m}function sN(e,t){return e[t.id]=t,e}function sG(e){return!e.granted}function sU(e){return null!=e}let sW=(0,l.memo)(function(e){let t,l,r,s,a,d,c,u,p,m,h=(0,i.c)(28),{initialValueTemplateItems:g,menuItems:f,menuItemGroups:x,actionHandlers:b}=e,y=void 0===g?o.EMPTY_ARRAY:g,v=void 0===f?o.EMPTY_ARRAY:f,j=void 0===x?o.EMPTY_ARRAY:x,w=void 0===b?o.EMPTY_OBJECT:b,S=(0,o.useTemplates)();h[0]!==w?(t=e=>{if("string"==typeof e.action&&!(e.action in w))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?w[e.action]:null;return!!t&&(t(e.params),!0)},h[0]=w,h[1]=t):t=h[1];let C=t;h[2]!==C||h[3]!==j||h[4]!==v?(l=lW({actionHandler:C,menuItemGroups:j,menuItems:v.filter(sq)}),h[2]=C,h[3]=j,h[4]=v,h[5]=l):l=h[5];let _=l;h[6]!==_?(r=_.filter(lG),h[6]=_,h[7]=r):r=h[7];let I=r;h[8]!==_?(s=_.filter(lU),h[8]=_,h[9]=s):s=h[9];let T=s;if(h[10]!==v||h[11]!==S){let e;h[13]!==S?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let r=S.find(e=>e.id===o);return r?{item:e,template:r,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},h[13]=S,h[14]=e):e=h[14],a=v.map(e).filter(sU).map(sK),h[10]=v,h[11]=S,h[12]=a}else a=h[12];let R=a;h[15]!==R||h[16]!==y?(d=(0,e9.default)([...R,...y],sY),h[15]=R,h[16]=y,h[17]=d):d=h[17];let P=d;return h[18]!==P?(c=(0,n.jsx)(s$,{templateItems:P}),h[18]=P,h[19]=c):c=h[19],h[20]!==I?(u=I.map(sX),h[20]=I,h[21]=u):u=h[21],h[22]!==T?(p=T.length>0&&(0,n.jsx)(nX,{nodes:T}),h[22]=T,h[23]=p):p=h[23],h[24]!==c||h[25]!==u||h[26]!==p?(m=(0,n.jsxs)(eg.Flex,{gap:1,children:[c,u,p]}),h[24]=c,h[25]=u,h[26]=p,h[27]=m):m=h[27],m});function sq(e){return e.intent?.type!=="create"}function sK(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}function sY(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function sX(e){return(0,n.jsx)(n8,{node:e},e.key)}function sJ(e){let t,l,r,s,a,d,c,u=(0,i.c)(16),{t:p}=(0,o.useTranslation)(b),{layout:m,value:h}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==h._type?(l={documentType:h._type},u[1]=h._type,u[2]=l):l=u[2],u[3]!==p||u[4]!==l?(r=(0,n.jsx)("em",{children:(0,n.jsx)(o.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:l})}),u[3]=p,u[4]=l,u[5]=r):r=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(s={Code:"code"},u[6]=s):s=u[6],u[7]!==h._id?(a={documentId:h._id},u[7]=h._id,u[8]=a):a=u[8],u[9]!==p||u[10]!==a?(d=(0,n.jsx)(o.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:s,values:a}),u[9]=p,u[10]=a,u[11]=d):d=u[11],u[12]!==m||u[13]!==r||u[14]!==d?(c=(0,n.jsx)(o.SanityDefaultPreview,{title:r,subtitle:d,media:sZ,layout:m}),u[12]=m,u[13]=r,u[14]=d,u[15]=c):c=u[15],c}function sZ(){return(0,n.jsx)(d.WarningOutlineIcon,{})}function sQ(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function s0(e){let t,r,s,a,c,u,p,m,h=(0,i.c)(42),{icon:g,id:f,layout:x,pressed:b,schemaType:y,selected:v,title:j,value:w,margin:S,marginBottom:C,marginTop:_}=e,I=void 0===x?"default":x,T=(0,o.useSchema)(),R=(0,o.useDocumentPreviewStore)(),{ChildLink:P}=ln(),E=(0,o.useDocumentPresence)(f),k=!!(y&&y.name&&T.get(y.name)),[D,F]=(0,l.useState)(!1);e:{let e,i,l,r;if(w&&(0,ex.isSanityDocument)(w)){let e,i;if(!y||!k){let e;h[0]!==w?(e=(0,n.jsx)(sJ,{value:w}),h[0]=w,h[1]=e):e=h[1],t=e;break e}h[2]!==g||h[3]!==y?(e=sQ(g,y,d.DocumentIcon),h[2]=g,h[3]=y,h[4]=e):e=h[4],h[5]!==E||h[6]!==R||h[7]!==I||h[8]!==y||h[9]!==e||h[10]!==w?(i=(0,n.jsx)(sy,{documentPreviewStore:R,icon:e,layout:I,schemaType:y,value:w,presence:E}),h[5]=E,h[6]=R,h[7]=I,h[8]=y,h[9]=e,h[10]=w,h[11]=i):i=h[11],t=i;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(eg.Box,{style:e,children:(0,n.jsx)(eg.Text,{muted:!0,size:1,children:(0,n.jsx)(d.ChevronRightIcon,{})})}),h[13]=i):i=h[13],h[14]!==g||h[15]!==y?(l=sQ(g,y,d.FolderIcon),h[14]=g,h[15]=y,h[16]=l):l=h[16],h[17]!==l||h[18]!==j?(r=(0,n.jsx)(o.SanityDefaultPreview,{status:i,icon:l,layout:"compact",title:j}),h[17]=l,h[18]=j,h[19]=r):r=h[19],t=r}let A=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.metaKey?F(!1):F(!0)},h[20]=r):r=h[20];let V=r;h[21]===Symbol.for("react.memo_cache_sentinel")?(s=()=>F(!1),h[21]=s):s=h[21],h[22]!==v?(a=[v],h[22]=v,h[23]=a):a=h[23],(0,l.useEffect)(s,a);let[M,L]=(0,l.useState)(!1),z=(0,l.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{z.current=setTimeout(()=>(0,l.startTransition)(()=>L(!0)),400)},h[24]=c):c=h[24];let O=c;h[25]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{z.current&&clearTimeout(z.current),(0,l.startTransition)(()=>L(!1))},h[25]=u):u=h[25];let B=u,H=`pane-item-${j}`,$=v||D;return h[26]!==f||h[27]!==M||h[28]!==y||h[29]!==w?(p=M&&y?.name&&w&&(0,ex.isSanityDocument)(w)&&(0,n.jsx)(s1,{documentId:f,documentType:y.name}),h[26]=f,h[27]=M,h[28]=y,h[29]=w,h[30]=p):p=h[30],h[31]!==f||h[32]!==S||h[33]!==C||h[34]!==_||h[35]!==b||h[36]!==A||h[37]!==p||h[38]!==H||h[39]!==P||h[40]!==$?(m=(0,n.jsxs)(o.PreviewCard,{"data-testid":H,__unstable_focusRing:!0,as:P,childId:f,"data-as":"a",margin:S,marginBottom:C,marginTop:_,onClick:V,onMouseEnter:O,onMouseLeave:B,pressed:b,radius:2,selected:$,sizing:"border",tabIndex:-1,tone:"inherit",children:[A,p]}),h[31]=f,h[32]=S,h[33]=C,h[34]=_,h[35]=b,h[36]=A,h[37]=p,h[38]=H,h[39]=P,h[40]=$,h[41]=m):m=h[41],m}function s1(e){let t,n=(0,i.c)(2),{documentId:l,documentType:s}=e;return n[0]!==l?(t=(0,r.getPublishedId)(l),n[0]=l,n[1]=t):t=n[1],(0,o.useEditState)(t,s),null}s1.displayName="PreloadDocumentPane";let s2=(0,l.memo)(e=>{let t,n=(0,i.c)(4),{children:o,group:r}=e,a=(0,l.useContext)(s.DocumentActionsStateContext);if(null===a)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==o||n[1]!==r||n[2]!==a?(t=o({states:r?a.filter(e=>(e.group||["default"]).includes(r)):a}),n[0]=o,n[1]=r,n[2]=a,n[3]=t):t=n[3],t});s2.displayName="Memo(RenderActionCollectionState)";let s3=(0,l.memo)(e=>{let t,l=(0,i.c)(4),{badges:r,children:s,badgeProps:a}=e;return l[0]!==a||l[1]!==r||l[2]!==s?(t=(0,n.jsx)(o.GetHookCollectionState,{hooks:r,args:a,children:s}),l[0]=a,l[1]=r,l[2]=s,l[3]=t):t=l[3],t});s3.displayName="Memo(RenderBadgeCollectionState)";let s4={by:[{field:"_updatedAt",direction:"desc"}]},s5={},s6=(0,ey.styled)(eg.Box)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,s8=(0,ey.styled)(eg.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,s7=[...Array(30).keys()];function s9(e){let t,l,r=(0,i.c)(4),{layout:s}=e;return r[0]!==s?(t=s7.map(e=>(0,n.jsx)(o.SanityDefaultPreview,{isPlaceholder:!0,layout:s},e)),r[0]=s,r[1]=t):t=r[1],r[2]!==t?(l=(0,n.jsx)(eg.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),r[2]=t,r[3]=l):l=r[3],l}function ae(e){let t,s,a,d,c,u,p,m=(0,i.c)(66),{childItemId:h,error:g,isRetrying:f,autoRetry:x,filterIsSimpleTypeConstraint:y,hasMaxItems:v,hasSearchQuery:j,isActive:w,isLazyLoading:S,muted:C,isLoading:_,isConnected:I,retryCount:T,canRetry:R,items:P,layout:E,loadingVariant:k,onEndReached:D,onRetry:F,paneTitle:A,searchInputElement:V,showIcons:M}=e,L=(0,o.useSchema)(),{collapsed:z}=nA(),{collapsed:O,index:B}=nB(),[H,$]=(0,l.useState)(!O),{t:N}=(0,o.useTranslation)(b);m[0]!==D||m[1]!==H?(t=()=>{H&&D()},m[0]=D,m[1]=H,m[2]=t):t=m[2];let G=t;m[3]!==O?(s=()=>{if(O)return;let e=setTimeout(()=>{$(!0)},0);return()=>{clearTimeout(e)}},m[3]=O,m[4]=s):s=m[4],m[5]!==O||m[6]!==P?(a=[O,P],m[5]=O,m[6]=P,m[7]=a):a=m[7],(0,l.useEffect)(s,a),m[8]!==h||m[9]!==v||m[10]!==w||m[11]!==S||m[12]!==P.length||m[13]!==E||m[14]!==L||m[15]!==M||m[16]!==N?(d=(e,t)=>{let{activeIndex:i}=t,l=(0,r.getPublishedId)(e._id),s=h===l,a=!w&&s,d=w&&s,c=i===P.length-1,u=c&&S,p=c&&v;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s0,{icon:!1!==M&&void 0,id:l,layout:E,marginBottom:1,pressed:a,schemaType:L.get(e._type),selected:d,value:e}),u&&(0,n.jsx)(o.LoadingBlock,{}),p&&(0,n.jsx)(eg.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,n.jsx)(eg.Text,{align:"center",muted:!0,size:1,children:N("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=h,m[9]=v,m[10]=w,m[11]=S,m[12]=P.length,m[13]=E,m[14]=L,m[15]=M,m[16]=N,m[17]=d):d=m[17];let U=d;e:{let e,t;if(j){let e,t;m[18]!==N?(e=N("panes.document-list-pane.no-documents.text"),m[18]=N,m[19]=e):e=m[19],m[20]!==e?(t=(0,n.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(eg.Container,{width:1,children:(0,n.jsx)(eg.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(eg.Text,{align:"center",muted:!0,children:e})})})}),m[20]=e,m[21]=t):t=m[21],c=t;break e}m[22]!==y||m[23]!==N?(e=N(y?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[22]=y,m[23]=N,m[24]=e):e=m[24],m[25]!==e?(t=(0,n.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(eg.Container,{width:1,children:(0,n.jsx)(eg.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(eg.Text,{align:"center",muted:!0,children:e})})})}),m[25]=e,m[26]=t):t=m[26],c=t}let W=c;t:{let e,t;if(!H){u=null;break t}let i=window.navigator.onLine;if(g){let e,t,l,r,s,a,d;m[27]!==N?(e=N("panes.document-list-pane.error.title"),m[27]=N,m[28]=e):e=m[28],m[29]!==e?(t=(0,n.jsx)(eg.Heading,{as:"h3",children:e}),m[29]=e,m[30]=t):t=m[30],m[31]!==g||m[32]!==N?(l=o.isDev?(0,n.jsx)(o.Translate,{t:N,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:g.message},components:{Code:at}}):N(i?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[31]=g,m[32]=N,m[33]=l):l=m[33],m[34]!==l?(r=(0,n.jsx)(eg.Text,{as:"p",children:l}),m[34]=l,m[35]=r):r=m[35];let c=i&&R?F:void 0;m[36]!==g||m[37]!==f||m[38]!==c?(s=(0,n.jsx)(o.ErrorActions,{error:g,eventId:null,onRetry:c,isRetrying:f}),m[36]=g,m[37]=f,m[38]=c,m[39]=s):s=m[39],m[40]!==x||m[41]!==R||m[42]!==f||m[43]!==T||m[44]!==N?(a=R?(0,n.jsx)(eg.Text,{as:"p",muted:!0,size:1,children:f?N("panes.document-list-pane.error.retrying",{count:T}):x?N("panes.document-list-pane.error.will-retry-automatically",{count:T}):N("panes.document-list-pane.error.max-retries-attempted",{count:T})}):null,m[40]=x,m[41]=R,m[42]=f,m[43]=T,m[44]=N,m[45]=a):a=m[45],m[46]!==s||m[47]!==a||m[48]!==t||m[49]!==r?(d=(0,n.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(eg.Container,{width:1,children:(0,n.jsxs)(eg.Stack,{paddingX:4,paddingY:5,space:4,children:[t,r,s,a]})})}),m[46]=s,m[47]=a,m[48]=t,m[49]=r,m[50]=d):d=m[50],u=d;break t}if(I&&!_&&0===P.length){u=W;break t}if("initial"===k&&_){let e;m[51]!==E?(e=(0,n.jsx)(is,{ms:300,children:(0,n.jsx)(s9,{layout:E})}),m[51]=E,m[52]=e):e=m[52],u=e;break t}if("spinner"===k&&_){u=null;break t}let l=`${B}-${O}`,r=C?.8:1;m[53]!==G||m[54]!==P||m[55]!==l||m[56]!==A||m[57]!==U||m[58]!==V?(e=(0,n.jsx)(s8,{children:(0,n.jsx)(o.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:A,canReceiveFocus:!0,inputElement:V,itemHeight:51,items:P,onEndReached:G,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:U,wrapAround:!1},l)}),m[53]=G,m[54]=P,m[55]=l,m[56]=A,m[57]=U,m[58]=V,m[59]=e):e=m[59],m[60]!==r||m[61]!==e?(t=(0,n.jsx)(s6,{overflow:"hidden",height:"fill",$opacity:r,children:e}),m[60]=r,m[61]=e,m[62]=t):t=m[62],u=t}let q=u,K=z||"initial"===k?"hidden":"auto";return m[63]!==q||m[64]!==K?(p=(0,n.jsx)(nH,{"data-testid":"document-list-pane",overflow:K,children:q}),m[63]=q,m[64]=K,m[65]=p):p=m[65],p}function at(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function an(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tS.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let ai=(0,o.createSWR)({maxSize:100});function al(e){let{client:t,schema:n,sort:i,perspective:l,limit:r,params:s,filter:a,searchQuery:d,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,e1.defer)(()=>t.listen(`*[${a}]`,s,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,e$.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,e2.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,e2.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,eW.of)(e)}),(0,eN.share)()),[f,x]=(0,e3.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:a,limit:r,params:s,searchQuery:d,perspective:l,sort:i,staticTypeNames:c});return(0,eq.merge)(f,x.pipe((0,e4.throttleTime)(1e3,e5.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tI.exhaustMapWithTrailing)(e=>(c?(0,eW.of)(c):t.observable.fetch(`array::unique(*[${a}][]._type)`,s)).pipe((0,e$.mergeMap)(g=>{let f=(0,o.getSearchableTypes)(n,c||[]).filter(e=>!!g.includes(e.name)&&(j(e,i.by,!0),!0)),x=(0,o.createSearch)(f,t,{filter:a,params:s,strategy:p,maxDepth:u}),b=()=>x({query:d||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${d?"list-query":"list"}`],limit:r,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,eE.map)(e=>e.hits.map(({hit:e})=>e)),(0,eE.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,eQ.timer)(1200).pipe((0,e$.mergeMap)(b)):"reconnect"===e.type?(0,eW.of)(e):b()}))),(0,ez.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,eB.filter)(e=>null!==e),ai(b),(0,eE.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let ao={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function ar(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,o.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function as(e){return{type:"result",result:e}}function aa(e){return{type:"result",result:e}}function ad(e){let[,t]=e;return t?.documents.length===100}function ac(){return(0,t_.observableCallback)()}function au(){return(0,t_.observableCallback)()}let ap="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",am=ey.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ah=ey.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,ag=(0,ey.styled)(d.SpinnerIcon)`
  animation: ${am} 500ms linear infinite;
`,af=(0,ey.styled)(d.SpinnerIcon)`
  animation: ${am} 1500ms linear infinite;
  opacity: 0.4;
`,ax=(0,ey.styled)(d.SpinnerIcon)`
  animation:
    ${am} 1500ms linear infinite,
    ${ah} 1000ms linear;
  opacity: 0.4;
`,ab=(0,l.memo)(function(e){var t;let r,s,a,c,u,p,m,h,g,f,x,y,v,j,w,S,C,_,I,T,R,P=(0,i.c)(69),{childItemId:E,isActive:k,pane:D,paneKey:F,sortOrder:A,layout:V}=e,M=(0,o.useSchema)(),L=(0,o.useActiveReleases)(),{perspectiveStack:z}=(0,o.usePerspective)(),{displayOptions:O,options:B}=D,{apiVersion:H,filter:$}=B,N=aY(B.params||s5);e:{let e;P[0]!==$||P[1]!==N?(e=an($,N),P[0]=$,P[1]=N,P[2]=e):e=P[2];let t=e;if(t?.length===1){r=t[0];break e}r=null}let G=r,U=O?.showIcons!==!1,{t:W}=(0,o.useTranslation)(b),{title:q}=(0,o.useI18nText)(D),[K,Y]=(0,l.useState)(""),[X,J]=(0,l.useState)(""),[Z,Q]=(0,l.useState)(null);P[3]!==M||P[4]!==A||P[5]!==G?(s=G&&A?(t=M.get(G),(R=A.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=e7.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,ex.isKeySegment)(e)||(0,ex.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,ex.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===A.by[t])?A:{...A,by:R}):A,P[3]=M,P[4]=A,P[5]=G,P[6]=s):s=P[6];let ee=(0,o.useUnique)(s),et=H||o.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;P[7]!==et?(a={...o.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:et},P[7]=et,P[8]=a):a=P[8];let en=(0,o.useClient)(a);P[9]!==K?(c=K?.trim(),P[9]=K,P[10]=c):c=P[10],P[11]!==en||P[12]!==$||P[13]!==N||P[14]!==z||P[15]!==ee||P[16]!==c?(u={client:en,filter:$,perspective:z,params:N,searchQuery:c,sortOrder:ee},P[11]=en,P[12]=$,P[13]=N,P[14]=z,P[15]=ee,P[16]=c,P[17]=u):u=P[17];let{error:ei,isLoadingFullList:el,isLoading:eo,items:er,fromCache:es,isRetrying:ea,autoRetry:ed,canRetry:ec,retryCount:eu,connected:ep,onLoadFullList:em,onRetry:eh}=function(e){let t,n,r,s=(0,i.c)(31),{client:a,filter:d,params:c,sortOrder:u,searchQuery:p,perspective:m}=e,{strategy:h}=(0,o.useWorkspace)().search,g=(0,o.useSchema)(),f=(0,o.useSearchMaxFieldDepth)();s[0]!==c||s[1]!==d?(t=an(d,c),s[0]=c,s[1]=d,s[2]=t):t=s[2];let x=t,[b]=(0,l.useState)(au),[y,v]=b,[j]=(0,l.useState)(ac),[w,S]=j,C=p||"",_=u||s4;if(s[3]!==a||s[4]!==f||s[5]!==w||s[6]!==y||s[7]!==c||s[8]!==m||s[9]!==g||s[10]!==d||s[11]!==h||s[12]!==C||s[13]!==_||s[14]!==x){let e,t={client:a,filter:d,limit:100,params:c,schema:g,perspective:m,searchQuery:C,sort:_,staticTypeNames:x,maxFieldDepth:f,searchStrategy:h},i=al(t).pipe((0,eL.shareReplay)({refCount:!0,bufferSize:1})),l=w.pipe((0,eO.withLatestFrom)(i),(0,eB.filter)(ad),(0,eH.take)(1),(0,e$.mergeMap)(()=>(0,eK.concat)((0,eW.of)({type:"loadFullList"}),al({...t,limit:2e3}).pipe((0,eE.map)(aa)))),(0,eN.share)());s[16]!==y?(e=(e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${ap}`):Error(`${String(l)} ${ap}`),r=window.navigator.onLine,s=r&&!((i=e)instanceof tC.ChannelError)&&(i instanceof tC.ServerError||!(i instanceof tC.ClientError)||403===i.statusCode),a=t<10,d=(0,eq.merge)(r?y:(0,eZ.fromEvent)(window,"online"),r&&a?(0,eQ.timer)(1e3*t):e6.NEVER).pipe((0,eH.take)(1),(0,eM.switchMap)(()=>(0,eq.merge)((0,eW.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,eK.concat)((0,eW.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},s[16]=y,s[17]=e):e=s[17],n=(0,eq.merge)(i.pipe((0,eE.map)(as),(0,eG.takeUntil)(l)),l).pipe((0,o.catchWithCount)(e),(0,ez.scan)(ar,ao)),s[3]=a,s[4]=f,s[5]=w,s[6]=y,s[7]=c,s[8]=m,s[9]=g,s[10]=d,s[11]=h,s[12]=C,s[13]=_,s[14]=x,s[15]=n}else n=s[15];let I=n,{error:T,items:R,isLoading:P,fromCache:E,connected:k,canRetry:D,isLoadingFullList:F,isRetrying:A,autoRetry:V,retryCount:M}=(0,eS.useObservable)(I,ao);return s[18]!==V||s[19]!==D||s[20]!==k||s[21]!==T||s[22]!==E||s[23]!==P||s[24]!==F||s[25]!==A||s[26]!==R||s[27]!==S||s[28]!==v||s[29]!==M?(r={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:D,retryCount:M,autoRetry:V,connected:k,fromCache:E,onLoadFullList:S,isLoadingFullList:F},s[18]=V,s[19]=D,s[20]=k,s[21]=T,s[22]=E,s[23]=P,s[24]=F,s[25]=A,s[26]=R,s[27]=S,s[28]=v,s[29]=M,s[30]=r):r=s[30],r}(u),ef=eo||L.loading;P[18]===Symbol.for("react.memo_cache_sentinel")?(p=e=>e.pipe((0,eE.map)(ay),(0,eA.tap)(J),(0,e8.debounce)(av),(0,eA.tap)(Y)),P[18]=p):p=P[18];let eb=(0,eS.useObservableEvent)(p);P[19]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{Y(""),J("")},P[19]=m):m=P[19];let ey=m;P[20]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{"Escape"===e.key&&ey()},P[20]=h):h=P[20];let ev=h,[ej,ew]=(0,l.useState)();P[21]!==ej||P[22]!==ef||P[23]!==F?(f=()=>{ej||ef||ew(F)},g=[ej,ef,F],P[21]=ej,P[22]=ef,P[23]=F,P[24]=g,P[25]=f):(g=P[24],f=P[25]),(0,l.useEffect)(f,g),P[26]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{ey(),ew()},P[26]=x):x=P[26],P[27]!==F?(y=[F,ey],P[27]=F,P[28]=y):y=P[28],(0,l.useEffect)(x,y);t:{if(ep&&ef&&ej===F){v="spinner";break t}if(ep&&es){v="subtle";break t}v="initial"}let eC=v;n:{if("spinner"===eC){j=ag;break n}if(X&&"subtle"===eC){j=af;break n}j=d.SearchIcon}let e_=j;(0,o.useReconnectingToast)(!ep),P[29]!==W?(w=W("panes.document-list-pane.search-input.aria-label"),P[29]=W,P[30]=w):w=P[30];let eI=!!K;P[31]===Symbol.for("react.memo_cache_sentinel")?(S=[2,2,1],P[31]=S):S=P[31];let eT=ep&&("subtle"!==eC||X)?null:ax;P[32]!==W?(C=W("panes.document-list-pane.search-input.placeholder"),P[32]=W,P[33]=C):C=P[33],P[34]!==eb||P[35]!==X||P[36]!==w||P[37]!==eI||P[38]!==eT||P[39]!==C||P[40]!==e_?(_=(0,n.jsx)(eg.Box,{paddingX:3,paddingBottom:3,children:(0,n.jsx)(eg.TextInput,{"aria-label":w,autoComplete:"off",border:!1,clearButton:eI,fontSize:S,icon:e_,iconRight:eT,onChange:eb,onClear:ey,onKeyDown:ev,padding:2,placeholder:C,radius:2,ref:Q,spellCheck:!1,value:X})}),P[34]=eb,P[35]=X,P[36]=w,P[37]=eI,P[38]=eT,P[39]=C,P[40]=e_,P[41]=_):_=P[41];let eR=!!G,eP=2e3===er.length,ek=!!K,eD="subtle"===eC;return P[42]!==ed||P[43]!==ec||P[44]!==E||P[45]!==ep||P[46]!==ei||P[47]!==k||P[48]!==ef||P[49]!==el||P[50]!==ea||P[51]!==er||P[52]!==V||P[53]!==eC||P[54]!==em||P[55]!==eh||P[56]!==F||P[57]!==eu||P[58]!==Z||P[59]!==U||P[60]!==eR||P[61]!==eP||P[62]!==ek||P[63]!==eD||P[64]!==q?(I=(0,n.jsx)(ae,{childItemId:E,error:ei,filterIsSimpleTypeConstraint:eR,hasMaxItems:eP,hasSearchQuery:ek,isActive:k,isLazyLoading:el,isLoading:ef,autoRetry:ed,canRetry:ec,retryCount:eu,isRetrying:ea,isConnected:ep,items:er,layout:V,muted:eD,loadingVariant:eC,onEndReached:em,onRetry:eh,paneTitle:q,searchInputElement:Z,showIcons:U},F),P[42]=ed,P[43]=ec,P[44]=E,P[45]=ep,P[46]=ei,P[47]=k,P[48]=ef,P[49]=el,P[50]=ea,P[51]=er,P[52]=V,P[53]=eC,P[54]=em,P[55]=eh,P[56]=F,P[57]=eu,P[58]=Z,P[59]=U,P[60]=eR,P[61]=eP,P[62]=ek,P[63]=eD,P[64]=q,P[65]=I):I=P[65],P[66]!==_||P[67]!==I?(T=(0,n.jsxs)(n.Fragment,{children:[_,I]}),P[66]=_,P[67]=I,P[68]=T):T=P[68],T});function ay(e){return e.target.value}function av(e){return""===e?(0,eW.of)(""):(0,eQ.timer)(300)}let aj=(0,l.memo)(e=>{let t,l,o,r,s,a,c,u,p,m=(0,i.c)(27),{contentAfter:h,index:g,initialValueTemplates:f,menuItemGroups:x,menuItems:b,setLayout:y,setSortOrder:v,title:j}=e;m[0]!==f?(t=void 0===f?[]:f,m[0]=f,m[1]=t):t=m[1];let w=t;m[2]!==x?(l=void 0===x?[]:x,m[2]=x,m[3]=l):l=m[3];let S=l;m[4]!==b?(o=void 0===b?[]:b,m[4]=b,m[5]=o):o=m[5];let C=o,{features:_}=ib(),{collapsed:I,isLast:T}=nB(),R=T&&!I?-1:0;m[6]!==y?(r=e=>{let{layout:t}=e;y(t)},m[6]=y,m[7]=r):r=m[7],m[8]!==v?(s=e=>{v(e)},m[8]=v,m[9]=s):s=m[9],m[10]!==r||m[11]!==s?(a={setLayout:r,setSortOrder:s},m[10]=r,m[11]=s,m[12]=a):a=m[12];let P=a;return m[13]!==P||m[14]!==w||m[15]!==S||m[16]!==C?(c=(0,n.jsx)(sW,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:C}),m[13]=P,m[14]=w,m[15]=S,m[16]=C,m[17]=c):c=m[17],m[18]!==_.backButton||m[19]!==g?(u=_.backButton&&g>0&&(0,n.jsx)(eh.Button,{as:sn,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),m[18]=_.backButton,m[19]=g,m[20]=u):u=m[20],m[21]!==h||m[22]!==c||m[23]!==u||m[24]!==R||m[25]!==j?(p=(0,n.jsx)(eh.TooltipDelayGroupProvider,{children:(0,n.jsx)(n5,{actions:c,backButton:u,contentAfter:h,tabIndex:R,title:j})}),m[21]=h,m[22]=c,m[23]=u,m[24]=R,m[25]=j,m[26]=p):p=m[26],p});function aw(e){let{row:t,table:i}=e,{selectedAnchor:o,setSelectedAnchor:r}=i.options.meta||{},s=(0,l.useCallback)(e=>{if(e.shiftKey&&null!=o){let e=t.index,n=e<o?e:o,l=e<o?o:e,r=i.getRowModel().flatRows.slice(n,l+1).map(({id:e})=>e),s=i.getSelectedRowModel().rows.map(({id:e})=>e);i.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[o,t,r,i]);return(0,n.jsx)(eg.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:s})}function aS(e){let t,o,r,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(49),{children:S,table:C}=e,[_,I]=(0,l.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,l.useState)(t);w[1]!==_?.state?(o=e=>{_?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),I(void 0===e?null:e),R([])},w[1]=_?.state,w[2]=o):o=w[2];let P=o;w[3]!==P?(r=()=>P(),w[3]=P,w[4]=r):r=w[4];let E=r;w[5]!==P||w[6]!==_||w[7]!==C?(a=e=>{if(!_)return;let t=C.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===_.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:_.rowIndex,state:"selected"})},w[5]=P,w[6]=_,w[7]=C,w[8]=a):a=w[8];let k=a;w[9]!==_?(d=e=>{_&&R(t=>{let{rowIndex:n}=_,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=_,w[10]=d):d=w[10];let D=d;w[11]!==P?(c=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=c):c=w[12];let F=c;w[13]!==P||w[14]!==_||w[15]!==T.length?(u=()=>{_&&(T.length?R([]):P("selected"===_.state?null:{..._,state:"selected"}))},w[13]=P,w[14]=_,w[15]=T.length,w[16]=u):u=w[16];let A=u;w[17]!==D||w[18]!==_||w[19]!==F?(p=(e,t)=>{if(!_)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)D(n);else{let e=_.rowIndex+i;if(e<0)return;F(_.colId,e)}},w[17]=D,w[18]=_,w[19]=F,w[20]=p):p=w[20];let V=p;w[21]!==k||w[22]!==A||w[23]!==V||w[24]!==_?(m=e=>{if(!_)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),V(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===_.state&&(e.preventDefault(),k("ArrowLeft"===t?"left":"right"))}},w[21]=k,w[22]=A,w[23]=V,w[24]=_,w[25]=m):m=w[25];let M=m;w[26]!==E||w[27]!==_?(h=e=>{_&&(document.getElementById(`cell-${_.colId}-${_.rowIndex}`)?.contains(e.target)||E())},w[26]=E,w[27]=_,w[28]=h):h=w[28];let L=h;w[29]!==L||w[30]!==M||w[31]!==_?(g=()=>(_&&(document.addEventListener("keydown",M),document.addEventListener("click",L)),()=>{_&&(document.removeEventListener("keydown",M),document.removeEventListener("click",L))}),f=[L,M,_],w[29]=L,w[30]=M,w[31]=_,w[32]=g,w[33]=f):(g=w[32],f=w[33]),(0,l.useEffect)(g,f),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>I(aC),w[34]=x):x=w[34];let z=x;w[35]!==_||w[36]!==T?(b=(e,t)=>_?.colId!==e?null:_.rowIndex===t?"focused"===_.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=_,w[36]=T,w[37]=b):b=w[37];let O=b;w[38]!==P||w[39]!==_?(y=()=>{_&&P({colId:_.colId,rowIndex:_.rowIndex+1,state:"selected"})},w[38]=P,w[39]=_,w[40]=y):y=w[40];let B=y;w[41]!==O||w[42]!==E||w[43]!==F||w[44]!==B?(v={focusAnchorCell:z,resetFocusSelection:E,setSelectedAnchorCell:F,getStateByCellId:O,submitFocusedCell:B},w[41]=O,w[42]=E,w[43]=F,w[44]=B,w[45]=v):v=w[45];let H=v;return w[46]!==S||w[47]!==H?(j=(0,n.jsx)(s.DocumentSheetListContext.Provider,{value:H,children:S}),w[46]=S,w[47]=H,w[48]=j):j=w[48],j}function aC(e){return e?{...e,state:"focused"}:null}aj.displayName="Memo(PaneHeader)";let a_=ey.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,aI=(0,ey.styled)(a_)`
  position: sticky;
  z-index: 2;
`;function aT(e){let{getValue:t,column:i,row:o,fieldType:r}=e,a=`cell-${i.id}-${o.index}`,[d,c]=(0,l.useState)(()=>t()),[u,p]=(0,l.useState)(!1),m=(0,l.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:x,submitFocusedCell:b}=(()=>{let e=(0,l.useContext)(s.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),y=x(i.id,o.index),v=(0,l.useCallback)(()=>{f(i.id,o.index),h()},[i.id,h,o.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,l.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&w(),"focused"===y&&b())},[y,b]),C=(0,l.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(c(t),j?.(o.id,i.id,t))},[i.id,j,o.id]),_=(0,l.useCallback)(()=>navigator.clipboard.writeText(d.toString()),[d]);(0,l.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",C),"selectedAnchor"===y&&document.addEventListener("copy",_),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",C),"selectedAnchor"===y&&document.removeEventListener("copy",_)}),[a,y,i.id,x,_,S,C,o.index]);let I=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",T={onFocus:v,onBlur:()=>{u&&(j?.(o.id,i.id,d),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(i.id,o.index))},"aria-selected":!!y,"data-testid":a,id:a,ref:e=>{m.current=e}};return"boolean"===r.name?(0,n.jsxs)(eg.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:I(),padding:0},value:JSON.stringify(d),children:[(0,n.jsx)("option",{value:"True",children:"True"}),(0,n.jsx)("option",{value:"False",children:"False"})]}):(0,n.jsx)(eg.TextInput,{...T,size:0,radius:0,border:!1,style:{border:I(),padding:"22px 16px"},value:"string"==typeof d||"number"==typeof d?d:JSON.stringify(d),onChange:e=>{p(!0),c(e.target.value)}})}function aR(e){let t=e.column.getIsPinned(),i=t&&e.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(t?aI:a_,{style:{left:e.column.getStart("left")??void 0,borderRight:`${i}px solid var(--card-border-color)`},width:e.column.getSize(),children:ni(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let aP=e=>{let{documentPreviewStore:t,row:i,schemaType:r}=e,s=(0,l.useMemo)(()=>(0,o.getPreviewStateObservable)(t,r,i.original._id),[t,i.original._id,r]),a=(0,o.useDocumentVersionInfo)(i.original._id),{snapshot:d,isLoading:c}=(0,eS.useObservable)(s,{snapshot:null,isLoading:!0});if(c)return(0,n.jsx)(eg.Text,{size:1,muted:!0,children:"Loading..."});let u=d?.title??"Untitled";return(0,n.jsxs)(eg.Flex,{align:"center",gap:3,children:[(0,n.jsx)(o.DocumentStatusIndicator,{draft:a.draft,published:a.published,versions:void 0}),(0,n.jsx)(eg.Text,{size:1,children:u})]})},aE=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},ak=["string","number","boolean"],aD=(e,t)=>e.fields.reduce((e,i)=>{let{type:l,name:o}=i;return ak.includes(l.name)?[...e,aE(t?`${t}.${i.name}`:i.name,{id:t?`${t}_${i.name}`:i.name,header:i.type.title,enableHiding:!0,cell:e=>(0,n.jsx)(aT,{...e,fieldType:l})})]:"object"===l.name&&(0,ex.isObjectSchemaType)(l)&&!t?[...e,{header:o,columns:aD(l,i.name)}]:e},[]),aF=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?aF(e.columns):[]);function aA({table:e}){let{t}=(0,o.useTranslation)(),i=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,r=(0,l.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,n.jsx)(eh.MenuButton,{button:(0,n.jsx)(eh.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,n.jsx)(eg.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,n.jsxs)(eg.Flex,{direction:"column",height:"fill",gap:3,children:[(0,n.jsx)(eg.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,n.jsx)(eg.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,n.jsx)(eg.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let l,o,r=t.id.replace(/ /g,"-");return(0,n.jsxs)(eg.Flex,{marginY:2,align:"center",children:[(0,n.jsx)(eg.Checkbox,{readOnly:(l=t.getIsVisible(),o=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,i&&!l||o&&l),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${r}`,style:{display:"block"}}),(0,n.jsx)(eg.Box,{flex:1,paddingLeft:3,children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)("label",{htmlFor:`col-visibility-${r}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,n.jsx)(eh.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:r})]})}),placement:"bottom",popover:{portal:!0}})}let aV=(0,ey.styled)(eg.Flex)`
  flex-shrink: 0;
`;function aM(){let e,t,l,r=(0,i.c)(5),{state:s}=(0,o.useSearchState)(),{filtersVisible:a}=s;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.SearchHeader,{}),r[0]=e):e=r[0],r[1]!==a?(t=a&&(0,n.jsx)(o.Filters,{showTypeFilter:!1}),r[1]=a,r[2]=t):t=r[2],r[3]!==t?(l=(0,n.jsxs)(aV,{children:[e,t]}),r[3]=t,r[4]=l):l=r[4],l}let aL=ey.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,az=(0,ey.styled)(aL)`
  position: sticky;
  z-index: 2;
`,aO=ey.styled.div`
  visibility: hidden;

  ${aL}:hover & {
    visibility: visible;
  }
`;function aB(e){let{header:t,headerGroup:i}=e,{t:l}=(0,o.useTranslation)(),r=t.column.getIsPinned(),s=i.depth>0&&!t.column.parent?null:(0,n.jsx)(eg.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:ni(t.column.columnDef.header,t.getContext())}),a=t.column.getCanHide()&&(0===i.depth?!t.column.columns.length:t.column.parent),c=r&&t.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(r?az:aL,{style:{left:t.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,n.jsxs)(eg.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,n.jsx)(eh.Tooltip,{delay:500,content:s,children:(0,n.jsx)(eg.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),a&&(0,n.jsx)(aO,{children:(0,n.jsx)(eh.MenuButton,{button:(0,n.jsx)(eh.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:d.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,n.jsx)(eg.Menu,{children:(0,n.jsx)(eh.MenuItem,{text:l("sheet-list.hide-field"),icon:d.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function aH({table:e}){return(0,n.jsx)(eh.TooltipDelayGroupProvider,{children:(0,n.jsxs)(eg.Flex,{gap:3,align:"center",children:[(0,n.jsx)(eh.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:d.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,n.jsx)(eh.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:d.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,n.jsxs)(eg.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,n.jsx)(eh.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:d.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,n.jsx)(eh.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:d.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,n.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})})}function a$(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let aN={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},aG=(0,ey.styled)(eg.Flex)`
  height: 100%;
`,aU=ey.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,aW=ey.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function aq({documentSchemaType:e}){let{dispatch:t,state:s}=(0,o.useSearchState)(),{columns:a,initialColumnsVisibility:d}=function(e){let t=(0,o.useDocumentPreviewStore)(),i=(0,l.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,n.jsxs)(eg.Box,{children:[(0,n.jsx)(eg.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:aw},aE("Preview",{enableHiding:!1,id:"Preview",cell:i=>(0,n.jsx)(aP,{...i,documentPreviewStore:t,schemaType:e})}),...aD(e)]:[],[t,e]),[r]=(0,l.useMemo)(()=>aF(i).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[i]);return{columns:i,initialColumnsVisibility:r}}(e),{data:c}=function(e){let t,n,s,a,d=(0,i.c)(12),{typeName:c}=e,{state:u}=(0,o.useSearchState)();d[0]!==u.result.hits?(t=new Map,u.result.hits.forEach(e=>t.set((0,r.getPublishedId)(e.hit._id),e.hit)),d[0]=u.result.hits,d[1]=t):t=d[1];let p=t,m=`_type == "${c}"`;d[2]!==m?(n={filter:m},d[2]=m,d[3]=n):n=d[3];let{data:h,isLoading:g}=function(e){let t,n,s,a,d,c,u,p,m,h,g=(0,i.c)(27),{filter:f,params:x,apiVersion:b}=e,y=`*[${f}][0...2000]`,v=b||o.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;g[0]!==v?(t={...o.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},g[0]=v,g[1]=t):t=g[1];let j=(0,o.useClient)(t);g[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},g[2]=n):n=g[2];let[w,S]=(0,l.useReducer)(a$,n),[C,_]=(0,l.useState)(null!==j),[I,T]=(0,l.useState)(null);g[3]!==y||g[4]!==j||g[5]!==x?(s=async()=>{if(!j)return void _(!1);try{let e=await j.fetch(y,x);S({type:"DOCUMENTS_SET",documents:e}),_(!1)}catch(e){T(e)}},g[3]=y,g[4]=j,g[5]=x,g[6]=s):s=g[6];let R=s;g[7]!==R?(a=async e=>{if("welcome"===e.type&&(_(!0),await R(),_(!1)),"reconnect"===e.type&&_(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&S({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_UPDATED",payload:t})}}},g[7]=R,g[8]=a):a=g[8];let P=a;e:{let e;if(!j){let e;g[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eW.of)(),g[9]=e):e=g[9],d=e;break e}if(g[10]!==y||g[11]!==j.observable||g[12]!==x){let t;g[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,eW.of)(e)),g[14]=t):t=g[14],e=j.observable.listen(y,x,aN).pipe((0,ek.catchError)(t)),g[10]=y,g[11]=j.observable,g[12]=x,g[13]=e}else e=g[13];d=e}let E=d;g[15]!==P||g[16]!==E?(c=()=>{let e=E.subscribe(P);return()=>{e?.unsubscribe()}},u=[P,E],g[15]=P,g[16]=E,g[17]=c,g[18]=u):(c=g[17],u=g[18]),(0,l.useEffect)(c,u),g[19]!==w.documents?(p=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,r.getDraftId)(n._id),l=i?n._id:(0,r.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),g[19]=w.documents,g[20]=p):p=g[20];let k=p;g[21]!==k?(m=Object.values(k),g[21]=k,g[22]=m):m=g[22];let D=m;return g[23]!==D||g[24]!==I||g[25]!==C?(h={data:D,isLoading:C,error:I},g[23]=D,g[24]=I,g[25]=C,g[26]=h):h=g[26],h}(n);if(d[4]!==h||d[5]!==p){let e;d[7]!==p?(e=e=>p.has((0,r.getPublishedId)(e._id)),d[7]=p,d[8]=e):e=d[8],s=h.filter(e),d[4]=h,d[5]=p,d[6]=s}else s=d[6];let f=s;return d[9]!==f||d[10]!==g?(a={data:f,isLoading:g},d[9]=f,d[10]=g,d[11]=a):a=d[11],a}({typeName:e.name}),[u,p]=(0,l.useState)(null),m=s.result.hits.length,h=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=l.useState(()=>({current:function(e){var t,n;let i=[...nn,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,d={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tT(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tE(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},tk(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tE(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tE(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},tk(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tE(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},tk(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},tk(e,"debugColumns","getAllColumns")),getAllFlatColumns:tE(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),tk(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tE(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),tk(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tE(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),tk(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,o]=l.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{o(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:c,columns:a,getCoreRowModel:e=>tE(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let d=tV(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,r.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return r};return n.rows=i(t),n},tk(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tE(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o,r,s,a,d,c,u,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let C=[],_=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&C.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let I=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(I.push("__global__"),R.forEach(e=>{var t;_.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},C.length)for(let e=0;e<C.length;e++){let t=(h=C[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(_.length){for(let e=0;e<_.length;e++){let t=(g=_[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<I.length;t++)if(!1===e.columnFilters[I[t]])return!1;return!0},e.options.filterFromLeafRows?(r=l,s=o,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let o=e[l],r=tV(a,o.id,o.original,o.index,o.depth,void 0,o.parentId);if(r.columnFilters=o.columnFilters,null!=(i=o.subRows)&&i.length&&t<b){if(r.subRows=y(o.subRows,t+1),s(o=r)&&!r.subRows.length||s(o)||r.subRows.length){n.push(o),x[o.id]=o,f.push(o);continue}}else s(o=r)&&(n.push(o),x[o.id]=o,f.push(o))}return n})(r),flatRows:f,rowsById:x}):(c=l,u=o,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let o=e[l];if(u(o)){var i;if(null!=(i=o.subRows)&&i.length&&t<w){let e=tV(p,o.id,o.original,o.index,o.depth,void 0,o.parentId);e.subRows=S(o.subRows,t+1),o=e}n.push(o),v.push(o),j[o.id]=o}}return n})(c),flatRows:v,rowsById:j})},tk(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tE(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,d=l*o;if(r=r.slice(d,d+l),e.options.paginateExpandedRows)i={rows:r,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:r,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},tk(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:d},getRowId:e=>e._id,meta:{selectedAnchor:u,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:g}=h.getRowModel();(0,l.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,l.useCallback)(e=>(0,n.jsx)(eg.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,n.jsx)(aR,{...t},e.original._id+t.id))},e.original._id+e.id),[]),x=`Total: ${m} rows, showing ${g.length} rows`;return(0,n.jsxs)(aG,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,n.jsxs)(eg.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,n.jsxs)(eg.Flex,{direction:"row",align:"center",children:[(0,n.jsx)(aM,{}),(0,n.jsx)(eg.Text,{size:0,muted:!0,children:x})]}),(0,n.jsx)(aA,{table:h})]}),(0,n.jsx)(aU,{children:(0,n.jsx)(aS,{table:h,children:(0,n.jsxs)(aW,{children:[(0,n.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,n.jsx)(eg.Box,{as:"tr",children:e.headers.map(t=>(0,n.jsx)(aB,{header:t,headerGroup:e},t.id))},e.id))}),(0,n.jsx)("tbody",{children:h.getRowModel().rows.map(f)})]})})}),(0,n.jsx)(eg.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,n.jsx)(aH,{table:h})})]})}function aK(e){let t,l,r,s=(0,i.c)(7),a=(0,o.useSchema)(),d=e.pane.schemaTypeName;if(s[0]!==a||s[1]!==d?(l=!(t=a.get(d))||!(0,ex.isDocumentSchemaType)(t),s[0]=a,s[1]=d,s[2]=t,s[3]=l):(t=s[2],l=s[3]),l)throw Error(`Schema type "${d}" not found or not a document schema`);return s[4]!==e||s[5]!==t?(r=(0,n.jsx)(o.SearchProvider,{children:(0,n.jsx)(aq,{...e,documentSchemaType:t})}),s[4]=e,s[5]=t,s[6]=r):r=s[6],r}function aY(e){let[t,n]=(0,l.useState)(e);return(0,eT.default)(t,e)?t:(n(e),e)}let aX=(0,l.memo)(function(e){let t,l,r,s,a,d,c,u,p,m=(0,i.c)(36),{index:h,isSelected:g,pane:f,paneKey:x}=e,{name:b}=(0,o.useSource)(),{defaultLayout:y,initialValueTemplates:v,menuItemGroups:j,menuItems:w,options:S}=f,C=void 0===v?o.EMPTY_ARRAY:v,{defaultOrdering:_,filter:I}=S,T=void 0===_?o.EMPTY_ARRAY:_,R=aY(S.params||s5),P=f.source;e:{let e;m[0]!==I||m[1]!==R?(e=an(I,R),m[0]=I,m[1]=R,m[2]=e):e=m[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let E=t,[k,D]=iD("layout",E??f.id,void 0===y?"default":y),{title:F}=(0,o.useI18nText)(f);m[3]!==T?(l=T?.length>0?{by:T}:s4,m[3]=T,m[4]=l):l=m[4];let A=l,[V,M]=iD("sort-order",E??f.id,A);m[5]!==k||m[6]!==w||m[7]!==V?(r=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:(0,eI.default)(n?.by,e?.params?.by||o.EMPTY_ARRAY)}:{...e,selected:!1})})({menuItems:w,sortOrderRaw:V,layout:k}),m[5]=k,m[6]=w,m[7]=V,m[8]=r):r=m[8];let L=r,z="sheetList"===k;m[9]!==z||m[10]!==k||m[11]!==e||m[12]!==V?(s=z?(0,n.jsx)(aK,{...e},e.pane.id):(0,n.jsx)(ab,{...e,sortOrder:V,layout:k}),m[9]=z,m[10]=k,m[11]=e,m[12]=V,m[13]=s):s=m[13];let O=s,B=P||b;return m[14]!==z?(a=z?{}:{currentMaxWidth:350,maxWidth:640},m[14]=z,m[15]=a):a=m[15],m[16]!==f.source?(d=!1,m[16]=f.source,m[17]=d):d=m[17],m[18]!==h||m[19]!==C||m[20]!==j||m[21]!==L||m[22]!==D||m[23]!==M||m[24]!==F?(c=(0,n.jsx)(aj,{index:h,initialValueTemplates:C,menuItemGroups:j,menuItems:L,setLayout:D,setSortOrder:M,title:F}),m[18]=h,m[19]=C,m[20]=j,m[21]=L,m[22]=D,m[23]=M,m[24]=F,m[25]=c):c=m[25],m[26]!==g||m[27]!==x||m[28]!==O||m[29]!==c||m[30]!==a||m[31]!==d?(u=(0,n.jsxs)(nz,{"data-ui":"DocumentListPane",id:x,minWidth:320,...a,selected:g,children:[d,c,O]}),m[26]=g,m[27]=x,m[28]=O,m[29]=c,m[30]=a,m[31]=d,m[32]=u):u=m[32],m[33]!==u||m[34]!==B?(p=(0,n.jsx)(o.SourceProvider,{name:B,children:u}),m[33]=u,m[34]=B,m[35]=p):p=m[35],p});aX.displayName="Memo(PaneContainer)";let aJ=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};aJ.displayName="LiveEditBadge";let aZ={activePanes:[]};function aQ(e){aZ.activePanes=e}function a0(e,t,n,i){let l=n?.panes||[],o=aZ.activePanes||[],r=t.id||(0,eb.uuid)();for(let n=o.length-1;n>=0;n--){let s=o[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,{template:t,version:n,inspect:i,comment:l,task:o}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:o};default:return lR}}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let a1=(0,ey.styled)(o.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,a2=(0,ey.styled)(eg.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function a3(e){let t,r,s,a,d,c,u,p,m,h,g,f,x=(0,i.c)(39),{showChanges:y}=e,{documentId:v,schemaType:j,timelineError:w,timelineStore:S,value:C}=iu(),{selectedReleaseId:_}=(0,o.usePerspective)(),[I,T]=(0,l.useState)(null),R=(0,o.useTimelineSelector)(S,a9),P=(0,o.useTimelineSelector)(S,a7),E=(0,o.useTimelineSelector)(S,a8),k=(0,o.useTimelineSelector)(S,a6),D=(0,o.useTimelineSelector)(S,a5),F="loading"===k,A=!E,{t:V}=(0,o.useTranslation)(b);x[0]!==P||x[1]!==v||x[2]!==A||x[3]!==j||x[4]!==C?(t={documentId:v,schemaType:j,FieldWrapper:a4,rootDiff:P,isComparingCurrent:A,value:C,showFromValue:!0},x[0]=P,x[1]=v,x[2]=A,x[3]=j,x[4]=C,x[5]=t):t=x[5];let M=t;if(_){let e;return x[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:(0,n.jsx)(o4,{versionError:!0})})}),x[6]=e):e=x[6],e}return x[7]!==V?(r=V("changes.from.label"),x[7]=V,x[8]=r):r=x[8],x[9]!==r?(s=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:r}),x[9]=r,x[10]=s):s=x[10],x[11]!==D?(a=(0,n.jsx)(o8,{mode:"since",chunk:D,placement:"bottom-start"}),x[11]=D,x[12]=a):a=x[12],x[13]!==V?(d=V("changes.to.label"),x[13]=V,x[14]=d):d=x[14],x[15]!==d?(c=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:d}),x[15]=d,x[16]=c):c=x[16],x[17]!==R?(u=(0,n.jsx)(o8,{chunk:R,mode:"rev",placement:"bottom-end"}),x[17]=R,x[18]=u):u=x[18],x[19]!==s||x[20]!==a||x[21]!==c||x[22]!==u?(p=(0,n.jsx)(eg.Box,{padding:3,children:(0,n.jsxs)(a2,{paddingX:2,paddingBottom:2,children:[s,a,c,u]})}),x[19]=s,x[20]=a,x[21]=c,x[22]=u,x[23]=p):p=x[23],x[24]!==P||x[25]!==M||x[26]!==F||x[27]!==j||x[28]!==y||x[29]!==w?(m=y&&(0,n.jsx)(de,{diff:P,documentContext:M,error:w,loading:F,schemaType:j}),x[24]=P,x[25]=M,x[26]=F,x[27]=j,x[28]=y,x[29]=w,x[30]=m):m=x[30],x[31]!==m?(h=(0,n.jsx)(a1,{"data-ui":"Scroller",ref:T,children:(0,n.jsx)(eg.Box,{flex:1,paddingX:3,height:"fill",children:m})}),x[31]=m,x[32]=h):h=x[32],x[33]!==I||x[34]!==h?(g=(0,n.jsx)(eg.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(eg.BoundaryElementProvider,{element:I,children:h})}),x[33]=I,x[34]=h,x[35]=g):g=x[35],x[36]!==g||x[37]!==p?(f=(0,n.jsxs)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[p,g]}),x[36]=g,x[37]=p,x[38]=f):f=x[38],f}function a4(e){return(0,n.jsx)(o.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function a5(e){return e.sinceTime}function a6(e){return e.selectionState}function a8(e){return e.onOlderRevision}function a7(e){return e.diff}function a9(e){return e.revTime}function de(e){let t,l,r=(0,i.c)(9),{error:a,diff:d,documentContext:c,loading:u,schemaType:p}=e;if(a){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.NoChanges,{}),r[0]=e):e=r[0],e}if(u){let e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.LoadingBlock,{showText:!0}),r[1]=e):e=r[1],e}if(!d){let e;return r[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.NoChanges,{}),r[2]=e):e=r[2],e}return r[3]!==d||r[4]!==p?(t=(0,n.jsx)(o.ChangeList,{diff:d,schemaType:p}),r[3]=d,r[4]=p,r[5]=t):t=r[5],r[6]!==c||r[7]!==t?(l=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:c,children:t}),r[6]=c,r[7]=t,r[8]=l):l=r[8],l}function dt(e){let t,l,r,s,a,d,c,u,p=(0,i.c)(27),{event:m,isSelected:h,onSelect:g,optionsMenu:f}=e,{t:x}=(0,o.useTranslation)("studio");p[0]!==m?(t=!(0,o.isDeleteDocumentVersionEvent)(m)&&!(0,o.isDeleteDocumentGroupEvent)(m)&&!(0,o.isUnpublishDocumentEvent)(m)&&!(0,o.isScheduleDocumentVersionEvent)(m)&&!(0,o.isUnscheduleDocumentVersionEvent)(m),p[0]=m,p[1]=t):t=p[1];let b=t;p[2]!==m||p[3]!==b||p[4]!==g?(l=e=>{e.preventDefault(),e.stopPropagation(),b&&g(m)},p[2]=m,p[3]=b,p[4]=g,p[5]=l):l=p[5];let y=l;p[6]!==b||p[7]!==x?(r=b?"":x("changes.not-selectable"),p[6]=b,p[7]=x,p[8]=r):r=p[8];let v=b?"button":"div",j=b?"pointer":"default";return p[9]!==j?(s={cursor:j,width:"100%"},p[9]=j,p[10]=s):s=p[10],p[11]!==m?(a=(0,n.jsx)(o.Event,{event:m,showChangesBy:"tooltip"}),p[11]=m,p[12]=a):a=p[12],p[13]!==m.timestamp||p[14]!==y||p[15]!==h||p[16]!==v||p[17]!==s||p[18]!==a?(d=(0,n.jsx)(eg.Card,{as:v,onClick:y,padding:2,pressed:h,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:s,children:a}),p[13]=m.timestamp,p[14]=y,p[15]=h,p[16]=v,p[17]=s,p[18]=a,p[19]=d):d=p[19],p[20]!==b||p[21]!==r||p[22]!==d?(c=(0,n.jsx)(eh.Tooltip,{content:r,disabled:b,children:d}),p[20]=b,p[21]=r,p[22]=d,p[23]=c):c=p[23],p[24]!==f||p[25]!==c?(u=(0,n.jsxs)(eg.Flex,{gap:1,children:[c,f]}),p[24]=f,p[25]=c,p[26]=u):u=p[26],u}function dn(e){let t,l,s,a,d,c,u,p,m,h,g,f,x=(0,i.c)(44),{event:y}=e,{t:v}=(0,o.useTranslation)(b),{t:j}=(0,o.useTranslation)(),w=(0,eg.usePortal)(),{params:S,setParams:C}=ln(),_=(0,o.useSetPerspective)(),{document:I}=(0,o.useWorkspace)(),{drafts:T}=I,{enabled:R}=T;x[0]!==y.id||x[1]!==y.versionId||x[2]!==y.versionRevisionId||x[3]!==S||x[4]!==C?(t=()=>{C({...S,rev:y.versionRevisionId||"@lastPublished",since:void 0,historyEvent:y.id,historyVersion:(0,r.getVersionFromId)(y.versionId)})},x[0]=y.id,x[1]=y.versionId,x[2]=y.versionRevisionId,x[3]=S,x[4]=C,x[5]=t):t=x[5];let P=t;x[6]!==y.versionRevisionId||x[7]!==R||x[8]!==S||x[9]!==C||x[10]!==_?(l=()=>{C({...S,rev:y.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{_(R?"drafts":"published")},100)},x[6]=y.versionRevisionId,x[7]=R,x[8]=S,x[9]=C,x[10]=_,x[11]=l):l=x[11];let E=l;x[12]!==y.release?(s=e=>{let{children:t}=e;return(0,n.jsx)(o.VersionInlineBadge,{$tone:y.release?(0,o.isReleaseDocument)(y.release)?(0,o.getReleaseTone)(y.release):"default":void 0,children:t})},x[12]=y.release,x[13]=s):s=x[13];let k=s;x[14]!==y.release?(a=y.release&&!(0,o.isReleaseDocument)(y.release),x[14]=y.release,x[15]=a):a=x[15];let D=a,F=`timeline-item-menu-button-${y.versionId}`;x[16]!==v?(d=v("timeline-item.menu-button.aria-label"),x[16]=v,x[17]=d):d=x[17],x[18]!==y.release||x[19]!==D||x[20]!==v?(c=D?v("timeline-item.not-found-release.tooltip",{releaseId:y.release?._id?(0,o.getReleaseIdFromReleaseDocumentId)(y.release._id):void 0}):v("timeline-item.menu-button.tooltip"),x[18]=y.release,x[19]=D,x[20]=v,x[21]=c):c=x[21],x[22]!==c?(u={content:c},x[22]=c,x[23]=u):u=x[23],x[24]!==D||x[25]!==d||x[26]!==u?(p=(0,n.jsx)(o.ContextMenuButton,{"aria-label":d,tooltipProps:u,disabled:D}),x[24]=D,x[25]=d,x[26]=u,x[27]=p):p=x[27],x[28]!==k||x[29]!==y.release||x[30]!==y.versionRevisionId||x[31]!==E||x[32]!==P||x[33]!==v||x[34]!==j?(m=(0,n.jsx)(eg.Menu,{padding:1,children:y.release?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eC.IntentLink,{intent:o.RELEASES_INTENT,params:{id:(0,o.getReleaseIdFromReleaseDocumentId)(y.release._id)},style:{textDecoration:"none"},children:(0,n.jsx)(eg.MenuItem,{padding:3,children:(0,n.jsx)(eg.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(eg.Text,{size:1,style:{textDecoration:"none"},children:(0,n.jsx)(o.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(k,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:y.release.metadata?.title||j("release.placeholder-untitled-release")},t:v})})})})}),(0,n.jsx)(eg.MenuItem,{onClick:P,children:(0,n.jsx)(eg.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(k,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:y.release.metadata?.title||j("release.placeholder-untitled-release")},t:v})})})})]}):(0,n.jsx)(eg.MenuItem,{onClick:E,disabled:!y.versionRevisionId,children:(0,n.jsx)(eg.Flex,{align:"center",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{components:{VersionBadge:di},i18nKey:"events.open.draft",t:v})})})})}),x[28]=k,x[29]=y.release,x[30]=y.versionRevisionId,x[31]=E,x[32]=P,x[33]=v,x[34]=j,x[35]=m):m=x[35];let A=!w.elements?.[o6]||o6;return x[36]===Symbol.for("react.memo_cache_sentinel")?(h=["bottom-end","bottom-start"],x[36]=h):h=x[36],x[37]!==A?(g={portal:A,placement:"bottom",fallbackPlacements:h},x[37]=A,x[38]=g):g=x[38],x[39]!==p||x[40]!==m||x[41]!==g||x[42]!==F?(f=(0,n.jsx)(eh.MenuButton,{id:F,button:p,menu:m,popover:g}),x[39]=p,x[40]=m,x[41]=g,x[42]=F,x[43]=f):f=x[43],f}function di(e){let{children:t}=e;return(0,n.jsx)(o.VersionInlineBadge,{$tone:"caution",children:t})}let dl=ej.motion.create(eg.Box),dr={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},ds=e=>{let t,r,s,a,d,c,u,p,m,h,g,f,x=(0,i.c)(38),{events:b,hasMoreEvents:y,selectedEventId:v,onLoadMore:j,onSelect:w,listMaxHeight:S,fetchEventChildren:C}=e,_=void 0===S?"calc(100vh - 280px)":S,[I,T]=(0,l.useState)(!1),{t:R}=(0,o.useTranslation)("studio");x[0]!==b||x[1]!==v?(t=()=>{if(v){let e=b.find(e=>e.id===v);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},x[0]=b,x[1]=v,x[2]=t):t=x[2];let[P,E]=(0,l.useState)(t);x[3]===Symbol.for("react.memo_cache_sentinel")?(r=new Set,x[3]=r):r=x[3];let[k,D]=(0,l.useState)(r);x[4]!==b||x[5]!==P?(s=b.filter(e=>(0,o.isCreateDocumentVersionEvent)(e)&&e.parentId?b[b.length-1].id===e.id||P.has(e.parentId):!(0,o.isEditDocumentVersionEvent)(e)||!e.parentId||P.has(e.parentId)),x[4]=b,x[5]=P,x[6]=s):s=x[6];let F=s;x[7]!==C?(a=e=>async()=>{let t=e.id,n=!1;E(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(D(e=>{let n=new Set(e);return n.add(t),n}),await C(e),D(e=>{let n=new Set(e);return n.delete(t),n}))},x[7]=C,x[8]=a):a=x[8];let A=a;x[9]!==w?(d=e=>{w(e)},x[9]=w,x[10]=d):d=x[10];let V=d;x[11]!==P||x[12]!==A?(c=e=>{let t=(0,o.getDocumentVariantType)(e.documentId);return(0,o.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,n.jsx)(dn,{event:e}):(0,o.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,o.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,n.jsx)(oB,{isExpanded:P.has(e.id),onExpand:A(e)}):null},x[11]=P,x[12]=A,x[13]=c):c=x[13];let M=c;x[14]!==F.length||x[15]!==k||x[16]!==V||x[17]!==y||x[18]!==M||x[19]!==v?(u=(e,t)=>{let{activeIndex:i}=t,l=(0,o.isCreateDocumentVersionEvent)(e)&&e.parentId&&k.has(e.parentId),r=i===F.length-1;return l?(0,n.jsx)(dl,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,n.jsx)(eg.Flex,{align:"center",justify:"center",style:{height:57},children:(0,n.jsx)(eg.Spinner,{})})}):(0,n.jsxs)(dl,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?dr:void 0,paddingLeft:((0,o.isEditDocumentVersionEvent)(e)||(0,o.isCreateDocumentVersionEvent)(e))&&e.parentId&&!r?4:1,children:[(0,n.jsx)(dt,{event:e,isSelected:e.id===v,onSelect:V,optionsMenu:M(e)}),r&&y&&(0,n.jsx)(o.LoadingBlock,{})]},e.timestamp)},x[14]=F.length,x[15]=k,x[16]=V,x[17]=y,x[18]=M,x[19]=v,x[20]=u):u=x[20];let L=u;if(x[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>T(!0),p=[],x[21]=p,x[22]=m):(p=x[21],m=x[22]),(0,l.useEffect)(m,p),x[23]!==F||x[24]!==v){let e;x[26]!==v?(e=e=>e.id===v,x[26]=v,x[27]=e):e=x[27],h=F.findIndex(e),x[23]=F,x[24]=v,x[25]=h}else h=x[25];let z=h,O=!z||I;return x[28]!==F||x[29]!==_||x[30]!==j||x[31]!==L||x[32]!==z||x[33]!==R?(g=F.length>0?(0,n.jsx)(o$,{direction:"column",$maxHeight:_,id:"timeline-list-wrapper",children:(0,n.jsx)(o.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:R("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:F,onEndReached:j,onEndReachedIndexOffset:20,overscan:5,renderItem:L,wrapAround:!1})}):(0,n.jsxs)(eg.Stack,{padding:3,space:3,children:[(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:R("timeline.error.no-document-history-title")}),(0,n.jsx)(eg.Text,{muted:!0,size:1,children:R("timeline.error.no-document-history-description")})]}),x[28]=F,x[29]=_,x[30]=j,x[31]=L,x[32]=z,x[33]=R,x[34]=g):g=x[34],x[35]!==O||x[36]!==g?(f=(0,n.jsx)(oN,{$visible:O,"data-ui":"timeline",children:g}),x[35]=O,x[36]=g,x[37]=f):f=x[37],f};ds.displayName="EventsTimeline";let da=(0,ey.styled)(eh.Popover)`
  overflow: hidden;
  overflow: clip;
`,dd={timestamp:{dateStyle:"medium",timeStyle:"short"}};function dc(e){let t,r,s,a,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(58),{event:S,events:C,mode:_,placement:I}=e,{setTimelineRange:T}=iu(),[R,P]=(0,l.useState)(!1),[E,k]=(0,l.useState)(null),[D,F]=(0,l.useState)(null),A=(0,ef.useToast)(),{nextCursor:V,loading:M,error:L,findRangeForRevision:z,findRangeForSince:O,loadMoreEvents:B,expandEvent:H}=(0,o.useEvents)(),{t:$}=(0,o.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{P(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{P(!1)},w[1]=r):r=w[1];let G=r;w[2]!==E||w[3]!==R?(s=e=>{R&&("Escape"===e.key||"Tab"===e.key)&&(G(),E?.focus())},w[2]=E,w[3]=R,w[4]=s):s=w[4],(0,eg.useGlobalKeyDown)(s),w[5]!==E||w[6]!==D?(a=()=>[E,D],w[5]=E,w[6]=D,w[7]=a):a=w[7],(0,eg.useClickOutsideEvent)(R&&G,a),w[8]!==z||w[9]!==T||w[10]!==$||w[11]!==A?(c=e=>{try{(()=>{if((0,o.isDeleteDocumentVersionEvent)(e)||(0,o.isDeleteDocumentGroupEvent)(e)||(0,o.isUnpublishDocumentEvent)(e)||(0,o.isScheduleDocumentVersionEvent)(e)||(0,o.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=z(e?.id);T(t,n),G()})()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=z,w[9]=T,w[10]=$,w[11]=A,w[12]=c):c=w[12];let U=c;w[13]!==O||w[14]!==T||w[15]!==$||w[16]!==A?(u=e=>{try{let[t,n]=O(e.id);T(t,n),G()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=O,w[14]=T,w[15]=$,w[16]=A,w[17]=u):u=w[17];let W=u;w[18]!==B||w[19]!==M||w[20]!==V?(p=()=>{!M&&V&&B()},w[18]=B,w[19]=M,w[20]=V,w[21]=p):p=w[21];let q=p;e:{let e;if(L){let e;w[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o4,{}),w[22]=e):e=w[22],m=e;break e}let t=!!V,i=S?.id,l="rev"===_?U:W;w[23]!==C||w[24]!==H||w[25]!==q||w[26]!==i||w[27]!==l||w[28]!==t?(e=(0,n.jsx)(ds,{events:C,fetchEventChildren:H,hasMoreEvents:t,selectedEventId:i,onLoadMore:q,onSelect:l}),w[23]=C,w[24]=H,w[25]=q,w[26]=i,w[27]=l,w[28]=t,w[29]=e):e=w[29],m=e}let K=m;w[30]!==S||w[31]!==$?(h=S?$(o.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dd}):$("timeline.latest-revision"),w[30]=S,w[31]=$,w[32]=h):h=w[32];let Y=h;w[33]!==S||w[34]!==C||w[35]!==$?(g=S?$(o.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dd}):C.length>0?$("timeline.since-version-missing"):$("timeline.no-previous-events"),w[33]=S,w[34]=C,w[35]=$,w[36]=g):g=w[36];let X="rev"===_?Y:g;w[37]!==D?(f={"timeline-menu":D},w[37]=D,w[38]=f):f=w[38];let J=f,Z=R&&K,Q=R?"timeline-menu-close-button":"timeline-menu-open-button",ee=M||!C.length,et=R?G:N;return w[39]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[39]=x):x=w[39],w[40]!==X||w[41]!==M||w[42]!==$?(b=M?$("timeline.loading-history"):X,w[40]=X,w[41]=M,w[42]=$,w[43]=b):b=w[43],w[44]!==R||w[45]!==Q||w[46]!==ee||w[47]!==et||w[48]!==b?(y=(0,n.jsx)(eg.Flex,{width:"fill",children:(0,n.jsx)(eh.Button,{"data-testid":Q,disabled:ee,mode:"ghost",onClick:et,ref:k,selected:R,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:d.ChevronDownIcon,text:b})}),w[44]=R,w[45]=Q,w[46]=ee,w[47]=et,w[48]=b,w[49]=y):y=w[49],w[50]!==R||w[51]!==I||w[52]!==Z||w[53]!==y?(v=(0,n.jsx)(da,{"data-testid":"timeline-menu",constrainSize:!0,content:Z,"data-ui":"versionMenu",open:R,placement:I,matchReferenceWidth:!0,portal:!0,ref:F,children:y}),w[50]=R,w[51]=I,w[52]=Z,w[53]=y,w[54]=v):v=w[54],w[55]!==J||w[56]!==v?(j=(0,n.jsx)(eg.PortalProvider,{__unstable_elements:J,children:v}),w[55]=J,w[56]=v,w[57]=j):j=w[57],j}let du=(0,ey.styled)(o.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dp=(0,ey.styled)(eg.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,dm=(0,ey.styled)(eg.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,dh={diff:null,loading:!0,error:null},dg=()=>{let e,t,l,r,a,d,c,u,p,m,h,g=(0,i.c)(31),{documentId:f,schemaType:x,editState:y,displayed:v}=iu(),{selectedPerspective:j,selectedPerspectiveName:w,selectedReleaseId:S}=(0,o.usePerspective)(),{t:C}=(0,o.useTranslation)(b);g[0]!==v||g[1]!==y?.published?(e=(0,ev.diffInput)((0,ev.wrap)(y?.published??{},{author:""}),(0,ev.wrap)(v??{},{author:""})),g[0]=v,g[1]=y?.published,g[2]=e):e=g[2];let _=e;return(!S||y?.version)&&("drafts"!==j||y?.draft)&&"published"!==w&&v?._rev?(g[3]!==C?(t=C("events.compare-with-published.title"),g[3]=C,g[4]=t):t=g[4],g[5]!==t?(l=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:t}),g[5]=t,g[6]=l):l=g[6],g[7]!==j?(r=(0,o.isReleaseDocument)(j)?j.metadata?.title:"draft",g[7]=j,g[8]=r):r=g[8],g[9]!==r?(a={version:r},g[9]=r,g[10]=a):a=g[10],g[11]!==C||g[12]!==a?(d=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:(0,n.jsx)(o.Translate,{i18nKey:"events.compare-with-published.description",t:C,values:a})}),g[11]=C,g[12]=a,g[13]=d):d=g[13],g[14]!==l||g[15]!==d?(c=(0,n.jsx)(eg.Card,{borderBottom:!0,paddingBottom:3,children:(0,n.jsxs)(eg.Stack,{space:3,paddingTop:1,children:[l,d]})}),g[14]=l,g[15]=d,g[16]=c):c=g[16],g[17]!==v||g[18]!==f||g[19]!==_||g[20]!==x?(u={documentId:f,schemaType:x,rootDiff:_,isComparingCurrent:!0,FieldWrapper:dv,value:v,showFromValue:!0},g[17]=v,g[18]=f,g[19]=_,g[20]=x,g[21]=u):u=g[21],g[22]!==_||g[23]!==x?(p=(0,n.jsx)(eg.Box,{paddingY:1,children:(0,n.jsx)(o.ChangeList,{diff:_,schemaType:x})}),g[22]=_,g[23]=x,g[24]=p):p=g[24],g[25]!==u||g[26]!==p?(m=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:u,children:p}),g[25]=u,g[26]=p,g[27]=m):m=g[27],g[28]!==c||g[29]!==m?(h=(0,n.jsxs)(eg.Stack,{space:2,marginBottom:3,children:[c,m]}),g[28]=c,g[29]=m,g[30]=h):h=g[30],h):null};function df(e){let t,r,s,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C=(0,i.c)(83),{showChanges:_}=e,{documentId:I,schemaType:T,timelineError:R,value:P,formState:E}=iu(),[k,D]=(0,l.useState)(null),{events:F,revision:A,sinceRevision:V,getChangesList:M}=(0,o.useEvents)(),L=!A?.revisionId;C[0]!==M?(t=M(),C[0]=M,C[1]=t):t=C[1];let z=t,{diff:O,loading:B,error:H}=(0,eS.useObservable)(z,dh),{t:$}=(0,o.useTranslation)("studio");C[2]!==O||C[3]!==I||C[4]!==E?.readOnly||C[5]!==L||C[6]!==T||C[7]!==P?(r=()=>({documentId:I,schemaType:T,FieldWrapper:dx,rootDiff:O,isComparingCurrent:L&&!E?.readOnly,value:P,showFromValue:!0}),C[2]=O,C[3]=I,C[4]=E?.readOnly,C[5]=L,C[6]=T,C[7]=P,C[8]=r):r=C[8],C[9]!==r?(s=r(),C[9]=r,C[10]=s):s=C[10];let N=s;e:{let e,t,n;if(!F){let e;C[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],C[11]=e):e=C[11],a=e;break e}C[12]!==F||C[13]!==V?.revisionId?(e=F.find(e=>e.id===V?.revisionId)||null,C[12]=F,C[13]=V?.revisionId,C[14]=e):e=C[14],C[15]!==F||C[16]!==A?.revisionId?(t=F.find(e=>e.id===A?.revisionId)||F[0],C[15]=F,C[16]=A?.revisionId,C[17]=t):t=C[17],C[18]!==e||C[19]!==t?(n=[e,t],C[18]=e,C[19]=t,C[20]=n):n=C[20],a=n}let[G,U]=a;t:{let e;if(!U){let e;C[21]!==F?(e=F.slice(1),C[21]=F,C[22]=e):e=C[22],d=e;break t}if(C[23]!==F||C[24]!==U){let t;C[26]!==U?(t=e=>"parentId"in U&&"parentId"in e&&e.parentId===U.parentId||"parentId"in e&&U.id===e.parentId?{...e,parentId:void 0}:e,C[26]=U,C[27]=t):t=C[27],e=F.slice(F.indexOf(U)+1).map(t),C[23]=F,C[24]=U,C[25]=e}else e=C[25];d=e}let W=d;if(!F.length){let e,t,i,l,o;return C[28]!==$?(e=$("timeline.error.no-document-history-title"),C[28]=$,C[29]=e):e=C[29],C[30]!==e?(t=(0,n.jsx)(eg.Text,{size:1,weight:"medium",children:e}),C[30]=e,C[31]=t):t=C[31],C[32]!==$?(i=$("timeline.error.no-document-history-description"),C[32]=$,C[33]=i):i=C[33],C[34]!==i?(l=(0,n.jsx)(eg.Text,{muted:!0,size:1,children:i}),C[34]=i,C[35]=l):l=C[35],C[36]!==t||C[37]!==l?(o=(0,n.jsx)(eg.Box,{paddingX:2,children:(0,n.jsxs)(eg.Stack,{padding:3,space:3,children:[t,l]})}),C[36]=t,C[37]=l,C[38]=o):o=C[38],o}C[39]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},C[39]=c):c=C[39],C[40]!==$?(u=$("changes.inspector.from-label"),C[40]=$,C[41]=u):u=C[41],C[42]!==u?(p=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:u}),C[42]=u,C[43]=p):p=C[43];let q=G||null;C[44]!==W||C[45]!==q?(m=(0,n.jsx)(dc,{event:q,events:W,mode:"since",placement:"bottom-start"}),C[44]=W,C[45]=q,C[46]=m):m=C[46],C[47]!==$?(h=$("changes.inspector.to-label"),C[47]=$,C[48]=h):h=C[48],C[49]!==h?(g=(0,n.jsx)(eg.Text,{size:1,muted:!0,children:h}),C[49]=h,C[50]=g):g=C[50];let K=U||null;return C[51]!==F||C[52]!==K?(f=(0,n.jsx)(dc,{event:K,events:F,mode:"rev",placement:"bottom-end"}),C[51]=F,C[52]=K,C[53]=f):f=C[53],C[54]!==m||C[55]!==g||C[56]!==f||C[57]!==p?(x=(0,n.jsxs)(dp,{paddingX:2,paddingBottom:2,children:[p,m,g,f]}),C[54]=m,C[55]=g,C[56]=f,C[57]=p,C[58]=x):x=C[58],C[59]!==B||C[60]!==$?(b=B&&(0,n.jsx)(ej.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsxs)(dm,{justify:"center",align:"center",gap:2,children:[(0,n.jsx)(eg.Text,{muted:!0,size:0,children:$("changes.loading-changes")}),(0,n.jsx)(eg.Spinner,{size:0})]})}),C[59]=B,C[60]=$,C[61]=b):b=C[61],C[62]!==x||C[63]!==b?(y=(0,n.jsxs)(eg.Box,{padding:3,style:c,children:[x,b]}),C[62]=x,C[63]=b,C[64]=y):y=C[64],C[65]!==H||C[66]!==N||C[67]!==A?.loading||C[68]!==T||C[69]!==_||C[70]!==G||C[71]!==V?.loading||C[72]!==R||C[73]!==U?.id?(v=_&&(0,n.jsx)(db,{documentContext:N,error:R||H,loading:A?.loading||V?.loading||!1,schemaType:T,sameRevisionSelected:G?.id===U?.id,sinceEvent:G}),C[65]=H,C[66]=N,C[67]=A?.loading,C[68]=T,C[69]=_,C[70]=G,C[71]=V?.loading,C[72]=R,C[73]=U?.id,C[74]=v):v=C[74],C[75]!==v?(j=(0,n.jsx)(du,{"data-ui":"Scroller",ref:D,children:(0,n.jsx)(eg.Box,{flex:1,paddingX:3,height:"fill",children:v})}),C[75]=v,C[76]=j):j=C[76],C[77]!==k||C[78]!==j?(w=(0,n.jsx)(eg.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(eg.BoundaryElementProvider,{element:k,children:j})}),C[77]=k,C[78]=j,C[79]=w):w=C[79],C[80]!==y||C[81]!==w?(S=(0,n.jsxs)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[y,w]}),C[80]=y,C[81]=w,C[82]=S):S=C[82],S}function dx(e){return e.path.length>0?(0,n.jsx)(o.ChangeFieldWrapper,{...e}):e.children}function db(e){let t,l,r=(0,i.c)(15),{error:a,documentContext:d,loading:c,schemaType:u,sameRevisionSelected:p,sinceEvent:m}=e;if(a){let e,t,i;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(dg,{}),r[0]=e):e=r[0],r[1]!==a||r[2]!==m?.type?(t=m?.type!=="historyCleared"&&(0,n.jsx)(o.ChangesError,{error:a}),r[1]=a,r[2]=m?.type,r[3]=t):t=r[3],r[4]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),r[4]=t,r[5]=i):i=r[5],i}if(c){let e;return r[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.LoadingBlock,{showText:!0}),r[6]=e):e=r[6],e}if(p){let e;return r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(dy,{}),r[7]=e):e=r[7],e}if(!d.rootDiff){let e;return r[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ej.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsx)(o.NoChanges,{})}),r[8]=e):e=r[8],e}return r[9]!==d.rootDiff||r[10]!==u?(t=(0,n.jsx)(eg.Box,{paddingY:1,children:(0,n.jsx)(o.ChangeList,{diff:d.rootDiff,schemaType:u})}),r[9]=d.rootDiff,r[10]=u,r[11]=t):t=r[11],r[12]!==d||r[13]!==t?(l=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:d,children:t}),r[12]=d,r[13]=t,r[14]=l):l=r[14],l}function dy(){let e,t,l,r,s,a,d,c=(0,i.c)(12),{t:u}=(0,o.useTranslation)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},l={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=l):(e=c[0],t=c[1],l=c[2]),c[3]!==u?(r=u("changes.same-revision-selected-title"),c[3]=u,c[4]=r):r=c[4],c[5]!==r?(s=(0,n.jsx)(eg.Text,{size:1,weight:"medium",as:"h3",children:r}),c[5]=r,c[6]=s):s=c[6],c[7]!==u?(a=(0,n.jsx)(eg.Text,{as:"p",size:1,muted:!0,children:(0,n.jsx)(o.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=a):a=c[8],c[9]!==s||c[10]!==a?(d=(0,n.jsx)(ej.motion.div,{animate:e,initial:t,transition:l,children:(0,n.jsxs)(eg.Stack,{space:3,paddingTop:2,children:[s,a]})}),c[9]=s,c[10]=a,c[11]=d):d=c[11],d}function dv(e){return e.children}let dj=(0,ey.styled)(o.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dw(e){let t,r,s,a=(0,i.c)(21),{showList:d}=e,[c,u]=(0,l.useState)(null),[p,m]=(0,l.useState)(0),{setTimelineRange:h}=iu();a[0]!==p?(t=e=>{!p&&e&&(m(e.clientHeight?e.clientHeight-1:0),u(e))},a[0]=p,a[1]=t):t=a[1];let g=t,{events:f,nextCursor:x,loading:b,error:y,revision:v,loadMoreEvents:j,findRangeForRevision:w,expandEvent:S}=(0,o.useEvents)(),{t:C}=(0,o.useTranslation)("studio"),_=(0,ef.useToast)();a[2]!==w||a[3]!==h||a[4]!==C||a[5]!==_?(r=e=>{try{(()=>{if((0,o.isDeleteDocumentVersionEvent)(e)||(0,o.isDeleteDocumentGroupEvent)(e)||(0,o.isUnpublishDocumentEvent)(e)||(0,o.isScheduleDocumentVersionEvent)(e)||(0,o.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=w(e.id);h(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},a[2]=w,a[3]=h,a[4]=C,a[5]=_,a[6]=r):r=a[6];let I=r,T=b&&!f.length;return a[7]!==y||a[8]!==f||a[9]!==S||a[10]!==g||a[11]!==T||a[12]!==p||a[13]!==j||a[14]!==b||a[15]!==x||a[16]!==v?.revisionId||a[17]!==c||a[18]!==I||a[19]!==d?(s=(0,n.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:y?(0,n.jsx)(o4,{}):(0,n.jsx)(eg.BoundaryElementProvider,{element:c,children:(0,n.jsxs)(dj,{"data-ui":"Scroller",ref:g,children:[p&&d&&!T?(0,n.jsx)(ds,{events:f,fetchEventChildren:S,hasMoreEvents:!!x,selectedEventId:v?.revisionId||f[0]?.id,onLoadMore:j,onSelect:I,listMaxHeight:`${p}px`}):null,b&&(0,n.jsx)(o.LoadingBlock,{})]})})})}),a[7]=y,a[8]=f,a[9]=S,a[10]=g,a[11]=T,a[12]=p,a[13]=j,a[14]=b,a[15]=x,a[16]=v?.revisionId,a[17]=c,a[18]=I,a[19]=d,a[20]=s):s=a[20],s}let dS=(0,ey.styled)(o.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dC(e){let t,r,s,a,d=(0,i.c)(20),{showList:c}=e,{timelineError:u,setTimelineRange:p,timelineStore:m}=iu(),{selectedReleaseId:h}=(0,o.usePerspective)(),[g,f]=(0,l.useState)(null),[x,b]=(0,l.useState)(0);d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(b(e.clientHeight-1),f(e))},d[0]=t):t=d[0];let y=t,v=(0,o.useTimelineSelector)(m,dR),j=(0,o.useTimelineSelector)(m,dT),w=(0,o.useTimelineSelector)(m,dI),S=(0,o.useTimelineSelector)(m,d_),{t:C}=(0,o.useTranslation)("studio"),_=(0,ef.useToast)();d[1]!==p||d[2]!==C||d[3]!==m||d[4]!==_?(r=e=>{try{(()=>{let[t,n]=m?.findRangeForRev(e)||[null,null];p(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},d[1]=p,d[2]=C,d[3]=m,d[4]=_,d[5]=r):r=d[5];let I=r;d[6]!==S||d[7]!==m?(s=()=>{S||m?.loadMore()},d[6]=S,d[7]=m,d[8]=s):s=d[8];let T=s;return d[9]!==v||d[10]!==T||d[11]!==w||d[12]!==x||d[13]!==j||d[14]!==g||d[15]!==I||d[16]!==h||d[17]!==c||d[18]!==u?(a=(0,n.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:u||h?(0,n.jsx)(o4,{versionError:!!h}):(0,n.jsx)(eg.BoundaryElementProvider,{element:g,children:(0,n.jsx)(dS,{"data-ui":"Scroller",ref:y,children:x&&c?(0,n.jsx)(o3,{chunks:v,hasMoreChunks:w,lastChunk:j,onLoadMore:T,onSelect:I,listMaxHeight:`${x}px`}):null})})})}),d[9]=v,d[10]=T,d[11]=w,d[12]=x,d[13]=j,d[14]=g,d[15]=I,d[16]=h,d[17]=c,d[18]=u,d[19]=a):a=d[19],a}function d_(e){return e.isLoading}function dI(e){return e.hasMoreChunks}function dT(e){return e.realRevChunk}function dR(e){return e.chunks}let dP=(0,ey.styled)(eg.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,dE=["history","review"],dk={error:d.ErrorOutlineIcon,warning:d.WarningOutlineIcon,info:d.InfoOutlineIcon},dD={error:"critical",warning:"caution",info:"primary"};function dF(e){let t,o,r,s,a=(0,i.c)(17),{marker:d,onOpen:c,schemaType:u,value:p}=e;a[0]!==d.path||a[1]!==c?(t=()=>c(d.path),a[0]=d.path,a[1]=c,a[2]=t):t=a[2];let m=t,[h,g]=(0,l.useState)(null),f=dk[d.level];return a[3]!==h?(o=h&&(0,n.jsx)(eg.Card,{padding:3,radius:2,tone:"critical",children:(0,n.jsx)(eg.Text,{size:1,children:h.error.message})}),a[3]=h,a[4]=o):o=a[4],a[5]!==f||a[6]!==h||a[7]!==m||a[8]!==d.level||a[9]!==d.message||a[10]!==d.path||a[11]!==u||a[12]!==p?(r=!h&&(0,n.jsx)(eg.Card,{__unstable_focusRing:!0,as:"button",onClick:m,padding:3,radius:2,tone:dD[d.level],children:(0,n.jsxs)(eg.Flex,{align:"flex-start",gap:3,children:[(0,n.jsx)(eg.Box,{flex:"none",children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(f,{})})}),(0,n.jsxs)(eg.Stack,{flex:1,space:2,children:[(0,n.jsx)(dA,{path:d.path,schemaType:u,value:p}),(0,n.jsx)(eg.Text,{muted:!0,size:1,children:d.message})]})]})}),a[5]=f,a[6]=h,a[7]=m,a[8]=d.level,a[9]=d.message,a[10]=d.path,a[11]=u,a[12]=p,a[13]=r):r=a[13],a[14]!==o||a[15]!==r?(s=(0,n.jsxs)(eh.ErrorBoundary,{onCatch:g,children:[o,r]}),a[14]=o,a[15]=r,a[16]=s):s=a[16],s}function dA(e){let t,l,r,s=(0,i.c)(8),{path:a,schemaType:d,value:c}=e;e:{try{let e;s[0]!==a||s[1]!==d||s[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],r=n,s=i;for(let e of t){if("string"==typeof e){if(!(0,o.isRecord)(s)&&void 0!==s)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==r.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);s=s?.[e];let t=r.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;r=t.type,l.push(r);continue}if("number"==typeof e){if(!(0,o.isArray)(s)&&void 0!==s)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);s=s?.[e];let t=r.of.find(e=>"string"==typeof s?"string"===e.jsonType:"number"==typeof s?"number"===e.jsonType:"boolean"==typeof s?"boolean"===e.jsonType:!!(0,o.isRecord)(s)&&e.name===s?._type);if(!t)throw Error(`Item type not found: [${e}]`);r=t,l.push(r);continue}if((0,o.isRecord)(e)&&e._key){if(typeof s>"u")return l;if(!(0,o.isArray)(s))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(s=(s??[]).find(t=>(0,o.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,o.isRecord)(s))throw Error(`Array item not found: [_key == ${e._key}]`);let t=r.of.find(e=>(0,o.isRecord)(s)&&e.name===s?._type);if(!t)throw Error(`Array item type not found: .${s?._type}`);r=t,l.push(r);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:a,schemaType:d,value:c}),s[0]=a,s[1]=d,s[2]=c,s[3]=e):e=s[3],t=e;break e}catch(e){console.error(e)}t=null}let u=t;return u?.length?(s[4]!==u?(l=u.map(dV),s[4]=u,s[5]=l):l=s[5],s[6]!==l?(r=(0,n.jsx)(eg.Text,{size:1,children:l}),s[6]=l,s[7]=r):r=s[7],r):null}function dV(e,t){return(0,n.jsxs)(l.Fragment,{children:[t>0&&(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,n.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function dM(e){return{level:e.level,message:e.message,path:e.path}}let dL={},dz=eC.route.create("/",[eC.route.intents("/intent"),eC.route.create("/edit/:type/:editDocumentId",[eC.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eC.route.create({path:"/:panes",children:[eC.route.create("/:action",eC.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(dO)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:dL,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eC.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,e_.default)(t.params,dB),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(d$).join("|")).map(encodeURIComponent).join(";")}}}})]),dO=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,dB=["view","since","rev","inspect","comment"],dH=Boolean;function d$(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,eC.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===r.params?.[t]&&!dB.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([c.length>0&&c,d].filter(dH).flat()).join(",")||","}let dN=[o_,oT,of,ob,om,lN],dG=[aJ],dU=[{name:"sanity/structure/validation",component:function(e){let t,l,r,s,a,d,c,u=(0,i.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:h,schemaType:g,validation:f,value:x,editState:b}=iu(),{t:y}=(0,o.useTranslation)("validation");u[0]!==m||u[1]!==h?(t=e=>{h(e),m(e)},u[0]=m,u[1]=h,u[2]=t):t=u[2];let v=t;u[3]!==b?(l=b&&b.version&&(0,o.isGoingToUnpublish)(b.version),u[3]=b,u[4]=l):l=u[4];let j=l;return u[5]!==y?(r=y("panel.close-button-aria-label"),u[5]=y,u[6]=r):r=u[6],u[7]!==y?(s=y("panel.title"),u[7]=y,u[8]=s):s=u[8],u[9]!==p||u[10]!==r||u[11]!==s?(a=(0,n.jsx)(iE,{as:"header",closeButtonLabel:r,flex:"none",onClose:p,title:s}),u[9]=p,u[10]=r,u[11]=s,u[12]=a):a=u[12],u[13]!==v||u[14]!==j||u[15]!==g||u[16]!==y||u[17]!==f||u[18]!==x?(d=(0,n.jsx)(eg.Card,{flex:1,overflow:"auto",padding:3,children:j?(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsx)(eg.Text,{muted:!0,size:1,children:y("panel.unpublish-message")})}):(0,n.jsxs)(n.Fragment,{children:[0===f.length&&(0,n.jsx)(eg.Box,{padding:2,children:(0,n.jsx)(eg.Text,{muted:!0,size:1,children:y("panel.no-errors-message")})}),f.length>0&&(0,n.jsx)(eg.Stack,{space:2,children:f.map((e,t)=>(0,n.jsx)(dF,{marker:e,onOpen:v,schemaType:g,value:x},t))})]})}),u[13]=v,u[14]=j,u[15]=g,u[16]=y,u[17]=f,u[18]=x,u[19]=d):d=u[19],u[20]!==a||u[21]!==d?(c=(0,n.jsxs)(eg.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[a,d]}),u[20]=a,u[21]=d,u[22]=c):c=u[22],c},useMenuItem:function(e){let t,n,l,r,s,a,c=(0,i.c)(11),{documentType:u}=e,{t:p}=(0,o.useTranslation)("validation"),{selectedReleaseId:m}=(0,o.usePerspective)(),{value:h}=iu(),{validation:g}=(0,o.useValidationStatus)(h._id,u,m);c[0]!==g?(t=g.map(dM),c[0]=g,c[1]=t):t=c[1];let f=t,x=f.some(ex.isValidationError),b=f.some(ex.isValidationWarning);c[2]!==h?(n=(0,o.isGoingToUnpublish)(h),c[2]=h,c[3]=n):n=c[3];let y=n;e:{if(x){l=d.ErrorOutlineIcon;break e}if(b){l=d.WarningOutlineIcon;break e}l=d.CheckmarkCircleIcon}let v=l;t:{if(x){r="critical";break t}if(b){r="caution";break t}r="positive"}let j=r,w=0===f.length||y;return c[4]!==p?(s=p("panel.title"),c[4]=p,c[5]=s):s=c[5],c[6]!==v||c[7]!==w||c[8]!==s||c[9]!==j?(a={hidden:w,icon:v,title:s,tone:j,showAsAction:!0},c[6]=v,c[7]=w,c[8]=s,c[9]=j,c[10]=a):a=c[10],a}},{name:iw,useMenuItem:()=>{let{features:e}=ib(),{t}=(0,o.useTranslation)();return{hidden:!e.reviewChanges,icon:d.RestoreIcon,title:t("changes.title")}},component:function(e){let t,r,s,a,c,u,p,m,h,g,f,x,y,v,j,w,S,C,_,I,T,R,P,E,k,D,F,A=(0,i.c)(72),{params:V,setParams:M}=ln(),L=(0,o.useSource)(),[z,O]=(0,l.useState)(null),{t:B}=(0,o.useTranslation)(b),H=V?.inspect===iw,{selectedPerspective:$}=(0,o.usePerspective)();A[0]!==V?(t=(F=V?.changesInspectorTab)&&dE.includes(F)?V.changesInspectorTab:dE[0],A[0]=V,A[1]=t):t=A[1];let N=t;A[2]!==V||A[3]!==M?(r=e=>M({...V,changesInspectorTab:e,since:"history"===e?void 0:V?.since}),A[2]=V,A[3]=M,A[4]=r):r=A[4];let G=r;A[5]!==$||A[6]!==B?(s=(0,o.isReleaseDocument)($)?$.metadata.title:B("drafts"===$?"compare-versions.status.draft":"compare-versions.status.published"),A[5]=$,A[6]=B,A[7]=s):s=A[7];let U=s,W=H?"":void 0;A[8]!==B?(a=B("changes.tab.history"),A[8]=B,A[9]=a):a=A[9],A[10]!==G?(c=()=>G("history"),A[10]=G,A[11]=c):c=A[11];let q="history"===N;A[12]!==a||A[13]!==c||A[14]!==q?(u=(0,n.jsx)(eh.Tab,{"aria-controls":"history-panel",id:"history-tab",label:a,onClick:c,selected:q}),A[12]=a,A[13]=c,A[14]=q,A[15]=u):u=A[15],A[16]!==B?(p=B("changes.tab.review-changes"),A[16]=B,A[17]=p):p=A[17],A[18]!==G?(m=()=>G("review"),A[18]=G,A[19]=m):m=A[19];let K="review"===N;A[20]!==K||A[21]!==p||A[22]!==m?(h=(0,n.jsx)(eh.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:p,onClick:m,selected:K}),A[20]=K,A[21]=p,A[22]=m,A[23]=h):h=A[23],A[24]!==h||A[25]!==u?(g=(0,n.jsxs)(eg.TabList,{space:1,flex:1,children:[u,h]}),A[24]=h,A[25]=u,A[26]=g):g=A[26],A[27]!==B?(f=B("changes.action.close-label"),A[27]=B,A[28]=f):f=A[28];let Y=e.onClose;A[29]!==B?(x=B("document-inspector.close-button.tooltip"),A[29]=B,A[30]=x):x=A[30],A[31]!==x?(y={content:x},A[31]=x,A[32]=y):y=A[32],A[33]!==e.onClose||A[34]!==f||A[35]!==y?(v=(0,n.jsx)(eh.Button,{"aria-label":f,icon:d.CloseIcon,mode:"bleed",onClick:Y,tooltipProps:y}),A[33]=e.onClose,A[34]=f,A[35]=y,A[36]=v):v=A[36],A[37]!==g||A[38]!==v?(j=(0,n.jsx)(eg.Card,{paddingBottom:1,children:(0,n.jsxs)(eg.Flex,{align:"center",padding:3,gap:2,children:[g,v]})}),A[37]=g,A[38]=v,A[39]=j):j=A[39],A[40]!==B?(w=(0,n.jsx)(eg.Box,{flex:1,padding:1,children:(0,n.jsx)(eg.Text,{size:1,children:(0,n.jsx)(o.Translate,{t:B,i18nKey:"changes.banner.tooltip"})})}),A[40]=B,A[41]=w):w=A[41],A[42]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)(eg.Text,{size:0,muted:!0,children:(0,n.jsx)(d.InfoOutlineIcon,{fontSize:1})}),A[42]=S):S=A[42],A[43]!==z||A[44]!==w?(C=(0,n.jsx)(eh.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:z,content:w,children:S}),A[43]=z,A[44]=w,A[45]=C):C=A[45],A[46]!==U?(_={perspective:U},A[46]=U,A[47]=_):_=A[47],A[48]!==B||A[49]!==_?(I=(0,n.jsx)(eg.Text,{size:0,muted:!0,children:(0,n.jsx)(o.Translate,{t:B,values:_,i18nKey:"changes.banner.description"})}),A[48]=B,A[49]=_,A[50]=I):I=A[50],A[51]!==C||A[52]!==I?(T=(0,n.jsx)(eg.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,n.jsxs)(eg.Flex,{gap:2,align:"flex-start",children:[C,I]})}),A[51]=C,A[52]=I,A[53]=T):T=A[53];let X="history"!==N;A[54]!==N||A[55]!==L.beta?.eventsAPI?.documents?(R=L.beta?.eventsAPI?.documents?(0,n.jsx)(dw,{showList:"history"===N}):(0,n.jsx)(dC,{showList:"history"===N}),A[54]=N,A[55]=L.beta?.eventsAPI?.documents,A[56]=R):R=A[56],A[57]!==X||A[58]!==R?(P=(0,n.jsx)(ef.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:X,id:"history-panel",children:R}),A[57]=X,A[58]=R,A[59]=P):P=A[59];let J="review"!==N;return A[60]!==N||A[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,n.jsx)(n.Fragment,{children:"review"===N?(0,n.jsx)(df,{showChanges:"review"===N}):null}):(0,n.jsx)(a3,{showChanges:"review"===N}),A[60]=N,A[61]=L.beta?.eventsAPI?.documents,A[62]=E):E=A[62],A[63]!==J||A[64]!==E?(k=(0,n.jsx)(ef.TabPanel,{"aria-labelledby":"review-tab",hidden:J,id:"review-panel",height:"fill",children:E}),A[63]=J,A[64]=E,A[65]=k):k=A[65],A[66]!==j||A[67]!==T||A[68]!==P||A[69]!==W||A[70]!==k?(D=(0,n.jsxs)(dP,{direction:"column",padding:0,height:"fill","data-ready":W,ref:O,children:[j,T,P,k]}),A[66]=j,A[67]=T,A[68]=P,A[69]=W,A[70]=k,A[71]=D):D=A[71],D},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],dW=(0,o.definePlugin)(t=>{let n=t?.icon||d.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>"published"===t.versionType?Array.from(new Set([...e,...[...dN].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action))])):Array.from(new Set([...e,...dN])),badges:e=>Array.from(new Set([...e,...dG])),inspectors:e=>Array.from(new Set([...e,...dU]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,l.lazy)(()=>e.A(62237)),canHandleIntent:(e,t)=>{var n,i;return"create"===e?"type"in(n=t)&&(!("template"in n)||{template:!0}):"edit"===e&&"id"in(i=t)&&(!("mode"in i)||{mode:"structure"===i.mode})},getIntentState:a0,controlsDocumentTitle:!0,options:t,router:dz,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[y]}}});var dq=Object.freeze({__proto__:null,default:r7}),dK=Object.freeze({__proto__:null,default:aX});e.s(["BackLink",()=>sn,"LOADING_PANE",()=>lP,"LoadingPane",()=>ic,"Pane",()=>nz,"PaneContent",()=>nH,"PaneHeader",()=>n5,"PaneHeaderActions",()=>sW,"PaneItem",()=>s0,"PaneLayout",()=>il,"StructureToolPane",()=>su,"_DEBUG",()=>!1,"setActivePanes",()=>aQ,"structureTool",()=>dW,"useDocumentLastRev",()=>r$,"usePane",()=>nB,"usePaneLayout",()=>nA,"useStructureTool",()=>ib],26047)}]);